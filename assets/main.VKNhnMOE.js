(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();const gv={apiKey:"AIzaSyCT-kY_DS5WTZ0RhMR4qXzII0pSPYNPOMQ",authDomain:"csites-b6d37.firebaseapp.com",projectId:"csites-b6d37",storageBucket:"csites-b6d37.firebasestorage.app",messagingSenderId:"877559835942",appId:"1:877559835942:web:0a573534ae0ac3e056a5e7"};window.VITE_DEVELOPER_EMAIL="vistafly.services@gmail.com";gv.apiKey||(console.error("Firebase configuration error: Missing environment variables!"),console.error("Please create a .env file based on .env.example"),console.error("Add your Firebase credentials from Firebase Console"));window.VITE_DEVELOPER_EMAIL||(console.error("VITE_DEVELOPER_EMAIL not set in .env file!"),console.error("Add this line to your .env: VITE_DEVELOPER_EMAIL=your-email@gmail.com"));function zb(t=50){return new Promise((e,i)=>{let s=0;const a=()=>{s++,typeof firebase<"u"&&firebase.initializeApp&&firebase.auth&&firebase.firestore?e():s>=t?i(new Error("Firebase SDK failed to load")):setTimeout(a,100)};a()})}window.firebaseReady=zb().then(()=>(firebase.initializeApp(gv),window.auth=firebase.auth(),window.db=firebase.firestore(),window.googleProvider=new firebase.auth.GoogleAuthProvider,window.auth.settings.appVerificationDisabledForTesting=!0,console.log("Firebase initialized successfully"),window.dispatchEvent(new Event("firebaseReady")),{auth:window.auth,db:window.db,googleProvider:window.googleProvider})).catch(t=>{throw console.error("Failed to initialize Firebase:",t),t});class Vb{constructor(){this.position={x:window.innerWidth/2,y:window.innerHeight/2},this.listeners=new Set,this.ready=!1,this.init()}init(){const e=this;let i=!1;document.addEventListener("pointermove",function(s){e.position.x=s.clientX,e.position.y=s.clientY,i||(i=!0,requestAnimationFrame(function(){i=!1,e.listeners.forEach(a=>a(e.position))}))},{passive:!0}),document.addEventListener("pointerleave",function(){e.position.x=window.innerWidth/2,e.position.y=window.innerHeight/2,e.listeners.forEach(s=>s(e.position))},{passive:!0}),this.ready=!0}subscribe(e){return this.listeners.add(e),e(this.position),()=>{this.listeners.delete(e)}}getNormalizedPosition(e){if(!e)return{x:.5,y:.5};const i=e.getBoundingClientRect(),s=this.position.x,a=this.position.y;return s<i.left||s>i.right||a<i.top||a>i.bottom?{x:.5,y:.5}:{x:(s-i.left)/i.width,y:1-(a-i.top)/i.height}}}window.mouseTracker=new Vb;function vv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bu={exports:{}},Ca={},wu={exports:{}},je={};var sm;function Wb(){if(sm)return je;sm=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function C(S){return S===null||typeof S!="object"?null:(S=_&&S[_]||S["@@iterator"],typeof S=="function"?S:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function L(S,P,R){this.props=S,this.context=P,this.refs=T,this.updater=R||E}L.prototype.isReactComponent={},L.prototype.setState=function(S,P){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,P,"setState")},L.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function F(){}F.prototype=L.prototype;function U(S,P,R){this.props=S,this.context=P,this.refs=T,this.updater=R||E}var M=U.prototype=new F;M.constructor=U,A(M,L.prototype),M.isPureReactComponent=!0;var z=Array.isArray,I=Object.prototype.hasOwnProperty,G={current:null},te={key:!0,ref:!0,__self:!0,__source:!0};function Z(S,P,R){var B,V={},H=null,O=null;if(P!=null)for(B in P.ref!==void 0&&(O=P.ref),P.key!==void 0&&(H=""+P.key),P)I.call(P,B)&&!te.hasOwnProperty(B)&&(V[B]=P[B]);var W=arguments.length-2;if(W===1)V.children=R;else if(1<W){for(var X=Array(W),J=0;J<W;J++)X[J]=arguments[J+2];V.children=X}if(S&&S.defaultProps)for(B in W=S.defaultProps,W)V[B]===void 0&&(V[B]=W[B]);return{$$typeof:t,type:S,key:H,ref:O,props:V,_owner:G.current}}function $(S,P){return{$$typeof:t,type:S.type,key:P,ref:S.ref,props:S.props,_owner:S._owner}}function re(S){return typeof S=="object"&&S!==null&&S.$$typeof===t}function fe(S){var P={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(R){return P[R]})}var he=/\/+/g;function we(S,P){return typeof S=="object"&&S!==null&&S.key!=null?fe(""+S.key):P.toString(36)}function ge(S,P,R,B,V){var H=typeof S;(H==="undefined"||H==="boolean")&&(S=null);var O=!1;if(S===null)O=!0;else switch(H){case"string":case"number":O=!0;break;case"object":switch(S.$$typeof){case t:case e:O=!0}}if(O)return O=S,V=V(O),S=B===""?"."+we(O,0):B,z(V)?(R="",S!=null&&(R=S.replace(he,"$&/")+"/"),ge(V,P,R,"",function(J){return J})):V!=null&&(re(V)&&(V=$(V,R+(!V.key||O&&O.key===V.key?"":(""+V.key).replace(he,"$&/")+"/")+S)),P.push(V)),1;if(O=0,B=B===""?".":B+":",z(S))for(var W=0;W<S.length;W++){H=S[W];var X=B+we(H,W);O+=ge(H,P,R,X,V)}else if(X=C(S),typeof X=="function")for(S=X.call(S),W=0;!(H=S.next()).done;)H=H.value,X=B+we(H,W++),O+=ge(H,P,R,X,V);else if(H==="object")throw P=String(S),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return O}function u(S,P,R){if(S==null)return S;var B=[],V=0;return ge(S,B,"","",function(H){return P.call(R,H,V++)}),B}function v(S){if(S._status===-1){var P=S._result;P=P(),P.then(function(R){(S._status===0||S._status===-1)&&(S._status=1,S._result=R)},function(R){(S._status===0||S._status===-1)&&(S._status=2,S._result=R)}),S._status===-1&&(S._status=0,S._result=P)}if(S._status===1)return S._result.default;throw S._result}var y={current:null},b={transition:null},x={ReactCurrentDispatcher:y,ReactCurrentBatchConfig:b,ReactCurrentOwner:G};function k(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:u,forEach:function(S,P,R){u(S,function(){P.apply(this,arguments)},R)},count:function(S){var P=0;return u(S,function(){P++}),P},toArray:function(S){return u(S,function(P){return P})||[]},only:function(S){if(!re(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},je.Component=L,je.Fragment=i,je.Profiler=a,je.PureComponent=U,je.StrictMode=s,je.Suspense=p,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x,je.act=k,je.cloneElement=function(S,P,R){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var B=A({},S.props),V=S.key,H=S.ref,O=S._owner;if(P!=null){if(P.ref!==void 0&&(H=P.ref,O=G.current),P.key!==void 0&&(V=""+P.key),S.type&&S.type.defaultProps)var W=S.type.defaultProps;for(X in P)I.call(P,X)&&!te.hasOwnProperty(X)&&(B[X]=P[X]===void 0&&W!==void 0?W[X]:P[X])}var X=arguments.length-2;if(X===1)B.children=R;else if(1<X){W=Array(X);for(var J=0;J<X;J++)W[J]=arguments[J+2];B.children=W}return{$$typeof:t,type:S.type,key:V,ref:H,props:B,_owner:O}},je.createContext=function(S){return S={$$typeof:c,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:l,_context:S},S.Consumer=S},je.createElement=Z,je.createFactory=function(S){var P=Z.bind(null,S);return P.type=S,P},je.createRef=function(){return{current:null}},je.forwardRef=function(S){return{$$typeof:f,render:S}},je.isValidElement=re,je.lazy=function(S){return{$$typeof:g,_payload:{_status:-1,_result:S},_init:v}},je.memo=function(S,P){return{$$typeof:m,type:S,compare:P===void 0?null:P}},je.startTransition=function(S){var P=b.transition;b.transition={};try{S()}finally{b.transition=P}},je.unstable_act=k,je.useCallback=function(S,P){return y.current.useCallback(S,P)},je.useContext=function(S){return y.current.useContext(S)},je.useDebugValue=function(){},je.useDeferredValue=function(S){return y.current.useDeferredValue(S)},je.useEffect=function(S,P){return y.current.useEffect(S,P)},je.useId=function(){return y.current.useId()},je.useImperativeHandle=function(S,P,R){return y.current.useImperativeHandle(S,P,R)},je.useInsertionEffect=function(S,P){return y.current.useInsertionEffect(S,P)},je.useLayoutEffect=function(S,P){return y.current.useLayoutEffect(S,P)},je.useMemo=function(S,P){return y.current.useMemo(S,P)},je.useReducer=function(S,P,R){return y.current.useReducer(S,P,R)},je.useRef=function(S){return y.current.useRef(S)},je.useState=function(S){return y.current.useState(S)},je.useSyncExternalStore=function(S,P,R){return y.current.useSyncExternalStore(S,P,R)},je.useTransition=function(){return y.current.useTransition()},je.version="18.3.1",je}var am;function Nd(){return am||(am=1,wu.exports=Wb()),wu.exports}var om;function Ub(){if(om)return Ca;om=1;var t=Nd(),e=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,m){var g,_={},C=null,E=null;m!==void 0&&(C=""+m),p.key!==void 0&&(C=""+p.key),p.ref!==void 0&&(E=p.ref);for(g in p)s.call(p,g)&&!l.hasOwnProperty(g)&&(_[g]=p[g]);if(f&&f.defaultProps)for(g in p=f.defaultProps,p)_[g]===void 0&&(_[g]=p[g]);return{$$typeof:e,type:f,key:C,ref:E,props:_,_owner:a.current}}return Ca.Fragment=i,Ca.jsx=c,Ca.jsxs=c,Ca}var lm;function jb(){return lm||(lm=1,bu.exports=Ub()),bu.exports}var be=jb(),ie=Nd();const yv=vv(ie);var ol={},xu={exports:{}},An={},Su={exports:{}},_u={};var cm;function qb(){return cm||(cm=1,(function(t){function e(b,x){var k=b.length;b.push(x);e:for(;0<k;){var S=k-1>>>1,P=b[S];if(0<a(P,x))b[S]=x,b[k]=P,k=S;else break e}}function i(b){return b.length===0?null:b[0]}function s(b){if(b.length===0)return null;var x=b[0],k=b.pop();if(k!==x){b[0]=k;e:for(var S=0,P=b.length,R=P>>>1;S<R;){var B=2*(S+1)-1,V=b[B],H=B+1,O=b[H];if(0>a(V,k))H<P&&0>a(O,V)?(b[S]=O,b[H]=k,S=H):(b[S]=V,b[B]=k,S=B);else if(H<P&&0>a(O,k))b[S]=O,b[H]=k,S=H;else break e}}return x}function a(b,x){var k=b.sortIndex-x.sortIndex;return k!==0?k:b.id-x.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var p=[],m=[],g=1,_=null,C=3,E=!1,A=!1,T=!1,L=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(b){for(var x=i(m);x!==null;){if(x.callback===null)s(m);else if(x.startTime<=b)s(m),x.sortIndex=x.expirationTime,e(p,x);else break;x=i(m)}}function z(b){if(T=!1,M(b),!A)if(i(p)!==null)A=!0,v(I);else{var x=i(m);x!==null&&y(z,x.startTime-b)}}function I(b,x){A=!1,T&&(T=!1,F(Z),Z=-1),E=!0;var k=C;try{for(M(x),_=i(p);_!==null&&(!(_.expirationTime>x)||b&&!fe());){var S=_.callback;if(typeof S=="function"){_.callback=null,C=_.priorityLevel;var P=S(_.expirationTime<=x);x=t.unstable_now(),typeof P=="function"?_.callback=P:_===i(p)&&s(p),M(x)}else s(p);_=i(p)}if(_!==null)var R=!0;else{var B=i(m);B!==null&&y(z,B.startTime-x),R=!1}return R}finally{_=null,C=k,E=!1}}var G=!1,te=null,Z=-1,$=5,re=-1;function fe(){return!(t.unstable_now()-re<$)}function he(){if(te!==null){var b=t.unstable_now();re=b;var x=!0;try{x=te(!0,b)}finally{x?we():(G=!1,te=null)}}else G=!1}var we;if(typeof U=="function")we=function(){U(he)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,u=ge.port2;ge.port1.onmessage=he,we=function(){u.postMessage(null)}}else we=function(){L(he,0)};function v(b){te=b,G||(G=!0,we())}function y(b,x){Z=L(function(){b(t.unstable_now())},x)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){A||E||(A=!0,v(I))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return i(p)},t.unstable_next=function(b){switch(C){case 1:case 2:case 3:var x=3;break;default:x=C}var k=C;C=x;try{return b()}finally{C=k}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,x){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var k=C;C=b;try{return x()}finally{C=k}},t.unstable_scheduleCallback=function(b,x,k){var S=t.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?S+k:S):k=S,b){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=k+P,b={id:g++,callback:x,priorityLevel:b,startTime:k,expirationTime:P,sortIndex:-1},k>S?(b.sortIndex=k,e(m,b),i(p)===null&&b===i(m)&&(T?(F(Z),Z=-1):T=!0,y(z,k-S))):(b.sortIndex=P,e(p,b),A||E||(A=!0,v(I))),b},t.unstable_shouldYield=fe,t.unstable_wrapCallback=function(b){var x=C;return function(){var k=C;C=x;try{return b.apply(this,arguments)}finally{C=k}}}})(_u)),_u}var um;function Hb(){return um||(um=1,Su.exports=qb()),Su.exports}var dm;function $b(){if(dm)return An;dm=1;var t=Nd(),e=Hb();function i(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(n,r){c(n,r),c(n+"Capture",r)}function c(n,r){for(a[n]=r,n=0;n<r.length;n++)s.add(r[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},_={};function C(n){return p.call(_,n)?!0:p.call(g,n)?!1:m.test(n)?_[n]=!0:(g[n]=!0,!1)}function E(n,r,o,d){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return d?!1:o!==null?!o.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function A(n,r,o,d){if(r===null||typeof r>"u"||E(n,r,o,d))return!0;if(d)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function T(n,r,o,d,h,w,D){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=d,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=n,this.type=r,this.sanitizeURL=w,this.removeEmptyString=D}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){L[n]=new T(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];L[r]=new T(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){L[n]=new T(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){L[n]=new T(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){L[n]=new T(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){L[n]=new T(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){L[n]=new T(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){L[n]=new T(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){L[n]=new T(n,5,!1,n.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function U(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(F,U);L[r]=new T(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(F,U);L[r]=new T(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(F,U);L[r]=new T(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){L[n]=new T(n,1,!1,n.toLowerCase(),null,!1,!1)}),L.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){L[n]=new T(n,1,!1,n.toLowerCase(),null,!0,!0)});function M(n,r,o,d){var h=L.hasOwnProperty(r)?L[r]:null;(h!==null?h.type!==0:d||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(A(r,o,h,d)&&(o=null),d||h===null?C(r)&&(o===null?n.removeAttribute(r):n.setAttribute(r,""+o)):h.mustUseProperty?n[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,d=h.attributeNamespace,o===null?n.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,d?n.setAttributeNS(d,r,o):n.setAttribute(r,o))))}var z=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),G=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),fe=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),b=Symbol.iterator;function x(n){return n===null||typeof n!="object"?null:(n=b&&n[b]||n["@@iterator"],typeof n=="function"?n:null)}var k=Object.assign,S;function P(n){if(S===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);S=r&&r[1]||""}return`
`+S+n}var R=!1;function B(n,r){if(!n||R)return"";R=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(ne){var d=ne}Reflect.construct(n,[],r)}else{try{r.call()}catch(ne){d=ne}n.call(r.prototype)}else{try{throw Error()}catch(ne){d=ne}n()}}catch(ne){if(ne&&d&&typeof ne.stack=="string"){for(var h=ne.stack.split(`
`),w=d.stack.split(`
`),D=h.length-1,N=w.length-1;1<=D&&0<=N&&h[D]!==w[N];)N--;for(;1<=D&&0<=N;D--,N--)if(h[D]!==w[N]){if(D!==1||N!==1)do if(D--,N--,0>N||h[D]!==w[N]){var j=`
`+h[D].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=D&&0<=N);break}}}finally{R=!1,Error.prepareStackTrace=o}return(n=n?n.displayName||n.name:"")?P(n):""}function V(n){switch(n.tag){case 5:return P(n.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return n=B(n.type,!1),n;case 11:return n=B(n.type.render,!1),n;case 1:return n=B(n.type,!0),n;default:return""}}function H(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case te:return"Fragment";case G:return"Portal";case $:return"Profiler";case Z:return"StrictMode";case we:return"Suspense";case ge:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case fe:return(n.displayName||"Context")+".Consumer";case re:return(n._context.displayName||"Context")+".Provider";case he:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case u:return r=n.displayName||null,r!==null?r:H(n.type)||"Memo";case v:r=n._payload,n=n._init;try{return H(n(r))}catch{}}return null}function O(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(r);case 8:return r===Z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function W(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function X(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function J(n){var r=X(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),d=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,w=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return h.call(this)},set:function(D){d=""+D,w.call(this,D)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return d},setValue:function(D){d=""+D},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Y(n){n._valueTracker||(n._valueTracker=J(n))}function K(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),d="";return n&&(d=X(n)?n.checked?"true":"false":n.value),n=d,n!==o?(r.setValue(n),!0):!1}function ae(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function se(n,r){var o=r.checked;return k({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??n._wrapperState.initialChecked})}function le(n,r){var o=r.defaultValue==null?"":r.defaultValue,d=r.checked!=null?r.checked:r.defaultChecked;o=W(r.value!=null?r.value:o),n._wrapperState={initialChecked:d,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function xe(n,r){r=r.checked,r!=null&&M(n,"checked",r,!1)}function Me(n,r){xe(n,r);var o=W(r.value),d=r.type;if(o!=null)d==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Ee(n,r.type,o):r.hasOwnProperty("defaultValue")&&Ee(n,r.type,W(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function ve(n,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var d=r.type;if(!(d!=="submit"&&d!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,o||r===n.value||(n.value=r),n.defaultValue=r}o=n.name,o!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,o!==""&&(n.name=o)}function Ee(n,r,o){(r!=="number"||ae(n.ownerDocument)!==n)&&(o==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+o&&(n.defaultValue=""+o))}var Be=Array.isArray;function Qe(n,r,o,d){if(n=n.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<n.length;o++)h=r.hasOwnProperty("$"+n[o].value),n[o].selected!==h&&(n[o].selected=h),h&&d&&(n[o].defaultSelected=!0)}else{for(o=""+W(o),r=null,h=0;h<n.length;h++){if(n[h].value===o){n[h].selected=!0,d&&(n[h].defaultSelected=!0);return}r!==null||n[h].disabled||(r=n[h])}r!==null&&(r.selected=!0)}}function Ze(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(i(91));return k({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function tt(n,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(i(92));if(Be(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),o=r}n._wrapperState={initialValue:W(o)}}function $e(n,r){var o=W(r.value),d=W(r.defaultValue);o!=null&&(o=""+o,o!==n.value&&(n.value=o),r.defaultValue==null&&n.defaultValue!==o&&(n.defaultValue=o)),d!=null&&(n.defaultValue=""+d)}function st(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function qe(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?qe(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Rt,Bt=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,d,h){MSApp.execUnsafeLocalFunction(function(){return n(r,o,d,h)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Rt=Rt||document.createElement("div"),Rt.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Rt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Pe(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Ce={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},St=["Webkit","ms","Moz","O"];Object.keys(Ce).forEach(function(n){St.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Ce[r]=Ce[n]})});function We(n,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Ce.hasOwnProperty(n)&&Ce[n]?(""+r).trim():r+"px"}function gt(n,r){n=n.style;for(var o in r)if(r.hasOwnProperty(o)){var d=o.indexOf("--")===0,h=We(o,r[o],d);o==="float"&&(o="cssFloat"),d?n.setProperty(o,h):n[o]=h}}var jt=k({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dt(n,r){if(r){if(jt[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(i(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(i(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(i(61))}if(r.style!=null&&typeof r.style!="object")throw Error(i(62))}}function Ye(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ge=null;function ct(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qt=null,Xt=null,Ft=null;function In(n){if(n=ca(n)){if(typeof qt!="function")throw Error(i(280));var r=n.stateNode;r&&(r=So(r),qt(n.stateNode,n.type,r))}}function ht(n){Xt?Ft?Ft.push(n):Ft=[n]:Xt=n}function Mi(){if(Xt){var n=Xt,r=Ft;if(Ft=Xt=null,In(n),r)for(n=0;n<r.length;n++)In(r[n])}}function Bn(n,r){return n(r)}function ui(){}var tn=!1;function _t(n,r,o){if(tn)return n(r,o);tn=!0;try{return Bn(n,r,o)}finally{tn=!1,(Xt!==null||Ft!==null)&&(ui(),Mi())}}function cn(n,r){var o=n.stateNode;if(o===null)return null;var d=So(o);if(d===null)return null;o=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Ht=!1;if(f)try{var nn={};Object.defineProperty(nn,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",nn,nn),window.removeEventListener("test",nn,nn)}catch{Ht=!1}function vn(n,r,o,d,h,w,D,N,j){var ne=Array.prototype.slice.call(arguments,3);try{r.apply(o,ne)}catch(de){this.onError(de)}}var rn=!1,_n=null,Cn=!1,Oe=null,Je={onError:function(n){rn=!0,_n=n}};function Xe(n,r,o,d,h,w,D,N,j){rn=!1,_n=null,vn.apply(Je,arguments)}function Ot(n,r,o,d,h,w,D,N,j){if(Xe.apply(this,arguments),rn){if(rn){var ne=_n;rn=!1,_n=null}else throw Error(i(198));Cn||(Cn=!0,Oe=ne)}}function ut(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function $i(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Ue(n){if(ut(n)!==n)throw Error(i(188))}function es(n){var r=n.alternate;if(!r){if(r=ut(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,d=r;;){var h=o.return;if(h===null)break;var w=h.alternate;if(w===null){if(d=h.return,d!==null){o=d;continue}break}if(h.child===w.child){for(w=h.child;w;){if(w===o)return Ue(h),n;if(w===d)return Ue(h),r;w=w.sibling}throw Error(i(188))}if(o.return!==d.return)o=h,d=w;else{for(var D=!1,N=h.child;N;){if(N===o){D=!0,o=h,d=w;break}if(N===d){D=!0,d=h,o=w;break}N=N.sibling}if(!D){for(N=w.child;N;){if(N===o){D=!0,o=w,d=h;break}if(N===d){D=!0,d=w,o=h;break}N=N.sibling}if(!D)throw Error(i(189))}}if(o.alternate!==d)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function oe(n){return n=es(n),n!==null?ue(n):null}function ue(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=ue(n);if(r!==null)return r;n=n.sibling}return null}var Ae=e.unstable_scheduleCallback,Le=e.unstable_cancelCallback,Se=e.unstable_shouldYield,Te=e.unstable_requestPaint,ye=e.unstable_now,nt=e.unstable_getCurrentPriorityLevel,He=e.unstable_ImmediatePriority,it=e.unstable_UserBlockingPriority,Kt=e.unstable_NormalPriority,wi=e.unstable_LowPriority,dt=e.unstable_IdlePriority,zn=null,yn=null;function zl(n){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(zn,n,void 0,(n.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:i1,t1=Math.log,n1=Math.LN2;function i1(n){return n>>>=0,n===0?32:31-(t1(n)/n1|0)|0}var io=64,ro=4194304;function Hs(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function so(n,r){var o=n.pendingLanes;if(o===0)return 0;var d=0,h=n.suspendedLanes,w=n.pingedLanes,D=o&268435455;if(D!==0){var N=D&~h;N!==0?d=Hs(N):(w&=D,w!==0&&(d=Hs(w)))}else D=o&~h,D!==0?d=Hs(D):w!==0&&(d=Hs(w));if(d===0)return 0;if(r!==0&&r!==d&&(r&h)===0&&(h=d&-d,w=r&-r,h>=w||h===16&&(w&4194240)!==0))return r;if((d&4)!==0&&(d|=o&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=d;0<r;)o=31-Vn(r),h=1<<o,d|=n[o],r&=~h;return d}function r1(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s1(n,r){for(var o=n.suspendedLanes,d=n.pingedLanes,h=n.expirationTimes,w=n.pendingLanes;0<w;){var D=31-Vn(w),N=1<<D,j=h[D];j===-1?((N&o)===0||(N&d)!==0)&&(h[D]=r1(N,r)):j<=r&&(n.expiredLanes|=N),w&=~N}}function Vl(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Nf(){var n=io;return io<<=1,(io&4194240)===0&&(io=64),n}function Wl(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function $s(n,r,o){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Vn(r),n[r]=o}function a1(n,r){var o=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<o;){var h=31-Vn(o),w=1<<h;r[h]=0,d[h]=-1,n[h]=-1,o&=~w}}function Ul(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var d=31-Vn(o),h=1<<d;h&r|n[d]&r&&(n[d]|=r),o&=~h}}var at=0;function If(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Bf,jl,zf,Vf,Wf,ql=!1,ao=[],Yi=null,Gi=null,Xi=null,Ys=new Map,Gs=new Map,Ki=[],o1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uf(n,r){switch(n){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":Ys.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(r.pointerId)}}function Xs(n,r,o,d,h,w){return n===null||n.nativeEvent!==w?(n={blockedOn:r,domEventName:o,eventSystemFlags:d,nativeEvent:w,targetContainers:[h]},r!==null&&(r=ca(r),r!==null&&jl(r)),n):(n.eventSystemFlags|=d,r=n.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),n)}function l1(n,r,o,d,h){switch(r){case"focusin":return Yi=Xs(Yi,n,r,o,d,h),!0;case"dragenter":return Gi=Xs(Gi,n,r,o,d,h),!0;case"mouseover":return Xi=Xs(Xi,n,r,o,d,h),!0;case"pointerover":var w=h.pointerId;return Ys.set(w,Xs(Ys.get(w)||null,n,r,o,d,h)),!0;case"gotpointercapture":return w=h.pointerId,Gs.set(w,Xs(Gs.get(w)||null,n,r,o,d,h)),!0}return!1}function jf(n){var r=Pr(n.target);if(r!==null){var o=ut(r);if(o!==null){if(r=o.tag,r===13){if(r=$i(o),r!==null){n.blockedOn=r,Wf(n.priority,function(){zf(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function oo(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=$l(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(o===null){o=n.nativeEvent;var d=new o.constructor(o.type,o);Ge=d,o.target.dispatchEvent(d),Ge=null}else return r=ca(o),r!==null&&jl(r),n.blockedOn=o,!1;r.shift()}return!0}function qf(n,r,o){oo(n)&&o.delete(r)}function c1(){ql=!1,Yi!==null&&oo(Yi)&&(Yi=null),Gi!==null&&oo(Gi)&&(Gi=null),Xi!==null&&oo(Xi)&&(Xi=null),Ys.forEach(qf),Gs.forEach(qf)}function Ks(n,r){n.blockedOn===r&&(n.blockedOn=null,ql||(ql=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,c1)))}function Qs(n){function r(h){return Ks(h,n)}if(0<ao.length){Ks(ao[0],n);for(var o=1;o<ao.length;o++){var d=ao[o];d.blockedOn===n&&(d.blockedOn=null)}}for(Yi!==null&&Ks(Yi,n),Gi!==null&&Ks(Gi,n),Xi!==null&&Ks(Xi,n),Ys.forEach(r),Gs.forEach(r),o=0;o<Ki.length;o++)d=Ki[o],d.blockedOn===n&&(d.blockedOn=null);for(;0<Ki.length&&(o=Ki[0],o.blockedOn===null);)jf(o),o.blockedOn===null&&Ki.shift()}var ts=z.ReactCurrentBatchConfig,lo=!0;function u1(n,r,o,d){var h=at,w=ts.transition;ts.transition=null;try{at=1,Hl(n,r,o,d)}finally{at=h,ts.transition=w}}function d1(n,r,o,d){var h=at,w=ts.transition;ts.transition=null;try{at=4,Hl(n,r,o,d)}finally{at=h,ts.transition=w}}function Hl(n,r,o,d){if(lo){var h=$l(n,r,o,d);if(h===null)cc(n,r,d,co,o),Uf(n,d);else if(l1(h,n,r,o,d))d.stopPropagation();else if(Uf(n,d),r&4&&-1<o1.indexOf(n)){for(;h!==null;){var w=ca(h);if(w!==null&&Bf(w),w=$l(n,r,o,d),w===null&&cc(n,r,d,co,o),w===h)break;h=w}h!==null&&d.stopPropagation()}else cc(n,r,d,null,o)}}var co=null;function $l(n,r,o,d){if(co=null,n=ct(d),n=Pr(n),n!==null)if(r=ut(n),r===null)n=null;else if(o=r.tag,o===13){if(n=$i(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return co=n,null}function Hf(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nt()){case He:return 1;case it:return 4;case Kt:case wi:return 16;case dt:return 536870912;default:return 16}default:return 16}}var Qi=null,Yl=null,uo=null;function $f(){if(uo)return uo;var n,r=Yl,o=r.length,d,h="value"in Qi?Qi.value:Qi.textContent,w=h.length;for(n=0;n<o&&r[n]===h[n];n++);var D=o-n;for(d=1;d<=D&&r[o-d]===h[w-d];d++);return uo=h.slice(n,1<d?1-d:void 0)}function fo(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function po(){return!0}function Yf(){return!1}function Wn(n){function r(o,d,h,w,D){this._reactName=o,this._targetInst=h,this.type=d,this.nativeEvent=w,this.target=D,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(o=n[N],this[N]=o?o(w):w[N]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?po:Yf,this.isPropagationStopped=Yf,this}return k(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),r}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gl=Wn(ns),Zs=k({},ns,{view:0,detail:0}),f1=Wn(Zs),Xl,Kl,Js,ho=k({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Js&&(Js&&n.type==="mousemove"?(Xl=n.screenX-Js.screenX,Kl=n.screenY-Js.screenY):Kl=Xl=0,Js=n),Xl)},movementY:function(n){return"movementY"in n?n.movementY:Kl}}),Gf=Wn(ho),p1=k({},ho,{dataTransfer:0}),h1=Wn(p1),m1=k({},Zs,{relatedTarget:0}),Ql=Wn(m1),g1=k({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),v1=Wn(g1),y1=k({},ns,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),b1=Wn(y1),w1=k({},ns,{data:0}),Xf=Wn(w1),x1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C1(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=_1[n])?!!r[n]:!1}function Zl(){return C1}var P1=k({},Zs,{key:function(n){if(n.key){var r=x1[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=fo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?S1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(n){return n.type==="keypress"?fo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?fo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),k1=Wn(P1),E1=k({},ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kf=Wn(E1),T1=k({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),D1=Wn(T1),A1=k({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),M1=Wn(A1),L1=k({},ho,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),R1=Wn(L1),F1=[9,13,27,32],Jl=f&&"CompositionEvent"in window,ea=null;f&&"documentMode"in document&&(ea=document.documentMode);var O1=f&&"TextEvent"in window&&!ea,Qf=f&&(!Jl||ea&&8<ea&&11>=ea),Zf=" ",Jf=!1;function ep(n,r){switch(n){case"keyup":return F1.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var is=!1;function N1(n,r){switch(n){case"compositionend":return tp(r);case"keypress":return r.which!==32?null:(Jf=!0,Zf);case"textInput":return n=r.data,n===Zf&&Jf?null:n;default:return null}}function I1(n,r){if(is)return n==="compositionend"||!Jl&&ep(n,r)?(n=$f(),uo=Yl=Qi=null,is=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Qf&&r.locale!=="ko"?null:r.data;default:return null}}var B1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function np(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!B1[n.type]:r==="textarea"}function ip(n,r,o,d){ht(d),r=bo(r,"onChange"),0<r.length&&(o=new Gl("onChange","change",null,o,d),n.push({event:o,listeners:r}))}var ta=null,na=null;function z1(n){xp(n,0)}function mo(n){var r=ls(n);if(K(r))return n}function V1(n,r){if(n==="change")return r}var rp=!1;if(f){var ec;if(f){var tc="oninput"in document;if(!tc){var sp=document.createElement("div");sp.setAttribute("oninput","return;"),tc=typeof sp.oninput=="function"}ec=tc}else ec=!1;rp=ec&&(!document.documentMode||9<document.documentMode)}function ap(){ta&&(ta.detachEvent("onpropertychange",op),na=ta=null)}function op(n){if(n.propertyName==="value"&&mo(na)){var r=[];ip(r,na,n,ct(n)),_t(z1,r)}}function W1(n,r,o){n==="focusin"?(ap(),ta=r,na=o,ta.attachEvent("onpropertychange",op)):n==="focusout"&&ap()}function U1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return mo(na)}function j1(n,r){if(n==="click")return mo(r)}function q1(n,r){if(n==="input"||n==="change")return mo(r)}function H1(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var di=typeof Object.is=="function"?Object.is:H1;function ia(n,r){if(di(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),d=Object.keys(r);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var h=o[d];if(!p.call(r,h)||!di(n[h],r[h]))return!1}return!0}function lp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cp(n,r){var o=lp(n);n=0;for(var d;o;){if(o.nodeType===3){if(d=n+o.textContent.length,n<=r&&d>=r)return{node:o,offset:r-n};n=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=lp(o)}}function up(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?up(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function dp(){for(var n=window,r=ae();r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=ae(n.document)}return r}function nc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function $1(n){var r=dp(),o=n.focusedElem,d=n.selectionRange;if(r!==o&&o&&o.ownerDocument&&up(o.ownerDocument.documentElement,o)){if(d!==null&&nc(o)){if(r=d.start,n=d.end,n===void 0&&(n=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(n,o.value.length);else if(n=(r=o.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var h=o.textContent.length,w=Math.min(d.start,h);d=d.end===void 0?w:Math.min(d.end,h),!n.extend&&w>d&&(h=d,d=w,w=h),h=cp(o,w);var D=cp(o,d);h&&D&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==D.node||n.focusOffset!==D.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),n.removeAllRanges(),w>d?(n.addRange(r),n.extend(D.node,D.offset)):(r.setEnd(D.node,D.offset),n.addRange(r)))}}for(r=[],n=o;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)n=r[o],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Y1=f&&"documentMode"in document&&11>=document.documentMode,rs=null,ic=null,ra=null,rc=!1;function fp(n,r,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;rc||rs==null||rs!==ae(d)||(d=rs,"selectionStart"in d&&nc(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ra&&ia(ra,d)||(ra=d,d=bo(ic,"onSelect"),0<d.length&&(r=new Gl("onSelect","select",null,r,o),n.push({event:r,listeners:d}),r.target=rs)))}function go(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var ss={animationend:go("Animation","AnimationEnd"),animationiteration:go("Animation","AnimationIteration"),animationstart:go("Animation","AnimationStart"),transitionend:go("Transition","TransitionEnd")},sc={},pp={};f&&(pp=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function vo(n){if(sc[n])return sc[n];if(!ss[n])return n;var r=ss[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in pp)return sc[n]=r[o];return n}var hp=vo("animationend"),mp=vo("animationiteration"),gp=vo("animationstart"),vp=vo("transitionend"),yp=new Map,bp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zi(n,r){yp.set(n,r),l(r,[n])}for(var ac=0;ac<bp.length;ac++){var oc=bp[ac],G1=oc.toLowerCase(),X1=oc[0].toUpperCase()+oc.slice(1);Zi(G1,"on"+X1)}Zi(hp,"onAnimationEnd"),Zi(mp,"onAnimationIteration"),Zi(gp,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(vp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K1=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function wp(n,r,o){var d=n.type||"unknown-event";n.currentTarget=o,Ot(d,r,void 0,n),n.currentTarget=null}function xp(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var d=n[o],h=d.event;d=d.listeners;e:{var w=void 0;if(r)for(var D=d.length-1;0<=D;D--){var N=d[D],j=N.instance,ne=N.currentTarget;if(N=N.listener,j!==w&&h.isPropagationStopped())break e;wp(h,N,ne),w=j}else for(D=0;D<d.length;D++){if(N=d[D],j=N.instance,ne=N.currentTarget,N=N.listener,j!==w&&h.isPropagationStopped())break e;wp(h,N,ne),w=j}}}if(Cn)throw n=Oe,Cn=!1,Oe=null,n}function vt(n,r){var o=r[mc];o===void 0&&(o=r[mc]=new Set);var d=n+"__bubble";o.has(d)||(Sp(r,n,2,!1),o.add(d))}function lc(n,r,o){var d=0;r&&(d|=4),Sp(o,n,d,r)}var yo="_reactListening"+Math.random().toString(36).slice(2);function aa(n){if(!n[yo]){n[yo]=!0,s.forEach(function(o){o!=="selectionchange"&&(K1.has(o)||lc(o,!1,n),lc(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[yo]||(r[yo]=!0,lc("selectionchange",!1,r))}}function Sp(n,r,o,d){switch(Hf(r)){case 1:var h=u1;break;case 4:h=d1;break;default:h=Hl}o=h.bind(null,r,o,n),h=void 0,!Ht||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),d?h!==void 0?n.addEventListener(r,o,{capture:!0,passive:h}):n.addEventListener(r,o,!0):h!==void 0?n.addEventListener(r,o,{passive:h}):n.addEventListener(r,o,!1)}function cc(n,r,o,d,h){var w=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var D=d.tag;if(D===3||D===4){var N=d.stateNode.containerInfo;if(N===h||N.nodeType===8&&N.parentNode===h)break;if(D===4)for(D=d.return;D!==null;){var j=D.tag;if((j===3||j===4)&&(j=D.stateNode.containerInfo,j===h||j.nodeType===8&&j.parentNode===h))return;D=D.return}for(;N!==null;){if(D=Pr(N),D===null)return;if(j=D.tag,j===5||j===6){d=w=D;continue e}N=N.parentNode}}d=d.return}_t(function(){var ne=w,de=ct(o),pe=[];e:{var ce=yp.get(n);if(ce!==void 0){var _e=Gl,De=n;switch(n){case"keypress":if(fo(o)===0)break e;case"keydown":case"keyup":_e=k1;break;case"focusin":De="focus",_e=Ql;break;case"focusout":De="blur",_e=Ql;break;case"beforeblur":case"afterblur":_e=Ql;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=h1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=D1;break;case hp:case mp:case gp:_e=v1;break;case vp:_e=M1;break;case"scroll":_e=f1;break;case"wheel":_e=R1;break;case"copy":case"cut":case"paste":_e=b1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Kf}var Re=(r&4)!==0,Nt=!Re&&n==="scroll",Q=Re?ce!==null?ce+"Capture":null:ce;Re=[];for(var q=ne,ee;q!==null;){ee=q;var me=ee.stateNode;if(ee.tag===5&&me!==null&&(ee=me,Q!==null&&(me=cn(q,Q),me!=null&&Re.push(oa(q,me,ee)))),Nt)break;q=q.return}0<Re.length&&(ce=new _e(ce,De,null,o,de),pe.push({event:ce,listeners:Re}))}}if((r&7)===0){e:{if(ce=n==="mouseover"||n==="pointerover",_e=n==="mouseout"||n==="pointerout",ce&&o!==Ge&&(De=o.relatedTarget||o.fromElement)&&(Pr(De)||De[Li]))break e;if((_e||ce)&&(ce=de.window===de?de:(ce=de.ownerDocument)?ce.defaultView||ce.parentWindow:window,_e?(De=o.relatedTarget||o.toElement,_e=ne,De=De?Pr(De):null,De!==null&&(Nt=ut(De),De!==Nt||De.tag!==5&&De.tag!==6)&&(De=null)):(_e=null,De=ne),_e!==De)){if(Re=Gf,me="onMouseLeave",Q="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(Re=Kf,me="onPointerLeave",Q="onPointerEnter",q="pointer"),Nt=_e==null?ce:ls(_e),ee=De==null?ce:ls(De),ce=new Re(me,q+"leave",_e,o,de),ce.target=Nt,ce.relatedTarget=ee,me=null,Pr(de)===ne&&(Re=new Re(Q,q+"enter",De,o,de),Re.target=ee,Re.relatedTarget=Nt,me=Re),Nt=me,_e&&De)t:{for(Re=_e,Q=De,q=0,ee=Re;ee;ee=as(ee))q++;for(ee=0,me=Q;me;me=as(me))ee++;for(;0<q-ee;)Re=as(Re),q--;for(;0<ee-q;)Q=as(Q),ee--;for(;q--;){if(Re===Q||Q!==null&&Re===Q.alternate)break t;Re=as(Re),Q=as(Q)}Re=null}else Re=null;_e!==null&&_p(pe,ce,_e,Re,!1),De!==null&&Nt!==null&&_p(pe,Nt,De,Re,!0)}}e:{if(ce=ne?ls(ne):window,_e=ce.nodeName&&ce.nodeName.toLowerCase(),_e==="select"||_e==="input"&&ce.type==="file")var Fe=V1;else if(np(ce))if(rp)Fe=q1;else{Fe=U1;var Ne=W1}else(_e=ce.nodeName)&&_e.toLowerCase()==="input"&&(ce.type==="checkbox"||ce.type==="radio")&&(Fe=j1);if(Fe&&(Fe=Fe(n,ne))){ip(pe,Fe,o,de);break e}Ne&&Ne(n,ce,ne),n==="focusout"&&(Ne=ce._wrapperState)&&Ne.controlled&&ce.type==="number"&&Ee(ce,"number",ce.value)}switch(Ne=ne?ls(ne):window,n){case"focusin":(np(Ne)||Ne.contentEditable==="true")&&(rs=Ne,ic=ne,ra=null);break;case"focusout":ra=ic=rs=null;break;case"mousedown":rc=!0;break;case"contextmenu":case"mouseup":case"dragend":rc=!1,fp(pe,o,de);break;case"selectionchange":if(Y1)break;case"keydown":case"keyup":fp(pe,o,de)}var Ie;if(Jl)e:{switch(n){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else is?ep(n,o)&&(Ve="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ve="onCompositionStart");Ve&&(Qf&&o.locale!=="ko"&&(is||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&is&&(Ie=$f()):(Qi=de,Yl="value"in Qi?Qi.value:Qi.textContent,is=!0)),Ne=bo(ne,Ve),0<Ne.length&&(Ve=new Xf(Ve,n,null,o,de),pe.push({event:Ve,listeners:Ne}),Ie?Ve.data=Ie:(Ie=tp(o),Ie!==null&&(Ve.data=Ie)))),(Ie=O1?N1(n,o):I1(n,o))&&(ne=bo(ne,"onBeforeInput"),0<ne.length&&(de=new Xf("onBeforeInput","beforeinput",null,o,de),pe.push({event:de,listeners:ne}),de.data=Ie))}xp(pe,r)})}function oa(n,r,o){return{instance:n,listener:r,currentTarget:o}}function bo(n,r){for(var o=r+"Capture",d=[];n!==null;){var h=n,w=h.stateNode;h.tag===5&&w!==null&&(h=w,w=cn(n,o),w!=null&&d.unshift(oa(n,w,h)),w=cn(n,r),w!=null&&d.push(oa(n,w,h))),n=n.return}return d}function as(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _p(n,r,o,d,h){for(var w=r._reactName,D=[];o!==null&&o!==d;){var N=o,j=N.alternate,ne=N.stateNode;if(j!==null&&j===d)break;N.tag===5&&ne!==null&&(N=ne,h?(j=cn(o,w),j!=null&&D.unshift(oa(o,j,N))):h||(j=cn(o,w),j!=null&&D.push(oa(o,j,N)))),o=o.return}D.length!==0&&n.push({event:r,listeners:D})}var Q1=/\r\n?/g,Z1=/\u0000|\uFFFD/g;function Cp(n){return(typeof n=="string"?n:""+n).replace(Q1,`
`).replace(Z1,"")}function wo(n,r,o){if(r=Cp(r),Cp(n)!==r&&o)throw Error(i(425))}function xo(){}var uc=null,dc=null;function fc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var pc=typeof setTimeout=="function"?setTimeout:void 0,J1=typeof clearTimeout=="function"?clearTimeout:void 0,Pp=typeof Promise=="function"?Promise:void 0,eb=typeof queueMicrotask=="function"?queueMicrotask:typeof Pp<"u"?function(n){return Pp.resolve(null).then(n).catch(tb)}:pc;function tb(n){setTimeout(function(){throw n})}function hc(n,r){var o=r,d=0;do{var h=o.nextSibling;if(n.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(d===0){n.removeChild(h),Qs(r);return}d--}else o!=="$"&&o!=="$?"&&o!=="$!"||d++;o=h}while(o);Qs(r)}function Ji(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function kp(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}var os=Math.random().toString(36).slice(2),xi="__reactFiber$"+os,la="__reactProps$"+os,Li="__reactContainer$"+os,mc="__reactEvents$"+os,nb="__reactListeners$"+os,ib="__reactHandles$"+os;function Pr(n){var r=n[xi];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Li]||o[xi]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=kp(n);n!==null;){if(o=n[xi])return o;n=kp(n)}return r}n=o,o=n.parentNode}return null}function ca(n){return n=n[xi]||n[Li],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ls(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(i(33))}function So(n){return n[la]||null}var gc=[],cs=-1;function er(n){return{current:n}}function yt(n){0>cs||(n.current=gc[cs],gc[cs]=null,cs--)}function mt(n,r){cs++,gc[cs]=n.current,n.current=r}var tr={},un=er(tr),Pn=er(!1),kr=tr;function us(n,r){var o=n.type.contextTypes;if(!o)return tr;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===r)return d.__reactInternalMemoizedMaskedChildContext;var h={},w;for(w in o)h[w]=r[w];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=h),h}function kn(n){return n=n.childContextTypes,n!=null}function _o(){yt(Pn),yt(un)}function Ep(n,r,o){if(un.current!==tr)throw Error(i(168));mt(un,r),mt(Pn,o)}function Tp(n,r,o){var d=n.stateNode;if(r=r.childContextTypes,typeof d.getChildContext!="function")return o;d=d.getChildContext();for(var h in d)if(!(h in r))throw Error(i(108,O(n)||"Unknown",h));return k({},o,d)}function Co(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||tr,kr=un.current,mt(un,n),mt(Pn,Pn.current),!0}function Dp(n,r,o){var d=n.stateNode;if(!d)throw Error(i(169));o?(n=Tp(n,r,kr),d.__reactInternalMemoizedMergedChildContext=n,yt(Pn),yt(un),mt(un,n)):yt(Pn),mt(Pn,o)}var Ri=null,Po=!1,vc=!1;function Ap(n){Ri===null?Ri=[n]:Ri.push(n)}function rb(n){Po=!0,Ap(n)}function nr(){if(!vc&&Ri!==null){vc=!0;var n=0,r=at;try{var o=Ri;for(at=1;n<o.length;n++){var d=o[n];do d=d(!0);while(d!==null)}Ri=null,Po=!1}catch(h){throw Ri!==null&&(Ri=Ri.slice(n+1)),Ae(He,nr),h}finally{at=r,vc=!1}}return null}var ds=[],fs=0,ko=null,Eo=0,Qn=[],Zn=0,Er=null,Fi=1,Oi="";function Tr(n,r){ds[fs++]=Eo,ds[fs++]=ko,ko=n,Eo=r}function Mp(n,r,o){Qn[Zn++]=Fi,Qn[Zn++]=Oi,Qn[Zn++]=Er,Er=n;var d=Fi;n=Oi;var h=32-Vn(d)-1;d&=~(1<<h),o+=1;var w=32-Vn(r)+h;if(30<w){var D=h-h%5;w=(d&(1<<D)-1).toString(32),d>>=D,h-=D,Fi=1<<32-Vn(r)+h|o<<h|d,Oi=w+n}else Fi=1<<w|o<<h|d,Oi=n}function yc(n){n.return!==null&&(Tr(n,1),Mp(n,1,0))}function bc(n){for(;n===ko;)ko=ds[--fs],ds[fs]=null,Eo=ds[--fs],ds[fs]=null;for(;n===Er;)Er=Qn[--Zn],Qn[Zn]=null,Oi=Qn[--Zn],Qn[Zn]=null,Fi=Qn[--Zn],Qn[Zn]=null}var Un=null,jn=null,bt=!1,fi=null;function Lp(n,r){var o=ni(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=n,r=n.deletions,r===null?(n.deletions=[o],n.flags|=16):r.push(o)}function Rp(n,r){switch(n.tag){case 5:var o=n.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Un=n,jn=Ji(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Un=n,jn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Er!==null?{id:Fi,overflow:Oi}:null,n.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=ni(18,null,null,0),o.stateNode=r,o.return=n,n.child=o,Un=n,jn=null,!0):!1;default:return!1}}function wc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function xc(n){if(bt){var r=jn;if(r){var o=r;if(!Rp(n,r)){if(wc(n))throw Error(i(418));r=Ji(o.nextSibling);var d=Un;r&&Rp(n,r)?Lp(d,o):(n.flags=n.flags&-4097|2,bt=!1,Un=n)}}else{if(wc(n))throw Error(i(418));n.flags=n.flags&-4097|2,bt=!1,Un=n}}}function Fp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Un=n}function To(n){if(n!==Un)return!1;if(!bt)return Fp(n),bt=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!fc(n.type,n.memoizedProps)),r&&(r=jn)){if(wc(n))throw Op(),Error(i(418));for(;r;)Lp(n,r),r=Ji(r.nextSibling)}if(Fp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"){if(r===0){jn=Ji(n.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}n=n.nextSibling}jn=null}}else jn=Un?Ji(n.stateNode.nextSibling):null;return!0}function Op(){for(var n=jn;n;)n=Ji(n.nextSibling)}function ps(){jn=Un=null,bt=!1}function Sc(n){fi===null?fi=[n]:fi.push(n)}var sb=z.ReactCurrentBatchConfig;function ua(n,r,o){if(n=o.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(i(309));var d=o.stateNode}if(!d)throw Error(i(147,n));var h=d,w=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===w?r.ref:(r=function(D){var N=h.refs;D===null?delete N[w]:N[w]=D},r._stringRef=w,r)}if(typeof n!="string")throw Error(i(284));if(!o._owner)throw Error(i(290,n))}return n}function Do(n,r){throw n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Np(n){var r=n._init;return r(n._payload)}function Ip(n){function r(Q,q){if(n){var ee=Q.deletions;ee===null?(Q.deletions=[q],Q.flags|=16):ee.push(q)}}function o(Q,q){if(!n)return null;for(;q!==null;)r(Q,q),q=q.sibling;return null}function d(Q,q){for(Q=new Map;q!==null;)q.key!==null?Q.set(q.key,q):Q.set(q.index,q),q=q.sibling;return Q}function h(Q,q){return Q=ur(Q,q),Q.index=0,Q.sibling=null,Q}function w(Q,q,ee){return Q.index=ee,n?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<q?(Q.flags|=2,q):ee):(Q.flags|=2,q)):(Q.flags|=1048576,q)}function D(Q){return n&&Q.alternate===null&&(Q.flags|=2),Q}function N(Q,q,ee,me){return q===null||q.tag!==6?(q=pu(ee,Q.mode,me),q.return=Q,q):(q=h(q,ee),q.return=Q,q)}function j(Q,q,ee,me){var Fe=ee.type;return Fe===te?de(Q,q,ee.props.children,me,ee.key):q!==null&&(q.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===v&&Np(Fe)===q.type)?(me=h(q,ee.props),me.ref=ua(Q,q,ee),me.return=Q,me):(me=Jo(ee.type,ee.key,ee.props,null,Q.mode,me),me.ref=ua(Q,q,ee),me.return=Q,me)}function ne(Q,q,ee,me){return q===null||q.tag!==4||q.stateNode.containerInfo!==ee.containerInfo||q.stateNode.implementation!==ee.implementation?(q=hu(ee,Q.mode,me),q.return=Q,q):(q=h(q,ee.children||[]),q.return=Q,q)}function de(Q,q,ee,me,Fe){return q===null||q.tag!==7?(q=Nr(ee,Q.mode,me,Fe),q.return=Q,q):(q=h(q,ee),q.return=Q,q)}function pe(Q,q,ee){if(typeof q=="string"&&q!==""||typeof q=="number")return q=pu(""+q,Q.mode,ee),q.return=Q,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case I:return ee=Jo(q.type,q.key,q.props,null,Q.mode,ee),ee.ref=ua(Q,null,q),ee.return=Q,ee;case G:return q=hu(q,Q.mode,ee),q.return=Q,q;case v:var me=q._init;return pe(Q,me(q._payload),ee)}if(Be(q)||x(q))return q=Nr(q,Q.mode,ee,null),q.return=Q,q;Do(Q,q)}return null}function ce(Q,q,ee,me){var Fe=q!==null?q.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return Fe!==null?null:N(Q,q,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:return ee.key===Fe?j(Q,q,ee,me):null;case G:return ee.key===Fe?ne(Q,q,ee,me):null;case v:return Fe=ee._init,ce(Q,q,Fe(ee._payload),me)}if(Be(ee)||x(ee))return Fe!==null?null:de(Q,q,ee,me,null);Do(Q,ee)}return null}function _e(Q,q,ee,me,Fe){if(typeof me=="string"&&me!==""||typeof me=="number")return Q=Q.get(ee)||null,N(q,Q,""+me,Fe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case I:return Q=Q.get(me.key===null?ee:me.key)||null,j(q,Q,me,Fe);case G:return Q=Q.get(me.key===null?ee:me.key)||null,ne(q,Q,me,Fe);case v:var Ne=me._init;return _e(Q,q,ee,Ne(me._payload),Fe)}if(Be(me)||x(me))return Q=Q.get(ee)||null,de(q,Q,me,Fe,null);Do(q,me)}return null}function De(Q,q,ee,me){for(var Fe=null,Ne=null,Ie=q,Ve=q=0,Jt=null;Ie!==null&&Ve<ee.length;Ve++){Ie.index>Ve?(Jt=Ie,Ie=null):Jt=Ie.sibling;var rt=ce(Q,Ie,ee[Ve],me);if(rt===null){Ie===null&&(Ie=Jt);break}n&&Ie&&rt.alternate===null&&r(Q,Ie),q=w(rt,q,Ve),Ne===null?Fe=rt:Ne.sibling=rt,Ne=rt,Ie=Jt}if(Ve===ee.length)return o(Q,Ie),bt&&Tr(Q,Ve),Fe;if(Ie===null){for(;Ve<ee.length;Ve++)Ie=pe(Q,ee[Ve],me),Ie!==null&&(q=w(Ie,q,Ve),Ne===null?Fe=Ie:Ne.sibling=Ie,Ne=Ie);return bt&&Tr(Q,Ve),Fe}for(Ie=d(Q,Ie);Ve<ee.length;Ve++)Jt=_e(Ie,Q,Ve,ee[Ve],me),Jt!==null&&(n&&Jt.alternate!==null&&Ie.delete(Jt.key===null?Ve:Jt.key),q=w(Jt,q,Ve),Ne===null?Fe=Jt:Ne.sibling=Jt,Ne=Jt);return n&&Ie.forEach(function(dr){return r(Q,dr)}),bt&&Tr(Q,Ve),Fe}function Re(Q,q,ee,me){var Fe=x(ee);if(typeof Fe!="function")throw Error(i(150));if(ee=Fe.call(ee),ee==null)throw Error(i(151));for(var Ne=Fe=null,Ie=q,Ve=q=0,Jt=null,rt=ee.next();Ie!==null&&!rt.done;Ve++,rt=ee.next()){Ie.index>Ve?(Jt=Ie,Ie=null):Jt=Ie.sibling;var dr=ce(Q,Ie,rt.value,me);if(dr===null){Ie===null&&(Ie=Jt);break}n&&Ie&&dr.alternate===null&&r(Q,Ie),q=w(dr,q,Ve),Ne===null?Fe=dr:Ne.sibling=dr,Ne=dr,Ie=Jt}if(rt.done)return o(Q,Ie),bt&&Tr(Q,Ve),Fe;if(Ie===null){for(;!rt.done;Ve++,rt=ee.next())rt=pe(Q,rt.value,me),rt!==null&&(q=w(rt,q,Ve),Ne===null?Fe=rt:Ne.sibling=rt,Ne=rt);return bt&&Tr(Q,Ve),Fe}for(Ie=d(Q,Ie);!rt.done;Ve++,rt=ee.next())rt=_e(Ie,Q,Ve,rt.value,me),rt!==null&&(n&&rt.alternate!==null&&Ie.delete(rt.key===null?Ve:rt.key),q=w(rt,q,Ve),Ne===null?Fe=rt:Ne.sibling=rt,Ne=rt);return n&&Ie.forEach(function(Bb){return r(Q,Bb)}),bt&&Tr(Q,Ve),Fe}function Nt(Q,q,ee,me){if(typeof ee=="object"&&ee!==null&&ee.type===te&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:e:{for(var Fe=ee.key,Ne=q;Ne!==null;){if(Ne.key===Fe){if(Fe=ee.type,Fe===te){if(Ne.tag===7){o(Q,Ne.sibling),q=h(Ne,ee.props.children),q.return=Q,Q=q;break e}}else if(Ne.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===v&&Np(Fe)===Ne.type){o(Q,Ne.sibling),q=h(Ne,ee.props),q.ref=ua(Q,Ne,ee),q.return=Q,Q=q;break e}o(Q,Ne);break}else r(Q,Ne);Ne=Ne.sibling}ee.type===te?(q=Nr(ee.props.children,Q.mode,me,ee.key),q.return=Q,Q=q):(me=Jo(ee.type,ee.key,ee.props,null,Q.mode,me),me.ref=ua(Q,q,ee),me.return=Q,Q=me)}return D(Q);case G:e:{for(Ne=ee.key;q!==null;){if(q.key===Ne)if(q.tag===4&&q.stateNode.containerInfo===ee.containerInfo&&q.stateNode.implementation===ee.implementation){o(Q,q.sibling),q=h(q,ee.children||[]),q.return=Q,Q=q;break e}else{o(Q,q);break}else r(Q,q);q=q.sibling}q=hu(ee,Q.mode,me),q.return=Q,Q=q}return D(Q);case v:return Ne=ee._init,Nt(Q,q,Ne(ee._payload),me)}if(Be(ee))return De(Q,q,ee,me);if(x(ee))return Re(Q,q,ee,me);Do(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,q!==null&&q.tag===6?(o(Q,q.sibling),q=h(q,ee),q.return=Q,Q=q):(o(Q,q),q=pu(ee,Q.mode,me),q.return=Q,Q=q),D(Q)):o(Q,q)}return Nt}var hs=Ip(!0),Bp=Ip(!1),Ao=er(null),Mo=null,ms=null,_c=null;function Cc(){_c=ms=Mo=null}function Pc(n){var r=Ao.current;yt(Ao),n._currentValue=r}function kc(n,r,o){for(;n!==null;){var d=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),n===o)break;n=n.return}}function gs(n,r){Mo=n,_c=ms=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(En=!0),n.firstContext=null)}function Jn(n){var r=n._currentValue;if(_c!==n)if(n={context:n,memoizedValue:r,next:null},ms===null){if(Mo===null)throw Error(i(308));ms=n,Mo.dependencies={lanes:0,firstContext:n}}else ms=ms.next=n;return r}var Dr=null;function Ec(n){Dr===null?Dr=[n]:Dr.push(n)}function zp(n,r,o,d){var h=r.interleaved;return h===null?(o.next=o,Ec(r)):(o.next=h.next,h.next=o),r.interleaved=o,Ni(n,d)}function Ni(n,r){n.lanes|=r;var o=n.alternate;for(o!==null&&(o.lanes|=r),o=n,n=n.return;n!==null;)n.childLanes|=r,o=n.alternate,o!==null&&(o.childLanes|=r),o=n,n=n.return;return o.tag===3?o.stateNode:null}var ir=!1;function Tc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vp(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ii(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function rr(n,r,o){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(et&2)!==0){var h=d.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),d.pending=r,Ni(n,o)}return h=d.interleaved,h===null?(r.next=r,Ec(d)):(r.next=h.next,h.next=r),d.interleaved=r,Ni(n,o)}function Lo(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var d=r.lanes;d&=n.pendingLanes,o|=d,r.lanes=o,Ul(n,o)}}function Wp(n,r){var o=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var h=null,w=null;if(o=o.firstBaseUpdate,o!==null){do{var D={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};w===null?h=w=D:w=w.next=D,o=o.next}while(o!==null);w===null?h=w=r:w=w.next=r}else h=w=r;o={baseState:d.baseState,firstBaseUpdate:h,lastBaseUpdate:w,shared:d.shared,effects:d.effects},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}function Ro(n,r,o,d){var h=n.updateQueue;ir=!1;var w=h.firstBaseUpdate,D=h.lastBaseUpdate,N=h.shared.pending;if(N!==null){h.shared.pending=null;var j=N,ne=j.next;j.next=null,D===null?w=ne:D.next=ne,D=j;var de=n.alternate;de!==null&&(de=de.updateQueue,N=de.lastBaseUpdate,N!==D&&(N===null?de.firstBaseUpdate=ne:N.next=ne,de.lastBaseUpdate=j))}if(w!==null){var pe=h.baseState;D=0,de=ne=j=null,N=w;do{var ce=N.lane,_e=N.eventTime;if((d&ce)===ce){de!==null&&(de=de.next={eventTime:_e,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var De=n,Re=N;switch(ce=r,_e=o,Re.tag){case 1:if(De=Re.payload,typeof De=="function"){pe=De.call(_e,pe,ce);break e}pe=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Re.payload,ce=typeof De=="function"?De.call(_e,pe,ce):De,ce==null)break e;pe=k({},pe,ce);break e;case 2:ir=!0}}N.callback!==null&&N.lane!==0&&(n.flags|=64,ce=h.effects,ce===null?h.effects=[N]:ce.push(N))}else _e={eventTime:_e,lane:ce,tag:N.tag,payload:N.payload,callback:N.callback,next:null},de===null?(ne=de=_e,j=pe):de=de.next=_e,D|=ce;if(N=N.next,N===null){if(N=h.shared.pending,N===null)break;ce=N,N=ce.next,ce.next=null,h.lastBaseUpdate=ce,h.shared.pending=null}}while(!0);if(de===null&&(j=pe),h.baseState=j,h.firstBaseUpdate=ne,h.lastBaseUpdate=de,r=h.shared.interleaved,r!==null){h=r;do D|=h.lane,h=h.next;while(h!==r)}else w===null&&(h.shared.lanes=0);Lr|=D,n.lanes=D,n.memoizedState=pe}}function Up(n,r,o){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var d=n[r],h=d.callback;if(h!==null){if(d.callback=null,d=o,typeof h!="function")throw Error(i(191,h));h.call(d)}}}var da={},Si=er(da),fa=er(da),pa=er(da);function Ar(n){if(n===da)throw Error(i(174));return n}function Dc(n,r){switch(mt(pa,r),mt(fa,n),mt(Si,da),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:lt(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=lt(r,n)}yt(Si),mt(Si,r)}function vs(){yt(Si),yt(fa),yt(pa)}function jp(n){Ar(pa.current);var r=Ar(Si.current),o=lt(r,n.type);r!==o&&(mt(fa,n),mt(Si,o))}function Ac(n){fa.current===n&&(yt(Si),yt(fa))}var Ct=er(0);function Fo(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Mc=[];function Lc(){for(var n=0;n<Mc.length;n++)Mc[n]._workInProgressVersionPrimary=null;Mc.length=0}var Oo=z.ReactCurrentDispatcher,Rc=z.ReactCurrentBatchConfig,Mr=0,Pt=null,$t=null,Qt=null,No=!1,ha=!1,ma=0,ab=0;function dn(){throw Error(i(321))}function Fc(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!di(n[o],r[o]))return!1;return!0}function Oc(n,r,o,d,h,w){if(Mr=w,Pt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Oo.current=n===null||n.memoizedState===null?ub:db,n=o(d,h),ha){w=0;do{if(ha=!1,ma=0,25<=w)throw Error(i(301));w+=1,Qt=$t=null,r.updateQueue=null,Oo.current=fb,n=o(d,h)}while(ha)}if(Oo.current=zo,r=$t!==null&&$t.next!==null,Mr=0,Qt=$t=Pt=null,No=!1,r)throw Error(i(300));return n}function Nc(){var n=ma!==0;return ma=0,n}function _i(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Pt.memoizedState=Qt=n:Qt=Qt.next=n,Qt}function ei(){if($t===null){var n=Pt.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var r=Qt===null?Pt.memoizedState:Qt.next;if(r!==null)Qt=r,$t=n;else{if(n===null)throw Error(i(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Qt===null?Pt.memoizedState=Qt=n:Qt=Qt.next=n}return Qt}function ga(n,r){return typeof r=="function"?r(n):r}function Ic(n){var r=ei(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var d=$t,h=d.baseQueue,w=o.pending;if(w!==null){if(h!==null){var D=h.next;h.next=w.next,w.next=D}d.baseQueue=h=w,o.pending=null}if(h!==null){w=h.next,d=d.baseState;var N=D=null,j=null,ne=w;do{var de=ne.lane;if((Mr&de)===de)j!==null&&(j=j.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),d=ne.hasEagerState?ne.eagerState:n(d,ne.action);else{var pe={lane:de,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};j===null?(N=j=pe,D=d):j=j.next=pe,Pt.lanes|=de,Lr|=de}ne=ne.next}while(ne!==null&&ne!==w);j===null?D=d:j.next=N,di(d,r.memoizedState)||(En=!0),r.memoizedState=d,r.baseState=D,r.baseQueue=j,o.lastRenderedState=d}if(n=o.interleaved,n!==null){h=n;do w=h.lane,Pt.lanes|=w,Lr|=w,h=h.next;while(h!==n)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Bc(n){var r=ei(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var d=o.dispatch,h=o.pending,w=r.memoizedState;if(h!==null){o.pending=null;var D=h=h.next;do w=n(w,D.action),D=D.next;while(D!==h);di(w,r.memoizedState)||(En=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),o.lastRenderedState=w}return[w,d]}function qp(){}function Hp(n,r){var o=Pt,d=ei(),h=r(),w=!di(d.memoizedState,h);if(w&&(d.memoizedState=h,En=!0),d=d.queue,zc(Gp.bind(null,o,d,n),[n]),d.getSnapshot!==r||w||Qt!==null&&Qt.memoizedState.tag&1){if(o.flags|=2048,va(9,Yp.bind(null,o,d,h,r),void 0,null),Zt===null)throw Error(i(349));(Mr&30)!==0||$p(o,r,h)}return h}function $p(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Pt.updateQueue,r===null?(r={lastEffect:null,stores:null},Pt.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Yp(n,r,o,d){r.value=o,r.getSnapshot=d,Xp(r)&&Kp(n)}function Gp(n,r,o){return o(function(){Xp(r)&&Kp(n)})}function Xp(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!di(n,o)}catch{return!0}}function Kp(n){var r=Ni(n,1);r!==null&&gi(r,n,1,-1)}function Qp(n){var r=_i();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:n},r.queue=n,n=n.dispatch=cb.bind(null,Pt,n),[r.memoizedState,n]}function va(n,r,o,d){return n={tag:n,create:r,destroy:o,deps:d,next:null},r=Pt.updateQueue,r===null?(r={lastEffect:null,stores:null},Pt.updateQueue=r,r.lastEffect=n.next=n):(o=r.lastEffect,o===null?r.lastEffect=n.next=n:(d=o.next,o.next=n,n.next=d,r.lastEffect=n)),n}function Zp(){return ei().memoizedState}function Io(n,r,o,d){var h=_i();Pt.flags|=n,h.memoizedState=va(1|r,o,void 0,d===void 0?null:d)}function Bo(n,r,o,d){var h=ei();d=d===void 0?null:d;var w=void 0;if($t!==null){var D=$t.memoizedState;if(w=D.destroy,d!==null&&Fc(d,D.deps)){h.memoizedState=va(r,o,w,d);return}}Pt.flags|=n,h.memoizedState=va(1|r,o,w,d)}function Jp(n,r){return Io(8390656,8,n,r)}function zc(n,r){return Bo(2048,8,n,r)}function eh(n,r){return Bo(4,2,n,r)}function th(n,r){return Bo(4,4,n,r)}function nh(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function ih(n,r,o){return o=o!=null?o.concat([n]):null,Bo(4,4,nh.bind(null,r,n),o)}function Vc(){}function rh(n,r){var o=ei();r=r===void 0?null:r;var d=o.memoizedState;return d!==null&&r!==null&&Fc(r,d[1])?d[0]:(o.memoizedState=[n,r],n)}function sh(n,r){var o=ei();r=r===void 0?null:r;var d=o.memoizedState;return d!==null&&r!==null&&Fc(r,d[1])?d[0]:(n=n(),o.memoizedState=[n,r],n)}function ah(n,r,o){return(Mr&21)===0?(n.baseState&&(n.baseState=!1,En=!0),n.memoizedState=o):(di(o,r)||(o=Nf(),Pt.lanes|=o,Lr|=o,n.baseState=!0),r)}function ob(n,r){var o=at;at=o!==0&&4>o?o:4,n(!0);var d=Rc.transition;Rc.transition={};try{n(!1),r()}finally{at=o,Rc.transition=d}}function oh(){return ei().memoizedState}function lb(n,r,o){var d=lr(n);if(o={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null},lh(n))ch(r,o);else if(o=zp(n,r,o,d),o!==null){var h=wn();gi(o,n,d,h),uh(o,r,d)}}function cb(n,r,o){var d=lr(n),h={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null};if(lh(n))ch(r,h);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var D=r.lastRenderedState,N=w(D,o);if(h.hasEagerState=!0,h.eagerState=N,di(N,D)){var j=r.interleaved;j===null?(h.next=h,Ec(r)):(h.next=j.next,j.next=h),r.interleaved=h;return}}catch{}o=zp(n,r,h,d),o!==null&&(h=wn(),gi(o,n,d,h),uh(o,r,d))}}function lh(n){var r=n.alternate;return n===Pt||r!==null&&r===Pt}function ch(n,r){ha=No=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function uh(n,r,o){if((o&4194240)!==0){var d=r.lanes;d&=n.pendingLanes,o|=d,r.lanes=o,Ul(n,o)}}var zo={readContext:Jn,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},ub={readContext:Jn,useCallback:function(n,r){return _i().memoizedState=[n,r===void 0?null:r],n},useContext:Jn,useEffect:Jp,useImperativeHandle:function(n,r,o){return o=o!=null?o.concat([n]):null,Io(4194308,4,nh.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Io(4194308,4,n,r)},useInsertionEffect:function(n,r){return Io(4,2,n,r)},useMemo:function(n,r){var o=_i();return r=r===void 0?null:r,n=n(),o.memoizedState=[n,r],n},useReducer:function(n,r,o){var d=_i();return r=o!==void 0?o(r):r,d.memoizedState=d.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},d.queue=n,n=n.dispatch=lb.bind(null,Pt,n),[d.memoizedState,n]},useRef:function(n){var r=_i();return n={current:n},r.memoizedState=n},useState:Qp,useDebugValue:Vc,useDeferredValue:function(n){return _i().memoizedState=n},useTransition:function(){var n=Qp(!1),r=n[0];return n=ob.bind(null,n[1]),_i().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,o){var d=Pt,h=_i();if(bt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),Zt===null)throw Error(i(349));(Mr&30)!==0||$p(d,r,o)}h.memoizedState=o;var w={value:o,getSnapshot:r};return h.queue=w,Jp(Gp.bind(null,d,w,n),[n]),d.flags|=2048,va(9,Yp.bind(null,d,w,o,r),void 0,null),o},useId:function(){var n=_i(),r=Zt.identifierPrefix;if(bt){var o=Oi,d=Fi;o=(d&~(1<<32-Vn(d)-1)).toString(32)+o,r=":"+r+"R"+o,o=ma++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=ab++,r=":"+r+"r"+o.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},db={readContext:Jn,useCallback:rh,useContext:Jn,useEffect:zc,useImperativeHandle:ih,useInsertionEffect:eh,useLayoutEffect:th,useMemo:sh,useReducer:Ic,useRef:Zp,useState:function(){return Ic(ga)},useDebugValue:Vc,useDeferredValue:function(n){var r=ei();return ah(r,$t.memoizedState,n)},useTransition:function(){var n=Ic(ga)[0],r=ei().memoizedState;return[n,r]},useMutableSource:qp,useSyncExternalStore:Hp,useId:oh,unstable_isNewReconciler:!1},fb={readContext:Jn,useCallback:rh,useContext:Jn,useEffect:zc,useImperativeHandle:ih,useInsertionEffect:eh,useLayoutEffect:th,useMemo:sh,useReducer:Bc,useRef:Zp,useState:function(){return Bc(ga)},useDebugValue:Vc,useDeferredValue:function(n){var r=ei();return $t===null?r.memoizedState=n:ah(r,$t.memoizedState,n)},useTransition:function(){var n=Bc(ga)[0],r=ei().memoizedState;return[n,r]},useMutableSource:qp,useSyncExternalStore:Hp,useId:oh,unstable_isNewReconciler:!1};function pi(n,r){if(n&&n.defaultProps){r=k({},r),n=n.defaultProps;for(var o in n)r[o]===void 0&&(r[o]=n[o]);return r}return r}function Wc(n,r,o,d){r=n.memoizedState,o=o(d,r),o=o==null?r:k({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Vo={isMounted:function(n){return(n=n._reactInternals)?ut(n)===n:!1},enqueueSetState:function(n,r,o){n=n._reactInternals;var d=wn(),h=lr(n),w=Ii(d,h);w.payload=r,o!=null&&(w.callback=o),r=rr(n,w,h),r!==null&&(gi(r,n,h,d),Lo(r,n,h))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var d=wn(),h=lr(n),w=Ii(d,h);w.tag=1,w.payload=r,o!=null&&(w.callback=o),r=rr(n,w,h),r!==null&&(gi(r,n,h,d),Lo(r,n,h))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=wn(),d=lr(n),h=Ii(o,d);h.tag=2,r!=null&&(h.callback=r),r=rr(n,h,d),r!==null&&(gi(r,n,d,o),Lo(r,n,d))}};function dh(n,r,o,d,h,w,D){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,w,D):r.prototype&&r.prototype.isPureReactComponent?!ia(o,d)||!ia(h,w):!0}function fh(n,r,o){var d=!1,h=tr,w=r.contextType;return typeof w=="object"&&w!==null?w=Jn(w):(h=kn(r)?kr:un.current,d=r.contextTypes,w=(d=d!=null)?us(n,h):tr),r=new r(o,w),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Vo,n.stateNode=r,r._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=w),r}function ph(n,r,o,d){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,d),r.state!==n&&Vo.enqueueReplaceState(r,r.state,null)}function Uc(n,r,o,d){var h=n.stateNode;h.props=o,h.state=n.memoizedState,h.refs={},Tc(n);var w=r.contextType;typeof w=="object"&&w!==null?h.context=Jn(w):(w=kn(r)?kr:un.current,h.context=us(n,w)),h.state=n.memoizedState,w=r.getDerivedStateFromProps,typeof w=="function"&&(Wc(n,r,w,o),h.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&Vo.enqueueReplaceState(h,h.state,null),Ro(n,o,h,d),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function ys(n,r){try{var o="",d=r;do o+=V(d),d=d.return;while(d);var h=o}catch(w){h=`
Error generating stack: `+w.message+`
`+w.stack}return{value:n,source:r,stack:h,digest:null}}function jc(n,r,o){return{value:n,source:null,stack:o??null,digest:r??null}}function qc(n,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var pb=typeof WeakMap=="function"?WeakMap:Map;function hh(n,r,o){o=Ii(-1,o),o.tag=3,o.payload={element:null};var d=r.value;return o.callback=function(){Yo||(Yo=!0,su=d),qc(n,r)},o}function mh(n,r,o){o=Ii(-1,o),o.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var h=r.value;o.payload=function(){return d(h)},o.callback=function(){qc(n,r)}}var w=n.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(o.callback=function(){qc(n,r),typeof d!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var D=r.stack;this.componentDidCatch(r.value,{componentStack:D!==null?D:""})}),o}function gh(n,r,o){var d=n.pingCache;if(d===null){d=n.pingCache=new pb;var h=new Set;d.set(r,h)}else h=d.get(r),h===void 0&&(h=new Set,d.set(r,h));h.has(o)||(h.add(o),n=Eb.bind(null,n,r,o),r.then(n,n))}function vh(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function yh(n,r,o,d,h){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=Ii(-1,1),r.tag=2,rr(o,r,1))),o.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var hb=z.ReactCurrentOwner,En=!1;function bn(n,r,o,d){r.child=n===null?Bp(r,null,o,d):hs(r,n.child,o,d)}function bh(n,r,o,d,h){o=o.render;var w=r.ref;return gs(r,h),d=Oc(n,r,o,d,w,h),o=Nc(),n!==null&&!En?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~h,Bi(n,r,h)):(bt&&o&&yc(r),r.flags|=1,bn(n,r,d,h),r.child)}function wh(n,r,o,d,h){if(n===null){var w=o.type;return typeof w=="function"&&!fu(w)&&w.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=w,xh(n,r,w,d,h)):(n=Jo(o.type,null,d,r,r.mode,h),n.ref=r.ref,n.return=r,r.child=n)}if(w=n.child,(n.lanes&h)===0){var D=w.memoizedProps;if(o=o.compare,o=o!==null?o:ia,o(D,d)&&n.ref===r.ref)return Bi(n,r,h)}return r.flags|=1,n=ur(w,d),n.ref=r.ref,n.return=r,r.child=n}function xh(n,r,o,d,h){if(n!==null){var w=n.memoizedProps;if(ia(w,d)&&n.ref===r.ref)if(En=!1,r.pendingProps=d=w,(n.lanes&h)!==0)(n.flags&131072)!==0&&(En=!0);else return r.lanes=n.lanes,Bi(n,r,h)}return Hc(n,r,o,d,h)}function Sh(n,r,o){var d=r.pendingProps,h=d.children,w=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(ws,qn),qn|=o;else{if((o&1073741824)===0)return n=w!==null?w.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,mt(ws,qn),qn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=w!==null?w.baseLanes:o,mt(ws,qn),qn|=d}else w!==null?(d=w.baseLanes|o,r.memoizedState=null):d=o,mt(ws,qn),qn|=d;return bn(n,r,h,o),r.child}function _h(n,r){var o=r.ref;(n===null&&o!==null||n!==null&&n.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Hc(n,r,o,d,h){var w=kn(o)?kr:un.current;return w=us(r,w),gs(r,h),o=Oc(n,r,o,d,w,h),d=Nc(),n!==null&&!En?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~h,Bi(n,r,h)):(bt&&d&&yc(r),r.flags|=1,bn(n,r,o,h),r.child)}function Ch(n,r,o,d,h){if(kn(o)){var w=!0;Co(r)}else w=!1;if(gs(r,h),r.stateNode===null)Uo(n,r),fh(r,o,d),Uc(r,o,d,h),d=!0;else if(n===null){var D=r.stateNode,N=r.memoizedProps;D.props=N;var j=D.context,ne=o.contextType;typeof ne=="object"&&ne!==null?ne=Jn(ne):(ne=kn(o)?kr:un.current,ne=us(r,ne));var de=o.getDerivedStateFromProps,pe=typeof de=="function"||typeof D.getSnapshotBeforeUpdate=="function";pe||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(N!==d||j!==ne)&&ph(r,D,d,ne),ir=!1;var ce=r.memoizedState;D.state=ce,Ro(r,d,D,h),j=r.memoizedState,N!==d||ce!==j||Pn.current||ir?(typeof de=="function"&&(Wc(r,o,de,d),j=r.memoizedState),(N=ir||dh(r,o,N,d,ce,j,ne))?(pe||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(r.flags|=4194308)):(typeof D.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=j),D.props=d,D.state=j,D.context=ne,d=N):(typeof D.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{D=r.stateNode,Vp(n,r),N=r.memoizedProps,ne=r.type===r.elementType?N:pi(r.type,N),D.props=ne,pe=r.pendingProps,ce=D.context,j=o.contextType,typeof j=="object"&&j!==null?j=Jn(j):(j=kn(o)?kr:un.current,j=us(r,j));var _e=o.getDerivedStateFromProps;(de=typeof _e=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(N!==pe||ce!==j)&&ph(r,D,d,j),ir=!1,ce=r.memoizedState,D.state=ce,Ro(r,d,D,h);var De=r.memoizedState;N!==pe||ce!==De||Pn.current||ir?(typeof _e=="function"&&(Wc(r,o,_e,d),De=r.memoizedState),(ne=ir||dh(r,o,ne,d,ce,De,j)||!1)?(de||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(d,De,j),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(d,De,j)),typeof D.componentDidUpdate=="function"&&(r.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof D.componentDidUpdate!="function"||N===n.memoizedProps&&ce===n.memoizedState||(r.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&ce===n.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=De),D.props=d,D.state=De,D.context=j,d=ne):(typeof D.componentDidUpdate!="function"||N===n.memoizedProps&&ce===n.memoizedState||(r.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&ce===n.memoizedState||(r.flags|=1024),d=!1)}return $c(n,r,o,d,w,h)}function $c(n,r,o,d,h,w){_h(n,r);var D=(r.flags&128)!==0;if(!d&&!D)return h&&Dp(r,o,!1),Bi(n,r,w);d=r.stateNode,hb.current=r;var N=D&&typeof o.getDerivedStateFromError!="function"?null:d.render();return r.flags|=1,n!==null&&D?(r.child=hs(r,n.child,null,w),r.child=hs(r,null,N,w)):bn(n,r,N,w),r.memoizedState=d.state,h&&Dp(r,o,!0),r.child}function Ph(n){var r=n.stateNode;r.pendingContext?Ep(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Ep(n,r.context,!1),Dc(n,r.containerInfo)}function kh(n,r,o,d,h){return ps(),Sc(h),r.flags|=256,bn(n,r,o,d),r.child}var Yc={dehydrated:null,treeContext:null,retryLane:0};function Gc(n){return{baseLanes:n,cachePool:null,transitions:null}}function Eh(n,r,o){var d=r.pendingProps,h=Ct.current,w=!1,D=(r.flags&128)!==0,N;if((N=D)||(N=n!==null&&n.memoizedState===null?!1:(h&2)!==0),N?(w=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),mt(Ct,h&1),n===null)return xc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(D=d.children,n=d.fallback,w?(d=r.mode,w=r.child,D={mode:"hidden",children:D},(d&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=D):w=el(D,d,0,null),n=Nr(n,d,o,null),w.return=r,n.return=r,w.sibling=n,r.child=w,r.child.memoizedState=Gc(o),r.memoizedState=Yc,n):Xc(r,D));if(h=n.memoizedState,h!==null&&(N=h.dehydrated,N!==null))return mb(n,r,D,d,N,h,o);if(w){w=d.fallback,D=r.mode,h=n.child,N=h.sibling;var j={mode:"hidden",children:d.children};return(D&1)===0&&r.child!==h?(d=r.child,d.childLanes=0,d.pendingProps=j,r.deletions=null):(d=ur(h,j),d.subtreeFlags=h.subtreeFlags&14680064),N!==null?w=ur(N,w):(w=Nr(w,D,o,null),w.flags|=2),w.return=r,d.return=r,d.sibling=w,r.child=d,d=w,w=r.child,D=n.child.memoizedState,D=D===null?Gc(o):{baseLanes:D.baseLanes|o,cachePool:null,transitions:D.transitions},w.memoizedState=D,w.childLanes=n.childLanes&~o,r.memoizedState=Yc,d}return w=n.child,n=w.sibling,d=ur(w,{mode:"visible",children:d.children}),(r.mode&1)===0&&(d.lanes=o),d.return=r,d.sibling=null,n!==null&&(o=r.deletions,o===null?(r.deletions=[n],r.flags|=16):o.push(n)),r.child=d,r.memoizedState=null,d}function Xc(n,r){return r=el({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Wo(n,r,o,d){return d!==null&&Sc(d),hs(r,n.child,null,o),n=Xc(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function mb(n,r,o,d,h,w,D){if(o)return r.flags&256?(r.flags&=-257,d=jc(Error(i(422))),Wo(n,r,D,d)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(w=d.fallback,h=r.mode,d=el({mode:"visible",children:d.children},h,0,null),w=Nr(w,h,D,null),w.flags|=2,d.return=r,w.return=r,d.sibling=w,r.child=d,(r.mode&1)!==0&&hs(r,n.child,null,D),r.child.memoizedState=Gc(D),r.memoizedState=Yc,w);if((r.mode&1)===0)return Wo(n,r,D,null);if(h.data==="$!"){if(d=h.nextSibling&&h.nextSibling.dataset,d)var N=d.dgst;return d=N,w=Error(i(419)),d=jc(w,d,void 0),Wo(n,r,D,d)}if(N=(D&n.childLanes)!==0,En||N){if(d=Zt,d!==null){switch(D&-D){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(d.suspendedLanes|D))!==0?0:h,h!==0&&h!==w.retryLane&&(w.retryLane=h,Ni(n,h),gi(d,n,h,-1))}return du(),d=jc(Error(i(421))),Wo(n,r,D,d)}return h.data==="$?"?(r.flags|=128,r.child=n.child,r=Tb.bind(null,n),h._reactRetry=r,null):(n=w.treeContext,jn=Ji(h.nextSibling),Un=r,bt=!0,fi=null,n!==null&&(Qn[Zn++]=Fi,Qn[Zn++]=Oi,Qn[Zn++]=Er,Fi=n.id,Oi=n.overflow,Er=r),r=Xc(r,d.children),r.flags|=4096,r)}function Th(n,r,o){n.lanes|=r;var d=n.alternate;d!==null&&(d.lanes|=r),kc(n.return,r,o)}function Kc(n,r,o,d,h){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:h}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=o,w.tailMode=h)}function Dh(n,r,o){var d=r.pendingProps,h=d.revealOrder,w=d.tail;if(bn(n,r,d.children,o),d=Ct.current,(d&2)!==0)d=d&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Th(n,o,r);else if(n.tag===19)Th(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(mt(Ct,d),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)n=o.alternate,n!==null&&Fo(n)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Kc(r,!1,h,o,w);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(n=h.alternate,n!==null&&Fo(n)===null){r.child=h;break}n=h.sibling,h.sibling=o,o=h,h=n}Kc(r,!0,o,null,w);break;case"together":Kc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Uo(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Bi(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Lr|=r.lanes,(o&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=ur(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=ur(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function gb(n,r,o){switch(r.tag){case 3:Ph(r),ps();break;case 5:jp(r);break;case 1:kn(r.type)&&Co(r);break;case 4:Dc(r,r.stateNode.containerInfo);break;case 10:var d=r.type._context,h=r.memoizedProps.value;mt(Ao,d._currentValue),d._currentValue=h;break;case 13:if(d=r.memoizedState,d!==null)return d.dehydrated!==null?(mt(Ct,Ct.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Eh(n,r,o):(mt(Ct,Ct.current&1),n=Bi(n,r,o),n!==null?n.sibling:null);mt(Ct,Ct.current&1);break;case 19:if(d=(o&r.childLanes)!==0,(n.flags&128)!==0){if(d)return Dh(n,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),mt(Ct,Ct.current),d)break;return null;case 22:case 23:return r.lanes=0,Sh(n,r,o)}return Bi(n,r,o)}var Ah,Qc,Mh,Lh;Ah=function(n,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)n.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Qc=function(){},Mh=function(n,r,o,d){var h=n.memoizedProps;if(h!==d){n=r.stateNode,Ar(Si.current);var w=null;switch(o){case"input":h=se(n,h),d=se(n,d),w=[];break;case"select":h=k({},h,{value:void 0}),d=k({},d,{value:void 0}),w=[];break;case"textarea":h=Ze(n,h),d=Ze(n,d),w=[];break;default:typeof h.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=xo)}Dt(o,d);var D;o=null;for(ne in h)if(!d.hasOwnProperty(ne)&&h.hasOwnProperty(ne)&&h[ne]!=null)if(ne==="style"){var N=h[ne];for(D in N)N.hasOwnProperty(D)&&(o||(o={}),o[D]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(a.hasOwnProperty(ne)?w||(w=[]):(w=w||[]).push(ne,null));for(ne in d){var j=d[ne];if(N=h?.[ne],d.hasOwnProperty(ne)&&j!==N&&(j!=null||N!=null))if(ne==="style")if(N){for(D in N)!N.hasOwnProperty(D)||j&&j.hasOwnProperty(D)||(o||(o={}),o[D]="");for(D in j)j.hasOwnProperty(D)&&N[D]!==j[D]&&(o||(o={}),o[D]=j[D])}else o||(w||(w=[]),w.push(ne,o)),o=j;else ne==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,N=N?N.__html:void 0,j!=null&&N!==j&&(w=w||[]).push(ne,j)):ne==="children"?typeof j!="string"&&typeof j!="number"||(w=w||[]).push(ne,""+j):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(a.hasOwnProperty(ne)?(j!=null&&ne==="onScroll"&&vt("scroll",n),w||N===j||(w=[])):(w=w||[]).push(ne,j))}o&&(w=w||[]).push("style",o);var ne=w;(r.updateQueue=ne)&&(r.flags|=4)}},Lh=function(n,r,o,d){o!==d&&(r.flags|=4)};function ya(n,r){if(!bt)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function fn(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,d=0;if(r)for(var h=n.child;h!==null;)o|=h.lanes|h.childLanes,d|=h.subtreeFlags&14680064,d|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)o|=h.lanes|h.childLanes,d|=h.subtreeFlags,d|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=d,n.childLanes=o,r}function vb(n,r,o){var d=r.pendingProps;switch(bc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(r),null;case 1:return kn(r.type)&&_o(),fn(r),null;case 3:return d=r.stateNode,vs(),yt(Pn),yt(un),Lc(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(To(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,fi!==null&&(lu(fi),fi=null))),Qc(n,r),fn(r),null;case 5:Ac(r);var h=Ar(pa.current);if(o=r.type,n!==null&&r.stateNode!=null)Mh(n,r,o,d,h),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!d){if(r.stateNode===null)throw Error(i(166));return fn(r),null}if(n=Ar(Si.current),To(r)){d=r.stateNode,o=r.type;var w=r.memoizedProps;switch(d[xi]=r,d[la]=w,n=(r.mode&1)!==0,o){case"dialog":vt("cancel",d),vt("close",d);break;case"iframe":case"object":case"embed":vt("load",d);break;case"video":case"audio":for(h=0;h<sa.length;h++)vt(sa[h],d);break;case"source":vt("error",d);break;case"img":case"image":case"link":vt("error",d),vt("load",d);break;case"details":vt("toggle",d);break;case"input":le(d,w),vt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!w.multiple},vt("invalid",d);break;case"textarea":tt(d,w),vt("invalid",d)}Dt(o,w),h=null;for(var D in w)if(w.hasOwnProperty(D)){var N=w[D];D==="children"?typeof N=="string"?d.textContent!==N&&(w.suppressHydrationWarning!==!0&&wo(d.textContent,N,n),h=["children",N]):typeof N=="number"&&d.textContent!==""+N&&(w.suppressHydrationWarning!==!0&&wo(d.textContent,N,n),h=["children",""+N]):a.hasOwnProperty(D)&&N!=null&&D==="onScroll"&&vt("scroll",d)}switch(o){case"input":Y(d),ve(d,w,!0);break;case"textarea":Y(d),st(d);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(d.onclick=xo)}d=h,r.updateQueue=d,d!==null&&(r.flags|=4)}else{D=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=qe(o)),n==="http://www.w3.org/1999/xhtml"?o==="script"?(n=D.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=D.createElement(o,{is:d.is}):(n=D.createElement(o),o==="select"&&(D=n,d.multiple?D.multiple=!0:d.size&&(D.size=d.size))):n=D.createElementNS(n,o),n[xi]=r,n[la]=d,Ah(n,r,!1,!1),r.stateNode=n;e:{switch(D=Ye(o,d),o){case"dialog":vt("cancel",n),vt("close",n),h=d;break;case"iframe":case"object":case"embed":vt("load",n),h=d;break;case"video":case"audio":for(h=0;h<sa.length;h++)vt(sa[h],n);h=d;break;case"source":vt("error",n),h=d;break;case"img":case"image":case"link":vt("error",n),vt("load",n),h=d;break;case"details":vt("toggle",n),h=d;break;case"input":le(n,d),h=se(n,d),vt("invalid",n);break;case"option":h=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},h=k({},d,{value:void 0}),vt("invalid",n);break;case"textarea":tt(n,d),h=Ze(n,d),vt("invalid",n);break;default:h=d}Dt(o,h),N=h;for(w in N)if(N.hasOwnProperty(w)){var j=N[w];w==="style"?gt(n,j):w==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Bt(n,j)):w==="children"?typeof j=="string"?(o!=="textarea"||j!=="")&&Pe(n,j):typeof j=="number"&&Pe(n,""+j):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(a.hasOwnProperty(w)?j!=null&&w==="onScroll"&&vt("scroll",n):j!=null&&M(n,w,j,D))}switch(o){case"input":Y(n),ve(n,d,!1);break;case"textarea":Y(n),st(n);break;case"option":d.value!=null&&n.setAttribute("value",""+W(d.value));break;case"select":n.multiple=!!d.multiple,w=d.value,w!=null?Qe(n,!!d.multiple,w,!1):d.defaultValue!=null&&Qe(n,!!d.multiple,d.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=xo)}switch(o){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return fn(r),null;case 6:if(n&&r.stateNode!=null)Lh(n,r,n.memoizedProps,d);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(o=Ar(pa.current),Ar(Si.current),To(r)){if(d=r.stateNode,o=r.memoizedProps,d[xi]=r,(w=d.nodeValue!==o)&&(n=Un,n!==null))switch(n.tag){case 3:wo(d.nodeValue,o,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&wo(d.nodeValue,o,(n.mode&1)!==0)}w&&(r.flags|=4)}else d=(o.nodeType===9?o:o.ownerDocument).createTextNode(d),d[xi]=r,r.stateNode=d}return fn(r),null;case 13:if(yt(Ct),d=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(bt&&jn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Op(),ps(),r.flags|=98560,w=!1;else if(w=To(r),d!==null&&d.dehydrated!==null){if(n===null){if(!w)throw Error(i(318));if(w=r.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(i(317));w[xi]=r}else ps(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;fn(r),w=!1}else fi!==null&&(lu(fi),fi=null),w=!0;if(!w)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(Ct.current&1)!==0?Yt===0&&(Yt=3):du())),r.updateQueue!==null&&(r.flags|=4),fn(r),null);case 4:return vs(),Qc(n,r),n===null&&aa(r.stateNode.containerInfo),fn(r),null;case 10:return Pc(r.type._context),fn(r),null;case 17:return kn(r.type)&&_o(),fn(r),null;case 19:if(yt(Ct),w=r.memoizedState,w===null)return fn(r),null;if(d=(r.flags&128)!==0,D=w.rendering,D===null)if(d)ya(w,!1);else{if(Yt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(D=Fo(n),D!==null){for(r.flags|=128,ya(w,!1),d=D.updateQueue,d!==null&&(r.updateQueue=d,r.flags|=4),r.subtreeFlags=0,d=o,o=r.child;o!==null;)w=o,n=d,w.flags&=14680066,D=w.alternate,D===null?(w.childLanes=0,w.lanes=n,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=D.childLanes,w.lanes=D.lanes,w.child=D.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=D.memoizedProps,w.memoizedState=D.memoizedState,w.updateQueue=D.updateQueue,w.type=D.type,n=D.dependencies,w.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),o=o.sibling;return mt(Ct,Ct.current&1|2),r.child}n=n.sibling}w.tail!==null&&ye()>xs&&(r.flags|=128,d=!0,ya(w,!1),r.lanes=4194304)}else{if(!d)if(n=Fo(D),n!==null){if(r.flags|=128,d=!0,o=n.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),ya(w,!0),w.tail===null&&w.tailMode==="hidden"&&!D.alternate&&!bt)return fn(r),null}else 2*ye()-w.renderingStartTime>xs&&o!==1073741824&&(r.flags|=128,d=!0,ya(w,!1),r.lanes=4194304);w.isBackwards?(D.sibling=r.child,r.child=D):(o=w.last,o!==null?o.sibling=D:r.child=D,w.last=D)}return w.tail!==null?(r=w.tail,w.rendering=r,w.tail=r.sibling,w.renderingStartTime=ye(),r.sibling=null,o=Ct.current,mt(Ct,d?o&1|2:o&1),r):(fn(r),null);case 22:case 23:return uu(),d=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(r.flags|=8192),d&&(r.mode&1)!==0?(qn&1073741824)!==0&&(fn(r),r.subtreeFlags&6&&(r.flags|=8192)):fn(r),null;case 24:return null;case 25:return null}throw Error(i(156,r.tag))}function yb(n,r){switch(bc(r),r.tag){case 1:return kn(r.type)&&_o(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return vs(),yt(Pn),yt(un),Lc(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return Ac(r),null;case 13:if(yt(Ct),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));ps()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return yt(Ct),null;case 4:return vs(),null;case 10:return Pc(r.type._context),null;case 22:case 23:return uu(),null;case 24:return null;default:return null}}var jo=!1,pn=!1,bb=typeof WeakSet=="function"?WeakSet:Set,ke=null;function bs(n,r){var o=n.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(d){At(n,r,d)}else o.current=null}function Zc(n,r,o){try{o()}catch(d){At(n,r,d)}}var Rh=!1;function wb(n,r){if(uc=lo,n=dp(),nc(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var h=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{o.nodeType,w.nodeType}catch{o=null;break e}var D=0,N=-1,j=-1,ne=0,de=0,pe=n,ce=null;t:for(;;){for(var _e;pe!==o||h!==0&&pe.nodeType!==3||(N=D+h),pe!==w||d!==0&&pe.nodeType!==3||(j=D+d),pe.nodeType===3&&(D+=pe.nodeValue.length),(_e=pe.firstChild)!==null;)ce=pe,pe=_e;for(;;){if(pe===n)break t;if(ce===o&&++ne===h&&(N=D),ce===w&&++de===d&&(j=D),(_e=pe.nextSibling)!==null)break;pe=ce,ce=pe.parentNode}pe=_e}o=N===-1||j===-1?null:{start:N,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for(dc={focusedElem:n,selectionRange:o},lo=!1,ke=r;ke!==null;)if(r=ke,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ke=n;else for(;ke!==null;){r=ke;try{var De=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(De!==null){var Re=De.memoizedProps,Nt=De.memoizedState,Q=r.stateNode,q=Q.getSnapshotBeforeUpdate(r.elementType===r.type?Re:pi(r.type,Re),Nt);Q.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var ee=r.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(me){At(r,r.return,me)}if(n=r.sibling,n!==null){n.return=r.return,ke=n;break}ke=r.return}return De=Rh,Rh=!1,De}function ba(n,r,o){var d=r.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var h=d=d.next;do{if((h.tag&n)===n){var w=h.destroy;h.destroy=void 0,w!==void 0&&Zc(r,o,w)}h=h.next}while(h!==d)}}function qo(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&n)===n){var d=o.create;o.destroy=d()}o=o.next}while(o!==r)}}function Jc(n){var r=n.ref;if(r!==null){var o=n.stateNode;n.tag,n=o,typeof r=="function"?r(n):r.current=n}}function Fh(n){var r=n.alternate;r!==null&&(n.alternate=null,Fh(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[xi],delete r[la],delete r[mc],delete r[nb],delete r[ib])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Oh(n){return n.tag===5||n.tag===3||n.tag===4}function Nh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Oh(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function eu(n,r,o){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(n,r):o.insertBefore(n,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(n,o)):(r=o,r.appendChild(n)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=xo));else if(d!==4&&(n=n.child,n!==null))for(eu(n,r,o),n=n.sibling;n!==null;)eu(n,r,o),n=n.sibling}function tu(n,r,o){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(tu(n,r,o),n=n.sibling;n!==null;)tu(n,r,o),n=n.sibling}var sn=null,hi=!1;function sr(n,r,o){for(o=o.child;o!==null;)Ih(n,r,o),o=o.sibling}function Ih(n,r,o){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(zn,o)}catch{}switch(o.tag){case 5:pn||bs(o,r);case 6:var d=sn,h=hi;sn=null,sr(n,r,o),sn=d,hi=h,sn!==null&&(hi?(n=sn,o=o.stateNode,n.nodeType===8?n.parentNode.removeChild(o):n.removeChild(o)):sn.removeChild(o.stateNode));break;case 18:sn!==null&&(hi?(n=sn,o=o.stateNode,n.nodeType===8?hc(n.parentNode,o):n.nodeType===1&&hc(n,o),Qs(n)):hc(sn,o.stateNode));break;case 4:d=sn,h=hi,sn=o.stateNode.containerInfo,hi=!0,sr(n,r,o),sn=d,hi=h;break;case 0:case 11:case 14:case 15:if(!pn&&(d=o.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){h=d=d.next;do{var w=h,D=w.destroy;w=w.tag,D!==void 0&&((w&2)!==0||(w&4)!==0)&&Zc(o,r,D),h=h.next}while(h!==d)}sr(n,r,o);break;case 1:if(!pn&&(bs(o,r),d=o.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=o.memoizedProps,d.state=o.memoizedState,d.componentWillUnmount()}catch(N){At(o,r,N)}sr(n,r,o);break;case 21:sr(n,r,o);break;case 22:o.mode&1?(pn=(d=pn)||o.memoizedState!==null,sr(n,r,o),pn=d):sr(n,r,o);break;default:sr(n,r,o)}}function Bh(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var o=n.stateNode;o===null&&(o=n.stateNode=new bb),r.forEach(function(d){var h=Db.bind(null,n,d);o.has(d)||(o.add(d),d.then(h,h))})}}function mi(n,r){var o=r.deletions;if(o!==null)for(var d=0;d<o.length;d++){var h=o[d];try{var w=n,D=r,N=D;e:for(;N!==null;){switch(N.tag){case 5:sn=N.stateNode,hi=!1;break e;case 3:sn=N.stateNode.containerInfo,hi=!0;break e;case 4:sn=N.stateNode.containerInfo,hi=!0;break e}N=N.return}if(sn===null)throw Error(i(160));Ih(w,D,h),sn=null,hi=!1;var j=h.alternate;j!==null&&(j.return=null),h.return=null}catch(ne){At(h,r,ne)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)zh(r,n),r=r.sibling}function zh(n,r){var o=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(mi(r,n),Ci(n),d&4){try{ba(3,n,n.return),qo(3,n)}catch(Re){At(n,n.return,Re)}try{ba(5,n,n.return)}catch(Re){At(n,n.return,Re)}}break;case 1:mi(r,n),Ci(n),d&512&&o!==null&&bs(o,o.return);break;case 5:if(mi(r,n),Ci(n),d&512&&o!==null&&bs(o,o.return),n.flags&32){var h=n.stateNode;try{Pe(h,"")}catch(Re){At(n,n.return,Re)}}if(d&4&&(h=n.stateNode,h!=null)){var w=n.memoizedProps,D=o!==null?o.memoizedProps:w,N=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{N==="input"&&w.type==="radio"&&w.name!=null&&xe(h,w),Ye(N,D);var ne=Ye(N,w);for(D=0;D<j.length;D+=2){var de=j[D],pe=j[D+1];de==="style"?gt(h,pe):de==="dangerouslySetInnerHTML"?Bt(h,pe):de==="children"?Pe(h,pe):M(h,de,pe,ne)}switch(N){case"input":Me(h,w);break;case"textarea":$e(h,w);break;case"select":var ce=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!w.multiple;var _e=w.value;_e!=null?Qe(h,!!w.multiple,_e,!1):ce!==!!w.multiple&&(w.defaultValue!=null?Qe(h,!!w.multiple,w.defaultValue,!0):Qe(h,!!w.multiple,w.multiple?[]:"",!1))}h[la]=w}catch(Re){At(n,n.return,Re)}}break;case 6:if(mi(r,n),Ci(n),d&4){if(n.stateNode===null)throw Error(i(162));h=n.stateNode,w=n.memoizedProps;try{h.nodeValue=w}catch(Re){At(n,n.return,Re)}}break;case 3:if(mi(r,n),Ci(n),d&4&&o!==null&&o.memoizedState.isDehydrated)try{Qs(r.containerInfo)}catch(Re){At(n,n.return,Re)}break;case 4:mi(r,n),Ci(n);break;case 13:mi(r,n),Ci(n),h=n.child,h.flags&8192&&(w=h.memoizedState!==null,h.stateNode.isHidden=w,!w||h.alternate!==null&&h.alternate.memoizedState!==null||(ru=ye())),d&4&&Bh(n);break;case 22:if(de=o!==null&&o.memoizedState!==null,n.mode&1?(pn=(ne=pn)||de,mi(r,n),pn=ne):mi(r,n),Ci(n),d&8192){if(ne=n.memoizedState!==null,(n.stateNode.isHidden=ne)&&!de&&(n.mode&1)!==0)for(ke=n,de=n.child;de!==null;){for(pe=ke=de;ke!==null;){switch(ce=ke,_e=ce.child,ce.tag){case 0:case 11:case 14:case 15:ba(4,ce,ce.return);break;case 1:bs(ce,ce.return);var De=ce.stateNode;if(typeof De.componentWillUnmount=="function"){d=ce,o=ce.return;try{r=d,De.props=r.memoizedProps,De.state=r.memoizedState,De.componentWillUnmount()}catch(Re){At(d,o,Re)}}break;case 5:bs(ce,ce.return);break;case 22:if(ce.memoizedState!==null){Uh(pe);continue}}_e!==null?(_e.return=ce,ke=_e):Uh(pe)}de=de.sibling}e:for(de=null,pe=n;;){if(pe.tag===5){if(de===null){de=pe;try{h=pe.stateNode,ne?(w=h.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(N=pe.stateNode,j=pe.memoizedProps.style,D=j!=null&&j.hasOwnProperty("display")?j.display:null,N.style.display=We("display",D))}catch(Re){At(n,n.return,Re)}}}else if(pe.tag===6){if(de===null)try{pe.stateNode.nodeValue=ne?"":pe.memoizedProps}catch(Re){At(n,n.return,Re)}}else if((pe.tag!==22&&pe.tag!==23||pe.memoizedState===null||pe===n)&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===n)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===n)break e;de===pe&&(de=null),pe=pe.return}de===pe&&(de=null),pe.sibling.return=pe.return,pe=pe.sibling}}break;case 19:mi(r,n),Ci(n),d&4&&Bh(n);break;case 21:break;default:mi(r,n),Ci(n)}}function Ci(n){var r=n.flags;if(r&2){try{e:{for(var o=n.return;o!==null;){if(Oh(o)){var d=o;break e}o=o.return}throw Error(i(160))}switch(d.tag){case 5:var h=d.stateNode;d.flags&32&&(Pe(h,""),d.flags&=-33);var w=Nh(n);tu(n,w,h);break;case 3:case 4:var D=d.stateNode.containerInfo,N=Nh(n);eu(n,N,D);break;default:throw Error(i(161))}}catch(j){At(n,n.return,j)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function xb(n,r,o){ke=n,Vh(n)}function Vh(n,r,o){for(var d=(n.mode&1)!==0;ke!==null;){var h=ke,w=h.child;if(h.tag===22&&d){var D=h.memoizedState!==null||jo;if(!D){var N=h.alternate,j=N!==null&&N.memoizedState!==null||pn;N=jo;var ne=pn;if(jo=D,(pn=j)&&!ne)for(ke=h;ke!==null;)D=ke,j=D.child,D.tag===22&&D.memoizedState!==null?jh(h):j!==null?(j.return=D,ke=j):jh(h);for(;w!==null;)ke=w,Vh(w),w=w.sibling;ke=h,jo=N,pn=ne}Wh(n)}else(h.subtreeFlags&8772)!==0&&w!==null?(w.return=h,ke=w):Wh(n)}}function Wh(n){for(;ke!==null;){var r=ke;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:pn||qo(5,r);break;case 1:var d=r.stateNode;if(r.flags&4&&!pn)if(o===null)d.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:pi(r.type,o.memoizedProps);d.componentDidUpdate(h,o.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var w=r.updateQueue;w!==null&&Up(r,w,d);break;case 3:var D=r.updateQueue;if(D!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Up(r,D,o)}break;case 5:var N=r.stateNode;if(o===null&&r.flags&4){o=N;var j=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&o.focus();break;case"img":j.src&&(o.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var ne=r.alternate;if(ne!==null){var de=ne.memoizedState;if(de!==null){var pe=de.dehydrated;pe!==null&&Qs(pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}pn||r.flags&512&&Jc(r)}catch(ce){At(r,r.return,ce)}}if(r===n){ke=null;break}if(o=r.sibling,o!==null){o.return=r.return,ke=o;break}ke=r.return}}function Uh(n){for(;ke!==null;){var r=ke;if(r===n){ke=null;break}var o=r.sibling;if(o!==null){o.return=r.return,ke=o;break}ke=r.return}}function jh(n){for(;ke!==null;){var r=ke;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{qo(4,r)}catch(j){At(r,o,j)}break;case 1:var d=r.stateNode;if(typeof d.componentDidMount=="function"){var h=r.return;try{d.componentDidMount()}catch(j){At(r,h,j)}}var w=r.return;try{Jc(r)}catch(j){At(r,w,j)}break;case 5:var D=r.return;try{Jc(r)}catch(j){At(r,D,j)}}}catch(j){At(r,r.return,j)}if(r===n){ke=null;break}var N=r.sibling;if(N!==null){N.return=r.return,ke=N;break}ke=r.return}}var Sb=Math.ceil,Ho=z.ReactCurrentDispatcher,nu=z.ReactCurrentOwner,ti=z.ReactCurrentBatchConfig,et=0,Zt=null,zt=null,an=0,qn=0,ws=er(0),Yt=0,wa=null,Lr=0,$o=0,iu=0,xa=null,Tn=null,ru=0,xs=1/0,zi=null,Yo=!1,su=null,ar=null,Go=!1,or=null,Xo=0,Sa=0,au=null,Ko=-1,Qo=0;function wn(){return(et&6)!==0?ye():Ko!==-1?Ko:Ko=ye()}function lr(n){return(n.mode&1)===0?1:(et&2)!==0&&an!==0?an&-an:sb.transition!==null?(Qo===0&&(Qo=Nf()),Qo):(n=at,n!==0||(n=window.event,n=n===void 0?16:Hf(n.type)),n)}function gi(n,r,o,d){if(50<Sa)throw Sa=0,au=null,Error(i(185));$s(n,o,d),((et&2)===0||n!==Zt)&&(n===Zt&&((et&2)===0&&($o|=o),Yt===4&&cr(n,an)),Dn(n,d),o===1&&et===0&&(r.mode&1)===0&&(xs=ye()+500,Po&&nr()))}function Dn(n,r){var o=n.callbackNode;s1(n,r);var d=so(n,n===Zt?an:0);if(d===0)o!==null&&Le(o),n.callbackNode=null,n.callbackPriority=0;else if(r=d&-d,n.callbackPriority!==r){if(o!=null&&Le(o),r===1)n.tag===0?rb(Hh.bind(null,n)):Ap(Hh.bind(null,n)),eb(function(){(et&6)===0&&nr()}),o=null;else{switch(If(d)){case 1:o=He;break;case 4:o=it;break;case 16:o=Kt;break;case 536870912:o=dt;break;default:o=Kt}o=Jh(o,qh.bind(null,n))}n.callbackPriority=r,n.callbackNode=o}}function qh(n,r){if(Ko=-1,Qo=0,(et&6)!==0)throw Error(i(327));var o=n.callbackNode;if(Ss()&&n.callbackNode!==o)return null;var d=so(n,n===Zt?an:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||r)r=Zo(n,d);else{r=d;var h=et;et|=2;var w=Yh();(Zt!==n||an!==r)&&(zi=null,xs=ye()+500,Fr(n,r));do try{Pb();break}catch(N){$h(n,N)}while(!0);Cc(),Ho.current=w,et=h,zt!==null?r=0:(Zt=null,an=0,r=Yt)}if(r!==0){if(r===2&&(h=Vl(n),h!==0&&(d=h,r=ou(n,h))),r===1)throw o=wa,Fr(n,0),cr(n,d),Dn(n,ye()),o;if(r===6)cr(n,d);else{if(h=n.current.alternate,(d&30)===0&&!_b(h)&&(r=Zo(n,d),r===2&&(w=Vl(n),w!==0&&(d=w,r=ou(n,w))),r===1))throw o=wa,Fr(n,0),cr(n,d),Dn(n,ye()),o;switch(n.finishedWork=h,n.finishedLanes=d,r){case 0:case 1:throw Error(i(345));case 2:Or(n,Tn,zi);break;case 3:if(cr(n,d),(d&130023424)===d&&(r=ru+500-ye(),10<r)){if(so(n,0)!==0)break;if(h=n.suspendedLanes,(h&d)!==d){wn(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=pc(Or.bind(null,n,Tn,zi),r);break}Or(n,Tn,zi);break;case 4:if(cr(n,d),(d&4194240)===d)break;for(r=n.eventTimes,h=-1;0<d;){var D=31-Vn(d);w=1<<D,D=r[D],D>h&&(h=D),d&=~w}if(d=h,d=ye()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Sb(d/1960))-d,10<d){n.timeoutHandle=pc(Or.bind(null,n,Tn,zi),d);break}Or(n,Tn,zi);break;case 5:Or(n,Tn,zi);break;default:throw Error(i(329))}}}return Dn(n,ye()),n.callbackNode===o?qh.bind(null,n):null}function ou(n,r){var o=xa;return n.current.memoizedState.isDehydrated&&(Fr(n,r).flags|=256),n=Zo(n,r),n!==2&&(r=Tn,Tn=o,r!==null&&lu(r)),n}function lu(n){Tn===null?Tn=n:Tn.push.apply(Tn,n)}function _b(n){for(var r=n;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var d=0;d<o.length;d++){var h=o[d],w=h.getSnapshot;h=h.value;try{if(!di(w(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function cr(n,r){for(r&=~iu,r&=~$o,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var o=31-Vn(r),d=1<<o;n[o]=-1,r&=~d}}function Hh(n){if((et&6)!==0)throw Error(i(327));Ss();var r=so(n,0);if((r&1)===0)return Dn(n,ye()),null;var o=Zo(n,r);if(n.tag!==0&&o===2){var d=Vl(n);d!==0&&(r=d,o=ou(n,d))}if(o===1)throw o=wa,Fr(n,0),cr(n,r),Dn(n,ye()),o;if(o===6)throw Error(i(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Or(n,Tn,zi),Dn(n,ye()),null}function cu(n,r){var o=et;et|=1;try{return n(r)}finally{et=o,et===0&&(xs=ye()+500,Po&&nr())}}function Rr(n){or!==null&&or.tag===0&&(et&6)===0&&Ss();var r=et;et|=1;var o=ti.transition,d=at;try{if(ti.transition=null,at=1,n)return n()}finally{at=d,ti.transition=o,et=r,(et&6)===0&&nr()}}function uu(){qn=ws.current,yt(ws)}function Fr(n,r){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;if(o!==-1&&(n.timeoutHandle=-1,J1(o)),zt!==null)for(o=zt.return;o!==null;){var d=o;switch(bc(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&_o();break;case 3:vs(),yt(Pn),yt(un),Lc();break;case 5:Ac(d);break;case 4:vs();break;case 13:yt(Ct);break;case 19:yt(Ct);break;case 10:Pc(d.type._context);break;case 22:case 23:uu()}o=o.return}if(Zt=n,zt=n=ur(n.current,null),an=qn=r,Yt=0,wa=null,iu=$o=Lr=0,Tn=xa=null,Dr!==null){for(r=0;r<Dr.length;r++)if(o=Dr[r],d=o.interleaved,d!==null){o.interleaved=null;var h=d.next,w=o.pending;if(w!==null){var D=w.next;w.next=h,d.next=D}o.pending=d}Dr=null}return n}function $h(n,r){do{var o=zt;try{if(Cc(),Oo.current=zo,No){for(var d=Pt.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}No=!1}if(Mr=0,Qt=$t=Pt=null,ha=!1,ma=0,nu.current=null,o===null||o.return===null){Yt=1,wa=r,zt=null;break}e:{var w=n,D=o.return,N=o,j=r;if(r=an,N.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var ne=j,de=N,pe=de.tag;if((de.mode&1)===0&&(pe===0||pe===11||pe===15)){var ce=de.alternate;ce?(de.updateQueue=ce.updateQueue,de.memoizedState=ce.memoizedState,de.lanes=ce.lanes):(de.updateQueue=null,de.memoizedState=null)}var _e=vh(D);if(_e!==null){_e.flags&=-257,yh(_e,D,N,w,r),_e.mode&1&&gh(w,ne,r),r=_e,j=ne;var De=r.updateQueue;if(De===null){var Re=new Set;Re.add(j),r.updateQueue=Re}else De.add(j);break e}else{if((r&1)===0){gh(w,ne,r),du();break e}j=Error(i(426))}}else if(bt&&N.mode&1){var Nt=vh(D);if(Nt!==null){(Nt.flags&65536)===0&&(Nt.flags|=256),yh(Nt,D,N,w,r),Sc(ys(j,N));break e}}w=j=ys(j,N),Yt!==4&&(Yt=2),xa===null?xa=[w]:xa.push(w),w=D;do{switch(w.tag){case 3:w.flags|=65536,r&=-r,w.lanes|=r;var Q=hh(w,j,r);Wp(w,Q);break e;case 1:N=j;var q=w.type,ee=w.stateNode;if((w.flags&128)===0&&(typeof q.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(ar===null||!ar.has(ee)))){w.flags|=65536,r&=-r,w.lanes|=r;var me=mh(w,N,r);Wp(w,me);break e}}w=w.return}while(w!==null)}Xh(o)}catch(Fe){r=Fe,zt===o&&o!==null&&(zt=o=o.return);continue}break}while(!0)}function Yh(){var n=Ho.current;return Ho.current=zo,n===null?zo:n}function du(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),Zt===null||(Lr&268435455)===0&&($o&268435455)===0||cr(Zt,an)}function Zo(n,r){var o=et;et|=2;var d=Yh();(Zt!==n||an!==r)&&(zi=null,Fr(n,r));do try{Cb();break}catch(h){$h(n,h)}while(!0);if(Cc(),et=o,Ho.current=d,zt!==null)throw Error(i(261));return Zt=null,an=0,Yt}function Cb(){for(;zt!==null;)Gh(zt)}function Pb(){for(;zt!==null&&!Se();)Gh(zt)}function Gh(n){var r=Zh(n.alternate,n,qn);n.memoizedProps=n.pendingProps,r===null?Xh(n):zt=r,nu.current=null}function Xh(n){var r=n;do{var o=r.alternate;if(n=r.return,(r.flags&32768)===0){if(o=vb(o,r,qn),o!==null){zt=o;return}}else{if(o=yb(o,r),o!==null){o.flags&=32767,zt=o;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Yt=6,zt=null;return}}if(r=r.sibling,r!==null){zt=r;return}zt=r=n}while(r!==null);Yt===0&&(Yt=5)}function Or(n,r,o){var d=at,h=ti.transition;try{ti.transition=null,at=1,kb(n,r,o,d)}finally{ti.transition=h,at=d}return null}function kb(n,r,o,d){do Ss();while(or!==null);if((et&6)!==0)throw Error(i(327));o=n.finishedWork;var h=n.finishedLanes;if(o===null)return null;if(n.finishedWork=null,n.finishedLanes=0,o===n.current)throw Error(i(177));n.callbackNode=null,n.callbackPriority=0;var w=o.lanes|o.childLanes;if(a1(n,w),n===Zt&&(zt=Zt=null,an=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Go||(Go=!0,Jh(Kt,function(){return Ss(),null})),w=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||w){w=ti.transition,ti.transition=null;var D=at;at=1;var N=et;et|=4,nu.current=null,wb(n,o),zh(o,n),$1(dc),lo=!!uc,dc=uc=null,n.current=o,xb(o),Te(),et=N,at=D,ti.transition=w}else n.current=o;if(Go&&(Go=!1,or=n,Xo=h),w=n.pendingLanes,w===0&&(ar=null),zl(o.stateNode),Dn(n,ye()),r!==null)for(d=n.onRecoverableError,o=0;o<r.length;o++)h=r[o],d(h.value,{componentStack:h.stack,digest:h.digest});if(Yo)throw Yo=!1,n=su,su=null,n;return(Xo&1)!==0&&n.tag!==0&&Ss(),w=n.pendingLanes,(w&1)!==0?n===au?Sa++:(Sa=0,au=n):Sa=0,nr(),null}function Ss(){if(or!==null){var n=If(Xo),r=ti.transition,o=at;try{if(ti.transition=null,at=16>n?16:n,or===null)var d=!1;else{if(n=or,or=null,Xo=0,(et&6)!==0)throw Error(i(331));var h=et;for(et|=4,ke=n.current;ke!==null;){var w=ke,D=w.child;if((ke.flags&16)!==0){var N=w.deletions;if(N!==null){for(var j=0;j<N.length;j++){var ne=N[j];for(ke=ne;ke!==null;){var de=ke;switch(de.tag){case 0:case 11:case 15:ba(8,de,w)}var pe=de.child;if(pe!==null)pe.return=de,ke=pe;else for(;ke!==null;){de=ke;var ce=de.sibling,_e=de.return;if(Fh(de),de===ne){ke=null;break}if(ce!==null){ce.return=_e,ke=ce;break}ke=_e}}}var De=w.alternate;if(De!==null){var Re=De.child;if(Re!==null){De.child=null;do{var Nt=Re.sibling;Re.sibling=null,Re=Nt}while(Re!==null)}}ke=w}}if((w.subtreeFlags&2064)!==0&&D!==null)D.return=w,ke=D;else e:for(;ke!==null;){if(w=ke,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:ba(9,w,w.return)}var Q=w.sibling;if(Q!==null){Q.return=w.return,ke=Q;break e}ke=w.return}}var q=n.current;for(ke=q;ke!==null;){D=ke;var ee=D.child;if((D.subtreeFlags&2064)!==0&&ee!==null)ee.return=D,ke=ee;else e:for(D=q;ke!==null;){if(N=ke,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:qo(9,N)}}catch(Fe){At(N,N.return,Fe)}if(N===D){ke=null;break e}var me=N.sibling;if(me!==null){me.return=N.return,ke=me;break e}ke=N.return}}if(et=h,nr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(zn,n)}catch{}d=!0}return d}finally{at=o,ti.transition=r}}return!1}function Kh(n,r,o){r=ys(o,r),r=hh(n,r,1),n=rr(n,r,1),r=wn(),n!==null&&($s(n,1,r),Dn(n,r))}function At(n,r,o){if(n.tag===3)Kh(n,n,o);else for(;r!==null;){if(r.tag===3){Kh(r,n,o);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ar===null||!ar.has(d))){n=ys(o,n),n=mh(r,n,1),r=rr(r,n,1),n=wn(),r!==null&&($s(r,1,n),Dn(r,n));break}}r=r.return}}function Eb(n,r,o){var d=n.pingCache;d!==null&&d.delete(r),r=wn(),n.pingedLanes|=n.suspendedLanes&o,Zt===n&&(an&o)===o&&(Yt===4||Yt===3&&(an&130023424)===an&&500>ye()-ru?Fr(n,0):iu|=o),Dn(n,r)}function Qh(n,r){r===0&&((n.mode&1)===0?r=1:(r=ro,ro<<=1,(ro&130023424)===0&&(ro=4194304)));var o=wn();n=Ni(n,r),n!==null&&($s(n,r,o),Dn(n,o))}function Tb(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),Qh(n,o)}function Db(n,r){var o=0;switch(n.tag){case 13:var d=n.stateNode,h=n.memoizedState;h!==null&&(o=h.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(i(314))}d!==null&&d.delete(r),Qh(n,o)}var Zh;Zh=function(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps||Pn.current)En=!0;else{if((n.lanes&o)===0&&(r.flags&128)===0)return En=!1,gb(n,r,o);En=(n.flags&131072)!==0}else En=!1,bt&&(r.flags&1048576)!==0&&Mp(r,Eo,r.index);switch(r.lanes=0,r.tag){case 2:var d=r.type;Uo(n,r),n=r.pendingProps;var h=us(r,un.current);gs(r,o),h=Oc(null,r,d,n,h,o);var w=Nc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,kn(d)?(w=!0,Co(r)):w=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Tc(r),h.updater=Vo,r.stateNode=h,h._reactInternals=r,Uc(r,d,n,o),r=$c(null,r,d,!0,w,o)):(r.tag=0,bt&&w&&yc(r),bn(null,r,h,o),r=r.child),r;case 16:d=r.elementType;e:{switch(Uo(n,r),n=r.pendingProps,h=d._init,d=h(d._payload),r.type=d,h=r.tag=Mb(d),n=pi(d,n),h){case 0:r=Hc(null,r,d,n,o);break e;case 1:r=Ch(null,r,d,n,o);break e;case 11:r=bh(null,r,d,n,o);break e;case 14:r=wh(null,r,d,pi(d.type,n),o);break e}throw Error(i(306,d,""))}return r;case 0:return d=r.type,h=r.pendingProps,h=r.elementType===d?h:pi(d,h),Hc(n,r,d,h,o);case 1:return d=r.type,h=r.pendingProps,h=r.elementType===d?h:pi(d,h),Ch(n,r,d,h,o);case 3:e:{if(Ph(r),n===null)throw Error(i(387));d=r.pendingProps,w=r.memoizedState,h=w.element,Vp(n,r),Ro(r,d,null,o);var D=r.memoizedState;if(d=D.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){h=ys(Error(i(423)),r),r=kh(n,r,d,o,h);break e}else if(d!==h){h=ys(Error(i(424)),r),r=kh(n,r,d,o,h);break e}else for(jn=Ji(r.stateNode.containerInfo.firstChild),Un=r,bt=!0,fi=null,o=Bp(r,null,d,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ps(),d===h){r=Bi(n,r,o);break e}bn(n,r,d,o)}r=r.child}return r;case 5:return jp(r),n===null&&xc(r),d=r.type,h=r.pendingProps,w=n!==null?n.memoizedProps:null,D=h.children,fc(d,h)?D=null:w!==null&&fc(d,w)&&(r.flags|=32),_h(n,r),bn(n,r,D,o),r.child;case 6:return n===null&&xc(r),null;case 13:return Eh(n,r,o);case 4:return Dc(r,r.stateNode.containerInfo),d=r.pendingProps,n===null?r.child=hs(r,null,d,o):bn(n,r,d,o),r.child;case 11:return d=r.type,h=r.pendingProps,h=r.elementType===d?h:pi(d,h),bh(n,r,d,h,o);case 7:return bn(n,r,r.pendingProps,o),r.child;case 8:return bn(n,r,r.pendingProps.children,o),r.child;case 12:return bn(n,r,r.pendingProps.children,o),r.child;case 10:e:{if(d=r.type._context,h=r.pendingProps,w=r.memoizedProps,D=h.value,mt(Ao,d._currentValue),d._currentValue=D,w!==null)if(di(w.value,D)){if(w.children===h.children&&!Pn.current){r=Bi(n,r,o);break e}}else for(w=r.child,w!==null&&(w.return=r);w!==null;){var N=w.dependencies;if(N!==null){D=w.child;for(var j=N.firstContext;j!==null;){if(j.context===d){if(w.tag===1){j=Ii(-1,o&-o),j.tag=2;var ne=w.updateQueue;if(ne!==null){ne=ne.shared;var de=ne.pending;de===null?j.next=j:(j.next=de.next,de.next=j),ne.pending=j}}w.lanes|=o,j=w.alternate,j!==null&&(j.lanes|=o),kc(w.return,o,r),N.lanes|=o;break}j=j.next}}else if(w.tag===10)D=w.type===r.type?null:w.child;else if(w.tag===18){if(D=w.return,D===null)throw Error(i(341));D.lanes|=o,N=D.alternate,N!==null&&(N.lanes|=o),kc(D,o,r),D=w.sibling}else D=w.child;if(D!==null)D.return=w;else for(D=w;D!==null;){if(D===r){D=null;break}if(w=D.sibling,w!==null){w.return=D.return,D=w;break}D=D.return}w=D}bn(n,r,h.children,o),r=r.child}return r;case 9:return h=r.type,d=r.pendingProps.children,gs(r,o),h=Jn(h),d=d(h),r.flags|=1,bn(n,r,d,o),r.child;case 14:return d=r.type,h=pi(d,r.pendingProps),h=pi(d.type,h),wh(n,r,d,h,o);case 15:return xh(n,r,r.type,r.pendingProps,o);case 17:return d=r.type,h=r.pendingProps,h=r.elementType===d?h:pi(d,h),Uo(n,r),r.tag=1,kn(d)?(n=!0,Co(r)):n=!1,gs(r,o),fh(r,d,h),Uc(r,d,h,o),$c(null,r,d,!0,n,o);case 19:return Dh(n,r,o);case 22:return Sh(n,r,o)}throw Error(i(156,r.tag))};function Jh(n,r){return Ae(n,r)}function Ab(n,r,o,d){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(n,r,o,d){return new Ab(n,r,o,d)}function fu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Mb(n){if(typeof n=="function")return fu(n)?1:0;if(n!=null){if(n=n.$$typeof,n===he)return 11;if(n===u)return 14}return 2}function ur(n,r){var o=n.alternate;return o===null?(o=ni(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&14680064,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o}function Jo(n,r,o,d,h,w){var D=2;if(d=n,typeof n=="function")fu(n)&&(D=1);else if(typeof n=="string")D=5;else e:switch(n){case te:return Nr(o.children,h,w,r);case Z:D=8,h|=8;break;case $:return n=ni(12,o,r,h|2),n.elementType=$,n.lanes=w,n;case we:return n=ni(13,o,r,h),n.elementType=we,n.lanes=w,n;case ge:return n=ni(19,o,r,h),n.elementType=ge,n.lanes=w,n;case y:return el(o,h,w,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case re:D=10;break e;case fe:D=9;break e;case he:D=11;break e;case u:D=14;break e;case v:D=16,d=null;break e}throw Error(i(130,n==null?n:typeof n,""))}return r=ni(D,o,r,h),r.elementType=n,r.type=d,r.lanes=w,r}function Nr(n,r,o,d){return n=ni(7,n,d,r),n.lanes=o,n}function el(n,r,o,d){return n=ni(22,n,d,r),n.elementType=y,n.lanes=o,n.stateNode={isHidden:!1},n}function pu(n,r,o){return n=ni(6,n,null,r),n.lanes=o,n}function hu(n,r,o){return r=ni(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Lb(n,r,o,d,h){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wl(0),this.expirationTimes=Wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wl(0),this.identifierPrefix=d,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function mu(n,r,o,d,h,w,D,N,j){return n=new Lb(n,r,o,N,j),r===1?(r=1,w===!0&&(r|=8)):r=0,w=ni(3,null,null,r),n.current=w,w.stateNode=n,w.memoizedState={element:d,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tc(w),n}function Rb(n,r,o){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:d==null?null:""+d,children:n,containerInfo:r,implementation:o}}function em(n){if(!n)return tr;n=n._reactInternals;e:{if(ut(n)!==n||n.tag!==1)throw Error(i(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(kn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(i(171))}if(n.tag===1){var o=n.type;if(kn(o))return Tp(n,o,r)}return r}function tm(n,r,o,d,h,w,D,N,j){return n=mu(o,d,!0,n,h,w,D,N,j),n.context=em(null),o=n.current,d=wn(),h=lr(o),w=Ii(d,h),w.callback=r??null,rr(o,w,h),n.current.lanes=h,$s(n,h,d),Dn(n,d),n}function tl(n,r,o,d){var h=r.current,w=wn(),D=lr(h);return o=em(o),r.context===null?r.context=o:r.pendingContext=o,r=Ii(w,D),r.payload={element:n},d=d===void 0?null:d,d!==null&&(r.callback=d),n=rr(h,r,D),n!==null&&(gi(n,h,D,w),Lo(n,h,D)),D}function nl(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function nm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function gu(n,r){nm(n,r),(n=n.alternate)&&nm(n,r)}function Fb(){return null}var im=typeof reportError=="function"?reportError:function(n){console.error(n)};function vu(n){this._internalRoot=n}il.prototype.render=vu.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));tl(n,r,null,null)},il.prototype.unmount=vu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Rr(function(){tl(null,n,null,null)}),r[Li]=null}};function il(n){this._internalRoot=n}il.prototype.unstable_scheduleHydration=function(n){if(n){var r=Vf();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Ki.length&&r!==0&&r<Ki[o].priority;o++);Ki.splice(o,0,n),o===0&&jf(n)}};function yu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function rl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function rm(){}function Ob(n,r,o,d,h){if(h){if(typeof d=="function"){var w=d;d=function(){var ne=nl(D);w.call(ne)}}var D=tm(r,d,n,0,null,!1,!1,"",rm);return n._reactRootContainer=D,n[Li]=D.current,aa(n.nodeType===8?n.parentNode:n),Rr(),D}for(;h=n.lastChild;)n.removeChild(h);if(typeof d=="function"){var N=d;d=function(){var ne=nl(j);N.call(ne)}}var j=mu(n,0,!1,null,null,!1,!1,"",rm);return n._reactRootContainer=j,n[Li]=j.current,aa(n.nodeType===8?n.parentNode:n),Rr(function(){tl(r,j,o,d)}),j}function sl(n,r,o,d,h){var w=o._reactRootContainer;if(w){var D=w;if(typeof h=="function"){var N=h;h=function(){var j=nl(D);N.call(j)}}tl(r,D,n,h)}else D=Ob(o,r,n,h,d);return nl(D)}Bf=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var o=Hs(r.pendingLanes);o!==0&&(Ul(r,o|1),Dn(r,ye()),(et&6)===0&&(xs=ye()+500,nr()))}break;case 13:Rr(function(){var d=Ni(n,1);if(d!==null){var h=wn();gi(d,n,1,h)}}),gu(n,1)}},jl=function(n){if(n.tag===13){var r=Ni(n,134217728);if(r!==null){var o=wn();gi(r,n,134217728,o)}gu(n,134217728)}},zf=function(n){if(n.tag===13){var r=lr(n),o=Ni(n,r);if(o!==null){var d=wn();gi(o,n,r,d)}gu(n,r)}},Vf=function(){return at},Wf=function(n,r){var o=at;try{return at=n,r()}finally{at=o}},qt=function(n,r,o){switch(r){case"input":if(Me(n,o),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var d=o[r];if(d!==n&&d.form===n.form){var h=So(d);if(!h)throw Error(i(90));K(d),Me(d,h)}}}break;case"textarea":$e(n,o);break;case"select":r=o.value,r!=null&&Qe(n,!!o.multiple,r,!1)}},Bn=cu,ui=Rr;var Nb={usingClientEntryPoint:!1,Events:[ca,ls,So,ht,Mi,cu]},_a={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ib={bundleType:_a.bundleType,version:_a.version,rendererPackageName:_a.rendererPackageName,rendererConfig:_a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=oe(n),n===null?null:n.stateNode},findFiberByHostInstance:_a.findFiberByHostInstance||Fb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{zn=al.inject(Ib),yn=al}catch{}}return An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nb,An.createPortal=function(n,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yu(r))throw Error(i(200));return Rb(n,r,null,o)},An.createRoot=function(n,r){if(!yu(n))throw Error(i(299));var o=!1,d="",h=im;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=mu(n,1,!1,null,null,o,!1,d,h),n[Li]=r.current,aa(n.nodeType===8?n.parentNode:n),new vu(r)},An.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=oe(r),n=n===null?null:n.stateNode,n},An.flushSync=function(n){return Rr(n)},An.hydrate=function(n,r,o){if(!rl(r))throw Error(i(200));return sl(null,n,r,!0,o)},An.hydrateRoot=function(n,r,o){if(!yu(n))throw Error(i(405));var d=o!=null&&o.hydratedSources||null,h=!1,w="",D=im;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(w=o.identifierPrefix),o.onRecoverableError!==void 0&&(D=o.onRecoverableError)),r=tm(r,null,n,1,o??null,h,!1,w,D),n[Li]=r.current,aa(n),d)for(n=0;n<d.length;n++)o=d[n],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new il(r)},An.render=function(n,r,o){if(!rl(r))throw Error(i(200));return sl(null,n,r,!1,o)},An.unmountComponentAtNode=function(n){if(!rl(n))throw Error(i(40));return n._reactRootContainer?(Rr(function(){sl(null,null,n,!1,function(){n._reactRootContainer=null,n[Li]=null})}),!0):!1},An.unstable_batchedUpdates=cu,An.unstable_renderSubtreeIntoContainer=function(n,r,o,d){if(!rl(o))throw Error(i(200));if(n==null||n._reactInternals===void 0)throw Error(i(38));return sl(n,r,o,!1,d)},An.version="18.3.1-next-f1338f8080-20240426",An}var fm;function Yb(){if(fm)return xu.exports;fm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xu.exports=$b(),xu.exports}var pm;function Gb(){if(pm)return ol;pm=1;var t=Yb();return ol.createRoot=t.createRoot,ol.hydrateRoot=t.hydrateRoot,ol}var bv=Gb();const Id=vv(bv);function Ma(t){let e=t[0],i=t[1],s=t[2];return Math.sqrt(e*e+i*i+s*s)}function Qu(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Xb(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t}function hm(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function mm(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function Kb(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function Qb(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function Cu(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Zb(t,e){let i=e[0]-t[0],s=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(i*i+s*s+a*a)}function Jb(t,e){let i=e[0]-t[0],s=e[1]-t[1],a=e[2]-t[2];return i*i+s*s+a*a}function gm(t){let e=t[0],i=t[1],s=t[2];return e*e+i*i+s*s}function ew(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function tw(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Zu(t,e){let i=e[0],s=e[1],a=e[2],l=i*i+s*s+a*a;return l>0&&(l=1/Math.sqrt(l)),t[0]=e[0]*l,t[1]=e[1]*l,t[2]=e[2]*l,t}function wv(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function vm(t,e,i){let s=e[0],a=e[1],l=e[2],c=i[0],f=i[1],p=i[2];return t[0]=a*p-l*f,t[1]=l*c-s*p,t[2]=s*f-a*c,t}function nw(t,e,i,s){let a=e[0],l=e[1],c=e[2];return t[0]=a+s*(i[0]-a),t[1]=l+s*(i[1]-l),t[2]=c+s*(i[2]-c),t}function iw(t,e,i,s,a){const l=Math.exp(-s*a);let c=e[0],f=e[1],p=e[2];return t[0]=i[0]+(c-i[0])*l,t[1]=i[1]+(f-i[1])*l,t[2]=i[2]+(p-i[2])*l,t}function rw(t,e,i){let s=e[0],a=e[1],l=e[2],c=i[3]*s+i[7]*a+i[11]*l+i[15];return c=c||1,t[0]=(i[0]*s+i[4]*a+i[8]*l+i[12])/c,t[1]=(i[1]*s+i[5]*a+i[9]*l+i[13])/c,t[2]=(i[2]*s+i[6]*a+i[10]*l+i[14])/c,t}function sw(t,e,i){let s=e[0],a=e[1],l=e[2],c=i[3]*s+i[7]*a+i[11]*l+i[15];return c=c||1,t[0]=(i[0]*s+i[4]*a+i[8]*l)/c,t[1]=(i[1]*s+i[5]*a+i[9]*l)/c,t[2]=(i[2]*s+i[6]*a+i[10]*l)/c,t}function aw(t,e,i){let s=e[0],a=e[1],l=e[2];return t[0]=s*i[0]+a*i[3]+l*i[6],t[1]=s*i[1]+a*i[4]+l*i[7],t[2]=s*i[2]+a*i[5]+l*i[8],t}function ow(t,e,i){let s=e[0],a=e[1],l=e[2],c=i[0],f=i[1],p=i[2],m=i[3],g=f*l-p*a,_=p*s-c*l,C=c*a-f*s,E=f*C-p*_,A=p*g-c*C,T=c*_-f*g,L=m*2;return g*=L,_*=L,C*=L,E*=2,A*=2,T*=2,t[0]=s+g+E,t[1]=a+_+A,t[2]=l+C+T,t}const lw=(function(){const t=[0,0,0],e=[0,0,0];return function(i,s){Qu(t,i),Qu(e,s),Zu(t,t),Zu(e,e);let a=wv(t,e);return a>1?0:a<-1?Math.PI:Math.acos(a)}})();function cw(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}class bi extends Array{constructor(e=0,i=e,s=e){return super(e,i,s),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,i=e,s=e){return e.length?this.copy(e):(Xb(this,e,i,s),this)}copy(e){return Qu(this,e),this}add(e,i){return i?hm(this,e,i):hm(this,this,e),this}sub(e,i){return i?mm(this,e,i):mm(this,this,e),this}multiply(e){return e.length?Kb(this,this,e):Cu(this,this,e),this}divide(e){return e.length?Qb(this,this,e):Cu(this,this,1/e),this}inverse(e=this){return tw(this,e),this}len(){return Ma(this)}distance(e){return e?Zb(this,e):Ma(this)}squaredLen(){return gm(this)}squaredDistance(e){return e?Jb(this,e):gm(this)}negate(e=this){return ew(this,e),this}cross(e,i){return i?vm(this,e,i):vm(this,this,e),this}scale(e){return Cu(this,this,e),this}normalize(){return Zu(this,this),this}dot(e){return wv(this,e)}equals(e){return cw(this,e)}applyMatrix3(e){return aw(this,this,e),this}applyMatrix4(e){return rw(this,this,e),this}scaleRotateMatrix4(e){return sw(this,this,e),this}applyQuaternion(e){return ow(this,this,e),this}angle(e){return lw(this,e)}lerp(e,i){return nw(this,this,e,i),this}smoothLerp(e,i,s){return iw(this,this,e,i,s),this}clone(){return new bi(this[0],this[1],this[2])}fromArray(e,i=0){return this[0]=e[i],this[1]=e[i+1],this[2]=e[i+2],this}toArray(e=[],i=0){return e[i]=this[0],e[i+1]=this[1],e[i+2]=this[2],e}transformDirection(e){const i=this[0],s=this[1],a=this[2];return this[0]=e[0]*i+e[4]*s+e[8]*a,this[1]=e[1]*i+e[5]*s+e[9]*a,this[2]=e[2]*i+e[6]*s+e[10]*a,this.normalize()}}const ym=new bi;let uw=1,dw=1,bm=!1;class fw{constructor(e,i={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=i,this.id=uw++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let s in i)this.addAttribute(s,i[s])}addAttribute(e,i){if(this.attributes[e]=i,i.id=dw++,i.size=i.size||1,i.type=i.type||(i.data.constructor===Float32Array?this.gl.FLOAT:i.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),i.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,i.normalized=i.normalized||!1,i.stride=i.stride||0,i.offset=i.offset||0,i.count=i.count||(i.stride?i.data.byteLength/i.stride:i.data.length/i.size),i.divisor=i.instanced||0,i.needsUpdate=!1,i.usage=i.usage||this.gl.STATIC_DRAW,i.buffer||this.updateAttribute(i),i.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==i.count*i.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,i.count*i.divisor);this.instancedCount=i.count*i.divisor}else e==="index"?this.drawRange.count=i.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,i.count))}updateAttribute(e){const i=!e.buffer;i&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),i?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,i){this.drawRange.start=e,this.drawRange.count=i}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((i,{name:s,type:a})=>{if(!this.attributes[s]){console.warn(`active attribute ${s} not being supplied`);return}const l=this.attributes[s];this.gl.bindBuffer(l.target,l.buffer),this.glState.boundBuffer=l.buffer;let c=1;a===35674&&(c=2),a===35675&&(c=3),a===35676&&(c=4);const f=l.size/c,p=c===1?0:c*c*4,m=c===1?0:c*4;for(let g=0;g<c;g++)this.gl.vertexAttribPointer(i+g,f,l.type,l.normalized,l.stride+p,l.offset+g*m),this.gl.enableVertexAttribArray(i+g),this.gl.renderer.vertexAttribDivisor(i+g,l.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:i=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((a,{name:l})=>{const c=this.attributes[l];c.needsUpdate&&this.updateAttribute(c)});let s=2;this.attributes.index?.type===this.gl.UNSIGNED_INT&&(s=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(i,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*s,this.instancedCount):this.gl.renderer.drawArraysInstanced(i,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(i,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*s):this.gl.drawArrays(i,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!bm)return console.warn("No position buffer data found to compute bounds"),bm=!0}computeBoundingBox(e){e||(e=this.getPosition());const i=e.data,s=e.size;this.bounds||(this.bounds={min:new bi,max:new bi,center:new bi,scale:new bi,radius:1/0});const a=this.bounds.min,l=this.bounds.max,c=this.bounds.center,f=this.bounds.scale;a.set(1/0),l.set(-1/0);for(let p=0,m=i.length;p<m;p+=s){const g=i[p],_=i[p+1],C=i[p+2];a.x=Math.min(g,a.x),a.y=Math.min(_,a.y),a.z=Math.min(C,a.z),l.x=Math.max(g,l.x),l.y=Math.max(_,l.y),l.z=Math.max(C,l.z)}f.sub(l,a),c.add(a,l).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const i=e.data,s=e.size;this.bounds||this.computeBoundingBox(e);let a=0;for(let l=0,c=i.length;l<c;l+=s)ym.fromArray(i,l),a=Math.max(a,this.bounds.center.squaredDistance(ym));this.bounds.radius=Math.sqrt(a)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let pw=1;const wm={};class hw{constructor(e,{vertex:i,fragment:s,uniforms:a={},transparent:l=!1,cullFace:c=e.BACK,frontFace:f=e.CCW,depthTest:p=!0,depthWrite:m=!0,depthFunc:g=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=a,this.id=pw++,i||console.warn("vertex shader not supplied"),s||console.warn("fragment shader not supplied"),this.transparent=l,this.cullFace=c,this.frontFace=f,this.depthTest=p,this.depthWrite=m,this.depthFunc=g,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:i,fragment:s})}setShaders({vertex:e,fragment:i}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${xm(e)}`)),i&&(this.gl.shaderSource(this.fragmentShader,i),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${xm(i)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let c=0;c<s;c++){let f=this.gl.getActiveUniform(this.program,c);this.uniformLocations.set(f,this.gl.getUniformLocation(this.program,f.name));const p=f.name.match(/(\w+)/g);f.uniformName=p[0],f.nameComponents=p.slice(1)}this.attributeLocations=new Map;const a=[],l=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let c=0;c<l;c++){const f=this.gl.getActiveAttrib(this.program,c),p=this.gl.getAttribLocation(this.program,f.name);p!==-1&&(a[p]=f.name,this.attributeLocations.set(f,p))}this.attributeOrder=a.join("")}setBlendFunc(e,i,s,a){this.blendFunc.src=e,this.blendFunc.dst=i,this.blendFunc.srcAlpha=s,this.blendFunc.dstAlpha=a,e&&(this.transparent=!0)}setBlendEquation(e,i){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=i}setStencilFunc(e,i,s){this.stencilRef=i,this.stencilFunc.func=e,this.stencilFunc.ref=i,this.stencilFunc.mask=s}setStencilOp(e,i,s){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=i,this.stencilOp.depthPass=s}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let i=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((a,l)=>{let c=this.uniforms[l.uniformName];for(const f of l.nameComponents){if(!c)break;if(f in c)c=c[f];else{if(Array.isArray(c.value))break;c=void 0;break}}if(!c)return Sm(`Active uniform ${l.name} has not been supplied`);if(c&&c.value===void 0)return Sm(`${l.name} uniform is missing a value parameter`);if(c.value.texture)return i=i+1,c.value.update(i),Pu(this.gl,l.type,a,i);if(c.value.length&&c.value[0].texture){const f=[];return c.value.forEach(p=>{i=i+1,p.update(i),f.push(i)}),Pu(this.gl,l.type,a,f)}Pu(this.gl,l.type,a,c.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Pu(t,e,i,s){s=s.length?mw(s):s;const a=t.renderer.state.uniformLocations.get(i);if(s.length)if(a===void 0||a.length!==s.length)t.renderer.state.uniformLocations.set(i,s.slice(0));else{if(gw(a,s))return;a.set?a.set(s):vw(a,s),t.renderer.state.uniformLocations.set(i,a)}else{if(a===s)return;t.renderer.state.uniformLocations.set(i,s)}switch(e){case 5126:return s.length?t.uniform1fv(i,s):t.uniform1f(i,s);case 35664:return t.uniform2fv(i,s);case 35665:return t.uniform3fv(i,s);case 35666:return t.uniform4fv(i,s);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return s.length?t.uniform1iv(i,s):t.uniform1i(i,s);case 35671:case 35667:return t.uniform2iv(i,s);case 35672:case 35668:return t.uniform3iv(i,s);case 35673:case 35669:return t.uniform4iv(i,s);case 35674:return t.uniformMatrix2fv(i,!1,s);case 35675:return t.uniformMatrix3fv(i,!1,s);case 35676:return t.uniformMatrix4fv(i,!1,s)}}function xm(t){let e=t.split(`
`);for(let i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join(`
`)}function mw(t){const e=t.length,i=t[0].length;if(i===void 0)return t;const s=e*i;let a=wm[s];a||(wm[s]=a=new Float32Array(s));for(let l=0;l<e;l++)a.set(t[l],l*i);return a}function gw(t,e){if(t.length!==e.length)return!1;for(let i=0,s=t.length;i<s;i++)if(t[i]!==e[i])return!1;return!0}function vw(t,e){for(let i=0,s=t.length;i<s;i++)t[i]=e[i]}let ku=0;function Sm(t){ku>100||(console.warn(t),ku++,ku>100&&console.warn("More than 100 program warnings - stopping logs."))}const Eu=new bi;let yw=1;class bw{constructor({canvas:e=document.createElement("canvas"),width:i=300,height:s=150,dpr:a=1,alpha:l=!1,depth:c=!0,stencil:f=!1,antialias:p=!1,premultipliedAlpha:m=!1,preserveDrawingBuffer:g=!1,powerPreference:_="default",autoClear:C=!0,webgl:E=2}={}){const A={alpha:l,depth:c,stencil:f,antialias:p,premultipliedAlpha:m,preserveDrawingBuffer:g,powerPreference:_};this.dpr=a,this.alpha=l,this.color=!0,this.depth=c,this.stencil=f,this.premultipliedAlpha=m,this.autoClear=C,this.id=yw++,E===2&&(this.gl=e.getContext("webgl2",A)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",A)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(i,s),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,i){this.width=e,this.height=i,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=i*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:i+"px"})}setViewport(e,i,s=0,a=0){this.state.viewport.width===e&&this.state.viewport.height===i||(this.state.viewport.width=e,this.state.viewport.height=i,this.state.viewport.x=s,this.state.viewport.y=a,this.gl.viewport(s,a,e,i))}setScissor(e,i,s=0,a=0){this.gl.scissor(s,a,e,i)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,i,s,a){this.state.blendFunc.src===e&&this.state.blendFunc.dst===i&&this.state.blendFunc.srcAlpha===s&&this.state.blendFunc.dstAlpha===a||(this.state.blendFunc.src=e,this.state.blendFunc.dst=i,this.state.blendFunc.srcAlpha=s,this.state.blendFunc.dstAlpha=a,s!==void 0?this.gl.blendFuncSeparate(e,i,s,a):this.gl.blendFunc(e,i))}setBlendEquation(e,i){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===i)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=i,i!==void 0?this.gl.blendEquationSeparate(e,i):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,i,s){this.state.stencilFunc===e&&this.state.stencilRef===i&&this.state.stencilFuncMask===s||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=i||0,this.state.stencilFuncMask=s||0,this.gl.stencilFunc(e||this.gl.ALWAYS,i||0,s||0))}setStencilOp(e,i,s){this.state.stencilFail===e&&this.state.stencilDepthFail===i&&this.state.stencilDepthPass===s||(this.state.stencilFail=e,this.state.stencilDepthFail=i,this.state.stencilDepthPass=s,this.gl.stencilOp(e,i,s))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:i=null}={}){this.state.framebuffer!==i&&(this.state.framebuffer=i,this.gl.bindFramebuffer(e,i))}getExtension(e,i,s){return i&&this.gl[i]?this.gl[i].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),i?this.extensions[e]?this.extensions[e][s].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,i){return e.renderOrder!==i.renderOrder?e.renderOrder-i.renderOrder:e.program.id!==i.program.id?e.program.id-i.program.id:e.zDepth!==i.zDepth?e.zDepth-i.zDepth:i.id-e.id}sortTransparent(e,i){return e.renderOrder!==i.renderOrder?e.renderOrder-i.renderOrder:e.zDepth!==i.zDepth?i.zDepth-e.zDepth:i.id-e.id}sortUI(e,i){return e.renderOrder!==i.renderOrder?e.renderOrder-i.renderOrder:e.program.id!==i.program.id?e.program.id-i.program.id:i.id-e.id}getRenderList({scene:e,camera:i,frustumCull:s,sort:a}){let l=[];if(i&&s&&i.updateFrustum(),e.traverse(c=>{if(!c.visible)return!0;c.draw&&(s&&c.frustumCulled&&i&&!i.frustumIntersectsMesh(c)||l.push(c))}),a){const c=[],f=[],p=[];l.forEach(m=>{m.program.transparent?m.program.depthTest?f.push(m):p.push(m):c.push(m),m.zDepth=0,!(m.renderOrder!==0||!m.program.depthTest||!i)&&(m.worldMatrix.getTranslation(Eu),Eu.applyMatrix4(i.projectionViewMatrix),m.zDepth=Eu.z)}),c.sort(this.sortOpaque),f.sort(this.sortTransparent),p.sort(this.sortUI),l=c.concat(f,p)}return l}render({scene:e,camera:i,target:s=null,update:a=!0,sort:l=!0,frustumCull:c=!0,clear:f}){s===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(s),this.setViewport(s.width,s.height)),(f||this.autoClear&&f!==!1)&&(this.depth&&(!s||s.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!s||s.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),a&&e.updateMatrixWorld(),i&&i.updateMatrixWorld(),this.getRenderList({scene:e,camera:i,frustumCull:c,sort:l}).forEach(m=>{m.draw({camera:i})})}}function ww(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function xw(t,e,i,s,a){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t}function Sw(t,e){let i=e[0],s=e[1],a=e[2],l=e[3],c=i*i+s*s+a*a+l*l;return c>0&&(c=1/Math.sqrt(c)),t[0]=i*c,t[1]=s*c,t[2]=a*c,t[3]=l*c,t}function _w(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Cw(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Pw(t,e,i){i=i*.5;let s=Math.sin(i);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(i),t}function _m(t,e,i){let s=e[0],a=e[1],l=e[2],c=e[3],f=i[0],p=i[1],m=i[2],g=i[3];return t[0]=s*g+c*f+a*m-l*p,t[1]=a*g+c*p+l*f-s*m,t[2]=l*g+c*m+s*p-a*f,t[3]=c*g-s*f-a*p-l*m,t}function kw(t,e,i){i*=.5;let s=e[0],a=e[1],l=e[2],c=e[3],f=Math.sin(i),p=Math.cos(i);return t[0]=s*p+c*f,t[1]=a*p+l*f,t[2]=l*p-a*f,t[3]=c*p-s*f,t}function Ew(t,e,i){i*=.5;let s=e[0],a=e[1],l=e[2],c=e[3],f=Math.sin(i),p=Math.cos(i);return t[0]=s*p-l*f,t[1]=a*p+c*f,t[2]=l*p+s*f,t[3]=c*p-a*f,t}function Tw(t,e,i){i*=.5;let s=e[0],a=e[1],l=e[2],c=e[3],f=Math.sin(i),p=Math.cos(i);return t[0]=s*p+a*f,t[1]=a*p-s*f,t[2]=l*p+c*f,t[3]=c*p-l*f,t}function Dw(t,e,i,s){let a=e[0],l=e[1],c=e[2],f=e[3],p=i[0],m=i[1],g=i[2],_=i[3],C,E,A,T,L;return E=a*p+l*m+c*g+f*_,E<0&&(E=-E,p=-p,m=-m,g=-g,_=-_),1-E>1e-6?(C=Math.acos(E),A=Math.sin(C),T=Math.sin((1-s)*C)/A,L=Math.sin(s*C)/A):(T=1-s,L=s),t[0]=T*a+L*p,t[1]=T*l+L*m,t[2]=T*c+L*g,t[3]=T*f+L*_,t}function Aw(t,e){let i=e[0],s=e[1],a=e[2],l=e[3],c=i*i+s*s+a*a+l*l,f=c?1/c:0;return t[0]=-i*f,t[1]=-s*f,t[2]=-a*f,t[3]=l*f,t}function Mw(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Lw(t,e){let i=e[0]+e[4]+e[8],s;if(i>0)s=Math.sqrt(i+1),t[3]=.5*s,s=.5/s,t[0]=(e[5]-e[7])*s,t[1]=(e[6]-e[2])*s,t[2]=(e[1]-e[3])*s;else{let a=0;e[4]>e[0]&&(a=1),e[8]>e[a*3+a]&&(a=2);let l=(a+1)%3,c=(a+2)%3;s=Math.sqrt(e[a*3+a]-e[l*3+l]-e[c*3+c]+1),t[a]=.5*s,s=.5/s,t[3]=(e[l*3+c]-e[c*3+l])*s,t[l]=(e[l*3+a]+e[a*3+l])*s,t[c]=(e[c*3+a]+e[a*3+c])*s}return t}function Rw(t,e,i="YXZ"){let s=Math.sin(e[0]*.5),a=Math.cos(e[0]*.5),l=Math.sin(e[1]*.5),c=Math.cos(e[1]*.5),f=Math.sin(e[2]*.5),p=Math.cos(e[2]*.5);return i==="XYZ"?(t[0]=s*c*p+a*l*f,t[1]=a*l*p-s*c*f,t[2]=a*c*f+s*l*p,t[3]=a*c*p-s*l*f):i==="YXZ"?(t[0]=s*c*p+a*l*f,t[1]=a*l*p-s*c*f,t[2]=a*c*f-s*l*p,t[3]=a*c*p+s*l*f):i==="ZXY"?(t[0]=s*c*p-a*l*f,t[1]=a*l*p+s*c*f,t[2]=a*c*f+s*l*p,t[3]=a*c*p-s*l*f):i==="ZYX"?(t[0]=s*c*p-a*l*f,t[1]=a*l*p+s*c*f,t[2]=a*c*f-s*l*p,t[3]=a*c*p+s*l*f):i==="YZX"?(t[0]=s*c*p+a*l*f,t[1]=a*l*p+s*c*f,t[2]=a*c*f-s*l*p,t[3]=a*c*p-s*l*f):i==="XZY"&&(t[0]=s*c*p-a*l*f,t[1]=a*l*p-s*c*f,t[2]=a*c*f+s*l*p,t[3]=a*c*p+s*l*f),t}const Fw=ww,Ow=xw,Nw=_w,Iw=Sw;class Bw extends Array{constructor(e=0,i=0,s=0,a=1){super(e,i,s,a),this.onChange=()=>{},this._target=this;const l=["0","1","2","3"];return new Proxy(this,{set(c,f){const p=Reflect.set(...arguments);return p&&l.includes(f)&&c.onChange(),p}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return Cw(this._target),this.onChange(),this}set(e,i,s,a){return e.length?this.copy(e):(Ow(this._target,e,i,s,a),this.onChange(),this)}rotateX(e){return kw(this._target,this._target,e),this.onChange(),this}rotateY(e){return Ew(this._target,this._target,e),this.onChange(),this}rotateZ(e){return Tw(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return Aw(this._target,e),this.onChange(),this}conjugate(e=this._target){return Mw(this._target,e),this.onChange(),this}copy(e){return Fw(this._target,e),this.onChange(),this}normalize(e=this._target){return Iw(this._target,e),this.onChange(),this}multiply(e,i){return i?_m(this._target,e,i):_m(this._target,this._target,e),this.onChange(),this}dot(e){return Nw(this._target,e)}fromMatrix3(e){return Lw(this._target,e),this.onChange(),this}fromEuler(e,i){return Rw(this._target,e,e.order),i||this.onChange(),this}fromAxisAngle(e,i){return Pw(this._target,e,i),this.onChange(),this}slerp(e,i){return Dw(this._target,this._target,e,i),this.onChange(),this}fromArray(e,i=0){return this._target[0]=e[i],this._target[1]=e[i+1],this._target[2]=e[i+2],this._target[3]=e[i+3],this.onChange(),this}toArray(e=[],i=0){return e[i]=this[0],e[i+1]=this[1],e[i+2]=this[2],e[i+3]=this[3],e}}const zw=1e-6;function Vw(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ww(t,e,i,s,a,l,c,f,p,m,g,_,C,E,A,T,L){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t[4]=l,t[5]=c,t[6]=f,t[7]=p,t[8]=m,t[9]=g,t[10]=_,t[11]=C,t[12]=E,t[13]=A,t[14]=T,t[15]=L,t}function Uw(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function jw(t,e){let i=e[0],s=e[1],a=e[2],l=e[3],c=e[4],f=e[5],p=e[6],m=e[7],g=e[8],_=e[9],C=e[10],E=e[11],A=e[12],T=e[13],L=e[14],F=e[15],U=i*f-s*c,M=i*p-a*c,z=i*m-l*c,I=s*p-a*f,G=s*m-l*f,te=a*m-l*p,Z=g*T-_*A,$=g*L-C*A,re=g*F-E*A,fe=_*L-C*T,he=_*F-E*T,we=C*F-E*L,ge=U*we-M*he+z*fe+I*re-G*$+te*Z;return ge?(ge=1/ge,t[0]=(f*we-p*he+m*fe)*ge,t[1]=(a*he-s*we-l*fe)*ge,t[2]=(T*te-L*G+F*I)*ge,t[3]=(C*G-_*te-E*I)*ge,t[4]=(p*re-c*we-m*$)*ge,t[5]=(i*we-a*re+l*$)*ge,t[6]=(L*z-A*te-F*M)*ge,t[7]=(g*te-C*z+E*M)*ge,t[8]=(c*he-f*re+m*Z)*ge,t[9]=(s*re-i*he-l*Z)*ge,t[10]=(A*G-T*z+F*U)*ge,t[11]=(_*z-g*G-E*U)*ge,t[12]=(f*$-c*fe-p*Z)*ge,t[13]=(i*fe-s*$+a*Z)*ge,t[14]=(T*M-A*I-L*U)*ge,t[15]=(g*I-_*M+C*U)*ge,t):null}function xv(t){let e=t[0],i=t[1],s=t[2],a=t[3],l=t[4],c=t[5],f=t[6],p=t[7],m=t[8],g=t[9],_=t[10],C=t[11],E=t[12],A=t[13],T=t[14],L=t[15],F=e*c-i*l,U=e*f-s*l,M=e*p-a*l,z=i*f-s*c,I=i*p-a*c,G=s*p-a*f,te=m*A-g*E,Z=m*T-_*E,$=m*L-C*E,re=g*T-_*A,fe=g*L-C*A,he=_*L-C*T;return F*he-U*fe+M*re+z*$-I*Z+G*te}function Cm(t,e,i){let s=e[0],a=e[1],l=e[2],c=e[3],f=e[4],p=e[5],m=e[6],g=e[7],_=e[8],C=e[9],E=e[10],A=e[11],T=e[12],L=e[13],F=e[14],U=e[15],M=i[0],z=i[1],I=i[2],G=i[3];return t[0]=M*s+z*f+I*_+G*T,t[1]=M*a+z*p+I*C+G*L,t[2]=M*l+z*m+I*E+G*F,t[3]=M*c+z*g+I*A+G*U,M=i[4],z=i[5],I=i[6],G=i[7],t[4]=M*s+z*f+I*_+G*T,t[5]=M*a+z*p+I*C+G*L,t[6]=M*l+z*m+I*E+G*F,t[7]=M*c+z*g+I*A+G*U,M=i[8],z=i[9],I=i[10],G=i[11],t[8]=M*s+z*f+I*_+G*T,t[9]=M*a+z*p+I*C+G*L,t[10]=M*l+z*m+I*E+G*F,t[11]=M*c+z*g+I*A+G*U,M=i[12],z=i[13],I=i[14],G=i[15],t[12]=M*s+z*f+I*_+G*T,t[13]=M*a+z*p+I*C+G*L,t[14]=M*l+z*m+I*E+G*F,t[15]=M*c+z*g+I*A+G*U,t}function qw(t,e,i){let s=i[0],a=i[1],l=i[2],c,f,p,m,g,_,C,E,A,T,L,F;return e===t?(t[12]=e[0]*s+e[4]*a+e[8]*l+e[12],t[13]=e[1]*s+e[5]*a+e[9]*l+e[13],t[14]=e[2]*s+e[6]*a+e[10]*l+e[14],t[15]=e[3]*s+e[7]*a+e[11]*l+e[15]):(c=e[0],f=e[1],p=e[2],m=e[3],g=e[4],_=e[5],C=e[6],E=e[7],A=e[8],T=e[9],L=e[10],F=e[11],t[0]=c,t[1]=f,t[2]=p,t[3]=m,t[4]=g,t[5]=_,t[6]=C,t[7]=E,t[8]=A,t[9]=T,t[10]=L,t[11]=F,t[12]=c*s+g*a+A*l+e[12],t[13]=f*s+_*a+T*l+e[13],t[14]=p*s+C*a+L*l+e[14],t[15]=m*s+E*a+F*l+e[15]),t}function Hw(t,e,i){let s=i[0],a=i[1],l=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*l,t[9]=e[9]*l,t[10]=e[10]*l,t[11]=e[11]*l,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $w(t,e,i,s){let a=s[0],l=s[1],c=s[2],f=Math.hypot(a,l,c),p,m,g,_,C,E,A,T,L,F,U,M,z,I,G,te,Z,$,re,fe,he,we,ge,u;return Math.abs(f)<zw?null:(f=1/f,a*=f,l*=f,c*=f,p=Math.sin(i),m=Math.cos(i),g=1-m,_=e[0],C=e[1],E=e[2],A=e[3],T=e[4],L=e[5],F=e[6],U=e[7],M=e[8],z=e[9],I=e[10],G=e[11],te=a*a*g+m,Z=l*a*g+c*p,$=c*a*g-l*p,re=a*l*g-c*p,fe=l*l*g+m,he=c*l*g+a*p,we=a*c*g+l*p,ge=l*c*g-a*p,u=c*c*g+m,t[0]=_*te+T*Z+M*$,t[1]=C*te+L*Z+z*$,t[2]=E*te+F*Z+I*$,t[3]=A*te+U*Z+G*$,t[4]=_*re+T*fe+M*he,t[5]=C*re+L*fe+z*he,t[6]=E*re+F*fe+I*he,t[7]=A*re+U*fe+G*he,t[8]=_*we+T*ge+M*u,t[9]=C*we+L*ge+z*u,t[10]=E*we+F*ge+I*u,t[11]=A*we+U*ge+G*u,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Yw(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Sv(t,e){let i=e[0],s=e[1],a=e[2],l=e[4],c=e[5],f=e[6],p=e[8],m=e[9],g=e[10];return t[0]=Math.hypot(i,s,a),t[1]=Math.hypot(l,c,f),t[2]=Math.hypot(p,m,g),t}function Gw(t){let e=t[0],i=t[1],s=t[2],a=t[4],l=t[5],c=t[6],f=t[8],p=t[9],m=t[10];const g=e*e+i*i+s*s,_=a*a+l*l+c*c,C=f*f+p*p+m*m;return Math.sqrt(Math.max(g,_,C))}const _v=(function(){const t=[1,1,1];return function(e,i){let s=t;Sv(s,i);let a=1/s[0],l=1/s[1],c=1/s[2],f=i[0]*a,p=i[1]*l,m=i[2]*c,g=i[4]*a,_=i[5]*l,C=i[6]*c,E=i[8]*a,A=i[9]*l,T=i[10]*c,L=f+_+T,F=0;return L>0?(F=Math.sqrt(L+1)*2,e[3]=.25*F,e[0]=(C-A)/F,e[1]=(E-m)/F,e[2]=(p-g)/F):f>_&&f>T?(F=Math.sqrt(1+f-_-T)*2,e[3]=(C-A)/F,e[0]=.25*F,e[1]=(p+g)/F,e[2]=(E+m)/F):_>T?(F=Math.sqrt(1+_-f-T)*2,e[3]=(E-m)/F,e[0]=(p+g)/F,e[1]=.25*F,e[2]=(C+A)/F):(F=Math.sqrt(1+T-f-_)*2,e[3]=(p-g)/F,e[0]=(E+m)/F,e[1]=(C+A)/F,e[2]=.25*F),e}})();function Xw(t,e,i,s){let a=Ma([t[0],t[1],t[2]]);const l=Ma([t[4],t[5],t[6]]),c=Ma([t[8],t[9],t[10]]);xv(t)<0&&(a=-a),i[0]=t[12],i[1]=t[13],i[2]=t[14];const p=t.slice(),m=1/a,g=1/l,_=1/c;p[0]*=m,p[1]*=m,p[2]*=m,p[4]*=g,p[5]*=g,p[6]*=g,p[8]*=_,p[9]*=_,p[10]*=_,_v(e,p),s[0]=a,s[1]=l,s[2]=c}function Kw(t,e,i,s){const a=t,l=e[0],c=e[1],f=e[2],p=e[3],m=l+l,g=c+c,_=f+f,C=l*m,E=l*g,A=l*_,T=c*g,L=c*_,F=f*_,U=p*m,M=p*g,z=p*_,I=s[0],G=s[1],te=s[2];return a[0]=(1-(T+F))*I,a[1]=(E+z)*I,a[2]=(A-M)*I,a[3]=0,a[4]=(E-z)*G,a[5]=(1-(C+F))*G,a[6]=(L+U)*G,a[7]=0,a[8]=(A+M)*te,a[9]=(L-U)*te,a[10]=(1-(C+T))*te,a[11]=0,a[12]=i[0],a[13]=i[1],a[14]=i[2],a[15]=1,a}function Qw(t,e){let i=e[0],s=e[1],a=e[2],l=e[3],c=i+i,f=s+s,p=a+a,m=i*c,g=s*c,_=s*f,C=a*c,E=a*f,A=a*p,T=l*c,L=l*f,F=l*p;return t[0]=1-_-A,t[1]=g+F,t[2]=C-L,t[3]=0,t[4]=g-F,t[5]=1-m-A,t[6]=E+T,t[7]=0,t[8]=C+L,t[9]=E-T,t[10]=1-m-_,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Zw(t,e,i,s,a){let l=1/Math.tan(e/2),c=1/(s-a);return t[0]=l/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*s*c,t[15]=0,t}function Jw(t,e,i,s,a,l,c){let f=1/(e-i),p=1/(s-a),m=1/(l-c);return t[0]=-2*f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*p,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*m,t[11]=0,t[12]=(e+i)*f,t[13]=(a+s)*p,t[14]=(c+l)*m,t[15]=1,t}function ex(t,e,i,s){let a=e[0],l=e[1],c=e[2],f=s[0],p=s[1],m=s[2],g=a-i[0],_=l-i[1],C=c-i[2],E=g*g+_*_+C*C;E===0?C=1:(E=1/Math.sqrt(E),g*=E,_*=E,C*=E);let A=p*C-m*_,T=m*g-f*C,L=f*_-p*g;return E=A*A+T*T+L*L,E===0&&(m?f+=1e-6:p?m+=1e-6:p+=1e-6,A=p*C-m*_,T=m*g-f*C,L=f*_-p*g,E=A*A+T*T+L*L),E=1/Math.sqrt(E),A*=E,T*=E,L*=E,t[0]=A,t[1]=T,t[2]=L,t[3]=0,t[4]=_*L-C*T,t[5]=C*A-g*L,t[6]=g*T-_*A,t[7]=0,t[8]=g,t[9]=_,t[10]=C,t[11]=0,t[12]=a,t[13]=l,t[14]=c,t[15]=1,t}function Pm(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function km(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function tx(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}class bl extends Array{constructor(e=1,i=0,s=0,a=0,l=0,c=1,f=0,p=0,m=0,g=0,_=1,C=0,E=0,A=0,T=0,L=1){return super(e,i,s,a,l,c,f,p,m,g,_,C,E,A,T,L),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,i,s,a,l,c,f,p,m,g,_,C,E,A,T,L){return e.length?this.copy(e):(Ww(this,e,i,s,a,l,c,f,p,m,g,_,C,E,A,T,L),this)}translate(e,i=this){return qw(this,i,e),this}rotate(e,i,s=this){return $w(this,s,e,i),this}scale(e,i=this){return Hw(this,i,typeof e=="number"?[e,e,e]:e),this}add(e,i){return i?Pm(this,e,i):Pm(this,this,e),this}sub(e,i){return i?km(this,e,i):km(this,this,e),this}multiply(e,i){return e.length?i?Cm(this,e,i):Cm(this,this,e):tx(this,this,e),this}identity(){return Uw(this),this}copy(e){return Vw(this,e),this}fromPerspective({fov:e,aspect:i,near:s,far:a}={}){return Zw(this,e,i,s,a),this}fromOrthogonal({left:e,right:i,bottom:s,top:a,near:l,far:c}){return Jw(this,e,i,s,a,l,c),this}fromQuaternion(e){return Qw(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return jw(this,e),this}compose(e,i,s){return Kw(this,e,i,s),this}decompose(e,i,s){return Xw(this,e,i,s),this}getRotation(e){return _v(e,this),this}getTranslation(e){return Yw(e,this),this}getScaling(e){return Sv(e,this),this}getMaxScaleOnAxis(){return Gw(this)}lookAt(e,i,s){return ex(this,e,i,s),this}determinant(){return xv(this)}fromArray(e,i=0){return this[0]=e[i],this[1]=e[i+1],this[2]=e[i+2],this[3]=e[i+3],this[4]=e[i+4],this[5]=e[i+5],this[6]=e[i+6],this[7]=e[i+7],this[8]=e[i+8],this[9]=e[i+9],this[10]=e[i+10],this[11]=e[i+11],this[12]=e[i+12],this[13]=e[i+13],this[14]=e[i+14],this[15]=e[i+15],this}toArray(e=[],i=0){return e[i]=this[0],e[i+1]=this[1],e[i+2]=this[2],e[i+3]=this[3],e[i+4]=this[4],e[i+5]=this[5],e[i+6]=this[6],e[i+7]=this[7],e[i+8]=this[8],e[i+9]=this[9],e[i+10]=this[10],e[i+11]=this[11],e[i+12]=this[12],e[i+13]=this[13],e[i+14]=this[14],e[i+15]=this[15],e}}function nx(t,e,i="YXZ"){return i==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):i==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):i==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):i==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):i==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):i==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const Em=new bl;class ix extends Array{constructor(e=0,i=e,s=e,a="YXZ"){super(e,i,s),this.order=a,this.onChange=()=>{},this._target=this;const l=["0","1","2"];return new Proxy(this,{set(c,f){const p=Reflect.set(...arguments);return p&&l.includes(f)&&c.onChange(),p}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,i=e,s=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=i,this._target[2]=s,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,i=this.order){return nx(this._target,e,i),this.onChange(),this}fromQuaternion(e,i=this.order,s){return Em.fromQuaternion(e),this._target.fromRotationMatrix(Em,i),s||this.onChange(),this}fromArray(e,i=0){return this._target[0]=e[i],this._target[1]=e[i+1],this._target[2]=e[i+2],this}toArray(e=[],i=0){return e[i]=this[0],e[i+1]=this[1],e[i+2]=this[2],e}}class rx{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new bl,this.worldMatrix=new bl,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new bi,this.quaternion=new Bw,this.scale=new bi(1),this.rotation=new ix,this.up=new bi(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,i=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,i&&e&&e.addChild(this,!1)}addChild(e,i=!0){~this.children.indexOf(e)||this.children.push(e),i&&e.setParent(this,!1)}removeChild(e,i=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),i&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let i=0,s=this.children.length;i<s;i++)this.children[i].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let i=0,s=this.children.length;i<s;i++)this.children[i].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,i=!1){i?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function sx(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function ax(t,e){let i=e[0],s=e[1],a=e[2],l=e[3],c=i+i,f=s+s,p=a+a,m=i*c,g=s*c,_=s*f,C=a*c,E=a*f,A=a*p,T=l*c,L=l*f,F=l*p;return t[0]=1-_-A,t[3]=g-F,t[6]=C+L,t[1]=g+F,t[4]=1-m-A,t[7]=E-T,t[2]=C-L,t[5]=E+T,t[8]=1-m-_,t}function ox(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function lx(t,e,i,s,a,l,c,f,p,m){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t[4]=l,t[5]=c,t[6]=f,t[7]=p,t[8]=m,t}function cx(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function ux(t,e){let i=e[0],s=e[1],a=e[2],l=e[3],c=e[4],f=e[5],p=e[6],m=e[7],g=e[8],_=g*c-f*m,C=-g*l+f*p,E=m*l-c*p,A=i*_+s*C+a*E;return A?(A=1/A,t[0]=_*A,t[1]=(-g*s+a*m)*A,t[2]=(f*s-a*c)*A,t[3]=C*A,t[4]=(g*i-a*p)*A,t[5]=(-f*i+a*l)*A,t[6]=E*A,t[7]=(-m*i+s*p)*A,t[8]=(c*i-s*l)*A,t):null}function Tm(t,e,i){let s=e[0],a=e[1],l=e[2],c=e[3],f=e[4],p=e[5],m=e[6],g=e[7],_=e[8],C=i[0],E=i[1],A=i[2],T=i[3],L=i[4],F=i[5],U=i[6],M=i[7],z=i[8];return t[0]=C*s+E*c+A*m,t[1]=C*a+E*f+A*g,t[2]=C*l+E*p+A*_,t[3]=T*s+L*c+F*m,t[4]=T*a+L*f+F*g,t[5]=T*l+L*p+F*_,t[6]=U*s+M*c+z*m,t[7]=U*a+M*f+z*g,t[8]=U*l+M*p+z*_,t}function dx(t,e,i){let s=e[0],a=e[1],l=e[2],c=e[3],f=e[4],p=e[5],m=e[6],g=e[7],_=e[8],C=i[0],E=i[1];return t[0]=s,t[1]=a,t[2]=l,t[3]=c,t[4]=f,t[5]=p,t[6]=C*s+E*c+m,t[7]=C*a+E*f+g,t[8]=C*l+E*p+_,t}function fx(t,e,i){let s=e[0],a=e[1],l=e[2],c=e[3],f=e[4],p=e[5],m=e[6],g=e[7],_=e[8],C=Math.sin(i),E=Math.cos(i);return t[0]=E*s+C*c,t[1]=E*a+C*f,t[2]=E*l+C*p,t[3]=E*c-C*s,t[4]=E*f-C*a,t[5]=E*p-C*l,t[6]=m,t[7]=g,t[8]=_,t}function px(t,e,i){let s=i[0],a=i[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function hx(t,e){let i=e[0],s=e[1],a=e[2],l=e[3],c=e[4],f=e[5],p=e[6],m=e[7],g=e[8],_=e[9],C=e[10],E=e[11],A=e[12],T=e[13],L=e[14],F=e[15],U=i*f-s*c,M=i*p-a*c,z=i*m-l*c,I=s*p-a*f,G=s*m-l*f,te=a*m-l*p,Z=g*T-_*A,$=g*L-C*A,re=g*F-E*A,fe=_*L-C*T,he=_*F-E*T,we=C*F-E*L,ge=U*we-M*he+z*fe+I*re-G*$+te*Z;return ge?(ge=1/ge,t[0]=(f*we-p*he+m*fe)*ge,t[1]=(p*re-c*we-m*$)*ge,t[2]=(c*he-f*re+m*Z)*ge,t[3]=(a*he-s*we-l*fe)*ge,t[4]=(i*we-a*re+l*$)*ge,t[5]=(s*re-i*he-l*Z)*ge,t[6]=(T*te-L*G+F*I)*ge,t[7]=(L*z-A*te-F*M)*ge,t[8]=(A*G-T*z+F*U)*ge,t):null}class mx extends Array{constructor(e=1,i=0,s=0,a=0,l=1,c=0,f=0,p=0,m=1){return super(e,i,s,a,l,c,f,p,m),this}set(e,i,s,a,l,c,f,p,m){return e.length?this.copy(e):(lx(this,e,i,s,a,l,c,f,p,m),this)}translate(e,i=this){return dx(this,i,e),this}rotate(e,i=this){return fx(this,i,e),this}scale(e,i=this){return px(this,i,e),this}multiply(e,i){return i?Tm(this,e,i):Tm(this,this,e),this}identity(){return cx(this),this}copy(e){return ox(this,e),this}fromMatrix4(e){return sx(this,e),this}fromQuaternion(e){return ax(this,e),this}fromBasis(e,i,s){return this.set(e[0],e[1],e[2],i[0],i[1],i[2],s[0],s[1],s[2]),this}inverse(e=this){return ux(this,e),this}getNormalMatrix(e){return hx(this,e),this}}let gx=0;class vx extends rx{constructor(e,{geometry:i,program:s,mode:a=e.TRIANGLES,frustumCulled:l=!0,renderOrder:c=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=gx++,this.geometry=i,this.program=s,this.mode=a,this.frustumCulled=l,this.renderOrder=c,this.modelViewMatrix=new bl,this.normalMatrix=new mx,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(s=>s&&s({mesh:this,camera:e}));let i=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:i}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(s=>s&&s({mesh:this,camera:e}))}}const Dm={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function Am(t){t.length===4&&(t=t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e||console.warn(`Unable to convert hex string ${t} to rgb values`),[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]}function yx(t){return t=parseInt(t),[(t>>16&255)/255,(t>>8&255)/255,(t&255)/255]}function Mm(t){return t===void 0?[0,0,0]:arguments.length===3?arguments:isNaN(t)?t[0]==="#"?Am(t):Dm[t.toLowerCase()]?Am(Dm[t.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):yx(t)}class Lm extends Array{constructor(e){return Array.isArray(e)?super(...e):super(...Mm(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(e){this[0]=e}set g(e){this[1]=e}set b(e){this[2]=e}set(e){return Array.isArray(e)?this.copy(e):this.copy(Mm(...arguments))}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this}}class bx extends fw{constructor(e,{attributes:i={}}={}){Object.assign(i,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,i)}}const wx=`
attribute vec2 position;
attribute vec2 uv;
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = vec4(position, 0.0, 1.0);
}
`,xx=`
precision highp float;

uniform float iTime;
uniform vec3 iResolution;
uniform vec3 uColor;
uniform float uAmplitude;
uniform float uDistance;
uniform vec2 uMouse;

#define PI 3.1415926538

uniform int u_line_count;
const float u_line_width = 7.0;
const float u_line_blur = 10.0;

float Perlin2D(vec2 P) {
    vec2 Pi = floor(P);
    vec4 Pf_Pfmin1 = P.xyxy - vec4(Pi, Pi + 1.0);
    vec4 Pt = vec4(Pi.xy, Pi.xy + 1.0);
    Pt = Pt - floor(Pt * (1.0 / 71.0)) * 71.0;
    Pt += vec2(26.0, 161.0).xyxy;
    Pt *= Pt;
    Pt = Pt.xzxz * Pt.yyww;
    vec4 hash_x = fract(Pt * (1.0 / 951.135664));
    vec4 hash_y = fract(Pt * (1.0 / 642.949883));
    vec4 grad_x = hash_x - 0.49999;
    vec4 grad_y = hash_y - 0.49999;
    vec4 grad_results = inversesqrt(grad_x * grad_x + grad_y * grad_y)
        * (grad_x * Pf_Pfmin1.xzxz + grad_y * Pf_Pfmin1.yyww);
    grad_results *= 1.4142135623730950;
    vec2 blend = Pf_Pfmin1.xy * Pf_Pfmin1.xy * Pf_Pfmin1.xy
               * (Pf_Pfmin1.xy * (Pf_Pfmin1.xy * 6.0 - 15.0) + 10.0);
    vec4 blend2 = vec4(blend, vec2(1.0 - blend));
    return dot(grad_results, blend2.zxzx * blend2.wwyy);
}

float pixel(float count, vec2 resolution) {
    return (1.0 / max(resolution.x, resolution.y)) * count;
}

float lineFn(vec2 st, float width, float perc, float offset, vec2 mouse, float time, float amplitude, float distance) {
    float split_offset = (perc * 0.4);
    float split_point = 0.1 + split_offset;

    float amplitude_normal = smoothstep(split_point, 0.7, st.x);
    float amplitude_strength = 0.5;
    float finalAmplitude = amplitude_normal * amplitude_strength
                           * amplitude * (1.0 + (mouse.y - 0.5) * 0.2);

    float time_scaled = time / 10.0 + (mouse.x - 0.5) * 1.0;
    float blur = smoothstep(split_point, split_point + 0.05, st.x) * perc;

    float xnoise = mix(
        Perlin2D(vec2(time_scaled, st.x + perc) * 2.5),
        Perlin2D(vec2(time_scaled, st.x + time_scaled) * 3.5) / 1.5,
        st.x * 0.3
    );

    float y = 0.5 + (perc - 0.5) * distance + xnoise / 2.0 * finalAmplitude;

    float line_start = smoothstep(
        y + (width / 2.0) + (u_line_blur * pixel(1.0, iResolution.xy) * blur),
        y,
        st.y
    );

    float line_end = smoothstep(
        y,
        y - (width / 2.0) - (u_line_blur * pixel(1.0, iResolution.xy) * blur),
        st.y
    );

    return clamp(
        (line_start - line_end) * (1.0 - smoothstep(0.0, 1.0, pow(perc, 0.3))),
        0.0,
        1.0
    );
}

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
    vec2 uv = fragCoord / iResolution.xy;

    float line_strength = 1.0;
    for (int i = 0; i < 40; i++) {
        if (i >= u_line_count) break;
        float p = float(i) / float(u_line_count);
        line_strength *= (1.0 - lineFn(
            uv,
            u_line_width * pixel(1.0, iResolution.xy) * (1.0 - p),
            p,
            (PI * 1.0) * p,
            uMouse,
            iTime,
            uAmplitude,
            uDistance
        ));
    }

    float colorVal = 1.0 - line_strength;
    fragColor = vec4(uColor * colorVal, colorVal);
}

void main() {
    mainImage(gl_FragColor, gl_FragCoord.xy);
}
`;class Sx{constructor(){this.frameTimes=[],this.maxSamples=60,this.lastTime=performance.now()}tick(){const e=performance.now(),i=e-this.lastTime;this.lastTime=e,this.frameTimes.push(i),this.frameTimes.length>this.maxSamples&&this.frameTimes.shift()}getAverageFPS(){if(this.frameTimes.length===0)return 60;const e=this.frameTimes.reduce((i,s)=>i+s,0)/this.frameTimes.length;return Math.round(1e3/e)}isPerformancePoor(){return this.getAverageFPS()<30}isPerformanceGood(){return this.getAverageFPS()>=50}}function Rm(){const t=window.innerWidth;let e=1;t<480?e=.4:t<768?e=.55:t<1024?e=.7:t<1440&&(e=.85);let i=1;return t<480?i=.6:t<768?i=.75:t<1024&&(i=.85),{distanceScale:e,amplitudeScale:i}}function _x(){const t="ontouchstart"in window||navigator.maxTouchPoints>0;return window.innerWidth>=1024&&!t}function Cx(t=null){const e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||window.innerWidth<768,i="ontouchstart"in window||navigator.maxTouchPoints>0,s=navigator.hardwareConcurrency||4,a=navigator.deviceMemory||4,l=t!==null?t:_x();let c="high",f="";if(!e)try{const g=document.createElement("canvas").getContext("webgl",{powerPreference:"high-performance",failIfMajorPerformanceCaveat:!0});if(g){const _=g.getExtension("WEBGL_debug_renderer_info");_&&(f=g.getParameter(_.UNMASKED_RENDERER_WEBGL).toLowerCase(),f.includes("intel")&&!f.includes("iris xe")&&(c="low"),["mx","max-q","mobile","laptop"].some(E=>f.includes(E))&&(c="mid")),g.getExtension("WEBGL_lose_context")?.loseContext()}}catch{c="low"}const p=i?.12:.06;return(s<4||a<4)&&c==="low"?(console.log("Threads: Ultra-low profile (15 lines)"),{lineCount:15,amplitude:.8,smoothing:p,quality:"ultra-low",isTouch:i,targetFPS:60}):s===4||c==="low"?(console.log("Threads: Low-end profile (20 lines)"),{lineCount:20,amplitude:1,smoothing:p,quality:"low",isTouch:i,targetFPS:60}):e?(console.log("Threads: Mobile profile (25 lines)"),{lineCount:25,amplitude:.8,smoothing:p,quality:"mobile",isTouch:i,targetFPS:60}):l||c==="mid"?(console.log("Threads: Laptop profile (28 lines, 45fps)"),{lineCount:28,amplitude:1.2,smoothing:.09,quality:"laptop",isTouch:i,targetFPS:45}):(console.log("Threads: High-end profile (40 lines)"),{lineCount:40,amplitude:1.5,smoothing:p,quality:"desktop",isTouch:i,targetFPS:60})}const Px=({color:t=[1,1,1],amplitude:e=1,distance:i=0,enableMouseInteraction:s=!1,externalMouseRef:a=null,...l})=>{const c=ie.useRef(null),f=ie.useRef(),p=ie.useRef(null),m=ie.useRef(Cx()),g=ie.useRef(new Sx),_=ie.useRef(m.current.lineCount),C=ie.useRef(!0),E=ie.useRef(Rm());return ie.useEffect(()=>{if(!c.current)return;const A=c.current,T=new bw({alpha:!0,antialias:!1,powerPreference:"high-performance",depth:!1,stencil:!1}),L=T.gl;L.clearColor(0,0,0,0),L.enable(L.BLEND),L.blendFunc(L.SRC_ALPHA,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),L.disable(L.CULL_FACE),A.appendChild(L.canvas);const F=new bx(L),U=e*m.current.amplitude*E.current.amplitudeScale,M=i*E.current.distanceScale,z=new hw(L,{vertex:wx,fragment:xx,uniforms:{iTime:{value:0},iResolution:{value:new Lm(L.canvas.width,L.canvas.height,L.canvas.width/L.canvas.height)},uColor:{value:new Lm(...t)},uAmplitude:{value:U},uDistance:{value:M},uMouse:{value:new Float32Array([.5,.5])},u_line_count:{value:_.current}}});p.current=z;const I=new vx(L,{geometry:F,program:z});function G(){const{clientWidth:S,clientHeight:P}=A,R=m.current.quality==="laptop"?.8:m.current.quality==="low"?.75:m.current.quality==="ultra-low"?.6:1,B=Math.floor(S*R),V=Math.floor(P*R);T.setSize(B,V),L.canvas.style.width=S+"px",L.canvas.style.height=P+"px",z.uniforms.iResolution.value.r=B,z.uniforms.iResolution.value.g=V,z.uniforms.iResolution.value.b=B/V,E.current=Rm();const H=e*m.current.amplitude*E.current.amplitudeScale,O=i*E.current.distanceScale;z.uniforms.uAmplitude.value=H,z.uniforms.uDistance.value=O}let te;const Z=()=>{clearTimeout(te),te=setTimeout(G,150)};window.addEventListener("resize",Z),G();const $=new IntersectionObserver(S=>{C.current=S[0].isIntersecting,C.current&&!f.current&&(we=performance.now(),f.current=requestAnimationFrame(k))},{threshold:.1});$.observe(A);let re=[.5,.5],fe=[.5,.5],he=[0,0],we=performance.now(),ge=0,u=0,v=0;const y=120,b=10,x=1e3/(m.current.targetFPS||60);function k(S){if(!C.current){f.current=null;return}if(S-ge<x){f.current=requestAnimationFrame(k);return}if(ge=S,we=S,g.current.tick(),u++,u>=y&&(u=0,g.current.isPerformancePoor()&&_.current>10?(_.current=Math.max(10,_.current-5),z.uniforms.u_line_count.value=_.current,console.log(` Threads: Reduced to ${_.current} lines (low FPS)`)):g.current.isPerformanceGood()&&_.current<m.current.lineCount&&(_.current=Math.min(m.current.lineCount,_.current+3),z.uniforms.u_line_count.value=_.current,console.log(` Threads: Increased to ${_.current} lines (good FPS)`))),s&&a){const P=a.current.x,R=a.current.y,B=Math.abs(P-fe[0]),V=Math.abs(R-fe[1]);(B>.5||V>.5)&&v===0&&(v=b),fe[0]=P,fe[1]=R;let O=m.current.smoothing;if(v>0){const J=v/b;O=O*(.5+.5*(1-J)),v--}const W=fe[0]-re[0],X=fe[1]-re[1];he[0]+=(W*.3-he[0])*.4,he[1]+=(X*.3-he[1])*.4,re[0]+=W*O+he[0]*.15,re[1]+=X*O+he[1]*.15,re[0]=Math.max(0,Math.min(1,re[0])),re[1]=Math.max(0,Math.min(1,re[1])),z.uniforms.uMouse.value[0]=re[0],z.uniforms.uMouse.value[1]=re[1]}else re[0]+=(.5-re[0])*.02,re[1]+=(.5-re[1])*.02,he=[0,0],v=0,z.uniforms.uMouse.value[0]=re[0],z.uniforms.uMouse.value[1]=re[1];z.uniforms.iTime.value=S*.001,T.render({scene:I}),f.current=requestAnimationFrame(k)}return()=>{f.current&&cancelAnimationFrame(f.current),window.removeEventListener("resize",Z),clearTimeout(te),$.disconnect(),A.contains(L.canvas)&&A.removeChild(L.canvas),L.getExtension("WEBGL_lose_context")?.loseContext()}},[t,e,i,s,a]),be.jsx("div",{ref:c,className:"threads-container",...l})};function kx(){const t=ie.useRef({x:.5,y:.5}),e=ie.useRef(null),i=ie.useRef(0),s=ie.useRef({x:0,y:0}),a=ie.useRef(!1),l=ie.useRef({x:.5,y:.5});return ie.useEffect(()=>{const c=document.getElementById("home");if(e.current=c,!c)return;if(window.mouseTracker){const C=c.getBoundingClientRect(),E=window.mouseTracker.position.x,A=window.mouseTracker.position.y;if(E>=C.left&&E<=C.right&&A>=C.top&&A<=C.bottom){a.current=!0;const T=window.mouseTracker.getNormalizedPosition(c);t.current=T,l.current=T,console.log(" Hero Threads: Mouse detected in section on load",T)}}const f=()=>{a.current=!0},p=()=>{a.current=!1,l.current={...t.current}},m=C=>{const E=Date.now(),A=E-i.current;if(i.current=E,C.touches.length>0){const T=C.touches[0],L=c.getBoundingClientRect(),F=(T.clientX-L.left)/L.width,U=(T.clientY-L.top)/L.height;A>0&&(s.current.x=(F-t.current.x)/A,s.current.y=(U-t.current.y)/A);const M={x:Math.max(0,Math.min(1,F)),y:Math.max(0,Math.min(1,U))};t.current=M,l.current=M}},g=()=>{s.current={x:0,y:0}};c.addEventListener("mouseenter",f),c.addEventListener("mouseleave",p),c.addEventListener("touchmove",m,{passive:!0}),c.addEventListener("touchend",g,{passive:!0}),c.addEventListener("touchcancel",g,{passive:!0});const _=window.mouseTracker.subscribe(C=>{if(a.current){const E=window.mouseTracker.getNormalizedPosition(c);t.current=E,l.current=E}});if(a.current&&window.mouseTracker){const C=window.mouseTracker.getNormalizedPosition(c);t.current=C,l.current=C}return()=>{c.removeEventListener("mouseenter",f),c.removeEventListener("mouseleave",p),c.removeEventListener("touchmove",m),c.removeEventListener("touchend",g),c.removeEventListener("touchcancel",g),typeof _=="function"&&_()}},[]),be.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0,pointerEvents:"none",touchAction:"none",WebkitUserSelect:"none",userSelect:"none"},children:be.jsx(Px,{color:[.4,.6,1],amplitude:1,distance:.3,enableMouseInteraction:!0,externalMouseRef:t})})}const Fm=document.getElementById("hero-threads-root");Fm&&Id.createRoot(Fm).render(be.jsx(kx,{}));const Om=(t,e,i)=>Math.min(Math.max(t,e),i),Ex=t=>((t+180)%360+360)%360-180;function Tx(t,e){const i=Array.from({length:e},(E,A)=>-28+A*2),s=[-3,-1,1,3],a=[-2,0,2,4],l=i.flatMap((E,A)=>(A%2===0?s:a).map(L=>({x:E,y:L,sizeX:2,sizeY:2})));if(t.length===0)return l.map(E=>({...E,preview:"",url:"",alt:"",type:"image"}));const c=t.map(E=>({preview:E.preview||E.src||"",url:E.url||E.src||"",alt:E.alt||"",type:E.type||"image"})),f=(E,A)=>{const T=E.x-A.x,L=E.y-A.y,U=Math.min(Math.abs(T),56-Math.abs(T));return Math.sqrt(U*U+L*L)},p=c.length,m=l.length,g=new Array(m).fill(null),_=new Array(p).fill(0),C=Math.ceil(m/p);for(let E=0;E<m;E++){let A=-1,T=-1/0;for(let L=0;L<p;L++){if(_[L]>=C)continue;const F=c[L],U=[];for(let I=0;I<E;I++)g[I]&&g[I].url===F.url&&U.push(I);let M;if(U.length===0)M=1e3;else{let I=1/0;U.forEach(G=>{const te=f(l[E],l[G]);I=Math.min(I,te)}),M=I}const z=(C-_[L])*.5;M+=z,M>T&&(T=M,A=L)}A===-1&&(A=E%p),g[E]=c[A],_[A]++}for(let E=0;E<g.length;E++)g[E]||(console.error("Empty position found at index:",E),g[E]=c[E%p]);return l.map((E,A)=>({...E,preview:g[A].preview,url:g[A].url,alt:g[A].alt,type:g[A].type}))}function Dx({images:t=[],fit:e=.6,minRadius:i=650,maxRadius:s=1e3,segments:a=28,maxVerticalRotationDeg:l=10,dragSensitivity:c=18,openedImageWidth:f="85vw",openedImageHeight:p="85vh",imageBorderRadius:m="12px",openedImageBorderRadius:g="20px",overlayBlurColor:_="#0a0a0a",grayscale:C=!1,pressHoldDuration:E=400,scrollThreshold:A=12}){const T=ie.useRef(null),L=ie.useRef(null),F=ie.useRef(null),U=ie.useRef(null),M=ie.useRef(null),z=ie.useRef({x:0,y:0}),I=ie.useRef({x:0,y:0}),G=ie.useRef(null),te=ie.useRef(!1),Z=ie.useRef(!1),$=ie.useRef(0),re=ie.useRef(!1),fe=ie.useRef(null),he=ie.useRef(null),we=ie.useRef(!1),ge=ie.useRef(null),u=ie.useRef(0),v=ie.useRef(!1),y=ie.useRef(null),b=ie.useMemo(()=>Tx(t,a),[t,a]),x=ie.useCallback(()=>{try{if(window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(10),window.AudioContext||window.webkitAudioContext){const Y=new(window.AudioContext||window.webkitAudioContext),K=Y.createOscillator(),ae=Y.createGain();K.connect(ae),ae.connect(Y.destination),K.frequency.value=200,ae.gain.value=.1,K.start(Y.currentTime),K.stop(Y.currentTime+.01)}}catch{}},[]),k=ie.useCallback(Y=>{y.current||(y.current=requestAnimationFrame(()=>{if(y.current=null,!F.current)return;F.current.querySelectorAll(".item").forEach(ae=>{const le=(ae.getAttribute("style")||"").match(/--offset-x:\s*(-?\d+(?:\.\d+)?)/),xe=le?parseFloat(le[1]):0;let ve=360/a*(xe+.5)-Y;for(;ve>180;)ve-=360;for(;ve<-180;)ve+=360;const Ee=Math.round(500+499*Math.cos(ve*Math.PI/180));ae.style.zIndex=Math.max(1,Ee)})}))},[a]),S=ie.useCallback((Y,K)=>{F.current&&(F.current.style.transform=`translateZ(calc(var(--radius) * -1)) rotateX(${Y}deg) rotateY(${K}deg)`,k(K))},[k]);ie.useEffect(()=>{const Y=T.current;if(!Y)return;const K=()=>{const se=Y.getBoundingClientRect(),le=Math.max(1,se.width),xe=Math.max(1,se.height);let ve=Math.min(le,xe)*e;ve=Om(ve,i,s),Y.style.setProperty("--radius",`${Math.round(ve)}px`),Y.style.setProperty("--segments-x",a),Y.style.setProperty("--segments-y",a),Y.style.setProperty("--tile-radius",m),Y.style.setProperty("--enlarge-radius",g),Y.style.setProperty("--overlay-blur-color",_),Y.style.setProperty("--image-filter",C?"grayscale(1)":"none"),S(z.current.x,z.current.y)};K();const ae=new ResizeObserver(K);return ae.observe(Y),()=>ae.disconnect()},[e,i,s,a,m,g,_,C,S]),ie.useEffect(()=>{const Y=setTimeout(()=>{k(0)},100);return()=>clearTimeout(Y)},[k]);const P=ie.useCallback((Y,K)=>{te.current=!0,Z.current=!1,v.current=!0,I.current={...z.current},G.current={x:Y,y:K}},[]),R=ie.useCallback((Y,K)=>{if(!te.current||!G.current)return;const ae=Y-G.current.x,se=K-G.current.y;!Z.current&&ae*ae+se*se>25&&(Z.current=!0);const le=Om(I.current.x-se/c,-l,l),xe=Ex(I.current.y+ae/c);z.current={x:le,y:xe},S(le,xe)},[c,l,S]),B=ie.useCallback(()=>{te.current&&Z.current&&($.current=performance.now()),te.current=!1,Z.current=!1,G.current=null,setTimeout(()=>{v.current=!1},100)},[]);ie.useEffect(()=>{const Y=le=>{if(te.current&&le.touches[0]){const xe=le.touches[0];R(xe.clientX,xe.clientY)}},K=()=>{B()},ae=le=>{te.current&&R(le.clientX,le.clientY)},se=()=>{B()};return window.addEventListener("touchmove",Y,{passive:!0}),window.addEventListener("touchend",K),window.addEventListener("touchcancel",K),window.addEventListener("mousemove",ae),window.addEventListener("mouseup",se),()=>{window.removeEventListener("touchmove",Y),window.removeEventListener("touchend",K),window.removeEventListener("touchcancel",K),window.removeEventListener("mousemove",ae),window.removeEventListener("mouseup",se)}},[R,B]),ie.useEffect(()=>{const Y=L.current;if(!Y)return;const K=se=>{se.button===0&&P(se.clientX,se.clientY)},ae=se=>{if(!se.target.closest(".item__image")){const le=se.touches[0];P(le.clientX,le.clientY)}};return Y.addEventListener("mousedown",K),Y.addEventListener("touchstart",ae,{passive:!0}),()=>{Y.removeEventListener("mousedown",K),Y.removeEventListener("touchstart",ae)}},[P]);const V=ie.useCallback(Y=>{if(re.current)return;const K=Y.dataset.url,ae=Y.dataset.type,se=Y.dataset.preview;re.current=!0;const le=document.createElement("div");if(le.className="enlarge",le.style.cssText=`
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: ${f};
      height: ${p};
      max-width: 92vw;
      max-height: 92vh;
      z-index: 9999;
      border-radius: ${g};
      overflow: hidden;
      box-shadow: 0 25px 80px rgba(92, 92, 92, 0.24);
      background: #000000;
      pointer-events: auto;
    `,ae==="iframe"&&K){const xe=document.createElement("iframe");xe.src=K,xe.style.cssText="width:100%;height:100%;border:none;",xe.setAttribute("allowfullscreen",""),le.appendChild(xe)}else{const xe=document.createElement("img");xe.src=se||K,xe.style.cssText="width:100%;height:100%;object-fit:cover;",le.appendChild(xe)}le.addEventListener("wheel",xe=>{xe.stopPropagation()},{passive:!1}),U.current.appendChild(le),T.current?.setAttribute("data-enlarging","true"),x()},[f,p,g,x]),H=ie.useCallback(Y=>{const K=Y.touches[0],ae=Y.currentTarget.parentElement;ge.current={x:K.clientX,y:K.clientY},u.current=performance.now(),he.current=ae,we.current=!1,v.current=!1,fe.current&&clearTimeout(fe.current),fe.current=setTimeout(()=>{he.current&&!v.current&&(we.current=!0,x())},E)},[x,E]),O=ie.useCallback(Y=>{if(v.current||!ge.current)return;const K=Y.touches[0],ae=K.clientX-ge.current.x,se=K.clientY-ge.current.y,le=ae*ae+se*se,xe=A*A;le>xe&&(v.current=!0,fe.current&&(clearTimeout(fe.current),fe.current=null),we.current=!1,te.current||P(K.clientX,K.clientY))},[A,P]),W=ie.useCallback(Y=>{const K=he.current,ae=we.current,se=v.current;fe.current&&(clearTimeout(fe.current),fe.current=null),ae&&!se&&K&&(Y.preventDefault(),Y.stopPropagation(),V(K)),he.current=null,ge.current=null,u.current=0,we.current=!1,v.current=!1},[V]),X=ie.useCallback(()=>{fe.current&&(clearTimeout(fe.current),fe.current=null),he.current=null,ge.current=null,u.current=0,we.current=!1,v.current=!1},[]),J=ie.useCallback(Y=>{if("ontouchstart"in window||te.current||Z.current||performance.now()-$.current<100)return;const K=Y.currentTarget.parentElement;V(K)},[V]);return ie.useEffect(()=>()=>{fe.current&&clearTimeout(fe.current),y.current&&cancelAnimationFrame(y.current)},[]),ie.useEffect(()=>{const Y=()=>{const se=U.current?.querySelector(".enlarge");se&&se.remove(),T.current?.removeAttribute("data-enlarging"),re.current=!1},K=M.current;if(K&&(K.addEventListener("click",Y),K.addEventListener("touchend",Y),!("ontouchstart"in window))){const se=le=>{le.preventDefault(),Y()};return K.addEventListener("wheel",se,{passive:!1}),()=>{K.removeEventListener("click",Y),K.removeEventListener("touchend",Y),K.removeEventListener("wheel",se)}}const ae=se=>{se.key==="Escape"&&Y()};return window.addEventListener("keydown",ae),()=>{K&&(K.removeEventListener("click",Y),K.removeEventListener("touchend",Y)),window.removeEventListener("keydown",ae)}},[]),be.jsx("div",{ref:T,className:"sphere-root",children:be.jsxs("main",{ref:L,className:"sphere-main",children:[be.jsx("div",{className:"stage",children:be.jsx("div",{ref:F,className:"sphere",children:b.map((Y,K)=>be.jsx("div",{className:"item","data-preview":Y.preview,"data-url":Y.url,"data-type":Y.type,style:{"--offset-x":Y.x,"--offset-y":Y.y,"--item-size-x":Y.sizeX,"--item-size-y":Y.sizeY},children:be.jsx("div",{className:"item__image","data-interactive":"true",role:"button",tabIndex:0,onClick:J,onTouchStart:H,onTouchMove:O,onTouchEnd:W,onTouchCancel:X,onKeyDown:ae=>{(ae.key==="Enter"||ae.key===" ")&&(ae.preventDefault(),J(ae))},children:be.jsx("img",{src:Y.preview,draggable:!1,alt:Y.alt,loading:"lazy"})})},`${Y.x},${Y.y},${K}`))})}),be.jsx("div",{className:"viewer",ref:U,children:be.jsx("div",{ref:M,className:"scrim"})})]})})}const fr="./",Ax=[{preview:`${fr}images/logo.png`,url:"https://vistafly.services/",alt:"VistaFly Services - FPV drone videography",type:"iframe"},{preview:`${fr}images/logo1.png`,url:"https://vistafly.github.io/CSAnew/",alt:"CSA Entertainment - Sports & Music Programs",type:"iframe"},{preview:`${fr}images/logo2.png`,url:"https://themorenosband.com/",alt:"The Morenos Band - Official Music Website",type:"iframe"},{preview:`${fr}images/logo3.png`,url:"https://cultivanetwork.com/",alt:"CultivaNetwork - Agricultural Platform",type:"iframe"},{preview:`${fr}images/logo5.png`,url:"https://vistafly.github.io/thebox/",alt:"The Box - Creative Digital Project",type:"iframe"},{preview:`${fr}images/logo6.png`,url:"https://vistafly.github.io/landscapingcultura/",alt:"Landscaping Cultura - Professional Landscaping",type:"iframe"},{preview:`${fr}images/logo7.png`,url:"https://vistafly.github.io/sproutscloth/",alt:"Sprouts Clothing - Sustainable Fashion",type:"iframe"},{preview:`${fr}images/logo8.png`,url:"https://agstounding.com/",alt:"Agstounding - Professional Services",type:"iframe"}];function Mx(){const[t,e]=ie.useState({minRadius:1100,maxRadius:1300,fit:1,maxVerticalRotationDeg:2,dragSensitivity:18,segments:30,openedImageWidth:"70vw",openedImageHeight:"70vh",imageBorderRadius:"40px",openedImageBorderRadius:"20px"});return ie.useEffect(()=>{const i=()=>{const s=window.innerWidth;s<=430?e({minRadius:500,maxRadius:650,fit:.9,maxVerticalRotationDeg:1.5,dragSensitivity:16,segments:20,openedImageWidth:"85vw",openedImageHeight:"78vh",imageBorderRadius:"20px",openedImageBorderRadius:"12px"}):s<=768?e({minRadius:700,maxRadius:700,fit:.95,maxVerticalRotationDeg:1.8,dragSensitivity:17,segments:25,openedImageWidth:"90vw",openedImageHeight:"80vh",imageBorderRadius:"30px",openedImageBorderRadius:"15px"}):s<=1024?e({minRadius:1e3,maxRadius:1200,fit:.98,maxVerticalRotationDeg:2,dragSensitivity:19,segments:28,openedImageWidth:"90vw",openedImageHeight:"80vh",imageBorderRadius:"35px",openedImageBorderRadius:"18px"}):e({minRadius:1e3,maxRadius:1200,fit:1,maxVerticalRotationDeg:2,dragSensitivity:18,segments:30,openedImageWidth:"85vw",openedImageHeight:"80vh",imageBorderRadius:"40px",openedImageBorderRadius:"20px"})};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),be.jsx(Dx,{images:Ax,minRadius:t.minRadius,maxRadius:t.maxRadius,fit:t.fit,maxVerticalRotationDeg:t.maxVerticalRotationDeg,dragSensitivity:t.dragSensitivity,segments:t.segments,openedImageWidth:t.openedImageWidth,openedImageHeight:t.openedImageHeight,imageBorderRadius:t.imageBorderRadius,openedImageBorderRadius:t.openedImageBorderRadius,overlayBlurColor:"#0a0a0a",grayscale:!1})}const Lx=Id.createRoot(document.getElementById("portfolio-dome-root"));Lx.render(be.jsx(yv.StrictMode,{children:be.jsx(Mx,{})}));function Vi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cv(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Gn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Os={duration:.5,overwrite:!1,delay:0},Bd,ln,wt,si=1e8,pt=1/si,Ju=Math.PI*2,Rx=Ju/4,Fx=0,Pv=Math.sqrt,Ox=Math.cos,Nx=Math.sin,en=function(e){return typeof e=="string"},Lt=function(e){return typeof e=="function"},Ui=function(e){return typeof e=="number"},zd=function(e){return typeof e>"u"},Ai=function(e){return typeof e=="object"},Ln=function(e){return e!==!1},Vd=function(){return typeof window<"u"},ll=function(e){return Lt(e)||en(e)},kv=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},gn=Array.isArray,ed=/(?:-?\.?\d|\.)+/gi,Ev=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Cs=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Tu=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Tv=/[+-]=-?[.\d]+/,Dv=/[^,'"\[\]\s]+/gi,Ix=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,kt,Pi,td,Wd,Xn={},wl={},Av,Mv=function(e){return(wl=Ns(e,Xn))&&Nn},Ud=function(e,i){return console.warn("Invalid property",e,"set to",i,"Missing plugin? gsap.registerPlugin()")},za=function(e,i){return!i&&console.warn(e)},Lv=function(e,i){return e&&(Xn[e]=i)&&wl&&(wl[e]=i)||Xn},Va=function(){return 0},Bx={suppressEvents:!0,isStart:!0,kill:!1},fl={suppressEvents:!0,kill:!1},zx={suppressEvents:!0},jd={},vr=[],nd={},Rv,Hn={},Du={},Nm=30,pl=[],qd="",Hd=function(e){var i=e[0],s,a;if(Ai(i)||Lt(i)||(e=[e]),!(s=(i._gsap||{}).harness)){for(a=pl.length;a--&&!pl[a].targetTest(i););s=pl[a]}for(a=e.length;a--;)e[a]&&(e[a]._gsap||(e[a]._gsap=new iy(e[a],s)))||e.splice(a,1);return e},Hr=function(e){return e._gsap||Hd(ai(e))[0]._gsap},Fv=function(e,i,s){return(s=e[i])&&Lt(s)?e[i]():zd(s)&&e.getAttribute&&e.getAttribute(i)||s},Rn=function(e,i){return(e=e.split(",")).forEach(i)||e},It=function(e){return Math.round(e*1e5)/1e5||0},Ut=function(e){return Math.round(e*1e7)/1e7||0},Ms=function(e,i){var s=i.charAt(0),a=parseFloat(i.substr(2));return e=parseFloat(e),s==="+"?e+a:s==="-"?e-a:s==="*"?e*a:e/a},Vx=function(e,i){for(var s=i.length,a=0;e.indexOf(i[a])<0&&++a<s;);return a<s},xl=function(){var e=vr.length,i=vr.slice(0),s,a;for(nd={},vr.length=0,s=0;s<e;s++)a=i[s],a&&a._lazy&&(a.render(a._lazy[0],a._lazy[1],!0)._lazy=0)},$d=function(e){return!!(e._initted||e._startAt||e.add)},Ov=function(e,i,s,a){vr.length&&!ln&&xl(),e.render(i,s,!!(ln&&i<0&&$d(e))),vr.length&&!ln&&xl()},Nv=function(e){var i=parseFloat(e);return(i||i===0)&&(e+"").match(Dv).length<2?i:en(e)?e.trim():e},Iv=function(e){return e},Kn=function(e,i){for(var s in i)s in e||(e[s]=i[s]);return e},Wx=function(e){return function(i,s){for(var a in s)a in i||a==="duration"&&e||a==="ease"||(i[a]=s[a])}},Ns=function(e,i){for(var s in i)e[s]=i[s];return e},Im=function t(e,i){for(var s in i)s!=="__proto__"&&s!=="constructor"&&s!=="prototype"&&(e[s]=Ai(i[s])?t(e[s]||(e[s]={}),i[s]):i[s]);return e},Sl=function(e,i){var s={},a;for(a in e)a in i||(s[a]=e[a]);return s},La=function(e){var i=e.parent||kt,s=e.keyframes?Wx(gn(e.keyframes)):Kn;if(Ln(e.inherit))for(;i;)s(e,i.vars.defaults),i=i.parent||i._dp;return e},Ux=function(e,i){for(var s=e.length,a=s===i.length;a&&s--&&e[s]===i[s];);return s<0},Bv=function(e,i,s,a,l){var c=e[a],f;if(l)for(f=i[l];c&&c[l]>f;)c=c._prev;return c?(i._next=c._next,c._next=i):(i._next=e[s],e[s]=i),i._next?i._next._prev=i:e[a]=i,i._prev=c,i.parent=i._dp=e,i},Rl=function(e,i,s,a){s===void 0&&(s="_first"),a===void 0&&(a="_last");var l=i._prev,c=i._next;l?l._next=c:e[s]===i&&(e[s]=c),c?c._prev=l:e[a]===i&&(e[a]=l),i._next=i._prev=i.parent=null},br=function(e,i){e.parent&&(!i||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},$r=function(e,i){if(e&&(!i||i._end>e._dur||i._start<0))for(var s=e;s;)s._dirty=1,s=s.parent;return e},jx=function(e){for(var i=e.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return e},id=function(e,i,s,a){return e._startAt&&(ln?e._startAt.revert(fl):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(i,!0,a))},qx=function t(e){return!e||e._ts&&t(e.parent)},Bm=function(e){return e._repeat?Is(e._tTime,e=e.duration()+e._rDelay)*e:0},Is=function(e,i){var s=Math.floor(e=Ut(e/i));return e&&s===e?s-1:s},_l=function(e,i){return(e-i._start)*i._ts+(i._ts>=0?0:i._dirty?i.totalDuration():i._tDur)},Fl=function(e){return e._end=Ut(e._start+(e._tDur/Math.abs(e._ts||e._rts||pt)||0))},Ol=function(e,i){var s=e._dp;return s&&s.smoothChildTiming&&e._ts&&(e._start=Ut(s._time-(e._ts>0?i/e._ts:((e._dirty?e.totalDuration():e._tDur)-i)/-e._ts)),Fl(e),s._dirty||$r(s,e)),e},zv=function(e,i){var s;if((i._time||!i._dur&&i._initted||i._start<e._time&&(i._dur||!i.add))&&(s=_l(e.rawTime(),i),(!i._dur||Za(0,i.totalDuration(),s)-i._tTime>pt)&&i.render(s,!0)),$r(e,i)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(s=e;s._dp;)s.rawTime()>=0&&s.totalTime(s._tTime),s=s._dp;e._zTime=-pt}},ki=function(e,i,s,a){return i.parent&&br(i),i._start=Ut((Ui(s)?s:s||e!==kt?ii(e,s,i):e._time)+i._delay),i._end=Ut(i._start+(i.totalDuration()/Math.abs(i.timeScale())||0)),Bv(e,i,"_first","_last",e._sort?"_start":0),rd(i)||(e._recent=i),a||zv(e,i),e._ts<0&&Ol(e,e._tTime),e},Vv=function(e,i){return(Xn.ScrollTrigger||Ud("scrollTrigger",i))&&Xn.ScrollTrigger.create(i,e)},Wv=function(e,i,s,a,l){if(Gd(e,i,l),!e._initted)return 1;if(!s&&e._pt&&!ln&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Rv!==$n.frame)return vr.push(e),e._lazy=[l,a],1},Hx=function t(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||t(i))},rd=function(e){var i=e.data;return i==="isFromStart"||i==="isStart"},$x=function(e,i,s,a){var l=e.ratio,c=i<0||!i&&(!e._start&&Hx(e)&&!(!e._initted&&rd(e))||(e._ts<0||e._dp._ts<0)&&!rd(e))?0:1,f=e._rDelay,p=0,m,g,_;if(f&&e._repeat&&(p=Za(0,e._tDur,i),g=Is(p,f),e._yoyo&&g&1&&(c=1-c),g!==Is(e._tTime,f)&&(l=1-c,e.vars.repeatRefresh&&e._initted&&e.invalidate())),c!==l||ln||a||e._zTime===pt||!i&&e._zTime){if(!e._initted&&Wv(e,i,a,s,p))return;for(_=e._zTime,e._zTime=i||(s?pt:0),s||(s=i&&!_),e.ratio=c,e._from&&(c=1-c),e._time=0,e._tTime=p,m=e._pt;m;)m.r(c,m.d),m=m._next;i<0&&id(e,i,s,!0),e._onUpdate&&!s&&Yn(e,"onUpdate"),p&&e._repeat&&!s&&e.parent&&Yn(e,"onRepeat"),(i>=e._tDur||i<0)&&e.ratio===c&&(c&&br(e,1),!s&&!ln&&(Yn(e,c?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=i)},Yx=function(e,i,s){var a;if(s>i)for(a=e._first;a&&a._start<=s;){if(a.data==="isPause"&&a._start>i)return a;a=a._next}else for(a=e._last;a&&a._start>=s;){if(a.data==="isPause"&&a._start<i)return a;a=a._prev}},Bs=function(e,i,s,a){var l=e._repeat,c=Ut(i)||0,f=e._tTime/e._tDur;return f&&!a&&(e._time*=c/e._dur),e._dur=c,e._tDur=l?l<0?1e10:Ut(c*(l+1)+e._rDelay*l):c,f>0&&!a&&Ol(e,e._tTime=e._tDur*f),e.parent&&Fl(e),s||$r(e.parent,e),e},zm=function(e){return e instanceof xn?$r(e):Bs(e,e._dur)},Gx={_start:0,endTime:Va,totalDuration:Va},ii=function t(e,i,s){var a=e.labels,l=e._recent||Gx,c=e.duration()>=si?l.endTime(!1):e._dur,f,p,m;return en(i)&&(isNaN(i)||i in a)?(p=i.charAt(0),m=i.substr(-1)==="%",f=i.indexOf("="),p==="<"||p===">"?(f>=0&&(i=i.replace(/=/,"")),(p==="<"?l._start:l.endTime(l._repeat>=0))+(parseFloat(i.substr(1))||0)*(m?(f<0?l:s).totalDuration()/100:1)):f<0?(i in a||(a[i]=c),a[i]):(p=parseFloat(i.charAt(f-1)+i.substr(f+1)),m&&s&&(p=p/100*(gn(s)?s[0]:s).totalDuration()),f>1?t(e,i.substr(0,f-1),s)+p:c+p)):i==null?c:+i},Ra=function(e,i,s){var a=Ui(i[1]),l=(a?2:1)+(e<2?0:1),c=i[l],f,p;if(a&&(c.duration=i[1]),c.parent=s,e){for(f=c,p=s;p&&!("immediateRender"in f);)f=p.vars.defaults||{},p=Ln(p.vars.inherit)&&p.parent;c.immediateRender=Ln(f.immediateRender),e<2?c.runBackwards=1:c.startAt=i[l-1]}return new Wt(i[0],c,i[l+1])},_r=function(e,i){return e||e===0?i(e):i},Za=function(e,i,s){return s<e?e:s>i?i:s},hn=function(e,i){return!en(e)||!(i=Ix.exec(e))?"":i[1]},Xx=function(e,i,s){return _r(s,function(a){return Za(e,i,a)})},sd=[].slice,Uv=function(e,i){return e&&Ai(e)&&"length"in e&&(!i&&!e.length||e.length-1 in e&&Ai(e[0]))&&!e.nodeType&&e!==Pi},Kx=function(e,i,s){return s===void 0&&(s=[]),e.forEach(function(a){var l;return en(a)&&!i||Uv(a,1)?(l=s).push.apply(l,ai(a)):s.push(a)})||s},ai=function(e,i,s){return wt&&!i&&wt.selector?wt.selector(e):en(e)&&!s&&(td||!zs())?sd.call((i||Wd).querySelectorAll(e),0):gn(e)?Kx(e,s):Uv(e)?sd.call(e,0):e?[e]:[]},ad=function(e){return e=ai(e)[0]||za("Invalid scope")||{},function(i){var s=e.current||e.nativeElement||e;return ai(i,s.querySelectorAll?s:s===e?za("Invalid scope")||Wd.createElement("div"):e)}},jv=function(e){return e.sort(function(){return .5-Math.random()})},qv=function(e){if(Lt(e))return e;var i=Ai(e)?e:{each:e},s=Yr(i.ease),a=i.from||0,l=parseFloat(i.base)||0,c={},f=a>0&&a<1,p=isNaN(a)||f,m=i.axis,g=a,_=a;return en(a)?g=_={center:.5,edges:.5,end:1}[a]||0:!f&&p&&(g=a[0],_=a[1]),function(C,E,A){var T=(A||i).length,L=c[T],F,U,M,z,I,G,te,Z,$;if(!L){if($=i.grid==="auto"?0:(i.grid||[1,si])[1],!$){for(te=-si;te<(te=A[$++].getBoundingClientRect().left)&&$<T;);$<T&&$--}for(L=c[T]=[],F=p?Math.min($,T)*g-.5:a%$,U=$===si?0:p?T*_/$-.5:a/$|0,te=0,Z=si,G=0;G<T;G++)M=G%$-F,z=U-(G/$|0),L[G]=I=m?Math.abs(m==="y"?z:M):Pv(M*M+z*z),I>te&&(te=I),I<Z&&(Z=I);a==="random"&&jv(L),L.max=te-Z,L.min=Z,L.v=T=(parseFloat(i.amount)||parseFloat(i.each)*($>T?T-1:m?m==="y"?T/$:$:Math.max($,T/$))||0)*(a==="edges"?-1:1),L.b=T<0?l-T:l,L.u=hn(i.amount||i.each)||0,s=s&&T<0?ey(s):s}return T=(L[C]-L.min)/L.max||0,Ut(L.b+(s?s(T):T)*L.v)+L.u}},od=function(e){var i=Math.pow(10,((e+"").split(".")[1]||"").length);return function(s){var a=Ut(Math.round(parseFloat(s)/e)*e*i);return(a-a%1)/i+(Ui(s)?0:hn(s))}},Hv=function(e,i){var s=gn(e),a,l;return!s&&Ai(e)&&(a=s=e.radius||si,e.values?(e=ai(e.values),(l=!Ui(e[0]))&&(a*=a)):e=od(e.increment)),_r(i,s?Lt(e)?function(c){return l=e(c),Math.abs(l-c)<=a?l:c}:function(c){for(var f=parseFloat(l?c.x:c),p=parseFloat(l?c.y:0),m=si,g=0,_=e.length,C,E;_--;)l?(C=e[_].x-f,E=e[_].y-p,C=C*C+E*E):C=Math.abs(e[_]-f),C<m&&(m=C,g=_);return g=!a||m<=a?e[g]:c,l||g===c||Ui(c)?g:g+hn(c)}:od(e))},$v=function(e,i,s,a){return _r(gn(e)?!i:s===!0?!!(s=0):!a,function(){return gn(e)?e[~~(Math.random()*e.length)]:(s=s||1e-5)&&(a=s<1?Math.pow(10,(s+"").length-2):1)&&Math.floor(Math.round((e-s/2+Math.random()*(i-e+s*.99))/s)*s*a)/a})},Qx=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return function(a){return i.reduce(function(l,c){return c(l)},a)}},Zx=function(e,i){return function(s){return e(parseFloat(s))+(i||hn(s))}},Jx=function(e,i,s){return Gv(e,i,0,1,s)},Yv=function(e,i,s){return _r(s,function(a){return e[~~i(a)]})},eS=function t(e,i,s){var a=i-e;return gn(e)?Yv(e,t(0,e.length),i):_r(s,function(l){return(a+(l-e)%a)%a+e})},tS=function t(e,i,s){var a=i-e,l=a*2;return gn(e)?Yv(e,t(0,e.length-1),i):_r(s,function(c){return c=(l+(c-e)%l)%l||0,e+(c>a?l-c:c)})},Wa=function(e){for(var i=0,s="",a,l,c,f;~(a=e.indexOf("random(",i));)c=e.indexOf(")",a),f=e.charAt(a+7)==="[",l=e.substr(a+7,c-a-7).match(f?Dv:ed),s+=e.substr(i,a-i)+$v(f?l:+l[0],f?0:+l[1],+l[2]||1e-5),i=c+1;return s+e.substr(i,e.length-i)},Gv=function(e,i,s,a,l){var c=i-e,f=a-s;return _r(l,function(p){return s+((p-e)/c*f||0)})},nS=function t(e,i,s,a){var l=isNaN(e+i)?0:function(E){return(1-E)*e+E*i};if(!l){var c=en(e),f={},p,m,g,_,C;if(s===!0&&(a=1)&&(s=null),c)e={p:e},i={p:i};else if(gn(e)&&!gn(i)){for(g=[],_=e.length,C=_-2,m=1;m<_;m++)g.push(t(e[m-1],e[m]));_--,l=function(A){A*=_;var T=Math.min(C,~~A);return g[T](A-T)},s=i}else a||(e=Ns(gn(e)?[]:{},e));if(!g){for(p in i)Yd.call(f,e,p,"get",i[p]);l=function(A){return Qd(A,f)||(c?e.p:e)}}}return _r(s,l)},Vm=function(e,i,s){var a=e.labels,l=si,c,f,p;for(c in a)f=a[c]-i,f<0==!!s&&f&&l>(f=Math.abs(f))&&(p=c,l=f);return p},Yn=function(e,i,s){var a=e.vars,l=a[i],c=wt,f=e._ctx,p,m,g;if(l)return p=a[i+"Params"],m=a.callbackScope||e,s&&vr.length&&xl(),f&&(wt=f),g=p?l.apply(m,p):l.call(m),wt=c,g},Ta=function(e){return br(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ln),e.progress()<1&&Yn(e,"onInterrupt"),e},Ps,Xv=[],Kv=function(e){if(e)if(e=!e.name&&e.default||e,Vd()||e.headless){var i=e.name,s=Lt(e),a=i&&!s&&e.init?function(){this._props=[]}:e,l={init:Va,render:Qd,add:Yd,kill:yS,modifier:vS,rawVars:0},c={targetTest:0,get:0,getSetter:Kd,aliases:{},register:0};if(zs(),e!==a){if(Hn[i])return;Kn(a,Kn(Sl(e,l),c)),Ns(a.prototype,Ns(l,Sl(e,c))),Hn[a.prop=i]=a,e.targetTest&&(pl.push(a),jd[i]=1),i=(i==="css"?"CSS":i.charAt(0).toUpperCase()+i.substr(1))+"Plugin"}Lv(i,a),e.register&&e.register(Nn,a,Fn)}else Xv.push(e)},ft=255,Da={aqua:[0,ft,ft],lime:[0,ft,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ft],navy:[0,0,128],white:[ft,ft,ft],olive:[128,128,0],yellow:[ft,ft,0],orange:[ft,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ft,0,0],pink:[ft,192,203],cyan:[0,ft,ft],transparent:[ft,ft,ft,0]},Au=function(e,i,s){return e+=e<0?1:e>1?-1:0,(e*6<1?i+(s-i)*e*6:e<.5?s:e*3<2?i+(s-i)*(2/3-e)*6:i)*ft+.5|0},Qv=function(e,i,s){var a=e?Ui(e)?[e>>16,e>>8&ft,e&ft]:0:Da.black,l,c,f,p,m,g,_,C,E,A;if(!a){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Da[e])a=Da[e];else if(e.charAt(0)==="#"){if(e.length<6&&(l=e.charAt(1),c=e.charAt(2),f=e.charAt(3),e="#"+l+l+c+c+f+f+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return a=parseInt(e.substr(1,6),16),[a>>16,a>>8&ft,a&ft,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),a=[e>>16,e>>8&ft,e&ft]}else if(e.substr(0,3)==="hsl"){if(a=A=e.match(ed),!i)p=+a[0]%360/360,m=+a[1]/100,g=+a[2]/100,c=g<=.5?g*(m+1):g+m-g*m,l=g*2-c,a.length>3&&(a[3]*=1),a[0]=Au(p+1/3,l,c),a[1]=Au(p,l,c),a[2]=Au(p-1/3,l,c);else if(~e.indexOf("="))return a=e.match(Ev),s&&a.length<4&&(a[3]=1),a}else a=e.match(ed)||Da.transparent;a=a.map(Number)}return i&&!A&&(l=a[0]/ft,c=a[1]/ft,f=a[2]/ft,_=Math.max(l,c,f),C=Math.min(l,c,f),g=(_+C)/2,_===C?p=m=0:(E=_-C,m=g>.5?E/(2-_-C):E/(_+C),p=_===l?(c-f)/E+(c<f?6:0):_===c?(f-l)/E+2:(l-c)/E+4,p*=60),a[0]=~~(p+.5),a[1]=~~(m*100+.5),a[2]=~~(g*100+.5)),s&&a.length<4&&(a[3]=1),a},Zv=function(e){var i=[],s=[],a=-1;return e.split(yr).forEach(function(l){var c=l.match(Cs)||[];i.push.apply(i,c),s.push(a+=c.length+1)}),i.c=s,i},Wm=function(e,i,s){var a="",l=(e+a).match(yr),c=i?"hsla(":"rgba(",f=0,p,m,g,_;if(!l)return e;if(l=l.map(function(C){return(C=Qv(C,i,1))&&c+(i?C[0]+","+C[1]+"%,"+C[2]+"%,"+C[3]:C.join(","))+")"}),s&&(g=Zv(e),p=s.c,p.join(a)!==g.c.join(a)))for(m=e.replace(yr,"1").split(Cs),_=m.length-1;f<_;f++)a+=m[f]+(~p.indexOf(f)?l.shift()||c+"0,0,0,0)":(g.length?g:l.length?l:s).shift());if(!m)for(m=e.split(yr),_=m.length-1;f<_;f++)a+=m[f]+l[f];return a+m[_]},yr=(function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Da)t+="|"+e+"\\b";return new RegExp(t+")","gi")})(),iS=/hsl[a]?\(/,Jv=function(e){var i=e.join(" "),s;if(yr.lastIndex=0,yr.test(i))return s=iS.test(i),e[1]=Wm(e[1],s),e[0]=Wm(e[0],s,Zv(e[1])),!0},Ua,$n=(function(){var t=Date.now,e=500,i=33,s=t(),a=s,l=1e3/240,c=l,f=[],p,m,g,_,C,E,A=function T(L){var F=t()-a,U=L===!0,M,z,I,G;if((F>e||F<0)&&(s+=F-i),a+=F,I=a-s,M=I-c,(M>0||U)&&(G=++_.frame,C=I-_.time*1e3,_.time=I=I/1e3,c+=M+(M>=l?4:l-M),z=1),U||(p=m(T)),z)for(E=0;E<f.length;E++)f[E](I,C,G,L)};return _={time:0,frame:0,tick:function(){A(!0)},deltaRatio:function(L){return C/(1e3/(L||60))},wake:function(){Av&&(!td&&Vd()&&(Pi=td=window,Wd=Pi.document||{},Xn.gsap=Nn,(Pi.gsapVersions||(Pi.gsapVersions=[])).push(Nn.version),Mv(wl||Pi.GreenSockGlobals||!Pi.gsap&&Pi||{}),Xv.forEach(Kv)),g=typeof requestAnimationFrame<"u"&&requestAnimationFrame,p&&_.sleep(),m=g||function(L){return setTimeout(L,c-_.time*1e3+1|0)},Ua=1,A(2))},sleep:function(){(g?cancelAnimationFrame:clearTimeout)(p),Ua=0,m=Va},lagSmoothing:function(L,F){e=L||1/0,i=Math.min(F||33,e)},fps:function(L){l=1e3/(L||240),c=_.time*1e3+l},add:function(L,F,U){var M=F?function(z,I,G,te){L(z,I,G,te),_.remove(M)}:L;return _.remove(L),f[U?"unshift":"push"](M),zs(),M},remove:function(L,F){~(F=f.indexOf(L))&&f.splice(F,1)&&E>=F&&E--},_listeners:f},_})(),zs=function(){return!Ua&&$n.wake()},Ke={},rS=/^[\d.\-M][\d.\-,\s]/,sS=/["']/g,aS=function(e){for(var i={},s=e.substr(1,e.length-3).split(":"),a=s[0],l=1,c=s.length,f,p,m;l<c;l++)p=s[l],f=l!==c-1?p.lastIndexOf(","):p.length,m=p.substr(0,f),i[a]=isNaN(m)?m.replace(sS,"").trim():+m,a=p.substr(f+1).trim();return i},oS=function(e){var i=e.indexOf("(")+1,s=e.indexOf(")"),a=e.indexOf("(",i);return e.substring(i,~a&&a<s?e.indexOf(")",s+1):s)},lS=function(e){var i=(e+"").split("("),s=Ke[i[0]];return s&&i.length>1&&s.config?s.config.apply(null,~e.indexOf("{")?[aS(i[1])]:oS(e).split(",").map(Nv)):Ke._CE&&rS.test(e)?Ke._CE("",e):s},ey=function(e){return function(i){return 1-e(1-i)}},ty=function t(e,i){for(var s=e._first,a;s;)s instanceof xn?t(s,i):s.vars.yoyoEase&&(!s._yoyo||!s._repeat)&&s._yoyo!==i&&(s.timeline?t(s.timeline,i):(a=s._ease,s._ease=s._yEase,s._yEase=a,s._yoyo=i)),s=s._next},Yr=function(e,i){return e&&(Lt(e)?e:Ke[e]||lS(e))||i},Jr=function(e,i,s,a){s===void 0&&(s=function(p){return 1-i(1-p)}),a===void 0&&(a=function(p){return p<.5?i(p*2)/2:1-i((1-p)*2)/2});var l={easeIn:i,easeOut:s,easeInOut:a},c;return Rn(e,function(f){Ke[f]=Xn[f]=l,Ke[c=f.toLowerCase()]=s;for(var p in l)Ke[c+(p==="easeIn"?".in":p==="easeOut"?".out":".inOut")]=Ke[f+"."+p]=l[p]}),l},ny=function(e){return function(i){return i<.5?(1-e(1-i*2))/2:.5+e((i-.5)*2)/2}},Mu=function t(e,i,s){var a=i>=1?i:1,l=(s||(e?.3:.45))/(i<1?i:1),c=l/Ju*(Math.asin(1/a)||0),f=function(g){return g===1?1:a*Math.pow(2,-10*g)*Nx((g-c)*l)+1},p=e==="out"?f:e==="in"?function(m){return 1-f(1-m)}:ny(f);return l=Ju/l,p.config=function(m,g){return t(e,m,g)},p},Lu=function t(e,i){i===void 0&&(i=1.70158);var s=function(c){return c?--c*c*((i+1)*c+i)+1:0},a=e==="out"?s:e==="in"?function(l){return 1-s(1-l)}:ny(s);return a.config=function(l){return t(e,l)},a};Rn("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var i=e<5?e+1:e;Jr(t+",Power"+(i-1),e?function(s){return Math.pow(s,i)}:function(s){return s},function(s){return 1-Math.pow(1-s,i)},function(s){return s<.5?Math.pow(s*2,i)/2:1-Math.pow((1-s)*2,i)/2})});Ke.Linear.easeNone=Ke.none=Ke.Linear.easeIn;Jr("Elastic",Mu("in"),Mu("out"),Mu());(function(t,e){var i=1/e,s=2*i,a=2.5*i,l=function(f){return f<i?t*f*f:f<s?t*Math.pow(f-1.5/e,2)+.75:f<a?t*(f-=2.25/e)*f+.9375:t*Math.pow(f-2.625/e,2)+.984375};Jr("Bounce",function(c){return 1-l(1-c)},l)})(7.5625,2.75);Jr("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)});Jr("Circ",function(t){return-(Pv(1-t*t)-1)});Jr("Sine",function(t){return t===1?1:-Ox(t*Rx)+1});Jr("Back",Lu("in"),Lu("out"),Lu());Ke.SteppedEase=Ke.steps=Xn.SteppedEase={config:function(e,i){e===void 0&&(e=1);var s=1/e,a=e+(i?0:1),l=i?1:0,c=1-pt;return function(f){return((a*Za(0,c,f)|0)+l)*s}}};Os.ease=Ke["quad.out"];Rn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return qd+=t+","+t+"Params,"});var iy=function(e,i){this.id=Fx++,e._gsap=this,this.target=e,this.harness=i,this.get=i?i.get:Fv,this.set=i?i.getSetter:Kd},ja=(function(){function t(i){this.vars=i,this._delay=+i.delay||0,(this._repeat=i.repeat===1/0?-2:i.repeat||0)&&(this._rDelay=i.repeatDelay||0,this._yoyo=!!i.yoyo||!!i.yoyoEase),this._ts=1,Bs(this,+i.duration,1,1),this.data=i.data,wt&&(this._ctx=wt,wt.data.push(this)),Ua||$n.wake()}var e=t.prototype;return e.delay=function(s){return s||s===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+s-this._delay),this._delay=s,this):this._delay},e.duration=function(s){return arguments.length?this.totalDuration(this._repeat>0?s+(s+this._rDelay)*this._repeat:s):this.totalDuration()&&this._dur},e.totalDuration=function(s){return arguments.length?(this._dirty=0,Bs(this,this._repeat<0?s:(s-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(s,a){if(zs(),!arguments.length)return this._tTime;var l=this._dp;if(l&&l.smoothChildTiming&&this._ts){for(Ol(this,s),!l._dp||l.parent||zv(l,this);l&&l.parent;)l.parent._time!==l._start+(l._ts>=0?l._tTime/l._ts:(l.totalDuration()-l._tTime)/-l._ts)&&l.totalTime(l._tTime,!0),l=l.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&s<this._tDur||this._ts<0&&s>0||!this._tDur&&!s)&&ki(this._dp,this,this._start-this._delay)}return(this._tTime!==s||!this._dur&&!a||this._initted&&Math.abs(this._zTime)===pt||!s&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=s),Ov(this,s,a)),this},e.time=function(s,a){return arguments.length?this.totalTime(Math.min(this.totalDuration(),s+Bm(this))%(this._dur+this._rDelay)||(s?this._dur:0),a):this._time},e.totalProgress=function(s,a){return arguments.length?this.totalTime(this.totalDuration()*s,a):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(s,a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-s:s)+Bm(this),a):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(s,a){var l=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(s-1)*l,a):this._repeat?Is(this._tTime,l)+1:1},e.timeScale=function(s,a){if(!arguments.length)return this._rts===-pt?0:this._rts;if(this._rts===s)return this;var l=this.parent&&this._ts?_l(this.parent._time,this):this._tTime;return this._rts=+s||0,this._ts=this._ps||s===-pt?0:this._rts,this.totalTime(Za(-Math.abs(this._delay),this.totalDuration(),l),a!==!1),Fl(this),jx(this)},e.paused=function(s){return arguments.length?(this._ps!==s&&(this._ps=s,s?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(zs(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==pt&&(this._tTime-=pt)))),this):this._ps},e.startTime=function(s){if(arguments.length){this._start=s;var a=this.parent||this._dp;return a&&(a._sort||!this.parent)&&ki(a,this,s-this._delay),this}return this._start},e.endTime=function(s){return this._start+(Ln(s)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(s){var a=this.parent||this._dp;return a?s&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_l(a.rawTime(s),this):this._tTime:this._tTime},e.revert=function(s){s===void 0&&(s=zx);var a=ln;return ln=s,$d(this)&&(this.timeline&&this.timeline.revert(s),this.totalTime(-.01,s.suppressEvents)),this.data!=="nested"&&s.kill!==!1&&this.kill(),ln=a,this},e.globalTime=function(s){for(var a=this,l=arguments.length?s:a.rawTime();a;)l=a._start+l/(Math.abs(a._ts)||1),a=a._dp;return!this.parent&&this._sat?this._sat.globalTime(s):l},e.repeat=function(s){return arguments.length?(this._repeat=s===1/0?-2:s,zm(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(s){if(arguments.length){var a=this._time;return this._rDelay=s,zm(this),a?this.time(a):this}return this._rDelay},e.yoyo=function(s){return arguments.length?(this._yoyo=s,this):this._yoyo},e.seek=function(s,a){return this.totalTime(ii(this,s),Ln(a))},e.restart=function(s,a){return this.play().totalTime(s?-this._delay:0,Ln(a)),this._dur||(this._zTime=-pt),this},e.play=function(s,a){return s!=null&&this.seek(s,a),this.reversed(!1).paused(!1)},e.reverse=function(s,a){return s!=null&&this.seek(s||this.totalDuration(),a),this.reversed(!0).paused(!1)},e.pause=function(s,a){return s!=null&&this.seek(s,a),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(s){return arguments.length?(!!s!==this.reversed()&&this.timeScale(-this._rts||(s?-pt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-pt,this},e.isActive=function(){var s=this.parent||this._dp,a=this._start,l;return!!(!s||this._ts&&this._initted&&s.isActive()&&(l=s.rawTime(!0))>=a&&l<this.endTime(!0)-pt)},e.eventCallback=function(s,a,l){var c=this.vars;return arguments.length>1?(a?(c[s]=a,l&&(c[s+"Params"]=l),s==="onUpdate"&&(this._onUpdate=a)):delete c[s],this):c[s]},e.then=function(s){var a=this;return new Promise(function(l){var c=Lt(s)?s:Iv,f=function(){var m=a.then;a.then=null,Lt(c)&&(c=c(a))&&(c.then||c===a)&&(a.then=m),l(c),a.then=m};a._initted&&a.totalProgress()===1&&a._ts>=0||!a._tTime&&a._ts<0?f():a._prom=f})},e.kill=function(){Ta(this)},t})();Kn(ja.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-pt,_prom:0,_ps:!1,_rts:1});var xn=(function(t){Cv(e,t);function e(s,a){var l;return s===void 0&&(s={}),l=t.call(this,s)||this,l.labels={},l.smoothChildTiming=!!s.smoothChildTiming,l.autoRemoveChildren=!!s.autoRemoveChildren,l._sort=Ln(s.sortChildren),kt&&ki(s.parent||kt,Vi(l),a),s.reversed&&l.reverse(),s.paused&&l.paused(!0),s.scrollTrigger&&Vv(Vi(l),s.scrollTrigger),l}var i=e.prototype;return i.to=function(a,l,c){return Ra(0,arguments,this),this},i.from=function(a,l,c){return Ra(1,arguments,this),this},i.fromTo=function(a,l,c,f){return Ra(2,arguments,this),this},i.set=function(a,l,c){return l.duration=0,l.parent=this,La(l).repeatDelay||(l.repeat=0),l.immediateRender=!!l.immediateRender,new Wt(a,l,ii(this,c),1),this},i.call=function(a,l,c){return ki(this,Wt.delayedCall(0,a,l),c)},i.staggerTo=function(a,l,c,f,p,m,g){return c.duration=l,c.stagger=c.stagger||f,c.onComplete=m,c.onCompleteParams=g,c.parent=this,new Wt(a,c,ii(this,p)),this},i.staggerFrom=function(a,l,c,f,p,m,g){return c.runBackwards=1,La(c).immediateRender=Ln(c.immediateRender),this.staggerTo(a,l,c,f,p,m,g)},i.staggerFromTo=function(a,l,c,f,p,m,g,_){return f.startAt=c,La(f).immediateRender=Ln(f.immediateRender),this.staggerTo(a,l,f,p,m,g,_)},i.render=function(a,l,c){var f=this._time,p=this._dirty?this.totalDuration():this._tDur,m=this._dur,g=a<=0?0:Ut(a),_=this._zTime<0!=a<0&&(this._initted||!m),C,E,A,T,L,F,U,M,z,I,G,te;if(this!==kt&&g>p&&a>=0&&(g=p),g!==this._tTime||c||_){if(f!==this._time&&m&&(g+=this._time-f,a+=this._time-f),C=g,z=this._start,M=this._ts,F=!M,_&&(m||(f=this._zTime),(a||!l)&&(this._zTime=a)),this._repeat){if(G=this._yoyo,L=m+this._rDelay,this._repeat<-1&&a<0)return this.totalTime(L*100+a,l,c);if(C=Ut(g%L),g===p?(T=this._repeat,C=m):(I=Ut(g/L),T=~~I,T&&T===I&&(C=m,T--),C>m&&(C=m)),I=Is(this._tTime,L),!f&&this._tTime&&I!==T&&this._tTime-I*L-this._dur<=0&&(I=T),G&&T&1&&(C=m-C,te=1),T!==I&&!this._lock){var Z=G&&I&1,$=Z===(G&&T&1);if(T<I&&(Z=!Z),f=Z?0:g%m?m:g,this._lock=1,this.render(f||(te?0:Ut(T*L)),l,!m)._lock=0,this._tTime=g,!l&&this.parent&&Yn(this,"onRepeat"),this.vars.repeatRefresh&&!te&&(this.invalidate()._lock=1),f&&f!==this._time||F!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(m=this._dur,p=this._tDur,$&&(this._lock=2,f=Z?m:-1e-4,this.render(f,!0),this.vars.repeatRefresh&&!te&&this.invalidate()),this._lock=0,!this._ts&&!F)return this;ty(this,te)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(U=Yx(this,Ut(f),Ut(C)),U&&(g-=C-(C=U._start))),this._tTime=g,this._time=C,this._act=!M,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=a,f=0),!f&&g&&!l&&!I&&(Yn(this,"onStart"),this._tTime!==g))return this;if(C>=f&&a>=0)for(E=this._first;E;){if(A=E._next,(E._act||C>=E._start)&&E._ts&&U!==E){if(E.parent!==this)return this.render(a,l,c);if(E.render(E._ts>0?(C-E._start)*E._ts:(E._dirty?E.totalDuration():E._tDur)+(C-E._start)*E._ts,l,c),C!==this._time||!this._ts&&!F){U=0,A&&(g+=this._zTime=-pt);break}}E=A}else{E=this._last;for(var re=a<0?a:C;E;){if(A=E._prev,(E._act||re<=E._end)&&E._ts&&U!==E){if(E.parent!==this)return this.render(a,l,c);if(E.render(E._ts>0?(re-E._start)*E._ts:(E._dirty?E.totalDuration():E._tDur)+(re-E._start)*E._ts,l,c||ln&&$d(E)),C!==this._time||!this._ts&&!F){U=0,A&&(g+=this._zTime=re?-pt:pt);break}}E=A}}if(U&&!l&&(this.pause(),U.render(C>=f?0:-pt)._zTime=C>=f?1:-1,this._ts))return this._start=z,Fl(this),this.render(a,l,c);this._onUpdate&&!l&&Yn(this,"onUpdate",!0),(g===p&&this._tTime>=this.totalDuration()||!g&&f)&&(z===this._start||Math.abs(M)!==Math.abs(this._ts))&&(this._lock||((a||!m)&&(g===p&&this._ts>0||!g&&this._ts<0)&&br(this,1),!l&&!(a<0&&!f)&&(g||f||!p)&&(Yn(this,g===p&&a>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(g<p&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(a,l){var c=this;if(Ui(l)||(l=ii(this,l,a)),!(a instanceof ja)){if(gn(a))return a.forEach(function(f){return c.add(f,l)}),this;if(en(a))return this.addLabel(a,l);if(Lt(a))a=Wt.delayedCall(0,a);else return this}return this!==a?ki(this,a,l):this},i.getChildren=function(a,l,c,f){a===void 0&&(a=!0),l===void 0&&(l=!0),c===void 0&&(c=!0),f===void 0&&(f=-si);for(var p=[],m=this._first;m;)m._start>=f&&(m instanceof Wt?l&&p.push(m):(c&&p.push(m),a&&p.push.apply(p,m.getChildren(!0,l,c)))),m=m._next;return p},i.getById=function(a){for(var l=this.getChildren(1,1,1),c=l.length;c--;)if(l[c].vars.id===a)return l[c]},i.remove=function(a){return en(a)?this.removeLabel(a):Lt(a)?this.killTweensOf(a):(a.parent===this&&Rl(this,a),a===this._recent&&(this._recent=this._last),$r(this))},i.totalTime=function(a,l){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ut($n.time-(this._ts>0?a/this._ts:(this.totalDuration()-a)/-this._ts))),t.prototype.totalTime.call(this,a,l),this._forcing=0,this):this._tTime},i.addLabel=function(a,l){return this.labels[a]=ii(this,l),this},i.removeLabel=function(a){return delete this.labels[a],this},i.addPause=function(a,l,c){var f=Wt.delayedCall(0,l||Va,c);return f.data="isPause",this._hasPause=1,ki(this,f,ii(this,a))},i.removePause=function(a){var l=this._first;for(a=ii(this,a);l;)l._start===a&&l.data==="isPause"&&br(l),l=l._next},i.killTweensOf=function(a,l,c){for(var f=this.getTweensOf(a,c),p=f.length;p--;)hr!==f[p]&&f[p].kill(a,l);return this},i.getTweensOf=function(a,l){for(var c=[],f=ai(a),p=this._first,m=Ui(l),g;p;)p instanceof Wt?Vx(p._targets,f)&&(m?(!hr||p._initted&&p._ts)&&p.globalTime(0)<=l&&p.globalTime(p.totalDuration())>l:!l||p.isActive())&&c.push(p):(g=p.getTweensOf(f,l)).length&&c.push.apply(c,g),p=p._next;return c},i.tweenTo=function(a,l){l=l||{};var c=this,f=ii(c,a),p=l,m=p.startAt,g=p.onStart,_=p.onStartParams,C=p.immediateRender,E,A=Wt.to(c,Kn({ease:l.ease||"none",lazy:!1,immediateRender:!1,time:f,overwrite:"auto",duration:l.duration||Math.abs((f-(m&&"time"in m?m.time:c._time))/c.timeScale())||pt,onStart:function(){if(c.pause(),!E){var L=l.duration||Math.abs((f-(m&&"time"in m?m.time:c._time))/c.timeScale());A._dur!==L&&Bs(A,L,0,1).render(A._time,!0,!0),E=1}g&&g.apply(A,_||[])}},l));return C?A.render(0):A},i.tweenFromTo=function(a,l,c){return this.tweenTo(l,Kn({startAt:{time:ii(this,a)}},c))},i.recent=function(){return this._recent},i.nextLabel=function(a){return a===void 0&&(a=this._time),Vm(this,ii(this,a))},i.previousLabel=function(a){return a===void 0&&(a=this._time),Vm(this,ii(this,a),1)},i.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.previousLabel(this._time+pt)},i.shiftChildren=function(a,l,c){c===void 0&&(c=0);for(var f=this._first,p=this.labels,m;f;)f._start>=c&&(f._start+=a,f._end+=a),f=f._next;if(l)for(m in p)p[m]>=c&&(p[m]+=a);return $r(this)},i.invalidate=function(a){var l=this._first;for(this._lock=0;l;)l.invalidate(a),l=l._next;return t.prototype.invalidate.call(this,a)},i.clear=function(a){a===void 0&&(a=!0);for(var l=this._first,c;l;)c=l._next,this.remove(l),l=c;return this._dp&&(this._time=this._tTime=this._pTime=0),a&&(this.labels={}),$r(this)},i.totalDuration=function(a){var l=0,c=this,f=c._last,p=si,m,g,_;if(arguments.length)return c.timeScale((c._repeat<0?c.duration():c.totalDuration())/(c.reversed()?-a:a));if(c._dirty){for(_=c.parent;f;)m=f._prev,f._dirty&&f.totalDuration(),g=f._start,g>p&&c._sort&&f._ts&&!c._lock?(c._lock=1,ki(c,f,g-f._delay,1)._lock=0):p=g,g<0&&f._ts&&(l-=g,(!_&&!c._dp||_&&_.smoothChildTiming)&&(c._start+=g/c._ts,c._time-=g,c._tTime-=g),c.shiftChildren(-g,!1,-1/0),p=0),f._end>l&&f._ts&&(l=f._end),f=m;Bs(c,c===kt&&c._time>l?c._time:l,1,1),c._dirty=0}return c._tDur},e.updateRoot=function(a){if(kt._ts&&(Ov(kt,_l(a,kt)),Rv=$n.frame),$n.frame>=Nm){Nm+=Gn.autoSleep||120;var l=kt._first;if((!l||!l._ts)&&Gn.autoSleep&&$n._listeners.length<2){for(;l&&!l._ts;)l=l._next;l||$n.sleep()}}},e})(ja);Kn(xn.prototype,{_lock:0,_hasPause:0,_forcing:0});var cS=function(e,i,s,a,l,c,f){var p=new Fn(this._pt,e,i,0,1,cy,null,l),m=0,g=0,_,C,E,A,T,L,F,U;for(p.b=s,p.e=a,s+="",a+="",(F=~a.indexOf("random("))&&(a=Wa(a)),c&&(U=[s,a],c(U,e,i),s=U[0],a=U[1]),C=s.match(Tu)||[];_=Tu.exec(a);)A=_[0],T=a.substring(m,_.index),E?E=(E+1)%5:T.substr(-5)==="rgba("&&(E=1),A!==C[g++]&&(L=parseFloat(C[g-1])||0,p._pt={_next:p._pt,p:T||g===1?T:",",s:L,c:A.charAt(1)==="="?Ms(L,A)-L:parseFloat(A)-L,m:E&&E<4?Math.round:0},m=Tu.lastIndex);return p.c=m<a.length?a.substring(m,a.length):"",p.fp=f,(Tv.test(a)||F)&&(p.e=0),this._pt=p,p},Yd=function(e,i,s,a,l,c,f,p,m,g){Lt(a)&&(a=a(l||0,e,c));var _=e[i],C=s!=="get"?s:Lt(_)?m?e[i.indexOf("set")||!Lt(e["get"+i.substr(3)])?i:"get"+i.substr(3)](m):e[i]():_,E=Lt(_)?m?hS:oy:Xd,A;if(en(a)&&(~a.indexOf("random(")&&(a=Wa(a)),a.charAt(1)==="="&&(A=Ms(C,a)+(hn(C)||0),(A||A===0)&&(a=A))),!g||C!==a||ld)return!isNaN(C*a)&&a!==""?(A=new Fn(this._pt,e,i,+C||0,a-(C||0),typeof _=="boolean"?gS:ly,0,E),m&&(A.fp=m),f&&A.modifier(f,this,e),this._pt=A):(!_&&!(i in e)&&Ud(i,a),cS.call(this,e,i,C,a,E,p||Gn.stringFilter,m))},uS=function(e,i,s,a,l){if(Lt(e)&&(e=Fa(e,l,i,s,a)),!Ai(e)||e.style&&e.nodeType||gn(e)||kv(e))return en(e)?Fa(e,l,i,s,a):e;var c={},f;for(f in e)c[f]=Fa(e[f],l,i,s,a);return c},ry=function(e,i,s,a,l,c){var f,p,m,g;if(Hn[e]&&(f=new Hn[e]).init(l,f.rawVars?i[e]:uS(i[e],a,l,c,s),s,a,c)!==!1&&(s._pt=p=new Fn(s._pt,l,e,0,1,f.render,f,0,f.priority),s!==Ps))for(m=s._ptLookup[s._targets.indexOf(l)],g=f._props.length;g--;)m[f._props[g]]=p;return f},hr,ld,Gd=function t(e,i,s){var a=e.vars,l=a.ease,c=a.startAt,f=a.immediateRender,p=a.lazy,m=a.onUpdate,g=a.runBackwards,_=a.yoyoEase,C=a.keyframes,E=a.autoRevert,A=e._dur,T=e._startAt,L=e._targets,F=e.parent,U=F&&F.data==="nested"?F.vars.targets:L,M=e._overwrite==="auto"&&!Bd,z=e.timeline,I,G,te,Z,$,re,fe,he,we,ge,u,v,y;if(z&&(!C||!l)&&(l="none"),e._ease=Yr(l,Os.ease),e._yEase=_?ey(Yr(_===!0?l:_,Os.ease)):0,_&&e._yoyo&&!e._repeat&&(_=e._yEase,e._yEase=e._ease,e._ease=_),e._from=!z&&!!a.runBackwards,!z||C&&!a.stagger){if(he=L[0]?Hr(L[0]).harness:0,v=he&&a[he.prop],I=Sl(a,jd),T&&(T._zTime<0&&T.progress(1),i<0&&g&&f&&!E?T.render(-1,!0):T.revert(g&&A?fl:Bx),T._lazy=0),c){if(br(e._startAt=Wt.set(L,Kn({data:"isStart",overwrite:!1,parent:F,immediateRender:!0,lazy:!T&&Ln(p),startAt:null,delay:0,onUpdate:m&&function(){return Yn(e,"onUpdate")},stagger:0},c))),e._startAt._dp=0,e._startAt._sat=e,i<0&&(ln||!f&&!E)&&e._startAt.revert(fl),f&&A&&i<=0&&s<=0){i&&(e._zTime=i);return}}else if(g&&A&&!T){if(i&&(f=!1),te=Kn({overwrite:!1,data:"isFromStart",lazy:f&&!T&&Ln(p),immediateRender:f,stagger:0,parent:F},I),v&&(te[he.prop]=v),br(e._startAt=Wt.set(L,te)),e._startAt._dp=0,e._startAt._sat=e,i<0&&(ln?e._startAt.revert(fl):e._startAt.render(-1,!0)),e._zTime=i,!f)t(e._startAt,pt,pt);else if(!i)return}for(e._pt=e._ptCache=0,p=A&&Ln(p)||p&&!A,G=0;G<L.length;G++){if($=L[G],fe=$._gsap||Hd(L)[G]._gsap,e._ptLookup[G]=ge={},nd[fe.id]&&vr.length&&xl(),u=U===L?G:U.indexOf($),he&&(we=new he).init($,v||I,e,u,U)!==!1&&(e._pt=Z=new Fn(e._pt,$,we.name,0,1,we.render,we,0,we.priority),we._props.forEach(function(b){ge[b]=Z}),we.priority&&(re=1)),!he||v)for(te in I)Hn[te]&&(we=ry(te,I,e,u,$,U))?we.priority&&(re=1):ge[te]=Z=Yd.call(e,$,te,"get",I[te],u,U,0,a.stringFilter);e._op&&e._op[G]&&e.kill($,e._op[G]),M&&e._pt&&(hr=e,kt.killTweensOf($,ge,e.globalTime(i)),y=!e.parent,hr=0),e._pt&&p&&(nd[fe.id]=1)}re&&uy(e),e._onInit&&e._onInit(e)}e._onUpdate=m,e._initted=(!e._op||e._pt)&&!y,C&&i<=0&&z.render(si,!0,!0)},dS=function(e,i,s,a,l,c,f,p){var m=(e._pt&&e._ptCache||(e._ptCache={}))[i],g,_,C,E;if(!m)for(m=e._ptCache[i]=[],C=e._ptLookup,E=e._targets.length;E--;){if(g=C[E][i],g&&g.d&&g.d._pt)for(g=g.d._pt;g&&g.p!==i&&g.fp!==i;)g=g._next;if(!g)return ld=1,e.vars[i]="+=0",Gd(e,f),ld=0,p?za(i+" not eligible for reset"):1;m.push(g)}for(E=m.length;E--;)_=m[E],g=_._pt||_,g.s=(a||a===0)&&!l?a:g.s+(a||0)+c*g.c,g.c=s-g.s,_.e&&(_.e=It(s)+hn(_.e)),_.b&&(_.b=g.s+hn(_.b))},fS=function(e,i){var s=e[0]?Hr(e[0]).harness:0,a=s&&s.aliases,l,c,f,p;if(!a)return i;l=Ns({},i);for(c in a)if(c in l)for(p=a[c].split(","),f=p.length;f--;)l[p[f]]=l[c];return l},pS=function(e,i,s,a){var l=i.ease||a||"power1.inOut",c,f;if(gn(i))f=s[e]||(s[e]=[]),i.forEach(function(p,m){return f.push({t:m/(i.length-1)*100,v:p,e:l})});else for(c in i)f=s[c]||(s[c]=[]),c==="ease"||f.push({t:parseFloat(e),v:i[c],e:l})},Fa=function(e,i,s,a,l){return Lt(e)?e.call(i,s,a,l):en(e)&&~e.indexOf("random(")?Wa(e):e},sy=qd+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",ay={};Rn(sy+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return ay[t]=1});var Wt=(function(t){Cv(e,t);function e(s,a,l,c){var f;typeof a=="number"&&(l.duration=a,a=l,l=null),f=t.call(this,c?a:La(a))||this;var p=f.vars,m=p.duration,g=p.delay,_=p.immediateRender,C=p.stagger,E=p.overwrite,A=p.keyframes,T=p.defaults,L=p.scrollTrigger,F=p.yoyoEase,U=a.parent||kt,M=(gn(s)||kv(s)?Ui(s[0]):"length"in a)?[s]:ai(s),z,I,G,te,Z,$,re,fe;if(f._targets=M.length?Hd(M):za("GSAP target "+s+" not found. https://gsap.com",!Gn.nullTargetWarn)||[],f._ptLookup=[],f._overwrite=E,A||C||ll(m)||ll(g)){if(a=f.vars,z=f.timeline=new xn({data:"nested",defaults:T||{},targets:U&&U.data==="nested"?U.vars.targets:M}),z.kill(),z.parent=z._dp=Vi(f),z._start=0,C||ll(m)||ll(g)){if(te=M.length,re=C&&qv(C),Ai(C))for(Z in C)~sy.indexOf(Z)&&(fe||(fe={}),fe[Z]=C[Z]);for(I=0;I<te;I++)G=Sl(a,ay),G.stagger=0,F&&(G.yoyoEase=F),fe&&Ns(G,fe),$=M[I],G.duration=+Fa(m,Vi(f),I,$,M),G.delay=(+Fa(g,Vi(f),I,$,M)||0)-f._delay,!C&&te===1&&G.delay&&(f._delay=g=G.delay,f._start+=g,G.delay=0),z.to($,G,re?re(I,$,M):0),z._ease=Ke.none;z.duration()?m=g=0:f.timeline=0}else if(A){La(Kn(z.vars.defaults,{ease:"none"})),z._ease=Yr(A.ease||a.ease||"none");var he=0,we,ge,u;if(gn(A))A.forEach(function(v){return z.to(M,v,">")}),z.duration();else{G={};for(Z in A)Z==="ease"||Z==="easeEach"||pS(Z,A[Z],G,A.easeEach);for(Z in G)for(we=G[Z].sort(function(v,y){return v.t-y.t}),he=0,I=0;I<we.length;I++)ge=we[I],u={ease:ge.e,duration:(ge.t-(I?we[I-1].t:0))/100*m},u[Z]=ge.v,z.to(M,u,he),he+=u.duration;z.duration()<m&&z.to({},{duration:m-z.duration()})}}m||f.duration(m=z.duration())}else f.timeline=0;return E===!0&&!Bd&&(hr=Vi(f),kt.killTweensOf(M),hr=0),ki(U,Vi(f),l),a.reversed&&f.reverse(),a.paused&&f.paused(!0),(_||!m&&!A&&f._start===Ut(U._time)&&Ln(_)&&qx(Vi(f))&&U.data!=="nested")&&(f._tTime=-pt,f.render(Math.max(0,-g)||0)),L&&Vv(Vi(f),L),f}var i=e.prototype;return i.render=function(a,l,c){var f=this._time,p=this._tDur,m=this._dur,g=a<0,_=a>p-pt&&!g?p:a<pt?0:a,C,E,A,T,L,F,U,M,z;if(!m)$x(this,a,l,c);else if(_!==this._tTime||!a||c||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g||this._lazy){if(C=_,M=this.timeline,this._repeat){if(T=m+this._rDelay,this._repeat<-1&&g)return this.totalTime(T*100+a,l,c);if(C=Ut(_%T),_===p?(A=this._repeat,C=m):(L=Ut(_/T),A=~~L,A&&A===L?(C=m,A--):C>m&&(C=m)),F=this._yoyo&&A&1,F&&(z=this._yEase,C=m-C),L=Is(this._tTime,T),C===f&&!c&&this._initted&&A===L)return this._tTime=_,this;A!==L&&(M&&this._yEase&&ty(M,F),this.vars.repeatRefresh&&!F&&!this._lock&&C!==T&&this._initted&&(this._lock=c=1,this.render(Ut(T*A),!0).invalidate()._lock=0))}if(!this._initted){if(Wv(this,g?a:C,c,l,_))return this._tTime=0,this;if(f!==this._time&&!(c&&this.vars.repeatRefresh&&A!==L))return this;if(m!==this._dur)return this.render(a,l,c)}if(this._tTime=_,this._time=C,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=U=(z||this._ease)(C/m),this._from&&(this.ratio=U=1-U),!f&&_&&!l&&!L&&(Yn(this,"onStart"),this._tTime!==_))return this;for(E=this._pt;E;)E.r(U,E.d),E=E._next;M&&M.render(a<0?a:M._dur*M._ease(C/this._dur),l,c)||this._startAt&&(this._zTime=a),this._onUpdate&&!l&&(g&&id(this,a,l,c),Yn(this,"onUpdate")),this._repeat&&A!==L&&this.vars.onRepeat&&!l&&this.parent&&Yn(this,"onRepeat"),(_===this._tDur||!_)&&this._tTime===_&&(g&&!this._onUpdate&&id(this,a,!0,!0),(a||!m)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&br(this,1),!l&&!(g&&!f)&&(_||f||F)&&(Yn(this,_===p?"onComplete":"onReverseComplete",!0),this._prom&&!(_<p&&this.timeScale()>0)&&this._prom()))}return this},i.targets=function(){return this._targets},i.invalidate=function(a){return(!a||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(a),t.prototype.invalidate.call(this,a)},i.resetTo=function(a,l,c,f,p){Ua||$n.wake(),this._ts||this.play();var m=Math.min(this._dur,(this._dp._time-this._start)*this._ts),g;return this._initted||Gd(this,m),g=this._ease(m/this._dur),dS(this,a,l,c,f,g,m,p)?this.resetTo(a,l,c,f,1):(Ol(this,0),this.parent||Bv(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(a,l){if(l===void 0&&(l="all"),!a&&(!l||l==="all"))return this._lazy=this._pt=0,this.parent?Ta(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ln),this;if(this.timeline){var c=this.timeline.totalDuration();return this.timeline.killTweensOf(a,l,hr&&hr.vars.overwrite!==!0)._first||Ta(this),this.parent&&c!==this.timeline.totalDuration()&&Bs(this,this._dur*this.timeline._tDur/c,0,1),this}var f=this._targets,p=a?ai(a):f,m=this._ptLookup,g=this._pt,_,C,E,A,T,L,F;if((!l||l==="all")&&Ux(f,p))return l==="all"&&(this._pt=0),Ta(this);for(_=this._op=this._op||[],l!=="all"&&(en(l)&&(T={},Rn(l,function(U){return T[U]=1}),l=T),l=fS(f,l)),F=f.length;F--;)if(~p.indexOf(f[F])){C=m[F],l==="all"?(_[F]=l,A=C,E={}):(E=_[F]=_[F]||{},A=l);for(T in A)L=C&&C[T],L&&((!("kill"in L.d)||L.d.kill(T)===!0)&&Rl(this,L,"_pt"),delete C[T]),E!=="all"&&(E[T]=1)}return this._initted&&!this._pt&&g&&Ta(this),this},e.to=function(a,l){return new e(a,l,arguments[2])},e.from=function(a,l){return Ra(1,arguments)},e.delayedCall=function(a,l,c,f){return new e(l,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:a,onComplete:l,onReverseComplete:l,onCompleteParams:c,onReverseCompleteParams:c,callbackScope:f})},e.fromTo=function(a,l,c){return Ra(2,arguments)},e.set=function(a,l){return l.duration=0,l.repeatDelay||(l.repeat=0),new e(a,l)},e.killTweensOf=function(a,l,c){return kt.killTweensOf(a,l,c)},e})(ja);Kn(Wt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Rn("staggerTo,staggerFrom,staggerFromTo",function(t){Wt[t]=function(){var e=new xn,i=sd.call(arguments,0);return i.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,i)}});var Xd=function(e,i,s){return e[i]=s},oy=function(e,i,s){return e[i](s)},hS=function(e,i,s,a){return e[i](a.fp,s)},mS=function(e,i,s){return e.setAttribute(i,s)},Kd=function(e,i){return Lt(e[i])?oy:zd(e[i])&&e.setAttribute?mS:Xd},ly=function(e,i){return i.set(i.t,i.p,Math.round((i.s+i.c*e)*1e6)/1e6,i)},gS=function(e,i){return i.set(i.t,i.p,!!(i.s+i.c*e),i)},cy=function(e,i){var s=i._pt,a="";if(!e&&i.b)a=i.b;else if(e===1&&i.e)a=i.e;else{for(;s;)a=s.p+(s.m?s.m(s.s+s.c*e):Math.round((s.s+s.c*e)*1e4)/1e4)+a,s=s._next;a+=i.c}i.set(i.t,i.p,a,i)},Qd=function(e,i){for(var s=i._pt;s;)s.r(e,s.d),s=s._next},vS=function(e,i,s,a){for(var l=this._pt,c;l;)c=l._next,l.p===a&&l.modifier(e,i,s),l=c},yS=function(e){for(var i=this._pt,s,a;i;)a=i._next,i.p===e&&!i.op||i.op===e?Rl(this,i,"_pt"):i.dep||(s=1),i=a;return!s},bS=function(e,i,s,a){a.mSet(e,i,a.m.call(a.tween,s,a.mt),a)},uy=function(e){for(var i=e._pt,s,a,l,c;i;){for(s=i._next,a=l;a&&a.pr>i.pr;)a=a._next;(i._prev=a?a._prev:c)?i._prev._next=i:l=i,(i._next=a)?a._prev=i:c=i,i=s}e._pt=l},Fn=(function(){function t(i,s,a,l,c,f,p,m,g){this.t=s,this.s=l,this.c=c,this.p=a,this.r=f||ly,this.d=p||this,this.set=m||Xd,this.pr=g||0,this._next=i,i&&(i._prev=this)}var e=t.prototype;return e.modifier=function(s,a,l){this.mSet=this.mSet||this.set,this.set=bS,this.m=s,this.mt=l,this.tween=a},t})();Rn(qd+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return jd[t]=1});Xn.TweenMax=Xn.TweenLite=Wt;Xn.TimelineLite=Xn.TimelineMax=xn;kt=new xn({sortChildren:!1,defaults:Os,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Gn.stringFilter=Jv;var Gr=[],hl={},wS=[],Um=0,xS=0,Ru=function(e){return(hl[e]||wS).map(function(i){return i()})},cd=function(){var e=Date.now(),i=[];e-Um>2&&(Ru("matchMediaInit"),Gr.forEach(function(s){var a=s.queries,l=s.conditions,c,f,p,m;for(f in a)c=Pi.matchMedia(a[f]).matches,c&&(p=1),c!==l[f]&&(l[f]=c,m=1);m&&(s.revert(),p&&i.push(s))}),Ru("matchMediaRevert"),i.forEach(function(s){return s.onMatch(s,function(a){return s.add(null,a)})}),Um=e,Ru("matchMedia"))},dy=(function(){function t(i,s){this.selector=s&&ad(s),this.data=[],this._r=[],this.isReverted=!1,this.id=xS++,i&&this.add(i)}var e=t.prototype;return e.add=function(s,a,l){Lt(s)&&(l=a,a=s,s=Lt);var c=this,f=function(){var m=wt,g=c.selector,_;return m&&m!==c&&m.data.push(c),l&&(c.selector=ad(l)),wt=c,_=a.apply(c,arguments),Lt(_)&&c._r.push(_),wt=m,c.selector=g,c.isReverted=!1,_};return c.last=f,s===Lt?f(c,function(p){return c.add(null,p)}):s?c[s]=f:f},e.ignore=function(s){var a=wt;wt=null,s(this),wt=a},e.getTweens=function(){var s=[];return this.data.forEach(function(a){return a instanceof t?s.push.apply(s,a.getTweens()):a instanceof Wt&&!(a.parent&&a.parent.data==="nested")&&s.push(a)}),s},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(s,a){var l=this;if(s?(function(){for(var f=l.getTweens(),p=l.data.length,m;p--;)m=l.data[p],m.data==="isFlip"&&(m.revert(),m.getChildren(!0,!0,!1).forEach(function(g){return f.splice(f.indexOf(g),1)}));for(f.map(function(g){return{g:g._dur||g._delay||g._sat&&!g._sat.vars.immediateRender?g.globalTime(0):-1/0,t:g}}).sort(function(g,_){return _.g-g.g||-1/0}).forEach(function(g){return g.t.revert(s)}),p=l.data.length;p--;)m=l.data[p],m instanceof xn?m.data!=="nested"&&(m.scrollTrigger&&m.scrollTrigger.revert(),m.kill()):!(m instanceof Wt)&&m.revert&&m.revert(s);l._r.forEach(function(g){return g(s,l)}),l.isReverted=!0})():this.data.forEach(function(f){return f.kill&&f.kill()}),this.clear(),a)for(var c=Gr.length;c--;)Gr[c].id===this.id&&Gr.splice(c,1)},e.revert=function(s){this.kill(s||{})},t})(),SS=(function(){function t(i){this.contexts=[],this.scope=i,wt&&wt.data.push(this)}var e=t.prototype;return e.add=function(s,a,l){Ai(s)||(s={matches:s});var c=new dy(0,l||this.scope),f=c.conditions={},p,m,g;wt&&!c.selector&&(c.selector=wt.selector),this.contexts.push(c),a=c.add("onMatch",a),c.queries=s;for(m in s)m==="all"?g=1:(p=Pi.matchMedia(s[m]),p&&(Gr.indexOf(c)<0&&Gr.push(c),(f[m]=p.matches)&&(g=1),p.addListener?p.addListener(cd):p.addEventListener("change",cd)));return g&&a(c,function(_){return c.add(null,_)}),this},e.revert=function(s){this.kill(s||{})},e.kill=function(s){this.contexts.forEach(function(a){return a.kill(s,!0)})},t})(),Cl={registerPlugin:function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];i.forEach(function(a){return Kv(a)})},timeline:function(e){return new xn(e)},getTweensOf:function(e,i){return kt.getTweensOf(e,i)},getProperty:function(e,i,s,a){en(e)&&(e=ai(e)[0]);var l=Hr(e||{}).get,c=s?Iv:Nv;return s==="native"&&(s=""),e&&(i?c((Hn[i]&&Hn[i].get||l)(e,i,s,a)):function(f,p,m){return c((Hn[f]&&Hn[f].get||l)(e,f,p,m))})},quickSetter:function(e,i,s){if(e=ai(e),e.length>1){var a=e.map(function(g){return Nn.quickSetter(g,i,s)}),l=a.length;return function(g){for(var _=l;_--;)a[_](g)}}e=e[0]||{};var c=Hn[i],f=Hr(e),p=f.harness&&(f.harness.aliases||{})[i]||i,m=c?function(g){var _=new c;Ps._pt=0,_.init(e,s?g+s:g,Ps,0,[e]),_.render(1,_),Ps._pt&&Qd(1,Ps)}:f.set(e,p);return c?m:function(g){return m(e,p,s?g+s:g,f,1)}},quickTo:function(e,i,s){var a,l=Nn.to(e,Kn((a={},a[i]="+=0.1",a.paused=!0,a.stagger=0,a),s||{})),c=function(p,m,g){return l.resetTo(i,p,m,g)};return c.tween=l,c},isTweening:function(e){return kt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Yr(e.ease,Os.ease)),Im(Os,e||{})},config:function(e){return Im(Gn,e||{})},registerEffect:function(e){var i=e.name,s=e.effect,a=e.plugins,l=e.defaults,c=e.extendTimeline;(a||"").split(",").forEach(function(f){return f&&!Hn[f]&&!Xn[f]&&za(i+" effect requires "+f+" plugin.")}),Du[i]=function(f,p,m){return s(ai(f),Kn(p||{},l),m)},c&&(xn.prototype[i]=function(f,p,m){return this.add(Du[i](f,Ai(p)?p:(m=p)&&{},this),m)})},registerEase:function(e,i){Ke[e]=Yr(i)},parseEase:function(e,i){return arguments.length?Yr(e,i):Ke},getById:function(e){return kt.getById(e)},exportRoot:function(e,i){e===void 0&&(e={});var s=new xn(e),a,l;for(s.smoothChildTiming=Ln(e.smoothChildTiming),kt.remove(s),s._dp=0,s._time=s._tTime=kt._time,a=kt._first;a;)l=a._next,(i||!(!a._dur&&a instanceof Wt&&a.vars.onComplete===a._targets[0]))&&ki(s,a,a._start-a._delay),a=l;return ki(kt,s,0),s},context:function(e,i){return e?new dy(e,i):wt},matchMedia:function(e){return new SS(e)},matchMediaRefresh:function(){return Gr.forEach(function(e){var i=e.conditions,s,a;for(a in i)i[a]&&(i[a]=!1,s=1);s&&e.revert()})||cd()},addEventListener:function(e,i){var s=hl[e]||(hl[e]=[]);~s.indexOf(i)||s.push(i)},removeEventListener:function(e,i){var s=hl[e],a=s&&s.indexOf(i);a>=0&&s.splice(a,1)},utils:{wrap:eS,wrapYoyo:tS,distribute:qv,random:$v,snap:Hv,normalize:Jx,getUnit:hn,clamp:Xx,splitColor:Qv,toArray:ai,selector:ad,mapRange:Gv,pipe:Qx,unitize:Zx,interpolate:nS,shuffle:jv},install:Mv,effects:Du,ticker:$n,updateRoot:xn.updateRoot,plugins:Hn,globalTimeline:kt,core:{PropTween:Fn,globals:Lv,Tween:Wt,Timeline:xn,Animation:ja,getCache:Hr,_removeLinkedListItem:Rl,reverting:function(){return ln},context:function(e){return e&&wt&&(wt.data.push(e),e._ctx=wt),wt},suppressOverwrites:function(e){return Bd=e}}};Rn("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Cl[t]=Wt[t]});$n.add(xn.updateRoot);Ps=Cl.to({},{duration:0});var _S=function(e,i){for(var s=e._pt;s&&s.p!==i&&s.op!==i&&s.fp!==i;)s=s._next;return s},CS=function(e,i){var s=e._targets,a,l,c;for(a in i)for(l=s.length;l--;)c=e._ptLookup[l][a],c&&(c=c.d)&&(c._pt&&(c=_S(c,a)),c&&c.modifier&&c.modifier(i[a],e,s[l],a))},Fu=function(e,i){return{name:e,headless:1,rawVars:1,init:function(a,l,c){c._onInit=function(f){var p,m;if(en(l)&&(p={},Rn(l,function(g){return p[g]=1}),l=p),i){p={};for(m in l)p[m]=i(l[m]);l=p}CS(f,l)}}}},Nn=Cl.registerPlugin({name:"attr",init:function(e,i,s,a,l){var c,f,p;this.tween=s;for(c in i)p=e.getAttribute(c)||"",f=this.add(e,"setAttribute",(p||0)+"",i[c],a,l,0,0,c),f.op=c,f.b=p,this._props.push(c)},render:function(e,i){for(var s=i._pt;s;)ln?s.set(s.t,s.p,s.b,s):s.r(e,s.d),s=s._next}},{name:"endArray",headless:1,init:function(e,i){for(var s=i.length;s--;)this.add(e,s,e[s]||0,i[s],0,0,0,0,0,1)}},Fu("roundProps",od),Fu("modifiers"),Fu("snap",Hv))||Cl;Wt.version=xn.version=Nn.version="3.13.0";Av=1;Vd()&&zs();Ke.Power0;Ke.Power1;Ke.Power2;Ke.Power3;Ke.Power4;Ke.Linear;Ke.Quad;Ke.Cubic;Ke.Quart;Ke.Quint;Ke.Strong;Ke.Elastic;Ke.Back;Ke.SteppedEase;Ke.Bounce;Ke.Sine;Ke.Expo;Ke.Circ;var jm,mr,Ls,Zd,Ur,qm,Jd,PS=function(){return typeof window<"u"},ji={},Vr=180/Math.PI,Rs=Math.PI/180,_s=Math.atan2,Hm=1e8,ef=/([A-Z])/g,kS=/(left|right|width|margin|padding|x)/i,ES=/[\s,\(]\S/,Ei={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ud=function(e,i){return i.set(i.t,i.p,Math.round((i.s+i.c*e)*1e4)/1e4+i.u,i)},TS=function(e,i){return i.set(i.t,i.p,e===1?i.e:Math.round((i.s+i.c*e)*1e4)/1e4+i.u,i)},DS=function(e,i){return i.set(i.t,i.p,e?Math.round((i.s+i.c*e)*1e4)/1e4+i.u:i.b,i)},AS=function(e,i){var s=i.s+i.c*e;i.set(i.t,i.p,~~(s+(s<0?-.5:.5))+i.u,i)},fy=function(e,i){return i.set(i.t,i.p,e?i.e:i.b,i)},py=function(e,i){return i.set(i.t,i.p,e!==1?i.b:i.e,i)},MS=function(e,i,s){return e.style[i]=s},LS=function(e,i,s){return e.style.setProperty(i,s)},RS=function(e,i,s){return e._gsap[i]=s},FS=function(e,i,s){return e._gsap.scaleX=e._gsap.scaleY=s},OS=function(e,i,s,a,l){var c=e._gsap;c.scaleX=c.scaleY=s,c.renderTransform(l,c)},NS=function(e,i,s,a,l){var c=e._gsap;c[i]=s,c.renderTransform(l,c)},Et="transform",On=Et+"Origin",IS=function t(e,i){var s=this,a=this.target,l=a.style,c=a._gsap;if(e in ji&&l){if(this.tfm=this.tfm||{},e!=="transform")e=Ei[e]||e,~e.indexOf(",")?e.split(",").forEach(function(f){return s.tfm[f]=Wi(a,f)}):this.tfm[e]=c.x?c[e]:Wi(a,e),e===On&&(this.tfm.zOrigin=c.zOrigin);else return Ei.transform.split(",").forEach(function(f){return t.call(s,f,i)});if(this.props.indexOf(Et)>=0)return;c.svg&&(this.svgo=a.getAttribute("data-svg-origin"),this.props.push(On,i,"")),e=Et}(l||i)&&this.props.push(e,i,l[e])},hy=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},BS=function(){var e=this.props,i=this.target,s=i.style,a=i._gsap,l,c;for(l=0;l<e.length;l+=3)e[l+1]?e[l+1]===2?i[e[l]](e[l+2]):i[e[l]]=e[l+2]:e[l+2]?s[e[l]]=e[l+2]:s.removeProperty(e[l].substr(0,2)==="--"?e[l]:e[l].replace(ef,"-$1").toLowerCase());if(this.tfm){for(c in this.tfm)a[c]=this.tfm[c];a.svg&&(a.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),l=Jd(),(!l||!l.isStart)&&!s[Et]&&(hy(s),a.zOrigin&&s[On]&&(s[On]+=" "+a.zOrigin+"px",a.zOrigin=0,a.renderTransform()),a.uncache=1)}},my=function(e,i){var s={target:e,props:[],revert:BS,save:IS};return e._gsap||Nn.core.getCache(e),i&&e.style&&e.nodeType&&i.split(",").forEach(function(a){return s.save(a)}),s},gy,dd=function(e,i){var s=mr.createElementNS?mr.createElementNS((i||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):mr.createElement(e);return s&&s.style?s:mr.createElement(e)},oi=function t(e,i,s){var a=getComputedStyle(e);return a[i]||a.getPropertyValue(i.replace(ef,"-$1").toLowerCase())||a.getPropertyValue(i)||!s&&t(e,Vs(i)||i,1)||""},$m="O,Moz,ms,Ms,Webkit".split(","),Vs=function(e,i,s){var a=i||Ur,l=a.style,c=5;if(e in l&&!s)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);c--&&!($m[c]+e in l););return c<0?null:(c===3?"ms":c>=0?$m[c]:"")+e},fd=function(){PS()&&window.document&&(jm=window,mr=jm.document,Ls=mr.documentElement,Ur=dd("div")||{style:{}},dd("div"),Et=Vs(Et),On=Et+"Origin",Ur.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",gy=!!Vs("perspective"),Jd=Nn.core.reverting,Zd=1)},Ym=function(e){var i=e.ownerSVGElement,s=dd("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),a=e.cloneNode(!0),l;a.style.display="block",s.appendChild(a),Ls.appendChild(s);try{l=a.getBBox()}catch{}return s.removeChild(a),Ls.removeChild(s),l},Gm=function(e,i){for(var s=i.length;s--;)if(e.hasAttribute(i[s]))return e.getAttribute(i[s])},vy=function(e){var i,s;try{i=e.getBBox()}catch{i=Ym(e),s=1}return i&&(i.width||i.height)||s||(i=Ym(e)),i&&!i.width&&!i.x&&!i.y?{x:+Gm(e,["x","cx","x1"])||0,y:+Gm(e,["y","cy","y1"])||0,width:0,height:0}:i},yy=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&vy(e))},Qr=function(e,i){if(i){var s=e.style,a;i in ji&&i!==On&&(i=Et),s.removeProperty?(a=i.substr(0,2),(a==="ms"||i.substr(0,6)==="webkit")&&(i="-"+i),s.removeProperty(a==="--"?i:i.replace(ef,"-$1").toLowerCase())):s.removeAttribute(i)}},gr=function(e,i,s,a,l,c){var f=new Fn(e._pt,i,s,0,1,c?py:fy);return e._pt=f,f.b=a,f.e=l,e._props.push(s),f},Xm={deg:1,rad:1,turn:1},zS={grid:1,flex:1},wr=function t(e,i,s,a){var l=parseFloat(s)||0,c=(s+"").trim().substr((l+"").length)||"px",f=Ur.style,p=kS.test(i),m=e.tagName.toLowerCase()==="svg",g=(m?"client":"offset")+(p?"Width":"Height"),_=100,C=a==="px",E=a==="%",A,T,L,F;if(a===c||!l||Xm[a]||Xm[c])return l;if(c!=="px"&&!C&&(l=t(e,i,s,"px")),F=e.getCTM&&yy(e),(E||c==="%")&&(ji[i]||~i.indexOf("adius")))return A=F?e.getBBox()[p?"width":"height"]:e[g],It(E?l/A*_:l/100*A);if(f[p?"width":"height"]=_+(C?c:a),T=a!=="rem"&&~i.indexOf("adius")||a==="em"&&e.appendChild&&!m?e:e.parentNode,F&&(T=(e.ownerSVGElement||{}).parentNode),(!T||T===mr||!T.appendChild)&&(T=mr.body),L=T._gsap,L&&E&&L.width&&p&&L.time===$n.time&&!L.uncache)return It(l/L.width*_);if(E&&(i==="height"||i==="width")){var U=e.style[i];e.style[i]=_+a,A=e[g],U?e.style[i]=U:Qr(e,i)}else(E||c==="%")&&!zS[oi(T,"display")]&&(f.position=oi(e,"position")),T===e&&(f.position="static"),T.appendChild(Ur),A=Ur[g],T.removeChild(Ur),f.position="absolute";return p&&E&&(L=Hr(T),L.time=$n.time,L.width=T[g]),It(C?A*l/_:A&&l?_/A*l:0)},Wi=function(e,i,s,a){var l;return Zd||fd(),i in Ei&&i!=="transform"&&(i=Ei[i],~i.indexOf(",")&&(i=i.split(",")[0])),ji[i]&&i!=="transform"?(l=Ha(e,a),l=i!=="transformOrigin"?l[i]:l.svg?l.origin:kl(oi(e,On))+" "+l.zOrigin+"px"):(l=e.style[i],(!l||l==="auto"||a||~(l+"").indexOf("calc("))&&(l=Pl[i]&&Pl[i](e,i,s)||oi(e,i)||Fv(e,i)||(i==="opacity"?1:0))),s&&!~(l+"").trim().indexOf(" ")?wr(e,i,l,s)+s:l},VS=function(e,i,s,a){if(!s||s==="none"){var l=Vs(i,e,1),c=l&&oi(e,l,1);c&&c!==s?(i=l,s=c):i==="borderColor"&&(s=oi(e,"borderTopColor"))}var f=new Fn(this._pt,e.style,i,0,1,cy),p=0,m=0,g,_,C,E,A,T,L,F,U,M,z,I;if(f.b=s,f.e=a,s+="",a+="",a.substring(0,6)==="var(--"&&(a=oi(e,a.substring(4,a.indexOf(")")))),a==="auto"&&(T=e.style[i],e.style[i]=a,a=oi(e,i)||a,T?e.style[i]=T:Qr(e,i)),g=[s,a],Jv(g),s=g[0],a=g[1],C=s.match(Cs)||[],I=a.match(Cs)||[],I.length){for(;_=Cs.exec(a);)L=_[0],U=a.substring(p,_.index),A?A=(A+1)%5:(U.substr(-5)==="rgba("||U.substr(-5)==="hsla(")&&(A=1),L!==(T=C[m++]||"")&&(E=parseFloat(T)||0,z=T.substr((E+"").length),L.charAt(1)==="="&&(L=Ms(E,L)+z),F=parseFloat(L),M=L.substr((F+"").length),p=Cs.lastIndex-M.length,M||(M=M||Gn.units[i]||z,p===a.length&&(a+=M,f.e+=M)),z!==M&&(E=wr(e,i,T,M)||0),f._pt={_next:f._pt,p:U||m===1?U:",",s:E,c:F-E,m:A&&A<4||i==="zIndex"?Math.round:0});f.c=p<a.length?a.substring(p,a.length):""}else f.r=i==="display"&&a==="none"?py:fy;return Tv.test(a)&&(f.e=0),this._pt=f,f},Km={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},WS=function(e){var i=e.split(" "),s=i[0],a=i[1]||"50%";return(s==="top"||s==="bottom"||a==="left"||a==="right")&&(e=s,s=a,a=e),i[0]=Km[s]||s,i[1]=Km[a]||a,i.join(" ")},US=function(e,i){if(i.tween&&i.tween._time===i.tween._dur){var s=i.t,a=s.style,l=i.u,c=s._gsap,f,p,m;if(l==="all"||l===!0)a.cssText="",p=1;else for(l=l.split(","),m=l.length;--m>-1;)f=l[m],ji[f]&&(p=1,f=f==="transformOrigin"?On:Et),Qr(s,f);p&&(Qr(s,Et),c&&(c.svg&&s.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",Ha(s,1),c.uncache=1,hy(a)))}},Pl={clearProps:function(e,i,s,a,l){if(l.data!=="isFromStart"){var c=e._pt=new Fn(e._pt,i,s,0,0,US);return c.u=a,c.pr=-10,c.tween=l,e._props.push(s),1}}},qa=[1,0,0,1,0,0],by={},wy=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Qm=function(e){var i=oi(e,Et);return wy(i)?qa:i.substr(7).match(Ev).map(It)},tf=function(e,i){var s=e._gsap||Hr(e),a=e.style,l=Qm(e),c,f,p,m;return s.svg&&e.getAttribute("transform")?(p=e.transform.baseVal.consolidate().matrix,l=[p.a,p.b,p.c,p.d,p.e,p.f],l.join(",")==="1,0,0,1,0,0"?qa:l):(l===qa&&!e.offsetParent&&e!==Ls&&!s.svg&&(p=a.display,a.display="block",c=e.parentNode,(!c||!e.offsetParent&&!e.getBoundingClientRect().width)&&(m=1,f=e.nextElementSibling,Ls.appendChild(e)),l=Qm(e),p?a.display=p:Qr(e,"display"),m&&(f?c.insertBefore(e,f):c?c.appendChild(e):Ls.removeChild(e))),i&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},pd=function(e,i,s,a,l,c){var f=e._gsap,p=l||tf(e,!0),m=f.xOrigin||0,g=f.yOrigin||0,_=f.xOffset||0,C=f.yOffset||0,E=p[0],A=p[1],T=p[2],L=p[3],F=p[4],U=p[5],M=i.split(" "),z=parseFloat(M[0])||0,I=parseFloat(M[1])||0,G,te,Z,$;s?p!==qa&&(te=E*L-A*T)&&(Z=z*(L/te)+I*(-T/te)+(T*U-L*F)/te,$=z*(-A/te)+I*(E/te)-(E*U-A*F)/te,z=Z,I=$):(G=vy(e),z=G.x+(~M[0].indexOf("%")?z/100*G.width:z),I=G.y+(~(M[1]||M[0]).indexOf("%")?I/100*G.height:I)),a||a!==!1&&f.smooth?(F=z-m,U=I-g,f.xOffset=_+(F*E+U*T)-F,f.yOffset=C+(F*A+U*L)-U):f.xOffset=f.yOffset=0,f.xOrigin=z,f.yOrigin=I,f.smooth=!!a,f.origin=i,f.originIsAbsolute=!!s,e.style[On]="0px 0px",c&&(gr(c,f,"xOrigin",m,z),gr(c,f,"yOrigin",g,I),gr(c,f,"xOffset",_,f.xOffset),gr(c,f,"yOffset",C,f.yOffset)),e.setAttribute("data-svg-origin",z+" "+I)},Ha=function(e,i){var s=e._gsap||new iy(e);if("x"in s&&!i&&!s.uncache)return s;var a=e.style,l=s.scaleX<0,c="px",f="deg",p=getComputedStyle(e),m=oi(e,On)||"0",g,_,C,E,A,T,L,F,U,M,z,I,G,te,Z,$,re,fe,he,we,ge,u,v,y,b,x,k,S,P,R,B,V;return g=_=C=T=L=F=U=M=z=0,E=A=1,s.svg=!!(e.getCTM&&yy(e)),p.translate&&((p.translate!=="none"||p.scale!=="none"||p.rotate!=="none")&&(a[Et]=(p.translate!=="none"?"translate3d("+(p.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(p.rotate!=="none"?"rotate("+p.rotate+") ":"")+(p.scale!=="none"?"scale("+p.scale.split(" ").join(",")+") ":"")+(p[Et]!=="none"?p[Et]:"")),a.scale=a.rotate=a.translate="none"),te=tf(e,s.svg),s.svg&&(s.uncache?(b=e.getBBox(),m=s.xOrigin-b.x+"px "+(s.yOrigin-b.y)+"px",y=""):y=!i&&e.getAttribute("data-svg-origin"),pd(e,y||m,!!y||s.originIsAbsolute,s.smooth!==!1,te)),I=s.xOrigin||0,G=s.yOrigin||0,te!==qa&&(fe=te[0],he=te[1],we=te[2],ge=te[3],g=u=te[4],_=v=te[5],te.length===6?(E=Math.sqrt(fe*fe+he*he),A=Math.sqrt(ge*ge+we*we),T=fe||he?_s(he,fe)*Vr:0,U=we||ge?_s(we,ge)*Vr+T:0,U&&(A*=Math.abs(Math.cos(U*Rs))),s.svg&&(g-=I-(I*fe+G*we),_-=G-(I*he+G*ge))):(V=te[6],R=te[7],k=te[8],S=te[9],P=te[10],B=te[11],g=te[12],_=te[13],C=te[14],Z=_s(V,P),L=Z*Vr,Z&&($=Math.cos(-Z),re=Math.sin(-Z),y=u*$+k*re,b=v*$+S*re,x=V*$+P*re,k=u*-re+k*$,S=v*-re+S*$,P=V*-re+P*$,B=R*-re+B*$,u=y,v=b,V=x),Z=_s(-we,P),F=Z*Vr,Z&&($=Math.cos(-Z),re=Math.sin(-Z),y=fe*$-k*re,b=he*$-S*re,x=we*$-P*re,B=ge*re+B*$,fe=y,he=b,we=x),Z=_s(he,fe),T=Z*Vr,Z&&($=Math.cos(Z),re=Math.sin(Z),y=fe*$+he*re,b=u*$+v*re,he=he*$-fe*re,v=v*$-u*re,fe=y,u=b),L&&Math.abs(L)+Math.abs(T)>359.9&&(L=T=0,F=180-F),E=It(Math.sqrt(fe*fe+he*he+we*we)),A=It(Math.sqrt(v*v+V*V)),Z=_s(u,v),U=Math.abs(Z)>2e-4?Z*Vr:0,z=B?1/(B<0?-B:B):0),s.svg&&(y=e.getAttribute("transform"),s.forceCSS=e.setAttribute("transform","")||!wy(oi(e,Et)),y&&e.setAttribute("transform",y))),Math.abs(U)>90&&Math.abs(U)<270&&(l?(E*=-1,U+=T<=0?180:-180,T+=T<=0?180:-180):(A*=-1,U+=U<=0?180:-180)),i=i||s.uncache,s.x=g-((s.xPercent=g&&(!i&&s.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-g)?-50:0)))?e.offsetWidth*s.xPercent/100:0)+c,s.y=_-((s.yPercent=_&&(!i&&s.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-_)?-50:0)))?e.offsetHeight*s.yPercent/100:0)+c,s.z=C+c,s.scaleX=It(E),s.scaleY=It(A),s.rotation=It(T)+f,s.rotationX=It(L)+f,s.rotationY=It(F)+f,s.skewX=U+f,s.skewY=M+f,s.transformPerspective=z+c,(s.zOrigin=parseFloat(m.split(" ")[2])||!i&&s.zOrigin||0)&&(a[On]=kl(m)),s.xOffset=s.yOffset=0,s.force3D=Gn.force3D,s.renderTransform=s.svg?qS:gy?xy:jS,s.uncache=0,s},kl=function(e){return(e=e.split(" "))[0]+" "+e[1]},Ou=function(e,i,s){var a=hn(i);return It(parseFloat(i)+parseFloat(wr(e,"x",s+"px",a)))+a},jS=function(e,i){i.z="0px",i.rotationY=i.rotationX="0deg",i.force3D=0,xy(e,i)},Ir="0deg",Pa="0px",Br=") ",xy=function(e,i){var s=i||this,a=s.xPercent,l=s.yPercent,c=s.x,f=s.y,p=s.z,m=s.rotation,g=s.rotationY,_=s.rotationX,C=s.skewX,E=s.skewY,A=s.scaleX,T=s.scaleY,L=s.transformPerspective,F=s.force3D,U=s.target,M=s.zOrigin,z="",I=F==="auto"&&e&&e!==1||F===!0;if(M&&(_!==Ir||g!==Ir)){var G=parseFloat(g)*Rs,te=Math.sin(G),Z=Math.cos(G),$;G=parseFloat(_)*Rs,$=Math.cos(G),c=Ou(U,c,te*$*-M),f=Ou(U,f,-Math.sin(G)*-M),p=Ou(U,p,Z*$*-M+M)}L!==Pa&&(z+="perspective("+L+Br),(a||l)&&(z+="translate("+a+"%, "+l+"%) "),(I||c!==Pa||f!==Pa||p!==Pa)&&(z+=p!==Pa||I?"translate3d("+c+", "+f+", "+p+") ":"translate("+c+", "+f+Br),m!==Ir&&(z+="rotate("+m+Br),g!==Ir&&(z+="rotateY("+g+Br),_!==Ir&&(z+="rotateX("+_+Br),(C!==Ir||E!==Ir)&&(z+="skew("+C+", "+E+Br),(A!==1||T!==1)&&(z+="scale("+A+", "+T+Br),U.style[Et]=z||"translate(0, 0)"},qS=function(e,i){var s=i||this,a=s.xPercent,l=s.yPercent,c=s.x,f=s.y,p=s.rotation,m=s.skewX,g=s.skewY,_=s.scaleX,C=s.scaleY,E=s.target,A=s.xOrigin,T=s.yOrigin,L=s.xOffset,F=s.yOffset,U=s.forceCSS,M=parseFloat(c),z=parseFloat(f),I,G,te,Z,$;p=parseFloat(p),m=parseFloat(m),g=parseFloat(g),g&&(g=parseFloat(g),m+=g,p+=g),p||m?(p*=Rs,m*=Rs,I=Math.cos(p)*_,G=Math.sin(p)*_,te=Math.sin(p-m)*-C,Z=Math.cos(p-m)*C,m&&(g*=Rs,$=Math.tan(m-g),$=Math.sqrt(1+$*$),te*=$,Z*=$,g&&($=Math.tan(g),$=Math.sqrt(1+$*$),I*=$,G*=$)),I=It(I),G=It(G),te=It(te),Z=It(Z)):(I=_,Z=C,G=te=0),(M&&!~(c+"").indexOf("px")||z&&!~(f+"").indexOf("px"))&&(M=wr(E,"x",c,"px"),z=wr(E,"y",f,"px")),(A||T||L||F)&&(M=It(M+A-(A*I+T*te)+L),z=It(z+T-(A*G+T*Z)+F)),(a||l)&&($=E.getBBox(),M=It(M+a/100*$.width),z=It(z+l/100*$.height)),$="matrix("+I+","+G+","+te+","+Z+","+M+","+z+")",E.setAttribute("transform",$),U&&(E.style[Et]=$)},HS=function(e,i,s,a,l){var c=360,f=en(l),p=parseFloat(l)*(f&&~l.indexOf("rad")?Vr:1),m=p-a,g=a+m+"deg",_,C;return f&&(_=l.split("_")[1],_==="short"&&(m%=c,m!==m%(c/2)&&(m+=m<0?c:-c)),_==="cw"&&m<0?m=(m+c*Hm)%c-~~(m/c)*c:_==="ccw"&&m>0&&(m=(m-c*Hm)%c-~~(m/c)*c)),e._pt=C=new Fn(e._pt,i,s,a,m,TS),C.e=g,C.u="deg",e._props.push(s),C},Zm=function(e,i){for(var s in i)e[s]=i[s];return e},$S=function(e,i,s){var a=Zm({},s._gsap),l="perspective,force3D,transformOrigin,svgOrigin",c=s.style,f,p,m,g,_,C,E,A;a.svg?(m=s.getAttribute("transform"),s.setAttribute("transform",""),c[Et]=i,f=Ha(s,1),Qr(s,Et),s.setAttribute("transform",m)):(m=getComputedStyle(s)[Et],c[Et]=i,f=Ha(s,1),c[Et]=m);for(p in ji)m=a[p],g=f[p],m!==g&&l.indexOf(p)<0&&(E=hn(m),A=hn(g),_=E!==A?wr(s,p,m,A):parseFloat(m),C=parseFloat(g),e._pt=new Fn(e._pt,f,p,_,C-_,ud),e._pt.u=A||0,e._props.push(p));Zm(f,a)};Rn("padding,margin,Width,Radius",function(t,e){var i="Top",s="Right",a="Bottom",l="Left",c=(e<3?[i,s,a,l]:[i+l,i+s,a+s,a+l]).map(function(f){return e<2?t+f:"border"+f+t});Pl[e>1?"border"+t:t]=function(f,p,m,g,_){var C,E;if(arguments.length<4)return C=c.map(function(A){return Wi(f,A,m)}),E=C.join(" "),E.split(C[0]).length===5?C[0]:E;C=(g+"").split(" "),E={},c.forEach(function(A,T){return E[A]=C[T]=C[T]||C[(T-1)/2|0]}),f.init(p,E,_)}});var Sy={name:"css",register:fd,targetTest:function(e){return e.style&&e.nodeType},init:function(e,i,s,a,l){var c=this._props,f=e.style,p=s.vars.startAt,m,g,_,C,E,A,T,L,F,U,M,z,I,G,te,Z;Zd||fd(),this.styles=this.styles||my(e),Z=this.styles.props,this.tween=s;for(T in i)if(T!=="autoRound"&&(g=i[T],!(Hn[T]&&ry(T,i,s,a,e,l)))){if(E=typeof g,A=Pl[T],E==="function"&&(g=g.call(s,a,e,l),E=typeof g),E==="string"&&~g.indexOf("random(")&&(g=Wa(g)),A)A(this,e,T,g,s)&&(te=1);else if(T.substr(0,2)==="--")m=(getComputedStyle(e).getPropertyValue(T)+"").trim(),g+="",yr.lastIndex=0,yr.test(m)||(L=hn(m),F=hn(g)),F?L!==F&&(m=wr(e,T,m,F)+F):L&&(g+=L),this.add(f,"setProperty",m,g,a,l,0,0,T),c.push(T),Z.push(T,0,f[T]);else if(E!=="undefined"){if(p&&T in p?(m=typeof p[T]=="function"?p[T].call(s,a,e,l):p[T],en(m)&&~m.indexOf("random(")&&(m=Wa(m)),hn(m+"")||m==="auto"||(m+=Gn.units[T]||hn(Wi(e,T))||""),(m+"").charAt(1)==="="&&(m=Wi(e,T))):m=Wi(e,T),C=parseFloat(m),U=E==="string"&&g.charAt(1)==="="&&g.substr(0,2),U&&(g=g.substr(2)),_=parseFloat(g),T in Ei&&(T==="autoAlpha"&&(C===1&&Wi(e,"visibility")==="hidden"&&_&&(C=0),Z.push("visibility",0,f.visibility),gr(this,f,"visibility",C?"inherit":"hidden",_?"inherit":"hidden",!_)),T!=="scale"&&T!=="transform"&&(T=Ei[T],~T.indexOf(",")&&(T=T.split(",")[0]))),M=T in ji,M){if(this.styles.save(T),E==="string"&&g.substring(0,6)==="var(--"&&(g=oi(e,g.substring(4,g.indexOf(")"))),_=parseFloat(g)),z||(I=e._gsap,I.renderTransform&&!i.parseTransform||Ha(e,i.parseTransform),G=i.smoothOrigin!==!1&&I.smooth,z=this._pt=new Fn(this._pt,f,Et,0,1,I.renderTransform,I,0,-1),z.dep=1),T==="scale")this._pt=new Fn(this._pt,I,"scaleY",I.scaleY,(U?Ms(I.scaleY,U+_):_)-I.scaleY||0,ud),this._pt.u=0,c.push("scaleY",T),T+="X";else if(T==="transformOrigin"){Z.push(On,0,f[On]),g=WS(g),I.svg?pd(e,g,0,G,0,this):(F=parseFloat(g.split(" ")[2])||0,F!==I.zOrigin&&gr(this,I,"zOrigin",I.zOrigin,F),gr(this,f,T,kl(m),kl(g)));continue}else if(T==="svgOrigin"){pd(e,g,1,G,0,this);continue}else if(T in by){HS(this,I,T,C,U?Ms(C,U+g):g);continue}else if(T==="smoothOrigin"){gr(this,I,"smooth",I.smooth,g);continue}else if(T==="force3D"){I[T]=g;continue}else if(T==="transform"){$S(this,g,e);continue}}else T in f||(T=Vs(T)||T);if(M||(_||_===0)&&(C||C===0)&&!ES.test(g)&&T in f)L=(m+"").substr((C+"").length),_||(_=0),F=hn(g)||(T in Gn.units?Gn.units[T]:L),L!==F&&(C=wr(e,T,m,F)),this._pt=new Fn(this._pt,M?I:f,T,C,(U?Ms(C,U+_):_)-C,!M&&(F==="px"||T==="zIndex")&&i.autoRound!==!1?AS:ud),this._pt.u=F||0,L!==F&&F!=="%"&&(this._pt.b=m,this._pt.r=DS);else if(T in f)VS.call(this,e,T,m,U?U+g:g);else if(T in e)this.add(e,T,m||e[T],U?U+g:g,a,l);else if(T!=="parseTransform"){Ud(T,g);continue}M||(T in f?Z.push(T,0,f[T]):typeof e[T]=="function"?Z.push(T,2,e[T]()):Z.push(T,1,m||e[T])),c.push(T)}}te&&uy(this)},render:function(e,i){if(i.tween._time||!Jd())for(var s=i._pt;s;)s.r(e,s.d),s=s._next;else i.styles.revert()},get:Wi,aliases:Ei,getSetter:function(e,i,s){var a=Ei[i];return a&&a.indexOf(",")<0&&(i=a),i in ji&&i!==On&&(e._gsap.x||Wi(e,"x"))?s&&qm===s?i==="scale"?FS:RS:(qm=s||{})&&(i==="scale"?OS:NS):e.style&&!zd(e.style[i])?MS:~i.indexOf("-")?LS:Kd(e,i)},core:{_removeProperty:Qr,_getMatrix:tf}};Nn.utils.checkPrefix=Vs;Nn.core.getStyleSaver=my;(function(t,e,i,s){var a=Rn(t+","+e+","+i,function(l){ji[l]=1});Rn(e,function(l){Gn.units[l]="deg",by[l]=1}),Ei[a[13]]=t+","+e,Rn(s,function(l){var c=l.split(":");Ei[c[1]]=a[c[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Rn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Gn.units[t]="px"});Nn.registerPlugin(Sy);var ot=Nn.registerPlugin(Sy)||Nn;ot.core.Tween;const YS=({position:t="right",colors:e=["#1a1a2e","#16213e","#0f3460"],items:i=[],socialItems:s=[],displaySocials:a=!0,displayItemNumbering:l=!0,menuButtonColor:c="#fff",openMenuButtonColor:f="#fff",accentColor:p="#ffffff",changeMenuColorOnOpen:m=!0,onMenuOpen:g,onMenuClose:_,onItemClick:C})=>{const[E,A]=ie.useState(!1),T=ie.useRef(!1),L=ie.useRef(null),F=ie.useRef(null),U=ie.useRef([]),M=ie.useRef(null),z=ie.useRef(null),I=ie.useRef(null),G=ie.useRef(null),te=ie.useRef(null),[Z,$]=ie.useState(["Menu","Close"]),re=ie.useRef(null),fe=ie.useRef(null),he=ie.useRef(null),we=ie.useRef(null),ge=ie.useRef(null),u=ie.useRef(null),v=ie.useRef(!1),y=ie.useRef(null);ie.useLayoutEffect(()=>{const O=ot.context(()=>{const W=L.current,X=F.current,J=M.current,Y=z.current,K=I.current,ae=G.current;if(!W||!J||!Y||!K||!ae)return;let se=[];X&&(se=Array.from(X.querySelectorAll(".sm-prelayer"))),U.current=se;const le=t==="left"?-100:100;ot.set([W,...se],{xPercent:le}),ot.set(J,{transformOrigin:"50% 50%",rotate:0}),ot.set(Y,{transformOrigin:"50% 50%",rotate:90}),ot.set(K,{rotate:0,transformOrigin:"50% 50%"}),ot.set(ae,{yPercent:0}),u.current&&ot.set(u.current,{color:c})});return()=>O.revert()},[c,t]);const b=ie.useCallback(()=>{const O=L.current,W=U.current;if(!O)return null;re.current?.kill(),fe.current&&(fe.current.kill(),fe.current=null),y.current?.kill();const X=Array.from(O.querySelectorAll(".sm-panel-itemLabel")),J=Array.from(O.querySelectorAll(".sm-panel-list[data-numbering] .sm-panel-item")),Y=O.querySelector(".sm-socials-title"),K=Array.from(O.querySelectorAll(".sm-socials-link")),ae=W.map(Ee=>({el:Ee,start:Number(ot.getProperty(Ee,"xPercent"))})),se=Number(ot.getProperty(O,"xPercent"));X.length&&ot.set(X,{yPercent:140,rotate:10}),J.length&&ot.set(J,{"--sm-num-opacity":0}),Y&&ot.set(Y,{opacity:0}),K.length&&ot.set(K,{y:25,opacity:0});const le=ot.timeline({paused:!0});ae.forEach((Ee,Be)=>{le.fromTo(Ee.el,{xPercent:Ee.start},{xPercent:0,duration:.5,ease:"power4.out"},Be*.07)});const Me=(ae.length?(ae.length-1)*.07:0)+(ae.length?.08:0),ve=.65;if(le.fromTo(O,{xPercent:se},{xPercent:0,duration:ve,ease:"power4.out"},Me),X.length){const Be=Me+ve*.15;le.to(X,{yPercent:0,rotate:0,duration:1,ease:"power4.out",stagger:{each:.1,from:"start"}},Be),J.length&&le.to(J,{duration:.6,ease:"power2.out","--sm-num-opacity":1,stagger:{each:.08,from:"start"}},Be+.1)}if(Y||K.length){const Ee=Me+ve*.4;Y&&le.to(Y,{opacity:1,duration:.5,ease:"power2.out"},Ee),K.length&&le.to(K,{y:0,opacity:1,duration:.55,ease:"power3.out",stagger:{each:.08,from:"start"},onComplete:()=>{ot.set(K,{clearProps:"opacity"})}},Ee+.04)}return re.current=le,le},[]),x=ie.useCallback(()=>{if(v.current)return;v.current=!0;const O=b();O?(O.eventCallback("onComplete",()=>{v.current=!1}),O.play(0)):v.current=!1},[b]),k=ie.useCallback(()=>{re.current?.kill(),re.current=null,y.current?.kill();const O=L.current,W=U.current;if(!O)return;const X=[...W,O];fe.current?.kill();const J=t==="left"?-100:100;fe.current=ot.to(X,{xPercent:J,duration:.32,ease:"power3.in",overwrite:"auto",onComplete:()=>{const Y=Array.from(O.querySelectorAll(".sm-panel-itemLabel"));Y.length&&ot.set(Y,{yPercent:140,rotate:10});const K=Array.from(O.querySelectorAll(".sm-panel-list[data-numbering] .sm-panel-item"));K.length&&ot.set(K,{"--sm-num-opacity":0});const ae=O.querySelector(".sm-socials-title"),se=Array.from(O.querySelectorAll(".sm-socials-link"));ae&&ot.set(ae,{opacity:0}),se.length&&ot.set(se,{y:25,opacity:0}),v.current=!1}})},[t]),S=ie.useCallback(O=>{const W=I.current;W&&(he.current?.kill(),O?he.current=ot.to(W,{rotate:225,duration:.8,ease:"power4.out",overwrite:"auto"}):he.current=ot.to(W,{rotate:0,duration:.35,ease:"power3.inOut",overwrite:"auto"}))},[]),P=ie.useCallback(O=>{const W=u.current;if(W)if(ge.current?.kill(),m){const X=O?f:c;ge.current=ot.to(W,{color:X,delay:.18,duration:.3,ease:"power2.out"})}else ot.set(W,{color:c})},[f,c,m]);ie.useEffect(()=>{if(u.current)if(m){const O=T.current?f:c;ot.set(u.current,{color:O})}else ot.set(u.current,{color:c})},[m,c,f]);const R=ie.useCallback(O=>{const W=G.current;if(!W)return;we.current?.kill();const X=O?"Menu":"Close",J=O?"Close":"Menu",Y=3,K=[X];let ae=X;for(let xe=0;xe<Y;xe++)ae=ae==="Menu"?"Close":"Menu",K.push(ae);ae!==J&&K.push(J),K.push(J),$(K),ot.set(W,{yPercent:0});const se=K.length,le=(se-1)/se*100;we.current=ot.to(W,{yPercent:-le,duration:.5+se*.07,ease:"power4.out"})},[]),B=ie.useCallback(()=>{const O=!T.current;T.current=O,A(O),O?(document.body.style.overflow="hidden",g?.(),x()):(document.body.style.overflow="",_?.(),k()),S(O),P(O),R(O)},[x,k,S,P,R,g,_]),V=ie.useCallback(()=>{T.current&&(T.current=!1,A(!1),document.body.style.overflow="",_?.(),k(),S(!1),P(!1),R(!1))},[k,S,P,R,_]);ie.useEffect(()=>{const O=W=>{W.key==="Escape"&&T.current&&V()};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[V]),ie.useEffect(()=>{const O=W=>{if(!T.current)return;const X=L.current,J=u.current;X&&X.contains(W.target)||J&&J.contains(W.target)||V()};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[V]);const H=ie.useCallback((O,W)=>{setTimeout(()=>{V()},150),C&&C(O,W)},[V,C]);return be.jsxs("div",{className:"staggered-menu-wrapper",style:p?{"--sm-accent":p}:void 0,"data-position":t,"data-open":E||void 0,children:[be.jsx("div",{ref:F,className:"sm-prelayers","aria-hidden":"true",children:(()=>{let W=[...e&&e.length?e.slice(0,4):["#1a1a2e","#16213e"]];if(W.length>=3){const X=Math.floor(W.length/2);W.splice(X,1)}return W.map((X,J)=>be.jsx("div",{className:"sm-prelayer",style:{background:X}},J))})()}),be.jsxs("button",{ref:u,className:"sm-toggle","aria-label":E?"Close menu":"Open menu","aria-expanded":E,"aria-controls":"staggered-menu-panel",onClick:B,type:"button",children:[be.jsx("span",{ref:te,className:"sm-toggle-textWrap","aria-hidden":"true",children:be.jsx("span",{ref:G,className:"sm-toggle-textInner",children:Z.map((O,W)=>be.jsx("span",{className:"sm-toggle-line",children:O},W))})}),be.jsxs("span",{ref:I,className:"sm-icon","aria-hidden":"true",children:[be.jsx("span",{ref:M,className:"sm-icon-line"}),be.jsx("span",{ref:z,className:"sm-icon-line sm-icon-line-v"})]})]}),be.jsx("aside",{id:"staggered-menu-panel",ref:L,className:"staggered-menu-panel","aria-hidden":!E,children:be.jsxs("div",{className:"sm-panel-inner",children:[be.jsx("ul",{className:"sm-panel-list",role:"list","data-numbering":l||void 0,children:i&&i.length?i.map((O,W)=>be.jsx("li",{className:"sm-panel-itemWrap",children:be.jsx("a",{className:"sm-panel-item",href:O.link,"aria-label":O.ariaLabel,"data-index":W+1,onClick:X=>H(O,X),children:be.jsx("span",{className:"sm-panel-itemLabel",children:O.label})})},O.label+W)):be.jsx("li",{className:"sm-panel-itemWrap","aria-hidden":"true",children:be.jsx("span",{className:"sm-panel-item",children:be.jsx("span",{className:"sm-panel-itemLabel",children:"No items"})})})}),a&&s&&s.length>0&&be.jsxs("div",{className:"sm-socials","aria-label":"Social links",children:[be.jsx("h3",{className:"sm-socials-title",children:"Connect"}),be.jsx("ul",{className:"sm-socials-list",role:"list",children:s.map((O,W)=>be.jsx("li",{className:"sm-socials-item",children:be.jsxs("a",{href:O.link,target:"_blank",rel:"noopener noreferrer",className:"sm-socials-link",children:[O.icon&&be.jsx("span",{className:"sm-socials-icon",children:O.icon}),be.jsx("span",{className:"sm-socials-label",children:O.label})]})},O.label+W))})]})]})}),E&&be.jsx("div",{className:"sm-overlay",onClick:V,"aria-hidden":"true"})]})},GS=[{label:"Home",ariaLabel:"Go to home section",link:"#home"},{label:"Services",ariaLabel:"View our services",link:"#philosophy"},{label:"Portfolio",ariaLabel:"See our work",link:"#portfolio"},{label:"Agreement",ariaLabel:"View development agreement",link:"#contract"},{label:"Connect",ariaLabel:"Get in touch",link:"#contact"}],Jm=()=>be.jsx("svg",{className:"sm-social-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:be.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),XS=[{label:"Personal",link:"https://www.linkedin.com/in/carlos-martin-050876314/",icon:be.jsx(Jm,{})},{label:"Scarlo",link:"https://www.linkedin.com/company/110879775/",icon:be.jsx(Jm,{})}],KS=(t,e)=>{e.preventDefault();const i=t.link;if(!i||i==="#")return;const s=document.querySelector(i);if(s){const a=document.querySelector(".navbar"),l=a?a.offsetHeight:0,c=s.offsetTop-l;window.scrollTo({top:c,behavior:"smooth"})}},QS=()=>{console.log("Staggered menu opened"),document.body.classList.add("staggered-menu-open")},ZS=()=>{console.log("Staggered menu closed"),document.body.classList.remove("staggered-menu-open")},eg=document.getElementById("staggered-menu-root");eg?Id.createRoot(eg).render(be.jsx(yv.StrictMode,{children:be.jsx(YS,{position:"right",items:GS,socialItems:XS,displaySocials:!0,displayItemNumbering:!0,menuButtonColor:"#fff",openMenuButtonColor:"#fff",changeMenuColorOnOpen:!0,colors:["#0a0a12","#12121a","#1a1a24"],accentColor:"rgba(255, 255, 255, 0.9)",onMenuOpen:QS,onMenuClose:ZS,onItemClick:KS})})):console.error("StaggeredMenu mount point not found: #staggered-menu-root");const _y=ie.createContext({});function Cy(t){const e=ie.useRef(null);return e.current===null&&(e.current=t()),e.current}const nf=typeof window<"u",JS=nf?ie.useLayoutEffect:ie.useEffect,rf=ie.createContext(null);function sf(t,e){t.indexOf(e)===-1&&t.push(e)}function af(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}const qi=(t,e,i)=>i>e?e:i<t?t:i;let of=()=>{};const Hi={},Py=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function ky(t){return typeof t=="object"&&t!==null}const Ey=t=>/^0[^.\s]+$/u.test(t);function lf(t){let e;return()=>(e===void 0&&(e=t()),e)}const ci=t=>t,e_=(t,e)=>i=>e(t(i)),Ja=(...t)=>t.reduce(e_),$a=(t,e,i)=>{const s=e-t;return s===0?1:(i-t)/s};class cf{constructor(){this.subscriptions=[]}add(e){return sf(this.subscriptions,e),()=>af(this.subscriptions,e)}notify(e,i,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,i,s);else for(let l=0;l<a;l++){const c=this.subscriptions[l];c&&c(e,i,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ti=t=>t*1e3,li=t=>t/1e3;function Ty(t,e){return e?t*(1e3/e):0}const Dy=(t,e,i)=>(((1-3*i+3*e)*t+(3*i-6*e))*t+3*e)*t,t_=1e-7,n_=12;function i_(t,e,i,s,a){let l,c,f=0;do c=e+(i-e)/2,l=Dy(c,s,a)-t,l>0?i=c:e=c;while(Math.abs(l)>t_&&++f<n_);return c}function eo(t,e,i,s){if(t===e&&i===s)return ci;const a=l=>i_(l,0,1,t,i);return l=>l===0||l===1?l:Dy(a(l),e,s)}const Ay=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,My=t=>e=>1-t(1-e),Ly=eo(.33,1.53,.69,.99),uf=My(Ly),Ry=Ay(uf),Fy=t=>(t*=2)<1?.5*uf(t):.5*(2-Math.pow(2,-10*(t-1))),df=t=>1-Math.sin(Math.acos(t)),Oy=My(df),Ny=Ay(df),r_=eo(.42,0,1,1),s_=eo(0,0,.58,1),Iy=eo(.42,0,.58,1),a_=t=>Array.isArray(t)&&typeof t[0]!="number",By=t=>Array.isArray(t)&&typeof t[0]=="number",o_={linear:ci,easeIn:r_,easeInOut:Iy,easeOut:s_,circIn:df,circInOut:Ny,circOut:Oy,backIn:uf,backInOut:Ry,backOut:Ly,anticipate:Fy},l_=t=>typeof t=="string",tg=t=>{if(By(t)){of(t.length===4);const[e,i,s,a]=t;return eo(e,i,s,a)}else if(l_(t))return o_[t];return t},cl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function c_(t,e){let i=new Set,s=new Set,a=!1,l=!1;const c=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function p(g){c.has(g)&&(m.schedule(g),t()),g(f)}const m={schedule:(g,_=!1,C=!1)=>{const A=C&&a?i:s;return _&&c.add(g),A.has(g)||A.add(g),g},cancel:g=>{s.delete(g),c.delete(g)},process:g=>{if(f=g,a){l=!0;return}a=!0,[i,s]=[s,i],i.forEach(p),i.clear(),a=!1,l&&(l=!1,m.process(g))}};return m}const u_=40;function zy(t,e){let i=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>i=!0,c=cl.reduce((M,z)=>(M[z]=c_(l),M),{}),{setup:f,read:p,resolveKeyframes:m,preUpdate:g,update:_,preRender:C,render:E,postRender:A}=c,T=()=>{const M=Hi.useManualTiming?a.timestamp:performance.now();i=!1,Hi.useManualTiming||(a.delta=s?1e3/60:Math.max(Math.min(M-a.timestamp,u_),1)),a.timestamp=M,a.isProcessing=!0,f.process(a),p.process(a),m.process(a),g.process(a),_.process(a),C.process(a),E.process(a),A.process(a),a.isProcessing=!1,i&&e&&(s=!1,t(T))},L=()=>{i=!0,s=!0,a.isProcessing||t(T)};return{schedule:cl.reduce((M,z)=>{const I=c[z];return M[z]=(G,te=!1,Z=!1)=>(i||L(),I.schedule(G,te,Z)),M},{}),cancel:M=>{for(let z=0;z<cl.length;z++)c[cl[z]].cancel(M)},state:a,steps:c}}const{schedule:xt,cancel:xr,state:on,steps:Nu}=zy(typeof requestAnimationFrame<"u"?requestAnimationFrame:ci,!0);let ml;function d_(){ml=void 0}const Mn={now:()=>(ml===void 0&&Mn.set(on.isProcessing||Hi.useManualTiming?on.timestamp:performance.now()),ml),set:t=>{ml=t,queueMicrotask(d_)}},Vy=t=>e=>typeof e=="string"&&e.startsWith(t),ff=Vy("--"),f_=Vy("var(--"),pf=t=>f_(t)?p_.test(t.split("/*")[0].trim()):!1,p_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Us={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ya={...Us,transform:t=>qi(0,1,t)},ul={...Us,default:1},Oa=t=>Math.round(t*1e5)/1e5,hf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function h_(t){return t==null}const m_=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,mf=(t,e)=>i=>!!(typeof i=="string"&&m_.test(i)&&i.startsWith(t)||e&&!h_(i)&&Object.prototype.hasOwnProperty.call(i,e)),Wy=(t,e,i)=>s=>{if(typeof s!="string")return s;const[a,l,c,f]=s.match(hf);return{[t]:parseFloat(a),[e]:parseFloat(l),[i]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},g_=t=>qi(0,255,t),Iu={...Us,transform:t=>Math.round(g_(t))},jr={test:mf("rgb","red"),parse:Wy("red","green","blue"),transform:({red:t,green:e,blue:i,alpha:s=1})=>"rgba("+Iu.transform(t)+", "+Iu.transform(e)+", "+Iu.transform(i)+", "+Oa(Ya.transform(s))+")"};function v_(t){let e="",i="",s="",a="";return t.length>5?(e=t.substring(1,3),i=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),i=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,i+=i,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(i,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const hd={test:mf("#"),parse:v_,transform:jr.transform},to=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),pr=to("deg"),Di=to("%"),ze=to("px"),y_=to("vh"),b_=to("vw"),ng={...Di,parse:t=>Di.parse(t)/100,transform:t=>Di.transform(t*100)},ks={test:mf("hsl","hue"),parse:Wy("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:i,alpha:s=1})=>"hsla("+Math.round(t)+", "+Di.transform(Oa(e))+", "+Di.transform(Oa(i))+", "+Oa(Ya.transform(s))+")"},Vt={test:t=>jr.test(t)||hd.test(t)||ks.test(t),parse:t=>jr.test(t)?jr.parse(t):ks.test(t)?ks.parse(t):hd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?jr.transform(t):ks.transform(t),getAnimatableNone:t=>{const e=Vt.parse(t);return e.alpha=0,Vt.transform(e)}},w_=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function x_(t){return isNaN(t)&&typeof t=="string"&&(t.match(hf)?.length||0)+(t.match(w_)?.length||0)>0}const Uy="number",jy="color",S_="var",__="var(",ig="${}",C_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ga(t){const e=t.toString(),i=[],s={color:[],number:[],var:[]},a=[];let l=0;const f=e.replace(C_,p=>(Vt.test(p)?(s.color.push(l),a.push(jy),i.push(Vt.parse(p))):p.startsWith(__)?(s.var.push(l),a.push(S_),i.push(p)):(s.number.push(l),a.push(Uy),i.push(parseFloat(p))),++l,ig)).split(ig);return{values:i,split:f,indexes:s,types:a}}function qy(t){return Ga(t).values}function Hy(t){const{split:e,types:i}=Ga(t),s=e.length;return a=>{let l="";for(let c=0;c<s;c++)if(l+=e[c],a[c]!==void 0){const f=i[c];f===Uy?l+=Oa(a[c]):f===jy?l+=Vt.transform(a[c]):l+=a[c]}return l}}const P_=t=>typeof t=="number"?0:Vt.test(t)?Vt.getAnimatableNone(t):t;function k_(t){const e=qy(t);return Hy(t)(e.map(P_))}const Sr={test:x_,parse:qy,createTransformer:Hy,getAnimatableNone:k_};function Bu(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*6*i:i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function E_({hue:t,saturation:e,lightness:i,alpha:s}){t/=360,e/=100,i/=100;let a=0,l=0,c=0;if(!e)a=l=c=i;else{const f=i<.5?i*(1+e):i+e-i*e,p=2*i-f;a=Bu(p,f,t+1/3),l=Bu(p,f,t),c=Bu(p,f,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:s}}function El(t,e){return i=>i>0?e:t}const Tt=(t,e,i)=>t+(e-t)*i,zu=(t,e,i)=>{const s=t*t,a=i*(e*e-s)+s;return a<0?0:Math.sqrt(a)},T_=[hd,jr,ks],D_=t=>T_.find(e=>e.test(t));function rg(t){const e=D_(t);if(!e)return!1;let i=e.parse(t);return e===ks&&(i=E_(i)),i}const sg=(t,e)=>{const i=rg(t),s=rg(e);if(!i||!s)return El(t,e);const a={...i};return l=>(a.red=zu(i.red,s.red,l),a.green=zu(i.green,s.green,l),a.blue=zu(i.blue,s.blue,l),a.alpha=Tt(i.alpha,s.alpha,l),jr.transform(a))},md=new Set(["none","hidden"]);function A_(t,e){return md.has(t)?i=>i<=0?t:e:i=>i>=1?e:t}function M_(t,e){return i=>Tt(t,e,i)}function gf(t){return typeof t=="number"?M_:typeof t=="string"?pf(t)?El:Vt.test(t)?sg:F_:Array.isArray(t)?$y:typeof t=="object"?Vt.test(t)?sg:L_:El}function $y(t,e){const i=[...t],s=i.length,a=t.map((l,c)=>gf(l)(l,e[c]));return l=>{for(let c=0;c<s;c++)i[c]=a[c](l);return i}}function L_(t,e){const i={...t,...e},s={};for(const a in i)t[a]!==void 0&&e[a]!==void 0&&(s[a]=gf(t[a])(t[a],e[a]));return a=>{for(const l in s)i[l]=s[l](a);return i}}function R_(t,e){const i=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],c=t.indexes[l][s[l]],f=t.values[c]??0;i[a]=f,s[l]++}return i}const F_=(t,e)=>{const i=Sr.createTransformer(e),s=Ga(t),a=Ga(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?md.has(t)&&!a.values.length||md.has(e)&&!s.values.length?A_(t,e):Ja($y(R_(s,a),a.values),i):El(t,e)};function Yy(t,e,i){return typeof t=="number"&&typeof e=="number"&&typeof i=="number"?Tt(t,e,i):gf(t)(t,e)}const O_=t=>{const e=({timestamp:i})=>t(i);return{start:(i=!0)=>xt.update(e,i),stop:()=>xr(e),now:()=>on.isProcessing?on.timestamp:Mn.now()}},Gy=(t,e,i=10)=>{let s="";const a=Math.max(Math.round(e/i),2);for(let l=0;l<a;l++)s+=Math.round(t(l/(a-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Tl=2e4;function vf(t){let e=0;const i=50;let s=t.next(e);for(;!s.done&&e<Tl;)e+=i,s=t.next(e);return e>=Tl?1/0:e}function N_(t,e=100,i){const s=i({...t,keyframes:[0,e]}),a=Math.min(vf(s),Tl);return{type:"keyframes",ease:l=>s.next(a*l).value/e,duration:li(a)}}const I_=5;function Xy(t,e,i){const s=Math.max(e-I_,0);return Ty(i-t(s),e-s)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Vu=.001;function B_({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:i=Mt.velocity,mass:s=Mt.mass}){let a,l,c=1-e;c=qi(Mt.minDamping,Mt.maxDamping,c),t=qi(Mt.minDuration,Mt.maxDuration,li(t)),c<1?(a=m=>{const g=m*c,_=g*t,C=g-i,E=gd(m,c),A=Math.exp(-_);return Vu-C/E*A},l=m=>{const _=m*c*t,C=_*i+i,E=Math.pow(c,2)*Math.pow(m,2)*t,A=Math.exp(-_),T=gd(Math.pow(m,2),c);return(-a(m)+Vu>0?-1:1)*((C-E)*A)/T}):(a=m=>{const g=Math.exp(-m*t),_=(m-i)*t+1;return-Vu+g*_},l=m=>{const g=Math.exp(-m*t),_=(i-m)*(t*t);return g*_});const f=5/t,p=V_(a,l,f);if(t=Ti(t),isNaN(p))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const m=Math.pow(p,2)*s;return{stiffness:m,damping:c*2*Math.sqrt(s*m),duration:t}}}const z_=12;function V_(t,e,i){let s=i;for(let a=1;a<z_;a++)s=s-t(s)/e(s);return s}function gd(t,e){return t*Math.sqrt(1-e*e)}const W_=["duration","bounce"],U_=["stiffness","damping","mass"];function ag(t,e){return e.some(i=>t[i]!==void 0)}function j_(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!ag(t,U_)&&ag(t,W_))if(t.visualDuration){const i=t.visualDuration,s=2*Math.PI/(i*1.2),a=s*s,l=2*qi(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Mt.mass,stiffness:a,damping:l}}else{const i=B_(t);e={...e,...i,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function Dl(t=Mt.visualDuration,e=Mt.bounce){const i=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:a}=i;const l=i.keyframes[0],c=i.keyframes[i.keyframes.length-1],f={done:!1,value:l},{stiffness:p,damping:m,mass:g,duration:_,velocity:C,isResolvedFromDuration:E}=j_({...i,velocity:-li(i.velocity||0)}),A=C||0,T=m/(2*Math.sqrt(p*g)),L=c-l,F=li(Math.sqrt(p/g)),U=Math.abs(L)<5;s||(s=U?Mt.restSpeed.granular:Mt.restSpeed.default),a||(a=U?Mt.restDelta.granular:Mt.restDelta.default);let M;if(T<1){const I=gd(F,T);M=G=>{const te=Math.exp(-T*F*G);return c-te*((A+T*F*L)/I*Math.sin(I*G)+L*Math.cos(I*G))}}else if(T===1)M=I=>c-Math.exp(-F*I)*(L+(A+F*L)*I);else{const I=F*Math.sqrt(T*T-1);M=G=>{const te=Math.exp(-T*F*G),Z=Math.min(I*G,300);return c-te*((A+T*F*L)*Math.sinh(Z)+I*L*Math.cosh(Z))/I}}const z={calculatedDuration:E&&_||null,next:I=>{const G=M(I);if(E)f.done=I>=_;else{let te=I===0?A:0;T<1&&(te=I===0?Ti(A):Xy(M,I,G));const Z=Math.abs(te)<=s,$=Math.abs(c-G)<=a;f.done=Z&&$}return f.value=f.done?c:G,f},toString:()=>{const I=Math.min(vf(z),Tl),G=Gy(te=>z.next(I*te).value,I,30);return I+"ms "+G},toTransition:()=>{}};return z}Dl.applyToOptions=t=>{const e=N_(t,100,Dl);return t.ease=e.ease,t.duration=Ti(e.duration),t.type="keyframes",t};function vd({keyframes:t,velocity:e=0,power:i=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:c,min:f,max:p,restDelta:m=.5,restSpeed:g}){const _=t[0],C={done:!1,value:_},E=Z=>f!==void 0&&Z<f||p!==void 0&&Z>p,A=Z=>f===void 0?p:p===void 0||Math.abs(f-Z)<Math.abs(p-Z)?f:p;let T=i*e;const L=_+T,F=c===void 0?L:c(L);F!==L&&(T=F-_);const U=Z=>-T*Math.exp(-Z/s),M=Z=>F+U(Z),z=Z=>{const $=U(Z),re=M(Z);C.done=Math.abs($)<=m,C.value=C.done?F:re};let I,G;const te=Z=>{E(C.value)&&(I=Z,G=Dl({keyframes:[C.value,A(C.value)],velocity:Xy(M,Z,C.value),damping:a,stiffness:l,restDelta:m,restSpeed:g}))};return te(0),{calculatedDuration:null,next:Z=>{let $=!1;return!G&&I===void 0&&($=!0,z(Z),te(Z)),I!==void 0&&Z>=I?G.next(Z-I):(!$&&z(Z),C)}}}function q_(t,e,i){const s=[],a=i||Hi.mix||Yy,l=t.length-1;for(let c=0;c<l;c++){let f=a(t[c],t[c+1]);if(e){const p=Array.isArray(e)?e[c]||ci:e;f=Ja(p,f)}s.push(f)}return s}function H_(t,e,{clamp:i=!0,ease:s,mixer:a}={}){const l=t.length;if(of(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const f=q_(e,s,a),p=f.length,m=g=>{if(c&&g<t[0])return e[0];let _=0;if(p>1)for(;_<t.length-2&&!(g<t[_+1]);_++);const C=$a(t[_],t[_+1],g);return f[_](C)};return i?g=>m(qi(t[0],t[l-1],g)):m}function $_(t,e){const i=t[t.length-1];for(let s=1;s<=e;s++){const a=$a(0,e,s);t.push(Tt(i,1,a))}}function Y_(t){const e=[0];return $_(e,t.length-1),e}function G_(t,e){return t.map(i=>i*e)}function X_(t,e){return t.map(()=>e||Iy).splice(0,t.length-1)}function Na({duration:t=300,keyframes:e,times:i,ease:s="easeInOut"}){const a=a_(s)?s.map(tg):tg(s),l={done:!1,value:e[0]},c=G_(i&&i.length===e.length?i:Y_(e),t),f=H_(c,e,{ease:Array.isArray(a)?a:X_(e,a)});return{calculatedDuration:t,next:p=>(l.value=f(p),l.done=p>=t,l)}}const K_=t=>t!==null;function yf(t,{repeat:e,repeatType:i="loop"},s,a=1){const l=t.filter(K_),f=a<0||e&&i!=="loop"&&e%2===1?0:l.length-1;return!f||s===void 0?l[f]:s}const Q_={decay:vd,inertia:vd,tween:Na,keyframes:Na,spring:Dl};function Ky(t){typeof t.type=="string"&&(t.type=Q_[t.type])}class bf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,i){return this.finished.then(e,i)}}const Z_=t=>t/100;class wf extends bf{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:i}=this.options;i&&i.updatedAt!==Mn.now()&&this.tick(Mn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Ky(e);const{type:i=Na,repeat:s=0,repeatDelay:a=0,repeatType:l,velocity:c=0}=e;let{keyframes:f}=e;const p=i||Na;p!==Na&&typeof f[0]!="number"&&(this.mixKeyframes=Ja(Z_,Yy(f[0],f[1])),f=[0,100]);const m=p({...e,keyframes:f});l==="mirror"&&(this.mirroredGenerator=p({...e,keyframes:[...f].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=vf(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=m}updateTime(e){const i=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(e,i=!1){const{generator:s,totalDuration:a,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:f,calculatedDuration:p}=this;if(this.startTime===null)return s.next(0);const{delay:m=0,keyframes:g,repeat:_,repeatType:C,repeatDelay:E,type:A,onUpdate:T,finalKeyframe:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),i?this.currentTime=e:this.updateTime(e);const F=this.currentTime-m*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?F<0:F>a;this.currentTime=Math.max(F,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let M=this.currentTime,z=s;if(_){const Z=Math.min(this.currentTime,a)/f;let $=Math.floor(Z),re=Z%1;!re&&Z>=1&&(re=1),re===1&&$--,$=Math.min($,_+1),$%2&&(C==="reverse"?(re=1-re,E&&(re-=E/f)):C==="mirror"&&(z=c)),M=qi(0,1,re)*f}const I=U?{done:!1,value:g[0]}:z.next(M);l&&(I.value=l(I.value));let{done:G}=I;!U&&p!==null&&(G=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const te=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return te&&A!==vd&&(I.value=yf(g,this.options,L,this.speed)),T&&T(I.value),te&&this.finish(),I}then(e,i){return this.finished.then(e,i)}get duration(){return li(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+li(e)}get time(){return li(this.currentTime)}set time(e){e=Ti(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Mn.now());const i=this.playbackSpeed!==e;this.playbackSpeed=e,i&&(this.time=li(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=O_,startTime:i}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=i??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Mn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function J_(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const qr=t=>t*180/Math.PI,yd=t=>{const e=qr(Math.atan2(t[1],t[0]));return bd(e)},eC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:yd,rotateZ:yd,skewX:t=>qr(Math.atan(t[1])),skewY:t=>qr(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},bd=t=>(t=t%360,t<0&&(t+=360),t),og=yd,lg=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),cg=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),tC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lg,scaleY:cg,scale:t=>(lg(t)+cg(t))/2,rotateX:t=>bd(qr(Math.atan2(t[6],t[5]))),rotateY:t=>bd(qr(Math.atan2(-t[2],t[0]))),rotateZ:og,rotate:og,skewX:t=>qr(Math.atan(t[4])),skewY:t=>qr(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function wd(t){return t.includes("scale")?1:0}function xd(t,e){if(!t||t==="none")return wd(e);const i=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(i)s=tC,a=i;else{const f=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=eC,a=f}if(!a)return wd(e);const l=s[e],c=a[1].split(",").map(iC);return typeof l=="function"?l(c):c[l]}const nC=(t,e)=>{const{transform:i="none"}=getComputedStyle(t);return xd(i,e)};function iC(t){return parseFloat(t.trim())}const js=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qs=new Set(js),ug=t=>t===Us||t===ze,rC=new Set(["x","y","z"]),sC=js.filter(t=>!rC.has(t));function aC(t){const e=[];return sC.forEach(i=>{const s=t.getValue(i);s!==void 0&&(e.push([i,s.get()]),s.set(i.startsWith("scale")?1:0))}),e}const Xr={width:({x:t},{paddingLeft:e="0",paddingRight:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),height:({y:t},{paddingTop:e="0",paddingBottom:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>xd(e,"x"),y:(t,{transform:e})=>xd(e,"y")};Xr.translateX=Xr.x;Xr.translateY=Xr.y;const Kr=new Set;let Sd=!1,_d=!1,Cd=!1;function Qy(){if(_d){const t=Array.from(Kr).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),i=new Map;e.forEach(s=>{const a=aC(s);a.length&&(i.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=i.get(s);a&&a.forEach(([l,c])=>{s.getValue(l)?.set(c)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}_d=!1,Sd=!1,Kr.forEach(t=>t.complete(Cd)),Kr.clear()}function Zy(){Kr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(_d=!0)})}function oC(){Cd=!0,Zy(),Qy(),Cd=!1}class xf{constructor(e,i,s,a,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=i,this.name=s,this.motionValue=a,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Kr.add(this),Sd||(Sd=!0,xt.read(Zy),xt.resolveKeyframes(Qy))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:i,element:s,motionValue:a}=this;if(e[0]===null){const l=a?.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&i){const f=s.readValue(i,c);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=c),a&&l===void 0&&a.set(e[0])}J_(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Kr.delete(this)}cancel(){this.state==="scheduled"&&(Kr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lC=t=>t.startsWith("--");function cC(t,e,i){lC(e)?t.style.setProperty(e,i):t.style[e]=i}const uC=lf(()=>window.ScrollTimeline!==void 0),dC={};function fC(t,e){const i=lf(t);return()=>dC[e]??i()}const Jy=fC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Aa=([t,e,i,s])=>`cubic-bezier(${t}, ${e}, ${i}, ${s})`,dg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Aa([0,.65,.55,1]),circOut:Aa([.55,0,1,.45]),backIn:Aa([.31,.01,.66,-.59]),backOut:Aa([.33,1.53,.69,.99])};function e0(t,e){if(t)return typeof t=="function"?Jy()?Gy(t,e):"ease-out":By(t)?Aa(t):Array.isArray(t)?t.map(i=>e0(i,e)||dg.easeOut):dg[t]}function pC(t,e,i,{delay:s=0,duration:a=300,repeat:l=0,repeatType:c="loop",ease:f="easeOut",times:p}={},m=void 0){const g={[e]:i};p&&(g.offset=p);const _=e0(f,a);Array.isArray(_)&&(g.easing=_);const C={delay:s,duration:a,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(C.pseudoElement=m),t.animate(g,C)}function t0(t){return typeof t=="function"&&"applyToOptions"in t}function hC({type:t,...e}){return t0(t)&&Jy()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class mC extends bf{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:i,name:s,keyframes:a,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:f,onComplete:p}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,of(typeof e.type!="string");const m=hC(e);this.animation=pC(i,s,a,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=yf(a,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(g):cC(i,s,g),this.animation.cancel()}p?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return li(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+li(e)}get time(){return li(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ti(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:i}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&uC()?(this.animation.timeline=e,ci):i(this)}}const n0={anticipate:Fy,backInOut:Ry,circInOut:Ny};function gC(t){return t in n0}function vC(t){typeof t.ease=="string"&&gC(t.ease)&&(t.ease=n0[t.ease])}const fg=10;class yC extends mC{constructor(e){vC(e),Ky(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:i,onUpdate:s,onComplete:a,element:l,...c}=this.options;if(!i)return;if(e!==void 0){i.set(e);return}const f=new wf({...c,autoplay:!1}),p=Ti(this.finishedTime??this.time);i.setWithVelocity(f.sample(p-fg).value,f.sample(p).value,fg),f.stop()}}const pg=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Sr.test(t)||t==="0")&&!t.startsWith("url("));function bC(t){const e=t[0];if(t.length===1)return!0;for(let i=0;i<t.length;i++)if(t[i]!==e)return!0}function wC(t,e,i,s){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],c=pg(a,e),f=pg(l,e);return!c||!f?!1:bC(t)||(i==="spring"||t0(i))&&s}function Pd(t){t.duration=0,t.type="keyframes"}const xC=new Set(["opacity","clipPath","filter","transform"]),SC=lf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _C(t){const{motionValue:e,name:i,repeatDelay:s,repeatType:a,damping:l,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:m}=e.owner.getProps();return SC()&&i&&xC.has(i)&&(i!=="transform"||!m)&&!p&&!s&&a!=="mirror"&&l!==0&&c!=="inertia"}const CC=40;class PC extends bf{constructor({autoplay:e=!0,delay:i=0,type:s="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:c="loop",keyframes:f,name:p,motionValue:m,element:g,..._}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Mn.now();const C={autoplay:e,delay:i,type:s,repeat:a,repeatDelay:l,repeatType:c,name:p,motionValue:m,element:g,..._},E=g?.KeyframeResolver||xf;this.keyframeResolver=new E(f,(A,T,L)=>this.onKeyframesResolved(A,T,C,!L),p,m,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,i,s,a){this.keyframeResolver=void 0;const{name:l,type:c,velocity:f,delay:p,isHandoff:m,onUpdate:g}=s;this.resolvedAt=Mn.now(),wC(e,l,c,f)||((Hi.instantAnimations||!p)&&g?.(yf(e,s,i)),e[0]=e[e.length-1],Pd(s),s.repeat=0);const C={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>CC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...s,keyframes:e},E=!m&&_C(C)?new yC({...C,element:C.motionValue.owner.current}):new wf(C);E.finished.then(()=>this.notifyFinished()).catch(ci),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(e,i){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),oC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const kC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function EC(t){const e=kC.exec(t);if(!e)return[,];const[,i,s,a]=e;return[`--${i??s}`,a]}function i0(t,e,i=1){const[s,a]=EC(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const c=l.trim();return Py(c)?parseFloat(c):c}return pf(a)?i0(a,e,i+1):a}function Sf(t,e){return t?.[e]??t?.default??t}const r0=new Set(["width","height","top","left","right","bottom",...js]),TC={test:t=>t==="auto",parse:t=>t},s0=t=>e=>e.test(t),a0=[Us,ze,Di,pr,b_,y_,TC],hg=t=>a0.find(s0(t));function DC(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Ey(t):!0}const AC=new Set(["brightness","contrast","saturate","opacity"]);function MC(t){const[e,i]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=i.match(hf)||[];if(!s)return t;const a=i.replace(s,"");let l=AC.has(e)?1:0;return s!==i&&(l*=100),e+"("+l+a+")"}const LC=/\b([a-z-]*)\(.*?\)/gu,kd={...Sr,getAnimatableNone:t=>{const e=t.match(LC);return e?e.map(MC).join(" "):t}},mg={...Us,transform:Math.round},RC={rotate:pr,rotateX:pr,rotateY:pr,rotateZ:pr,scale:ul,scaleX:ul,scaleY:ul,scaleZ:ul,skew:pr,skewX:pr,skewY:pr,distance:ze,translateX:ze,translateY:ze,translateZ:ze,x:ze,y:ze,z:ze,perspective:ze,transformPerspective:ze,opacity:Ya,originX:ng,originY:ng,originZ:ze},_f={borderWidth:ze,borderTopWidth:ze,borderRightWidth:ze,borderBottomWidth:ze,borderLeftWidth:ze,borderRadius:ze,radius:ze,borderTopLeftRadius:ze,borderTopRightRadius:ze,borderBottomRightRadius:ze,borderBottomLeftRadius:ze,width:ze,maxWidth:ze,height:ze,maxHeight:ze,top:ze,right:ze,bottom:ze,left:ze,padding:ze,paddingTop:ze,paddingRight:ze,paddingBottom:ze,paddingLeft:ze,margin:ze,marginTop:ze,marginRight:ze,marginBottom:ze,marginLeft:ze,backgroundPositionX:ze,backgroundPositionY:ze,...RC,zIndex:mg,fillOpacity:Ya,strokeOpacity:Ya,numOctaves:mg},FC={..._f,color:Vt,backgroundColor:Vt,outlineColor:Vt,fill:Vt,stroke:Vt,borderColor:Vt,borderTopColor:Vt,borderRightColor:Vt,borderBottomColor:Vt,borderLeftColor:Vt,filter:kd,WebkitFilter:kd},o0=t=>FC[t];function l0(t,e){let i=o0(t);return i!==kd&&(i=Sr),i.getAnimatableNone?i.getAnimatableNone(e):void 0}const OC=new Set(["auto","none","0"]);function NC(t,e,i){let s=0,a;for(;s<t.length&&!a;){const l=t[s];typeof l=="string"&&!OC.has(l)&&Ga(l).values.length&&(a=t[s]),s++}if(a&&i)for(const l of e)t[l]=l0(i,a)}class IC extends xf{constructor(e,i,s,a,l){super(e,i,s,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:i,name:s}=this;if(!i||!i.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let m=e[p];if(typeof m=="string"&&(m=m.trim(),pf(m))){const g=i0(m,i.current);g!==void 0&&(e[p]=g),p===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!r0.has(s)||e.length!==2)return;const[a,l]=e,c=hg(a),f=hg(l);if(c!==f)if(ug(c)&&ug(f))for(let p=0;p<e.length;p++){const m=e[p];typeof m=="string"&&(e[p]=parseFloat(m))}else Xr[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:i}=this,s=[];for(let a=0;a<e.length;a++)(e[a]===null||DC(e[a]))&&s.push(a);s.length&&NC(e,s,i)}measureInitialState(){const{element:e,unresolvedKeyframes:i,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xr[s](e.measureViewportBox(),window.getComputedStyle(e.current)),i[0]=this.measuredOrigin;const a=i[i.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){const{element:e,name:i,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const a=e.getValue(i);a&&a.jump(this.measuredOrigin,!1);const l=s.length-1,c=s[l];s[l]=Xr[i](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([f,p])=>{e.getValue(f).set(p)}),this.resolveNoneKeyframes()}}function BC(t,e,i){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const a=i?.[t]??s.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const c0=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function zC(t){return ky(t)&&"offsetHeight"in t}const gg=30,VC=t=>!isNaN(parseFloat(t));class WC{constructor(e,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const a=Mn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=i.owner}setCurrent(e){this.current=e,this.updatedAt=Mn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=VC(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,i){this.events[e]||(this.events[e]=new cf);const s=this.events[e].add(i);return e==="change"?()=>{s(),xt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,i){this.passiveEffect=e,this.stopPassiveEffect=i}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,i,s){this.set(i),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,i=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>gg)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,gg);return Ty(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(e){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=e(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zr(t,e){return new WC(t,e)}const{schedule:Cf}=zy(queueMicrotask,!1),yi={x:!1,y:!1};function u0(){return yi.x||yi.y}function UC(t){return t==="x"||t==="y"?yi[t]?null:(yi[t]=!0,()=>{yi[t]=!1}):yi.x||yi.y?null:(yi.x=yi.y=!0,()=>{yi.x=yi.y=!1})}function d0(t,e){const i=BC(t),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[i,a,()=>s.abort()]}function vg(t){return!(t.pointerType==="touch"||u0())}function jC(t,e,i={}){const[s,a,l]=d0(t,i),c=f=>{if(!vg(f))return;const{target:p}=f,m=e(p,f);if(typeof m!="function"||!p)return;const g=_=>{vg(_)&&(m(_),p.removeEventListener("pointerleave",g))};p.addEventListener("pointerleave",g,a)};return s.forEach(f=>{f.addEventListener("pointerenter",c,a)}),l}const f0=(t,e)=>e?t===e?!0:f0(t,e.parentElement):!1,Pf=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,qC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function HC(t){return qC.has(t.tagName)||t.tabIndex!==-1}const gl=new WeakSet;function yg(t){return e=>{e.key==="Enter"&&t(e)}}function Wu(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $C=(t,e)=>{const i=t.currentTarget;if(!i)return;const s=yg(()=>{if(gl.has(i))return;Wu(i,"down");const a=yg(()=>{Wu(i,"up")}),l=()=>Wu(i,"cancel");i.addEventListener("keyup",a,e),i.addEventListener("blur",l,e)});i.addEventListener("keydown",s,e),i.addEventListener("blur",()=>i.removeEventListener("keydown",s),e)};function bg(t){return Pf(t)&&!u0()}function YC(t,e,i={}){const[s,a,l]=d0(t,i),c=f=>{const p=f.currentTarget;if(!bg(f))return;gl.add(p);const m=e(p,f),g=(E,A)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",C),gl.has(p)&&gl.delete(p),bg(E)&&typeof m=="function"&&m(E,{success:A})},_=E=>{g(E,p===window||p===document||i.useGlobalTarget||f0(p,E.target))},C=E=>{g(E,!1)};window.addEventListener("pointerup",_,a),window.addEventListener("pointercancel",C,a)};return s.forEach(f=>{(i.useGlobalTarget?window:f).addEventListener("pointerdown",c,a),zC(f)&&(f.addEventListener("focus",m=>$C(m,a)),!HC(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),l}function p0(t){return ky(t)&&"ownerSVGElement"in t}function GC(t){return p0(t)&&t.tagName==="svg"}const mn=t=>!!(t&&t.getVelocity),XC=[...a0,Vt,Sr],KC=t=>XC.find(s0(t)),kf=ie.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function QC(t=!0){const e=ie.useContext(rf);if(e===null)return[!0,null];const{isPresent:i,onExitComplete:s,register:a}=e,l=ie.useId();ie.useEffect(()=>{if(t)return a(l)},[t]);const c=ie.useCallback(()=>t&&s&&s(l),[l,s,t]);return!i&&s?[!1,c]:[!0]}const h0=ie.createContext({strict:!1}),wg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ws={};for(const t in wg)Ws[t]={isEnabled:e=>wg[t].some(i=>!!e[i])};function ZC(t){for(const e in t)Ws[e]={...Ws[e],...t[e]}}const JC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Al(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||JC.has(t)}let m0=t=>!Al(t);function e2(t){typeof t=="function"&&(m0=e=>e.startsWith("on")?!Al(e):t(e))}try{e2(require("@emotion/is-prop-valid").default)}catch{}function t2(t,e,i){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(m0(a)||i===!0&&Al(a)||!e&&!Al(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}const Nl=ie.createContext({});function Il(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Xa(t){return typeof t=="string"||Array.isArray(t)}const Ef=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Tf=["initial",...Ef];function Bl(t){return Il(t.animate)||Tf.some(e=>Xa(t[e]))}function g0(t){return!!(Bl(t)||t.variants)}function n2(t,e){if(Bl(t)){const{initial:i,animate:s}=t;return{initial:i===!1||Xa(i)?i:void 0,animate:Xa(s)?s:void 0}}return t.inherit!==!1?e:{}}function i2(t){const{initial:e,animate:i}=n2(t,ie.useContext(Nl));return ie.useMemo(()=>({initial:e,animate:i}),[xg(e),xg(i)])}function xg(t){return Array.isArray(t)?t.join(" "):t}const Ka={};function r2(t){for(const e in t)Ka[e]=t[e],ff(e)&&(Ka[e].isCSSVariable=!0)}function v0(t,{layout:e,layoutId:i}){return qs.has(t)||t.startsWith("origin")||(e||i!==void 0)&&(!!Ka[t]||t==="opacity")}const s2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},a2=js.length;function o2(t,e,i){let s="",a=!0;for(let l=0;l<a2;l++){const c=js[l],f=t[c];if(f===void 0)continue;let p=!0;if(typeof f=="number"?p=f===(c.startsWith("scale")?1:0):p=parseFloat(f)===0,!p||i){const m=c0(f,_f[c]);if(!p){a=!1;const g=s2[c]||c;s+=`${g}(${m}) `}i&&(e[c]=m)}}return s=s.trim(),i?s=i(e,a?"":s):a&&(s="none"),s}function Df(t,e,i){const{style:s,vars:a,transformOrigin:l}=t;let c=!1,f=!1;for(const p in e){const m=e[p];if(qs.has(p)){c=!0;continue}else if(ff(p)){a[p]=m;continue}else{const g=c0(m,_f[p]);p.startsWith("origin")?(f=!0,l[p]=g):s[p]=g}}if(e.transform||(c||i?s.transform=o2(e,t.transform,i):s.transform&&(s.transform="none")),f){const{originX:p="50%",originY:m="50%",originZ:g=0}=l;s.transformOrigin=`${p} ${m} ${g}`}}const Af=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function y0(t,e,i){for(const s in e)!mn(e[s])&&!v0(s,i)&&(t[s]=e[s])}function l2({transformTemplate:t},e){return ie.useMemo(()=>{const i=Af();return Df(i,e,t),Object.assign({},i.vars,i.style)},[e])}function c2(t,e){const i=t.style||{},s={};return y0(s,i,t),Object.assign(s,l2(t,e)),s}function u2(t,e){const i={},s=c2(t,e);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=s,i}const d2={offset:"stroke-dashoffset",array:"stroke-dasharray"},f2={offset:"strokeDashoffset",array:"strokeDasharray"};function p2(t,e,i=1,s=0,a=!0){t.pathLength=1;const l=a?d2:f2;t[l.offset]=ze.transform(-s);const c=ze.transform(e),f=ze.transform(i);t[l.array]=`${c} ${f}`}function b0(t,{attrX:e,attrY:i,attrScale:s,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...f},p,m,g){if(Df(t,f,m),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:C}=t;_.transform&&(C.transform=_.transform,delete _.transform),(C.transform||_.transformOrigin)&&(C.transformOrigin=_.transformOrigin??"50% 50%",delete _.transformOrigin),C.transform&&(C.transformBox=g?.transformBox??"fill-box",delete _.transformBox),e!==void 0&&(_.x=e),i!==void 0&&(_.y=i),s!==void 0&&(_.scale=s),a!==void 0&&p2(_,a,l,c,!1)}const w0=()=>({...Af(),attrs:{}}),x0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function h2(t,e,i,s){const a=ie.useMemo(()=>{const l=w0();return b0(l,e,x0(s),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};y0(l,t.style,t),a.style={...l,...a.style}}return a}const m2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Mf(t){return typeof t!="string"||t.includes("-")?!1:!!(m2.indexOf(t)>-1||/[A-Z]/u.test(t))}function g2(t,e,i,{latestValues:s},a,l=!1){const f=(Mf(t)?h2:u2)(e,s,a,t),p=t2(e,typeof t=="string",l),m=t!==ie.Fragment?{...p,...f,ref:i}:{},{children:g}=e,_=ie.useMemo(()=>mn(g)?g.get():g,[g]);return ie.createElement(t,{...m,children:_})}function Sg(t){const e=[{},{}];return t?.values.forEach((i,s)=>{e[0][s]=i.get(),e[1][s]=i.getVelocity()}),e}function Lf(t,e,i,s){if(typeof e=="function"){const[a,l]=Sg(s);e=e(i!==void 0?i:t.custom,a,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,l]=Sg(s);e=e(i!==void 0?i:t.custom,a,l)}return e}function vl(t){return mn(t)?t.get():t}function v2({scrapeMotionValuesFromProps:t,createRenderState:e},i,s,a){return{latestValues:y2(i,s,a,t),renderState:e()}}function y2(t,e,i,s){const a={},l=s(t,{});for(const C in l)a[C]=vl(l[C]);let{initial:c,animate:f}=t;const p=Bl(t),m=g0(t);e&&m&&!p&&t.inherit!==!1&&(c===void 0&&(c=e.initial),f===void 0&&(f=e.animate));let g=i?i.initial===!1:!1;g=g||c===!1;const _=g?f:c;if(_&&typeof _!="boolean"&&!Il(_)){const C=Array.isArray(_)?_:[_];for(let E=0;E<C.length;E++){const A=Lf(t,C[E]);if(A){const{transitionEnd:T,transition:L,...F}=A;for(const U in F){let M=F[U];if(Array.isArray(M)){const z=g?M.length-1:0;M=M[z]}M!==null&&(a[U]=M)}for(const U in T)a[U]=T[U]}}}return a}const S0=t=>(e,i)=>{const s=ie.useContext(Nl),a=ie.useContext(rf),l=()=>v2(t,e,s,a);return i?l():Cy(l)};function Rf(t,e,i){const{style:s}=t,a={};for(const l in s)(mn(s[l])||e.style&&mn(e.style[l])||v0(l,t)||i?.getValue(l)?.liveStyle!==void 0)&&(a[l]=s[l]);return a}const b2=S0({scrapeMotionValuesFromProps:Rf,createRenderState:Af});function _0(t,e,i){const s=Rf(t,e,i);for(const a in t)if(mn(t[a])||mn(e[a])){const l=js.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[l]=t[a]}return s}const w2=S0({scrapeMotionValuesFromProps:_0,createRenderState:w0}),x2=Symbol.for("motionComponentSymbol");function Es(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function S2(t,e,i){return ie.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),i&&(typeof i=="function"?i(s):Es(i)&&(i.current=s))},[e])}const Ff=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_2="framerAppearId",C0="data-"+Ff(_2),P0=ie.createContext({});function C2(t,e,i,s,a){const{visualElement:l}=ie.useContext(Nl),c=ie.useContext(h0),f=ie.useContext(rf),p=ie.useContext(kf).reducedMotion,m=ie.useRef(null);s=s||c.renderer,!m.current&&s&&(m.current=s(t,{visualState:e,parent:l,props:i,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const g=m.current,_=ie.useContext(P0);g&&!g.projection&&a&&(g.type==="html"||g.type==="svg")&&P2(m.current,i,a,_);const C=ie.useRef(!1);ie.useInsertionEffect(()=>{g&&C.current&&g.update(i,f)});const E=i[C0],A=ie.useRef(!!E&&!window.MotionHandoffIsComplete?.(E)&&window.MotionHasOptimisedAnimation?.(E));return JS(()=>{g&&(C.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),A.current&&g.animationState&&g.animationState.animateChanges())}),ie.useEffect(()=>{g&&(!A.current&&g.animationState&&g.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(E)}),A.current=!1),g.enteringChildren=void 0)}),g}function P2(t,e,i,s){const{layoutId:a,layout:l,drag:c,dragConstraints:f,layoutScroll:p,layoutRoot:m,layoutCrossfade:g}=e;t.projection=new i(t.latestValues,e["data-framer-portal-id"]?void 0:k0(t.parent)),t.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!c||f&&Es(f),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:g,layoutScroll:p,layoutRoot:m})}function k0(t){if(t)return t.options.allowProjection!==!1?t.projection:k0(t.parent)}function Uu(t,{forwardMotionProps:e=!1}={},i,s){i&&ZC(i);const a=Mf(t)?w2:b2;function l(f,p){let m;const g={...ie.useContext(kf),...f,layoutId:k2(f)},{isStatic:_}=g,C=i2(f),E=a(f,_);if(!_&&nf){E2();const A=T2(g);m=A.MeasureLayout,C.visualElement=C2(t,E,g,s,A.ProjectionNode)}return be.jsxs(Nl.Provider,{value:C,children:[m&&C.visualElement?be.jsx(m,{visualElement:C.visualElement,...g}):null,g2(t,f,S2(E,C.visualElement,p),E,_,e)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=ie.forwardRef(l);return c[x2]=t,c}function k2({layoutId:t}){const e=ie.useContext(_y).id;return e&&t!==void 0?e+"-"+t:t}function E2(t,e){ie.useContext(h0).strict}function T2(t){const{drag:e,layout:i}=Ws;if(!e&&!i)return{};const s={...e,...i};return{MeasureLayout:e?.isEnabled(t)||i?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function D2(t,e){if(typeof Proxy>"u")return Uu;const i=new Map,s=(l,c)=>Uu(l,c,t,e),a=(l,c)=>s(l,c);return new Proxy(a,{get:(l,c)=>c==="create"?s:(i.has(c)||i.set(c,Uu(c,void 0,t,e)),i.get(c))})}function E0({top:t,left:e,right:i,bottom:s}){return{x:{min:e,max:i},y:{min:t,max:s}}}function A2({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function M2(t,e){if(!e)return t;const i=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:s.y,right:s.x}}function ju(t){return t===void 0||t===1}function Ed({scale:t,scaleX:e,scaleY:i}){return!ju(t)||!ju(e)||!ju(i)}function Wr(t){return Ed(t)||T0(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function T0(t){return _g(t.x)||_g(t.y)}function _g(t){return t&&t!=="0%"}function Ml(t,e,i){const s=t-i,a=e*s;return i+a}function Cg(t,e,i,s,a){return a!==void 0&&(t=Ml(t,a,s)),Ml(t,i,s)+e}function Td(t,e=0,i=1,s,a){t.min=Cg(t.min,e,i,s,a),t.max=Cg(t.max,e,i,s,a)}function D0(t,{x:e,y:i}){Td(t.x,e.translate,e.scale,e.originPoint),Td(t.y,i.translate,i.scale,i.originPoint)}const Pg=.999999999999,kg=1.0000000000001;function L2(t,e,i,s=!1){const a=i.length;if(!a)return;e.x=e.y=1;let l,c;for(let f=0;f<a;f++){l=i[f],c=l.projectionDelta;const{visualElement:p}=l.options;p&&p.props.style&&p.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Ds(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,D0(t,c)),s&&Wr(l.latestValues)&&Ds(t,l.latestValues))}e.x<kg&&e.x>Pg&&(e.x=1),e.y<kg&&e.y>Pg&&(e.y=1)}function Ts(t,e){t.min=t.min+e,t.max=t.max+e}function Eg(t,e,i,s,a=.5){const l=Tt(t.min,t.max,a);Td(t,e,i,l,s)}function Ds(t,e){Eg(t.x,e.x,e.scaleX,e.scale,e.originX),Eg(t.y,e.y,e.scaleY,e.scale,e.originY)}function A0(t,e){return E0(M2(t.getBoundingClientRect(),e))}function R2(t,e,i){const s=A0(t,i),{scroll:a}=e;return a&&(Ts(s.x,a.offset.x),Ts(s.y,a.offset.y)),s}const Tg=()=>({translate:0,scale:1,origin:0,originPoint:0}),As=()=>({x:Tg(),y:Tg()}),Dg=()=>({min:0,max:0}),Gt=()=>({x:Dg(),y:Dg()}),Dd={current:null},M0={current:!1};function F2(){if(M0.current=!0,!!nf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Dd.current=t.matches;t.addEventListener("change",e),e()}else Dd.current=!1}const O2=new WeakMap;function N2(t,e,i){for(const s in e){const a=e[s],l=i[s];if(mn(a))t.addValue(s,a);else if(mn(l))t.addValue(s,Zr(a,{owner:t}));else if(l!==a)if(t.hasValue(s)){const c=t.getValue(s);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=t.getStaticValue(s);t.addValue(s,Zr(c!==void 0?c:a,{owner:t}))}}for(const s in i)e[s]===void 0&&t.removeValue(s);return e}const Ag=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class I2{scrapeMotionValuesFromProps(e,i,s){return{}}constructor({parent:e,props:i,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:l,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const C=Mn.now();this.renderScheduledAt<C&&(this.renderScheduledAt=C,xt.render(this.render,!1,!0))};const{latestValues:p,renderState:m}=c;this.latestValues=p,this.baseTarget={...p},this.initialValues=i.initial?{...p}:{},this.renderState=m,this.parent=e,this.props=i,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.blockInitialAnimation=!!l,this.isControllingVariants=Bl(i),this.isVariantNode=g0(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,..._}=this.scrapeMotionValuesFromProps(i,{},this);for(const C in _){const E=_[C];p[C]!==void 0&&mn(E)&&E.set(p[C])}}mount(e){this.current=e,O2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),M0.current||F2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dd.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),xr(this.notifyUpdate),xr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,i){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=qs.has(e);s&&this.onBindTransform&&this.onBindTransform();const a=i.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&xt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,i)),this.valueSubscriptions.set(e,()=>{a(),l&&l(),i.owner&&i.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ws){const i=Ws[e];if(!i)continue;const{isEnabled:s,Feature:a}=i;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Gt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,i){this.latestValues[e]=i}update(e,i){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let s=0;s<Ag.length;s++){const a=Ag[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,c=e[l];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=N2(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(e),()=>i.variantChildren.delete(e)}addValue(e,i){const s=this.values.get(e);i!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,i),this.values.set(e,i),this.latestValues[e]=i.get())}removeValue(e){this.values.delete(e);const i=this.valueSubscriptions.get(e);i&&(i(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,i){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&i!==void 0&&(s=Zr(i===null?void 0:i,{owner:this}),this.addValue(e,s)),s}readValue(e,i){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(Py(s)||Ey(s))?s=parseFloat(s):!KC(s)&&Sr.test(i)&&(s=l0(e,i)),this.setBaseTarget(e,mn(s)?s.get():s)),mn(s)?s.get():s}setBaseTarget(e,i){this.baseTarget[e]=i}getBaseTarget(e){const{initial:i}=this.props;let s;if(typeof i=="string"||typeof i=="object"){const l=Lf(this.props,i,this.presenceContext?.custom);l&&(s=l[e])}if(i&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!mn(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,i){return this.events[e]||(this.events[e]=new cf),this.events[e].add(i)}notify(e,...i){this.events[e]&&this.events[e].notify(...i)}scheduleRenderMicrotask(){Cf.render(this.render)}}class L0 extends I2{constructor(){super(...arguments),this.KeyframeResolver=IC}sortInstanceNodePosition(e,i){return e.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(e,i){return e.style?e.style[i]:void 0}removeValueFromRenderState(e,{vars:i,style:s}){delete i[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mn(e)&&(this.childSubscription=e.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function R0(t,{style:e,vars:i},s,a){const l=t.style;let c;for(c in e)l[c]=e[c];a?.applyProjectionStyles(l,s);for(c in i)l.setProperty(c,i[c])}function B2(t){return window.getComputedStyle(t)}class z2 extends L0{constructor(){super(...arguments),this.type="html",this.renderInstance=R0}readValueFromInstance(e,i){if(qs.has(i))return this.projection?.isProjecting?wd(i):nC(e,i);{const s=B2(e),a=(ff(i)?s.getPropertyValue(i):s[i])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:i}){return A0(e,i)}build(e,i,s){Df(e,i,s.transformTemplate)}scrapeMotionValuesFromProps(e,i,s){return Rf(e,i,s)}}const F0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function V2(t,e,i,s){R0(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(F0.has(a)?a:Ff(a),e.attrs[a])}class W2 extends L0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Gt}getBaseTargetFromProps(e,i){return e[i]}readValueFromInstance(e,i){if(qs.has(i)){const s=o0(i);return s&&s.default||0}return i=F0.has(i)?i:Ff(i),e.getAttribute(i)}scrapeMotionValuesFromProps(e,i,s){return _0(e,i,s)}build(e,i,s){b0(e,i,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,i,s,a){V2(e,i,s,a)}mount(e){this.isSVGTag=x0(e.tagName),super.mount(e)}}const U2=(t,e)=>Mf(t)?new W2(e):new z2(e,{allowProjection:t!==ie.Fragment});function Fs(t,e,i){const s=t.getProps();return Lf(s,e,i!==void 0?i:s.custom,t)}const Ad=t=>Array.isArray(t);function j2(t,e,i){t.hasValue(e)?t.getValue(e).set(i):t.addValue(e,Zr(i))}function q2(t){return Ad(t)?t[t.length-1]||0:t}function H2(t,e){const i=Fs(t,e);let{transitionEnd:s={},transition:a={},...l}=i||{};l={...l,...s};for(const c in l){const f=q2(l[c]);j2(t,c,f)}}function $2(t){return!!(mn(t)&&t.add)}function Md(t,e){const i=t.getValue("willChange");if($2(i))return i.add(e);if(!i&&Hi.WillChange){const s=new Hi.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function O0(t){return t.props[C0]}const Y2=t=>t!==null;function G2(t,{repeat:e,repeatType:i="loop"},s){const a=t.filter(Y2),l=e&&i!=="loop"&&e%2===1?0:a.length-1;return a[l]}const X2={type:"spring",stiffness:500,damping:25,restSpeed:10},K2=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Q2={type:"keyframes",duration:.8},Z2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},J2=(t,{keyframes:e})=>e.length>2?Q2:qs.has(t)?t.startsWith("scale")?K2(e[1]):X2:Z2;function eP({when:t,delay:e,delayChildren:i,staggerChildren:s,staggerDirection:a,repeat:l,repeatType:c,repeatDelay:f,from:p,elapsed:m,...g}){return!!Object.keys(g).length}const Of=(t,e,i,s={},a,l)=>c=>{const f=Sf(s,t)||{},p=f.delay||s.delay||0;let{elapsed:m=0}=s;m=m-Ti(p);const g={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-m,onUpdate:C=>{e.set(C),f.onUpdate&&f.onUpdate(C)},onComplete:()=>{c(),f.onComplete&&f.onComplete()},name:t,motionValue:e,element:l?void 0:a};eP(f)||Object.assign(g,J2(t,g)),g.duration&&(g.duration=Ti(g.duration)),g.repeatDelay&&(g.repeatDelay=Ti(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let _=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Pd(g),g.delay===0&&(_=!0)),(Hi.instantAnimations||Hi.skipAnimations)&&(_=!0,Pd(g),g.delay=0),g.allowFlatten=!f.type&&!f.ease,_&&!l&&e.get()!==void 0){const C=G2(g.keyframes,f);if(C!==void 0){xt.update(()=>{g.onUpdate(C),g.onComplete()});return}}return f.isSync?new wf(g):new PC(g)};function tP({protectedKeys:t,needsAnimating:e},i){const s=t.hasOwnProperty(i)&&e[i]!==!0;return e[i]=!1,s}function N0(t,e,{delay:i=0,transitionOverride:s,type:a}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...f}=e;s&&(l=s);const p=[],m=a&&t.animationState&&t.animationState.getState()[a];for(const g in f){const _=t.getValue(g,t.latestValues[g]??null),C=f[g];if(C===void 0||m&&tP(m,g))continue;const E={delay:i,...Sf(l||{},g)},A=_.get();if(A!==void 0&&!_.isAnimating&&!Array.isArray(C)&&C===A&&!E.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const F=O0(t);if(F){const U=window.MotionHandoffAnimation(F,g,xt);U!==null&&(E.startTime=U,T=!0)}}Md(t,g),_.start(Of(g,_,C,t.shouldReduceMotion&&r0.has(g)?{type:!1}:E,t,T));const L=_.animation;L&&p.push(L)}return c&&Promise.all(p).then(()=>{xt.update(()=>{c&&H2(t,c)})}),p}function I0(t,e,i,s=0,a=1){const l=Array.from(t).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),c=t.size,f=(c-1)*s;return typeof i=="function"?i(l,c):a===1?l*s:f-l*s}function Ld(t,e,i={}){const s=Fs(t,e,i.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=s||{};i.transitionOverride&&(a=i.transitionOverride);const l=s?()=>Promise.all(N0(t,s,i)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:_}=a;return nP(t,e,p,m,g,_,i)}:()=>Promise.resolve(),{when:f}=a;if(f){const[p,m]=f==="beforeChildren"?[l,c]:[c,l];return p().then(()=>m())}else return Promise.all([l(),c(i.delay)])}function nP(t,e,i=0,s=0,a=0,l=1,c){const f=[];for(const p of t.variantChildren)p.notify("AnimationStart",e),f.push(Ld(p,e,{...c,delay:i+(typeof s=="function"?0:s)+I0(t.variantChildren,p,s,a,l)}).then(()=>p.notify("AnimationComplete",e)));return Promise.all(f)}function iP(t,e,i={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(l=>Ld(t,l,i));s=Promise.all(a)}else if(typeof e=="string")s=Ld(t,e,i);else{const a=typeof e=="function"?Fs(t,e,i.custom):e;s=Promise.all(N0(t,a,i))}return s.then(()=>{t.notify("AnimationComplete",e)})}function B0(t,e){if(!Array.isArray(e))return!1;const i=e.length;if(i!==t.length)return!1;for(let s=0;s<i;s++)if(e[s]!==t[s])return!1;return!0}const rP=Tf.length;function z0(t){if(!t)return;if(!t.isControllingVariants){const i=t.parent?z0(t.parent)||{}:{};return t.props.initial!==void 0&&(i.initial=t.props.initial),i}const e={};for(let i=0;i<rP;i++){const s=Tf[i],a=t.props[s];(Xa(a)||a===!1)&&(e[s]=a)}return e}const sP=[...Ef].reverse(),aP=Ef.length;function oP(t){return e=>Promise.all(e.map(({animation:i,options:s})=>iP(t,i,s)))}function lP(t){let e=oP(t),i=Mg(),s=!0;const a=p=>(m,g)=>{const _=Fs(t,g,p==="exit"?t.presenceContext?.custom:void 0);if(_){const{transition:C,transitionEnd:E,...A}=_;m={...m,...A,...E}}return m};function l(p){e=p(t)}function c(p){const{props:m}=t,g=z0(t.parent)||{},_=[],C=new Set;let E={},A=1/0;for(let L=0;L<aP;L++){const F=sP[L],U=i[F],M=m[F]!==void 0?m[F]:g[F],z=Xa(M),I=F===p?U.isActive:null;I===!1&&(A=L);let G=M===g[F]&&M!==m[F]&&z;if(G&&s&&t.manuallyAnimateOnMount&&(G=!1),U.protectedKeys={...E},!U.isActive&&I===null||!M&&!U.prevProp||Il(M)||typeof M=="boolean")continue;const te=cP(U.prevProp,M);let Z=te||F===p&&U.isActive&&!G&&z||L>A&&z,$=!1;const re=Array.isArray(M)?M:[M];let fe=re.reduce(a(F),{});I===!1&&(fe={});const{prevResolvedValues:he={}}=U,we={...he,...fe},ge=y=>{Z=!0,C.has(y)&&($=!0,C.delete(y)),U.needsAnimating[y]=!0;const b=t.getValue(y);b&&(b.liveStyle=!1)};for(const y in we){const b=fe[y],x=he[y];if(E.hasOwnProperty(y))continue;let k=!1;Ad(b)&&Ad(x)?k=!B0(b,x):k=b!==x,k?b!=null?ge(y):C.add(y):b!==void 0&&C.has(y)?ge(y):U.protectedKeys[y]=!0}U.prevProp=M,U.prevResolvedValues=fe,U.isActive&&(E={...E,...fe}),s&&t.blockInitialAnimation&&(Z=!1);const u=G&&te;Z&&(!u||$)&&_.push(...re.map(y=>{const b={type:F};if(typeof y=="string"&&s&&!u&&t.manuallyAnimateOnMount&&t.parent){const{parent:x}=t,k=Fs(x,y);if(x.enteringChildren&&k){const{delayChildren:S}=k.transition||{};b.delay=I0(x.enteringChildren,t,S)}}return{animation:y,options:b}}))}if(C.size){const L={};if(typeof m.initial!="boolean"){const F=Fs(t,Array.isArray(m.initial)?m.initial[0]:m.initial);F&&F.transition&&(L.transition=F.transition)}C.forEach(F=>{const U=t.getBaseTarget(F),M=t.getValue(F);M&&(M.liveStyle=!0),L[F]=U??null}),_.push({animation:L})}let T=!!_.length;return s&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(T=!1),s=!1,T?e(_):Promise.resolve()}function f(p,m){if(i[p].isActive===m)return Promise.resolve();t.variantChildren?.forEach(_=>_.animationState?.setActive(p,m)),i[p].isActive=m;const g=c(p);for(const _ in i)i[_].protectedKeys={};return g}return{animateChanges:c,setActive:f,setAnimateFunction:l,getState:()=>i,reset:()=>{i=Mg()}}}function cP(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!B0(e,t):!1}function zr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Mg(){return{animate:zr(!0),whileInView:zr(),whileHover:zr(),whileTap:zr(),whileDrag:zr(),whileFocus:zr(),exit:zr()}}class Cr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class uP extends Cr{constructor(e){super(e),e.animationState||(e.animationState=lP(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Il(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:i}=this.node.prevProps||{};e!==i&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let dP=0;class fP extends Cr{constructor(){super(...arguments),this.id=dP++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:i}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);i&&!e&&a.then(()=>{i(this.id)})}mount(){const{register:e,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const pP={animation:{Feature:uP},exit:{Feature:fP}};function Qa(t,e,i,s={passive:!0}){return t.addEventListener(e,i,s),()=>t.removeEventListener(e,i)}function no(t){return{point:{x:t.pageX,y:t.pageY}}}const hP=t=>e=>Pf(e)&&t(e,no(e));function Ia(t,e,i,s){return Qa(t,e,hP(i),s)}const V0=1e-4,mP=1-V0,gP=1+V0,W0=.01,vP=0-W0,yP=0+W0;function Sn(t){return t.max-t.min}function bP(t,e,i){return Math.abs(t-e)<=i}function Lg(t,e,i,s=.5){t.origin=s,t.originPoint=Tt(e.min,e.max,t.origin),t.scale=Sn(i)/Sn(e),t.translate=Tt(i.min,i.max,t.origin)-t.originPoint,(t.scale>=mP&&t.scale<=gP||isNaN(t.scale))&&(t.scale=1),(t.translate>=vP&&t.translate<=yP||isNaN(t.translate))&&(t.translate=0)}function Ba(t,e,i,s){Lg(t.x,e.x,i.x,s?s.originX:void 0),Lg(t.y,e.y,i.y,s?s.originY:void 0)}function Rg(t,e,i){t.min=i.min+e.min,t.max=t.min+Sn(e)}function wP(t,e,i){Rg(t.x,e.x,i.x),Rg(t.y,e.y,i.y)}function Fg(t,e,i){t.min=e.min-i.min,t.max=t.min+Sn(e)}function Ll(t,e,i){Fg(t.x,e.x,i.x),Fg(t.y,e.y,i.y)}function ri(t){return[t("x"),t("y")]}const U0=({current:t})=>t?t.ownerDocument.defaultView:null,Og=(t,e)=>Math.abs(t-e);function xP(t,e){const i=Og(t.x,e.x),s=Og(t.y,e.y);return Math.sqrt(i**2+s**2)}class j0{constructor(e,i,{transformPagePoint:s,contextWindow:a=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Hu(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,A=xP(C.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!A)return;const{point:T}=C,{timestamp:L}=on;this.history.push({...T,timestamp:L});const{onStart:F,onMove:U}=this.handlers;E||(F&&F(this.lastMoveEvent,C),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,C)},this.handlePointerMove=(C,E)=>{this.lastMoveEvent=C,this.lastMoveEventInfo=qu(E,this.transformPagePoint),xt.update(this.updatePoint,!0)},this.handlePointerUp=(C,E)=>{this.end();const{onEnd:A,onSessionEnd:T,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=Hu(C.type==="pointercancel"?this.lastMoveEventInfo:qu(E,this.transformPagePoint),this.history);this.startEvent&&A&&A(C,F),T&&T(C,F)},!Pf(e))return;this.dragSnapToOrigin=l,this.handlers=i,this.transformPagePoint=s,this.distanceThreshold=c,this.contextWindow=a||window;const f=no(e),p=qu(f,this.transformPagePoint),{point:m}=p,{timestamp:g}=on;this.history=[{...m,timestamp:g}];const{onSessionStart:_}=i;_&&_(e,Hu(p,this.history)),this.removeListeners=Ja(Ia(this.contextWindow,"pointermove",this.handlePointerMove),Ia(this.contextWindow,"pointerup",this.handlePointerUp),Ia(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),xr(this.updatePoint)}}function qu(t,e){return e?{point:e(t.point)}:t}function Ng(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Hu({point:t},e){return{point:t,delta:Ng(t,q0(e)),offset:Ng(t,SP(e)),velocity:_P(e,.1)}}function SP(t){return t[0]}function q0(t){return t[t.length-1]}function _P(t,e){if(t.length<2)return{x:0,y:0};let i=t.length-1,s=null;const a=q0(t);for(;i>=0&&(s=t[i],!(a.timestamp-s.timestamp>Ti(e)));)i--;if(!s)return{x:0,y:0};const l=li(a.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const c={x:(a.x-s.x)/l,y:(a.y-s.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function CP(t,{min:e,max:i},s){return e!==void 0&&t<e?t=s?Tt(e,t,s.min):Math.max(t,e):i!==void 0&&t>i&&(t=s?Tt(i,t,s.max):Math.min(t,i)),t}function Ig(t,e,i){return{min:e!==void 0?t.min+e:void 0,max:i!==void 0?t.max+i-(t.max-t.min):void 0}}function PP(t,{top:e,left:i,bottom:s,right:a}){return{x:Ig(t.x,i,a),y:Ig(t.y,e,s)}}function Bg(t,e){let i=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([i,s]=[s,i]),{min:i,max:s}}function kP(t,e){return{x:Bg(t.x,e.x),y:Bg(t.y,e.y)}}function EP(t,e){let i=.5;const s=Sn(t),a=Sn(e);return a>s?i=$a(e.min,e.max-s,t.min):s>a&&(i=$a(t.min,t.max-a,e.min)),qi(0,1,i)}function TP(t,e){const i={};return e.min!==void 0&&(i.min=e.min-t.min),e.max!==void 0&&(i.max=e.max-t.min),i}const Rd=.35;function DP(t=Rd){return t===!1?t=0:t===!0&&(t=Rd),{x:zg(t,"left","right"),y:zg(t,"top","bottom")}}function zg(t,e,i){return{min:Vg(t,e),max:Vg(t,i)}}function Vg(t,e){return typeof t=="number"?t:t[e]||0}const AP=new WeakMap;class MP{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Gt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:i=!1,distanceThreshold:s}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=_=>{const{dragSnapToOrigin:C}=this.getProps();C?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(no(_).point)},c=(_,C)=>{const{drag:E,dragPropagation:A,onDragStart:T}=this.getProps();if(E&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=UC(E),!this.openDragLock))return;this.latestPointerEvent=_,this.latestPanInfo=C,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ri(F=>{let U=this.getAxisMotionValue(F).get()||0;if(Di.test(U)){const{projection:M}=this.visualElement;if(M&&M.layout){const z=M.layout.layoutBox[F];z&&(U=Sn(z)*(parseFloat(U)/100))}}this.originPoint[F]=U}),T&&xt.postRender(()=>T(_,C)),Md(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},f=(_,C)=>{this.latestPointerEvent=_,this.latestPanInfo=C;const{dragPropagation:E,dragDirectionLock:A,onDirectionLock:T,onDrag:L}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:F}=C;if(A&&this.currentDirection===null){this.currentDirection=LP(F),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",C.point,F),this.updateAxis("y",C.point,F),this.visualElement.render(),L&&L(_,C)},p=(_,C)=>{this.latestPointerEvent=_,this.latestPanInfo=C,this.stop(_,C),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>ri(_=>this.getAnimationState(_)==="paused"&&this.getAxisMotionValue(_).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new j0(e,{onSessionStart:l,onStart:c,onMove:f,onSessionEnd:p,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:s,contextWindow:U0(this.visualElement)})}stop(e,i){const s=e||this.latestPointerEvent,a=i||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!a||!s)return;const{velocity:c}=a;this.startAnimation(c);const{onDragEnd:f}=this.getProps();f&&xt.postRender(()=>f(s,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:i}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(e,i,s){const{drag:a}=this.getProps();if(!s||!dl(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(c=CP(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&Es(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=PP(s.layoutBox,e):this.constraints=!1,this.elastic=DP(i),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&ri(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=TP(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:i}=this.getProps();if(!e||!Es(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=R2(s,a.root,this.visualElement.getTransformPagePoint());let c=kP(a.layout.layoutBox,l);if(i){const f=i(A2(c));this.hasMutatedConstraints=!!f,f&&(c=E0(f))}return c}startAnimation(e){const{drag:i,dragMomentum:s,dragElastic:a,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),p=this.constraints||{},m=ri(g=>{if(!dl(g,i,this.currentDirection))return;let _=p&&p[g]||{};c&&(_={min:0,max:0});const C=a?200:1e6,E=a?40:1e7,A={type:"inertia",velocity:s?e[g]:0,bounceStiffness:C,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...l,..._};return this.startAxisValueAnimation(g,A)});return Promise.all(m).then(f)}startAxisValueAnimation(e,i){const s=this.getAxisMotionValue(e);return Md(this.visualElement,e),s.start(Of(e,s,0,i,this.visualElement,!1))}stopAnimation(){ri(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ri(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const i=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[i];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){ri(i=>{const{drag:s}=this.getProps();if(!dl(i,s,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(i);if(a&&a.layout){const{min:c,max:f}=a.layout.layoutBox[i];l.set(e[i]-Tt(c,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:i}=this.getProps(),{projection:s}=this.visualElement;if(!Es(i)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ri(c=>{const f=this.getAxisMotionValue(c);if(f&&this.constraints!==!1){const p=f.get();a[c]=EP({min:p,max:p},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ri(c=>{if(!dl(c,e,null))return;const f=this.getAxisMotionValue(c),{min:p,max:m}=this.constraints[c];f.set(Tt(p,m,a[c]))})}addListeners(){if(!this.visualElement.current)return;AP.set(this.visualElement,this);const e=this.visualElement.current,i=Ia(e,"pointerdown",p=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&this.start(p)}),s=()=>{const{dragConstraints:p}=this.getProps();Es(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),xt.read(s);const c=Qa(window,"resize",()=>this.scalePositionWithinConstraints()),f=a.addEventListener("didUpdate",(({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(ri(g=>{const _=this.getAxisMotionValue(g);_&&(this.originPoint[g]+=p[g].translate,_.set(_.get()+p[g].translate))}),this.visualElement.render())}));return()=>{c(),i(),l(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:c=Rd,dragMomentum:f=!0}=e;return{...e,drag:i,dragDirectionLock:s,dragPropagation:a,dragConstraints:l,dragElastic:c,dragMomentum:f}}}function dl(t,e,i){return(e===!0||e===t)&&(i===null||i===t)}function LP(t,e=10){let i=null;return Math.abs(t.y)>e?i="y":Math.abs(t.x)>e&&(i="x"),i}class RP extends Cr{constructor(e){super(e),this.removeGroupControls=ci,this.removeListeners=ci,this.controls=new MP(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ci}unmount(){this.removeGroupControls(),this.removeListeners()}}const Wg=t=>(e,i)=>{t&&xt.postRender(()=>t(e,i))};class FP extends Cr{constructor(){super(...arguments),this.removePointerDownListener=ci}onPointerDown(e){this.session=new j0(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:U0(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:i,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:Wg(e),onStart:Wg(i),onMove:s,onEnd:(l,c)=>{delete this.session,a&&xt.postRender(()=>a(l,c))}}}mount(){this.removePointerDownListener=Ia(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ug(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ka={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ze.test(t))t=parseFloat(t);else return t;const i=Ug(t,e.target.x),s=Ug(t,e.target.y);return`${i}% ${s}%`}},OP={correct:(t,{treeScale:e,projectionDelta:i})=>{const s=t,a=Sr.parse(t);if(a.length>5)return s;const l=Sr.createTransformer(t),c=typeof a[0]!="number"?1:0,f=i.x.scale*e.x,p=i.y.scale*e.y;a[0+c]/=f,a[1+c]/=p;const m=Tt(f,p,.5);return typeof a[2+c]=="number"&&(a[2+c]/=m),typeof a[3+c]=="number"&&(a[3+c]/=m),l(a)}};let $u=!1;class NP extends ie.Component{componentDidMount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:s,layoutId:a}=this.props,{projection:l}=e;r2(IP),l&&(i.group&&i.group.add(l),s&&s.register&&a&&s.register(l),$u&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),yl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:i,visualElement:s,drag:a,isPresent:l}=this.props,{projection:c}=s;return c&&(c.isPresent=l,$u=!0,a||e.layoutDependency!==i||i===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||xt.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Cf.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:s}=this.props,{projection:a}=e;$u=!0,a&&(a.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function H0(t){const[e,i]=QC(),s=ie.useContext(_y);return be.jsx(NP,{...t,layoutGroup:s,switchLayoutGroup:ie.useContext(P0),isPresent:e,safeToRemove:i})}const IP={borderRadius:{...ka,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ka,borderTopRightRadius:ka,borderBottomLeftRadius:ka,borderBottomRightRadius:ka,boxShadow:OP};function BP(t,e,i){const s=mn(t)?t:Zr(t);return s.start(Of("",s,e,i)),s.animation}const zP=(t,e)=>t.depth-e.depth;class VP{constructor(){this.children=[],this.isDirty=!1}add(e){sf(this.children,e),this.isDirty=!0}remove(e){af(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zP),this.isDirty=!1,this.children.forEach(e)}}function WP(t,e){const i=Mn.now(),s=({timestamp:a})=>{const l=a-i;l>=e&&(xr(s),t(l-e))};return xt.setup(s,!0),()=>xr(s)}const $0=["TopLeft","TopRight","BottomLeft","BottomRight"],UP=$0.length,jg=t=>typeof t=="string"?parseFloat(t):t,qg=t=>typeof t=="number"||ze.test(t);function jP(t,e,i,s,a,l){a?(t.opacity=Tt(0,i.opacity??1,qP(s)),t.opacityExit=Tt(e.opacity??1,0,HP(s))):l&&(t.opacity=Tt(e.opacity??1,i.opacity??1,s));for(let c=0;c<UP;c++){const f=`border${$0[c]}Radius`;let p=Hg(e,f),m=Hg(i,f);if(p===void 0&&m===void 0)continue;p||(p=0),m||(m=0),p===0||m===0||qg(p)===qg(m)?(t[f]=Math.max(Tt(jg(p),jg(m),s),0),(Di.test(m)||Di.test(p))&&(t[f]+="%")):t[f]=m}(e.rotate||i.rotate)&&(t.rotate=Tt(e.rotate||0,i.rotate||0,s))}function Hg(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const qP=Y0(0,.5,Oy),HP=Y0(.5,.95,ci);function Y0(t,e,i){return s=>s<t?0:s>e?1:i($a(t,e,s))}function $g(t,e){t.min=e.min,t.max=e.max}function vi(t,e){$g(t.x,e.x),$g(t.y,e.y)}function Yg(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Gg(t,e,i,s,a){return t-=e,t=Ml(t,1/i,s),a!==void 0&&(t=Ml(t,1/a,s)),t}function $P(t,e=0,i=1,s=.5,a,l=t,c=t){if(Di.test(e)&&(e=parseFloat(e),e=Tt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let f=Tt(l.min,l.max,s);t===l&&(f-=e),t.min=Gg(t.min,e,i,f,a),t.max=Gg(t.max,e,i,f,a)}function Xg(t,e,[i,s,a],l,c){$P(t,e[i],e[s],e[a],e.scale,l,c)}const YP=["x","scaleX","originX"],GP=["y","scaleY","originY"];function Kg(t,e,i,s){Xg(t.x,e,YP,i?i.x:void 0,s?s.x:void 0),Xg(t.y,e,GP,i?i.y:void 0,s?s.y:void 0)}function Qg(t){return t.translate===0&&t.scale===1}function G0(t){return Qg(t.x)&&Qg(t.y)}function Zg(t,e){return t.min===e.min&&t.max===e.max}function XP(t,e){return Zg(t.x,e.x)&&Zg(t.y,e.y)}function Jg(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function X0(t,e){return Jg(t.x,e.x)&&Jg(t.y,e.y)}function ev(t){return Sn(t.x)/Sn(t.y)}function tv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class KP{constructor(){this.members=[]}add(e){sf(this.members,e),e.scheduleRender()}remove(e){if(af(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(e){const i=this.members.findIndex(a=>e===a);if(i===0)return!1;let s;for(let a=i;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,i){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,i&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:i,resumingFrom:s}=e;i.onExitComplete&&i.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QP(t,e,i){let s="";const a=t.x.translate/e.x,l=t.y.translate/e.y,c=i?.z||0;if((a||l||c)&&(s=`translate3d(${a}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),i){const{transformPerspective:m,rotate:g,rotateX:_,rotateY:C,skewX:E,skewY:A}=i;m&&(s=`perspective(${m}px) ${s}`),g&&(s+=`rotate(${g}deg) `),_&&(s+=`rotateX(${_}deg) `),C&&(s+=`rotateY(${C}deg) `),E&&(s+=`skewX(${E}deg) `),A&&(s+=`skewY(${A}deg) `)}const f=t.x.scale*e.x,p=t.y.scale*e.y;return(f!==1||p!==1)&&(s+=`scale(${f}, ${p})`),s||"none"}const Yu=["","X","Y","Z"],ZP=1e3;let JP=0;function Gu(t,e,i,s){const{latestValues:a}=e;a[t]&&(i[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function K0(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const i=O0(e);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:a,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",xt,!(a||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&K0(s)}function Q0({attachResizeListener:t,defaultParent:e,measureScroll:i,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(c={},f=e?.()){this.id=JP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(nk),this.nodes.forEach(ak),this.nodes.forEach(ok),this.nodes.forEach(ik)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new VP)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new cf),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const p=this.eventHandlers.get(c);p&&p.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=p0(c)&&!GC(c),this.instance=c;const{layoutId:f,layout:p,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(p||f)&&(this.isLayoutDirty=!0),t){let g,_=0;const C=()=>this.root.updateBlockedByResize=!1;xt.read(()=>{_=window.innerWidth}),t(c,()=>{const E=window.innerWidth;E!==_&&(_=E,this.root.updateBlockedByResize=!0,g&&g(),g=WP(C,250),yl.hasAnimatedSinceResize&&(yl.hasAnimatedSinceResize=!1,this.nodes.forEach(rv)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&m&&(f||p)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeLayoutChanged:C,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||m.getDefaultTransition()||fk,{onLayoutAnimationStart:T,onLayoutAnimationComplete:L}=m.getProps(),F=!this.targetLayout||!X0(this.targetLayout,E),U=!_&&C;if(this.options.layoutRoot||this.resumeFrom||U||_&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...Sf(A,"layout"),onPlay:T,onComplete:L};(m.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(g,U)}else _||rv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),xr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lk),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&K0(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const _=this.path[g];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:f,layout:p}=this.options;if(f===void 0&&!p)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(iv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(sk),this.nodes.forEach(ek),this.nodes.forEach(tk)):this.nodes.forEach(iv),this.clearAllSnapshots();const f=Mn.now();on.delta=qi(0,1e3/60,f-on.timestamp),on.timestamp=f,on.isProcessing=!0,Nu.update.process(on),Nu.preRender.process(on),Nu.render.process(on),on.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rk),this.sharedNodes.forEach(ck)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Sn(this.snapshot.measuredBox.x)&&!Sn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Gt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f&&this.instance){const p=s(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:p,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!G0(this.projectionDelta),p=this.getTransformTemplate(),m=p?p(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;c&&this.instance&&(f||Wr(this.latestValues)||g)&&(a(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let p=this.removeElementScroll(f);return c&&(p=this.removeTransform(p)),pk(p),{animationId:this.root.animationId,measuredBox:f,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Gt();const f=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(hk))){const{scroll:m}=this.root;m&&(Ts(f.x,m.offset.x),Ts(f.y,m.offset.y))}return f}removeElementScroll(c){const f=Gt();if(vi(f,c),this.scroll?.wasRoot)return f;for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:g,options:_}=m;m!==this.root&&g&&_.layoutScroll&&(g.wasRoot&&vi(f,c),Ts(f.x,g.offset.x),Ts(f.y,g.offset.y))}return f}applyTransform(c,f=!1){const p=Gt();vi(p,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];!f&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ds(p,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Wr(g.latestValues)&&Ds(p,g.latestValues)}return Wr(this.latestValues)&&Ds(p,this.latestValues),p}removeTransform(c){const f=Gt();vi(f,c);for(let p=0;p<this.path.length;p++){const m=this.path[p];if(!m.instance||!Wr(m.latestValues))continue;Ed(m.latestValues)&&m.updateSnapshot();const g=Gt(),_=m.measurePageBox();vi(g,_),Kg(f,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return Wr(this.latestValues)&&Kg(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==on.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==f;if(!(c||p&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:_}=this.options;if(!this.layout||!(g||_))return;this.resolvedRelativeTargetAt=on.timestamp;const C=this.getClosestProjectingParent();C&&this.linkedParentVersion!==C.layoutVersion&&!C.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(C&&C.layout?this.createRelativeTarget(C,this.layout.layoutBox,C.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Gt(),this.targetWithTransforms=Gt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vi(this.target,this.layout.layoutBox),D0(this.target,this.targetDelta)):vi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?this.createRelativeTarget(C,this.target,C.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Ed(this.parent.latestValues)||T0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,f,p){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gt(),this.relativeTargetOrigin=Gt(),Ll(this.relativeTargetOrigin,f,p),vi(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const c=this.getLead(),f=!!this.resumingFrom||this!==c;let p=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(p=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===on.timestamp&&(p=!1),p)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;vi(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,C=this.treeScale.y;L2(this.layoutCorrected,this.treeScale,this.path,f),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Gt());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Yg(this.prevProjectionDelta.x,this.projectionDelta.x),Yg(this.prevProjectionDelta.y,this.projectionDelta.y)),Ba(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==C||!tv(this.projectionDelta.x,this.prevProjectionDelta.x)||!tv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=As(),this.projectionDelta=As(),this.projectionDeltaWithTransform=As()}setAnimationOrigin(c,f=!1){const p=this.snapshot,m=p?p.latestValues:{},g={...this.latestValues},_=As();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const C=Gt(),E=p?p.source:void 0,A=this.layout?this.layout.source:void 0,T=E!==A,L=this.getStack(),F=!L||L.members.length<=1,U=!!(T&&!F&&this.options.crossfade===!0&&!this.path.some(dk));this.animationProgress=0;let M;this.mixTargetDelta=z=>{const I=z/1e3;sv(_.x,c.x,I),sv(_.y,c.y,I),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ll(C,this.layout.layoutBox,this.relativeParent.layout.layoutBox),uk(this.relativeTarget,this.relativeTargetOrigin,C,I),M&&XP(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Gt()),vi(M,this.relativeTarget)),T&&(this.animationValues=g,jP(g,m,this.latestValues,I,U,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(xr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xt.update(()=>{yl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Zr(0)),this.currentAnimation=BP(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),c.onUpdate&&c.onUpdate(f)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:p,layout:m,latestValues:g}=c;if(!(!f||!p||!m)){if(this!==c&&this.layout&&m&&Z0(this.options.animationType,this.layout.layoutBox,m.layoutBox)){p=this.target||Gt();const _=Sn(this.layout.layoutBox.x);p.x.min=c.target.x.min,p.x.max=p.x.min+_;const C=Sn(this.layout.layoutBox.y);p.y.min=c.target.y.min,p.y.max=p.y.min+C}vi(f,p),Ds(f,g),Ba(this.projectionDeltaWithTransform,this.layoutCorrected,f,g)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new KP),this.sharedNodes.get(c).add(f);const m=f.options.initialPromotionConfig;f.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:p}={}){const m=this.getStack();m&&m.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:p}=c;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(f=!0),!f)return;const m={};p.z&&Gu("z",c,m,this.animationValues);for(let g=0;g<Yu.length;g++)Gu(`rotate${Yu[g]}`,c,m,this.animationValues),Gu(`skew${Yu[g]}`,c,m,this.animationValues);c.render();for(const g in m)c.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);c.scheduleRender()}applyProjectionStyles(c,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const p=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=vl(f?.pointerEvents)||"",c.transform=p?p(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=vl(f?.pointerEvents)||""),this.hasProjected&&!Wr(this.latestValues)&&(c.transform=p?p({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let _=QP(this.projectionDeltaWithTransform,this.treeScale,g);p&&(_=p(g,_)),c.transform=_;const{x:C,y:E}=this.projectionDelta;c.transformOrigin=`${C.origin*100}% ${E.origin*100}% 0`,m.animationValues?c.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const A in Ka){if(g[A]===void 0)continue;const{correct:T,applyTo:L,isCSSVariable:F}=Ka[A],U=_==="none"?g[A]:T(g[A],m);if(L){const M=L.length;for(let z=0;z<M;z++)c[L[z]]=U}else F?this.options.visualElement.renderState.vars[A]=U:c[A]=U}this.options.layoutId&&(c.pointerEvents=m===this?vl(f?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(nv),this.root.sharedNodes.clear()}}}function ek(t){t.updateLayout()}function tk(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=t.layout,{animationType:a}=t.options,l=e.source!==t.layout.source;a==="size"?ri(g=>{const _=l?e.measuredBox[g]:e.layoutBox[g],C=Sn(_);_.min=i[g].min,_.max=_.min+C}):Z0(a,e.layoutBox,i)&&ri(g=>{const _=l?e.measuredBox[g]:e.layoutBox[g],C=Sn(i[g]);_.max=_.min+C,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+C)});const c=As();Ba(c,i,e.layoutBox);const f=As();l?Ba(f,t.applyTransform(s,!0),e.measuredBox):Ba(f,i,e.layoutBox);const p=!G0(c);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:C}=g;if(_&&C){const E=Gt();Ll(E,e.layoutBox,_.layoutBox);const A=Gt();Ll(A,i,C.layoutBox),X0(E,A)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=E,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:f,layoutDelta:c,hasLayoutChanged:p,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function nk(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ik(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function rk(t){t.clearSnapshot()}function nv(t){t.clearMeasurements()}function iv(t){t.isLayoutDirty=!1}function sk(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function rv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ak(t){t.resolveTargetDelta()}function ok(t){t.calcProjection()}function lk(t){t.resetSkewAndRotation()}function ck(t){t.removeLeadSnapshot()}function sv(t,e,i){t.translate=Tt(e.translate,0,i),t.scale=Tt(e.scale,1,i),t.origin=e.origin,t.originPoint=e.originPoint}function av(t,e,i,s){t.min=Tt(e.min,i.min,s),t.max=Tt(e.max,i.max,s)}function uk(t,e,i,s){av(t.x,e.x,i.x,s),av(t.y,e.y,i.y,s)}function dk(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const fk={duration:.45,ease:[.4,0,.1,1]},ov=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),lv=ov("applewebkit/")&&!ov("chrome/")?Math.round:ci;function cv(t){t.min=lv(t.min),t.max=lv(t.max)}function pk(t){cv(t.x),cv(t.y)}function Z0(t,e,i){return t==="position"||t==="preserve-aspect"&&!bP(ev(e),ev(i),.2)}function hk(t){return t!==t.root&&t.scroll?.wasRoot}const mk=Q0({attachResizeListener:(t,e)=>Qa(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xu={current:void 0},J0=Q0({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Xu.current){const t=new mk({});t.mount(window),t.setOptions({layoutScroll:!0}),Xu.current=t}return Xu.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),gk={pan:{Feature:FP},drag:{Feature:RP,ProjectionNode:J0,MeasureLayout:H0}};function uv(t,e,i){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",i==="Start");const a="onHover"+i,l=s[a];l&&xt.postRender(()=>l(e,no(e)))}class vk extends Cr{mount(){const{current:e}=this.node;e&&(this.unmount=jC(e,(i,s)=>(uv(this.node,s,"Start"),a=>uv(this.node,a,"End"))))}unmount(){}}class yk extends Cr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ja(Qa(this.node.current,"focus",()=>this.onFocus()),Qa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dv(t,e,i){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",i==="Start");const a="onTap"+(i==="End"?"":i),l=s[a];l&&xt.postRender(()=>l(e,no(e)))}class bk extends Cr{mount(){const{current:e}=this.node;e&&(this.unmount=YC(e,(i,s)=>(dv(this.node,s,"Start"),(a,{success:l})=>dv(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Fd=new WeakMap,Ku=new WeakMap,wk=t=>{const e=Fd.get(t.target);e&&e(t)},xk=t=>{t.forEach(wk)};function Sk({root:t,...e}){const i=t||document;Ku.has(i)||Ku.set(i,{});const s=Ku.get(i),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(xk,{root:t,...e})),s[a]}function _k(t,e,i){const s=Sk(e);return Fd.set(t,i),s.observe(t),()=>{Fd.delete(t),s.unobserve(t)}}const Ck={some:0,all:1};class Pk extends Cr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:i,margin:s,amount:a="some",once:l}=e,c={root:i?i.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:Ck[a]},f=p=>{const{isIntersecting:m}=p;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:_}=this.node.getProps(),C=m?g:_;C&&C(p)};return _k(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:i}=this.node;["amount","margin","root"].some(kk(e,i))&&this.startObserver()}unmount(){}}function kk({viewport:t={}},{viewport:e={}}={}){return i=>t[i]!==e[i]}const Ek={inView:{Feature:Pk},tap:{Feature:bk},focus:{Feature:yk},hover:{Feature:vk}},Tk={layout:{ProjectionNode:J0,MeasureLayout:H0}},Dk={...pP,...Ek,...gk,...Tk},Od=D2(Dk,U2);function Ak(t){const e=Cy(()=>Zr(t)),{isStatic:i}=ie.useContext(kf);if(i){const[,s]=ie.useState(t);ie.useEffect(()=>e.on("change",s),[])}return e}const fv=300,Mk=t=>{const e=window.innerWidth;return e<=390?Math.min(25,t*.08):e<=540?Math.min(30,t*.1):Math.min(40,t*.12)},pv={type:"spring",mass:.8,stiffness:350,damping:30};function Lk({items:t,baseWidth:e=300,autoplay:i=!1,autoplayDelay:s=3e3,pauseOnHover:a=!1,loop:l=!1,round:c=!1}){const p=(()=>{const M=window.innerWidth;return M<=390?16:M<=540?20:30})(),m=24,g=e-p*2,[_,C]=ie.useState(0),E=Ak(0),A=ie.useRef(null),[T,L]=ie.useState(!1),F=ie.useMemo(()=>Mk(g),[g]);ie.useEffect(()=>{if(!i||a&&T)return;const M=setInterval(()=>{E.get()===0&&C(I=>I===t.length-1?l?0:I:I+1)},s);return()=>clearInterval(M)},[i,s,E,t.length,l,T,a]),ie.useEffect(()=>{if(!a||!A.current)return;const M=A.current,z=()=>L(!0),I=()=>L(!1);return M.addEventListener("mouseenter",z),M.addEventListener("mouseleave",I),()=>{M.removeEventListener("mouseenter",z),M.removeEventListener("mouseleave",I)}},[a]);const U=(M,z)=>{const I=E.get(),G=z.velocity.x,te=I<=-F||G<-fv,Z=I>=F||G>fv;te&&_<t.length-1?C($=>$+1):Z&&_>0?C($=>$-1):l&&(te&&_===t.length-1?C(0):Z&&_===0&&C(t.length-1))};return be.jsxs("div",{ref:A,className:`carousel-container ${c?"round":""}`,style:{width:`${e}px`,...c&&{height:`${e}px`,borderRadius:"50%"}},children:[be.jsx(Od.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,dragTransition:{bounceStiffness:300,bounceDamping:20},style:{x:E,width:g},animate:{translateX:`-${_*(g+m)}px`},transition:pv,onDragEnd:U,className:"carousel-track",children:t.map((M,z)=>{const I=z===_;return be.jsxs(Od.div,{className:`carousel-item ${c?"round":""}`,style:{width:g,height:c?g:"100%",...c&&{borderRadius:"50%"}},animate:{scale:I?1:.95,borderColor:I?"rgba(255, 255, 255, 0.2)":"rgba(255, 255, 255, 0.1)",backgroundColor:I?"rgba(255, 255, 255, 0.08)":"rgba(255, 255, 255, 0.05)",boxShadow:I?"0 0 0 1px rgba(255, 255, 255, 0.06), 0 0 30px rgba(255, 255, 255, 0.08), 0 0 60px rgba(255, 255, 255, 0.04)":"0 0 0 0px rgba(255, 255, 255, 0), 0 0 0px rgba(255, 255, 255, 0), 0 0 0px rgba(255, 255, 255, 0)"},transition:{...pv,boxShadow:{type:"spring",mass:3,stiffness:200,damping:50}},children:[be.jsx("div",{className:`carousel-item-header ${c?"round":""}`,children:be.jsx("span",{className:"carousel-icon-container",children:M.icon})}),be.jsxs("div",{className:"carousel-item-content",children:[be.jsx("div",{className:"carousel-item-title",children:M.title}),be.jsx("p",{className:"carousel-item-description",children:M.description})]})]},z)})}),be.jsx("div",{className:`carousel-indicators-container ${c?"round":""}`,children:be.jsx("div",{className:"carousel-indicators",children:t.map((M,z)=>be.jsx("button",{onClick:()=>C(z),className:`carousel-indicator ${z===_?"active":"inactive"}`},z))})})]})}const Rk=20,Fk=1,e1=1.26,Ok=[.19,1,.22,1],hv=()=>{const t=window.innerWidth,e=e1;return t>=1024?500:t>=768?t*.65/e:t>=540?t*.75/e:t>=430?t*.85/e:t*.9/e},Nk=[{title:"Fixed Scope, No Surprises",description:"Everything defined upfront in a clear SOW. No hidden fees, no unexpected charges.",id:1,icon:be.jsxs("svg",{className:"carousel-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[be.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),be.jsx("polyline",{points:"14 2 14 8 20 8"})]})},{title:"Built on Modern Tech",description:"React, Next.js, Firebaseenterprise-level tools that keep your site fast and reliable.",id:2,icon:be.jsxs("svg",{className:"carousel-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[be.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),be.jsx("path",{d:"M2 17l10 5 10-5M2 12l10 5 10-5"})]})},{title:"Pay as We Build",description:"Milestone-based payments. You only pay for completed workdesign approval, then delivery.",id:3,icon:be.jsxs("svg",{className:"carousel-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[be.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),be.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})},{title:"30-Day Launch Warranty",description:"Your site will work as promised. Guaranteed functionality for 30 days post-deployment.",id:4,icon:be.jsx("svg",{className:"carousel-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:be.jsx("polyline",{points:"20 6 9 17 4 12"})})},{title:"Ongoing Support Available",description:"Launch is just the beginning. Maintenance plans keep your site running smoothly as you grow.",id:5,icon:be.jsx("svg",{className:"carousel-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:be.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})}];function Ik(){const[t,e]=ie.useState(hv());return ie.useEffect(()=>{const i=()=>{e(hv())};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),be.jsx(Od.div,{initial:{scale:Fk},whileInView:{scale:e1},transition:{duration:Rk,ease:Ok,delay:.3},viewport:{once:!0,amount:.2},children:be.jsx(Lk,{items:Nk,baseWidth:t,autoplay:!0,autoplayDelay:4e3,pauseOnHover:!0,loop:!0,round:!1})})}const mv=()=>{const t=document.getElementById("philosophy-carousel-root");t?(bv.createRoot(t).render(be.jsx(Ik,{})),console.log(" Philosophy Carousel mounted successfully")):console.error(" Philosophy carousel root element not found")};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",mv):mv();(function(){var t=function(u,v){return(v||document).querySelector(u)},e=function(u,v){for(var y=(v||document).querySelectorAll(u),b=[],x=0;x<y.length;x++)b.push(y[x]);return b},i=function(u,v){var y=0;return function(){var b=arguments,x=Date.now();x-y>=v&&(y=x,u.apply(this,b))}},s=function(u,v){var y;return function(){var b=arguments,x=this;clearTimeout(y),y=setTimeout(function(){u.apply(x,b)},v)}},a=null,l=function(){var u=new Image;u.crossOrigin="anonymous",u.onload=function(){try{var v=document.createElement("canvas");v.width=u.width,v.height=u.height;var y=v.getContext("2d");y.drawImage(u,0,0),a=v.toDataURL("image/png"),console.log("Logo cached for PDF generation")}catch(b){console.warn("Could not cache logo:",b)}},u.onerror=function(){console.warn("Could not load logo for caching")},u.src="/images/scarlo-logo.png"},c=function(){return a||"https://scarlo.dev/images/scarlo-logo.png"},f={"+1":{maxDigits:10,format:"US"},"+44":{maxDigits:10,format:"UK"},"+91":{maxDigits:10,format:"IN"},"+61":{maxDigits:9,format:"AU"},"+81":{maxDigits:10,format:"JP"},"+49":{maxDigits:11,format:"DE"},"+33":{maxDigits:9,format:"FR"},"+86":{maxDigits:11,format:"CN"},"+52":{maxDigits:10,format:"MX"},"+55":{maxDigits:11,format:"BR"}},p=function(u,v){if(!u)return"";v=v||"+1";var y=f[v]||f["+1"],b=u.replace(/\D/g,"");b.length>y.maxDigits&&(b=b.substring(0,y.maxDigits));var x="";return y.format==="US"?(b.length>0&&(x="("+b.substring(0,Math.min(3,b.length))),b.length>3&&(x+=") "+b.substring(3,Math.min(6,b.length))),b.length>6&&(x+="-"+b.substring(6,10))):(x=b,b.length>3&&(x=b.substring(0,3)+" "+b.substring(3)),b.length>6&&(x=b.substring(0,3)+" "+b.substring(3,6)+" "+b.substring(6)),b.length>9&&(x=b.substring(0,3)+" "+b.substring(3,6)+" "+b.substring(6,9)+" "+b.substring(9))),x},m=function(u){if(!u)return"";var v=u.replace(/\D/g,"");return v.length===10?"+1"+v:v.length===11&&v.startsWith("1")?"+"+v:u.startsWith("+")?u.replace(/[^\d+]/g,""):v.length>=10?"+1"+v.slice(-10):u},g=function(u){u&&u.addEventListener("input",function(){for(var v=u.selectionStart,y=u.value,b=y.slice(0,v).replace(/\D/g,"").length,x=y.replace(/\D/g,"").slice(0,10),k="",S=0;S<x.length;S++)S===0&&(k+="("),S===3&&(k+=") "),S===6&&(k+="-"),k+=x[S];u.value=k;for(var P=0,R=0,B=0;B<k.length;B++)if(/\d/.test(k[B])&&(R++,R===b)){P=B+1;break}b===0&&(P=k.length>0?1:0),u.setSelectionRange(P,P)})},_={isMobile:function(){return window.innerWidth<=1024||"ontouchstart"in window},isLowEndDevice:function(){var u=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return u?u.effectiveType==="slow-2g"||u.effectiveType==="2g":navigator.hardwareConcurrency&&navigator.hardwareConcurrency<4},isLaptopOrLarger:function(){return window.innerWidth>=1024}},C=function(){if(this.nav=t(".navbar"),!this.nav){console.warn("Navbar not found");return}this.hamburger=t(".hamburger"),this.menu=t(".nav-menu"),this.links=e(".nav-link"),this.sections=null,this.isScrolled=!1,this.scrollTicking=!1,this.activeLinkTicking=!1;var u=this;requestAnimationFrame(function(){u.init()})};C.prototype.init=function(){this.setupSmoothScroll(),this.setupMobileMenu();var u=this;setTimeout(function(){u.setupScrollEffects(),u.setupActiveLinks()},100)},C.prototype.setupSmoothScroll=function(){for(var u=this,v=e('a[href^="#"]'),y=0;y<v.length;y++)(function(b){b.addEventListener("click",function(x){var k=b.getAttribute("href");if(!(!k||k==="#")){var S=t(k);if(S){x.preventDefault();var P=u.nav?u.nav.offsetHeight:0,R=S.offsetTop-P;window.scrollTo({top:R,behavior:"smooth"}),u.closeMobileMenu()}}})})(v[y])},C.prototype.setupMobileMenu=function(){var u=this;!this.hamburger||!this.menu||(this.hamburger.addEventListener("click",function(){u.toggleMobileMenu()}),document.addEventListener("keydown",function(v){v.key==="Escape"&&u.menu&&u.menu.classList.contains("active")&&u.closeMobileMenu()}),document.addEventListener("click",function(v){u.menu&&u.menu.classList.contains("active")&&!u.menu.contains(v.target)&&u.hamburger&&!u.hamburger.contains(v.target)&&u.closeMobileMenu()}))},C.prototype.toggleMobileMenu=function(){!this.menu||!this.hamburger||(this.menu.classList.toggle("active"),this.hamburger.classList.toggle("active"),document.body.style.overflow=this.menu.classList.contains("active")?"hidden":"")},C.prototype.closeMobileMenu=function(){!this.menu||!this.hamburger||(this.menu.classList.remove("active"),this.hamburger.classList.remove("active"),document.body.style.overflow="")},C.prototype.setupScrollEffects=function(){var u=this;if(this.nav){var v=100,y=20,b=function(){var S=window.pageYOffset||document.documentElement.scrollTop||0;!u.isScrolled&&S>v?(u.isScrolled=!0,u.nav.classList.add("scrolled")):u.isScrolled&&S<v-y&&(u.isScrolled=!1,u.nav.classList.remove("scrolled")),u.scrollTicking=!1},x=function(){u.scrollTicking||(u.scrollTicking=!0,requestAnimationFrame(b))};window.addEventListener("scroll",x,{passive:!0});var k=window.pageYOffset||document.documentElement.scrollTop||0;k>v&&(this.isScrolled=!0,this.nav.classList.add("scrolled"))}},C.prototype.setupActiveLinks=function(){var u=this;if(!(!this.links||this.links.length===0)&&(this.sections=e("section[id]"),!(!this.sections||this.sections.length===0))){var v=function(){var b=window.pageYOffset+window.innerHeight/2,x=document.documentElement.scrollHeight,k=window.innerHeight,S="";if(window.pageYOffset+k>=x-50)S="contact";else for(var P=0;P<u.sections.length;P++){var R=u.sections[P],B=R.offsetTop,V=R.offsetHeight;if(b>=B&&b<B+V){S=R.getAttribute("id");break}}for(var H=0;H<u.links.length;H++){var O=u.links[H];O.classList.remove("active"),O.getAttribute("href")==="#"+S&&O.classList.add("active")}u.activeLinkTicking=!1},y=function(){u.activeLinkTicking||(u.activeLinkTicking=!0,requestAnimationFrame(v))};window.addEventListener("scroll",y,{passive:!0}),setTimeout(v,200)}};var E=function(){this.wrapper=t(".rotating-text-wrapper"),this.wrapper&&(this.texts=e(".rotating-text"),this.currentIndex=0,this.init())};E.prototype.init=function(){var u=this;this.texts.forEach(function(v){var y=v.textContent,b="";Array.from(y).forEach(function(x){x===" "?b+='<span class="char-space"> </span>':b+='<span class="char">'+x+"</span>"}),v.innerHTML=b}),setTimeout(function(){u.rotate()},3e3)},E.prototype.rotate=function(){var u=this;setInterval(function(){u.texts[u.currentIndex].classList.remove("active"),u.currentIndex=(u.currentIndex+1)%u.texts.length,u.texts[u.currentIndex].classList.add("active")},7e3)};var A=function(){this.init()};A.prototype.init=function(){var u=new IntersectionObserver(function(v){v.forEach(function(y){y.isIntersecting&&(y.target.classList.add("visible"),u.unobserve(y.target))})},{threshold:.15,rootMargin:"0px 0px -100px 0px"});e(".portfolio-item, .philosophy-card").forEach(function(v){u.observe(v)})};var T=function(){this.thumbnails=e(".portfolio-thumbnail"),this.isMobile=_.isMobile(),console.log("Portfolio Handler - Mobile mode:",this.isMobile),this.init()};T.prototype.init=function(){this.isMobile?(console.log("Mobile: Using thumbnail links only"),this.thumbnails.forEach(function(u){u.addEventListener("click",function(){var v=u.getAttribute("data-url");v&&window.open(v,"_blank")})})):(console.log("Desktop: Enabling iframe loading"),this.setupDesktopIframes())},T.prototype.setupDesktopIframes=function(){var u=this,v=new IntersectionObserver(function(y){y.forEach(function(b){b.isIntersecting&&(u.loadIframe(b.target),v.unobserve(b.target))})},{rootMargin:"500px",threshold:.01});this.thumbnails.forEach(function(y){v.observe(y)})},T.prototype.loadIframe=function(u){var v=u.getAttribute("data-url");if(!v){console.error("No URL found for thumbnail");return}console.log("Loading iframe:",v);var y=document.createElement("iframe");y.src=v,y.style.cssText="width: 100%; height: 100%; border: none; display: block;",y.setAttribute("loading","lazy"),y.setAttribute("allowfullscreen",""),y.addEventListener("load",function(){console.log("Iframe loaded:",v)}),y.addEventListener("error",function(){console.error("Iframe error:",v),u.innerHTML='<div class="thumbnail-overlay"><span>Failed to load preview</span></div>'});var b=u.parentElement;b.innerHTML="",b.appendChild(y)};var L=function(){this.form=t(".contact-form"),this.fields=e(".form-field input, .form-field textarea"),this.form&&this.init()};L.prototype.init=function(){var u=this;this.fields.forEach(function(v){v.setAttribute("placeholder"," ")}),this.form.addEventListener("submit",function(v){v.preventDefault();var y=t(".btn-submit"),b=t(".btn-text",y),x=b.textContent;y.disabled=!0,b.textContent="Sending...",setTimeout(function(){b.textContent="Message sent!",y.style.background="linear-gradient(135deg, #10b981 0%, #059669 100%)",u.form.reset(),setTimeout(function(){b.textContent=x,y.style.background="",y.disabled=!1},3e3)},1500)})};var F=function(){if(this.authModal=t("#authModal"),this.contractModal=t("#contractModal"),this.currentUser=null,this.recaptchaVerifier=null,this.confirmationResult=null,this.currentPhoneNumber="",this.lastLoginError=null,!this.authModal||!this.contractModal){console.error("Auth or Contract modal not found");return}this.init()};F.prototype.init=function(){var u=this;typeof firebase<"u"&&firebase.auth?firebase.auth().onAuthStateChanged(function(H){u.handleAuthStateChange(H)}):console.error("Firebase is not loaded.");var v=t("#authActionBtn");v&&v.addEventListener("click",function(H){H.preventDefault(),u.currentUser?confirm("Are you sure you want to sign out?")&&u.handleLogout():u.showAuthModal()}),e(".view-contract-trigger").forEach(function(H){H.addEventListener("click",function(O){O.preventDefault(),u.checkAuthAndShowContract()})});var y=t("#downloadTemplateBtn");y&&y.addEventListener("click",function(H){H.preventDefault(),u.checkAuthAndShowContract()});var b=t("#closeAuthBtn");b&&b.addEventListener("click",function(){u.closeAuthModal()});var x=t("#closeModalBtn");x&&x.addEventListener("click",function(){u.closeContractModal()});var k=t("#loginForm");k&&k.addEventListener("submit",function(H){H.preventDefault(),u.handleLogin()});var S=t(".auth-overlay",this.authModal);S&&S.addEventListener("click",function(){u.closeAuthModal()});var P=t(".modal-overlay",this.contractModal);P&&P.addEventListener("click",function(){u.closeContractModal()});var R=t("#loginContactDevBtn");R&&R.addEventListener("click",function(){u.openHelpModalWithContext()});var B=t("#phoneContactDevBtn");B&&B.addEventListener("click",function(){u.openHelpModalWithContext()});var V=t("#verifyContactDevBtn");V&&V.addEventListener("click",function(){u.openHelpModalWithContext()}),this.setupTabs(),this.initPhoneAuth()},F.prototype.checkAuthAndShowContract=function(){this.currentUser?this.showContractModal():this.showAuthModal()},F.prototype.handleAuthStateChange=function(u){var v=this;this.currentUser=u;var y=t("#authActionBtn"),b=t("#authStatusText");if(u){y&&y.classList.add("logged-in"),b&&(u.email?b.textContent=u.email.split("@")[0]:u.phoneNumber&&(b.textContent="***"+u.phoneNumber.slice(-4))),this.saveUserToFirestore(u);var x=(window.VITE_DEVELOPER_EMAIL||"").trim().toLowerCase(),k=u.email?u.email.trim().toLowerCase():"";if(k&&k===x){var S=new URLSearchParams(window.location.search),P=S.has("business")||S.has("phone")||S.has("email")||S.has("package");P&&setTimeout(function(){v.showContractModal()},300)}}else console.log("User signed out"),y&&y.classList.remove("logged-in"),b&&(b.textContent="Sign In"),this.closeContractModal()},F.prototype.saveUserToFirestore=function(u){if(!u||!u.uid){console.log(" No user or uid, skipping save");return}var v=window.VITE_DEVELOPER_EMAIL||"";if(u.email&&u.email.toLowerCase()===v.toLowerCase()){console.log(" Developer email, skipping save");return}var y={uid:u.uid,email:u.email||null,phoneNumber:u.phoneNumber||null,displayName:u.displayName||null,lastLogin:firebase.firestore.FieldValue.serverTimestamp()};console.log(" Saving user data to Firestore:",y);var b=firebase.firestore().collection("users");b.doc(u.uid).set(y,{merge:!0}).then(function(){console.log(" User info saved to Firestore successfully")}).catch(function(x){console.error(" Error saving user to Firestore:",x)})},F.prototype.showAuthModal=function(){this.authModal&&(this.authModal.classList.add("show"),document.body.style.overflow="hidden",document.body.classList.add("modal-open"))},F.prototype.closeAuthModal=function(){this.authModal&&(this.authModal.classList.remove("show"),document.body.style.overflow="",document.body.classList.remove("modal-open"),this.resetPhoneAuthToStep1())},F.prototype.showContractModal=function(){this.contractModal&&(this.contractModal.classList.add("show"),document.body.style.overflow="hidden",document.body.classList.add("modal-open"),setTimeout(function(){window.dispatchEvent(new CustomEvent("contractModalOpened"))},150))},F.prototype.closeContractModal=function(){window.unsubscribeFromUsers&&window.unsubscribeFromUsers(),this.contractModal&&(this.contractModal.classList.remove("show"),document.body.style.overflow="",document.body.classList.remove("modal-open"))},F.prototype.resetContractModalState=function(){var u=document.getElementById("developerDashboard");u&&u.remove();var v=document.getElementById("dualSigningCompleted");v&&v.remove();var y=document.querySelector(".modal-header");y&&(y.style.display="");var b=document.getElementById("contractForm");b&&(b.style.display="",b.reset());var x=document.getElementById("clientSignatureBlock"),k=document.getElementById("developerSignatureBlock");x&&(x.style.display=""),k&&(k.style.display="");var S=document.getElementById("clientSignaturePad"),P=document.getElementById("devSignaturePad");if(S){var R=S.getContext("2d");R&&R.clearRect(0,0,S.width,S.height)}if(P){var R=P.getContext("2d");R&&R.clearRect(0,0,P.width,P.height)}},F.prototype.handleLogin=function(){var u=t("#loginEmail").value.trim(),v=t("#loginPassword").value,y=t("#loginError"),b=t("#loginHelpLink"),x=t('#loginForm button[type="submit"]');if(b&&(b.style.display="none"),!u||!v){this.showError(y,"Please fill in all fields");return}x.disabled=!0,x.textContent="Signing in...";var k=this;firebase.auth().signInWithEmailAndPassword(u,v).then(function(S){console.log("Login successful"),k.closeAuthModal(),t("#loginForm").reset(),setTimeout(function(){k.showContractModal()},300)}).catch(function(S){console.error("Login error:",S),k.showErrorWithHelpLink(y,b,k.getErrorMessage(S.code),{email:u,errorType:"account_access"})}).finally(function(){x.disabled=!1,x.textContent="Sign In"})},F.prototype.handleLogout=function(){var u=this;firebase.auth().signOut().then(function(){console.log("Logged out successfully"),u.resetContractModalState(),u.closeContractModal()}).catch(function(v){console.error("Logout error:",v),alert("Error signing out. Please try again.")})},F.prototype.showError=function(u,v){u&&(u.textContent=v,u.classList.add("show"),setTimeout(function(){u.classList.remove("show")},5e3))},F.prototype.getErrorMessage=function(u){var v={"auth/configuration-not-found":"Firebase is not configured.","auth/invalid-email":"Invalid email address","auth/user-not-found":"No account found.","auth/wrong-password":"Incorrect password","auth/too-many-requests":"Too many failed attempts. Please wait a moment.","auth/network-request-failed":"Network error. Check your connection.","auth/user-disabled":"Account disabled.","auth/invalid-credential":"Invalid email or password","auth/invalid-phone-number":"Invalid phone number format.","auth/missing-phone-number":"Please enter a phone number.","auth/quota-exceeded":"SMS quota exceeded. Please try again later.","auth/captcha-check-failed":"reCAPTCHA verification failed. Please try again.","auth/invalid-verification-code":"Invalid verification code.","auth/code-expired":"Verification code has expired. Please request a new one.","auth/missing-verification-code":"Please enter the verification code.","auth/invalid-verification-id":"Session expired. Please request a new code.","auth/session-expired":"Session expired. Please request a new verification code.","auth/credential-already-in-use":"This phone number is already linked to another account.","auth/operation-not-allowed":"Phone authentication is not enabled.","auth/billing-not-enabled":"This phone number is not authorized."};return v[u]||"Authentication error. Please try again."},F.prototype.showErrorWithHelpLink=function(u,v,y,b){this.lastLoginError={message:y,email:b.email||"",phone:b.phone||"",errorType:b.errorType||"account_access"},v&&(v.style.display="none"),u&&(u.textContent=y,u.classList.add("show"),setTimeout(function(){u.classList.remove("show"),v&&(v.style.display="flex")},5e3))},F.prototype.openHelpModalWithContext=function(){var u=t("#helpModal"),v=t("#helpContact"),y=t("#helpContactLabel"),b=t("#helpIssue"),x=t("#helpDetails"),k=t("#contactTabs"),S=t("#helpSuccessMessage"),P=document.querySelectorAll("#helpRequestForm .form-group"),R=document.querySelector(".help-form-footer");!u||!this.lastLoginError||(u.classList.add("show"),document.body.style.overflow="hidden",document.body.classList.add("modal-open"),S&&S.classList.remove("show"),P.forEach(function(B){B.style.display="block"}),R&&(R.style.display="flex"),v&&(this.lastLoginError.email?(v.value=this.lastLoginError.email,v.type="email",v.placeholder="your@email.com",y&&(y.textContent="Your Email *"),k&&(k.style.display="none")):this.lastLoginError.phone&&(v.value=this.lastLoginError.phone,v.type="tel",v.placeholder="(555) 123-4567",y&&(y.textContent="Your Phone Number *"),k&&(k.style.display="none")),v.removeAttribute("readonly"),v.style.opacity="1"),b&&(b.value=this.lastLoginError.errorType),x&&(x.value=""))},F.prototype.setupTabs=function(){var u=this,v=e(".auth-tab",this.authModal),y=e(".auth-panel",this.authModal);v.forEach(function(b){b.addEventListener("click",function(){var x=this.getAttribute("data-tab");v.forEach(function(P){P.classList.remove("active")}),this.classList.add("active"),y.forEach(function(P){P.classList.remove("active")});var k=t("#"+x+"Panel",u.authModal);k&&k.classList.add("active");var S=e(".auth-help-link",u.authModal);S.forEach(function(P){P.style.display="none"}),x==="phone"&&u.resetPhoneAuthToStep1()})})},F.prototype.initPhoneAuth=function(){var u=this,v=t("#phoneForm"),y=t("#verifyCodeForm"),b=t("#backToPhoneBtn");v&&v.addEventListener("submit",function(S){S.preventDefault(),u.handlePhoneSubmit()}),y&&y.addEventListener("submit",function(S){S.preventDefault(),u.handleCodeVerification()}),b&&b.addEventListener("click",function(){u.resetPhoneAuthToStep1()});var x=t("#phoneNumber");x&&g(x);var k=t("#verificationCode");k&&k.addEventListener("input",function(S){S.target.value=S.target.value.replace(/\D/g,"").slice(0,6)})},F.prototype.initRecaptcha=function(){this.recaptchaVerifier||(this.recaptchaVerifier=new firebase.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible"}))},F.prototype.handlePhoneSubmit=function(){var u=this,v=t("#countryCode"),y=t("#phoneNumber"),b=v?v.value:"+1",x=y?y.value.replace(/\D/g,""):"",k=t("#phoneError"),S=t("#phoneHelpLink"),P=t("#sendCodeBtn");if(k&&(k.classList.remove("show"),k.textContent=""),S&&(S.style.display="none"),!x||x.length<10){this.showError(k,"Please enter a valid phone number");return}var R=b+x;this.currentPhoneNumber=R,this.isTestPhone=!1,this.setPhoneLoadingState(P,!0);var B=firebase.functions().httpsCallable("checkTestPhoneNumber");B({phoneNumber:R}).then(function(V){if(V.data.isTestPhone)console.log("Test phone number detected, skipping SMS"),u.isTestPhone=!0,u.confirmationResult=null,u.showVerificationStep(),u.setPhoneLoadingState(P,!1);else{var H=t("#phoneHelpLink");u.showErrorWithHelpLink(k,H,"Phone number not registered. Please contact support.",{phone:R,errorType:"account_access"}),u.setPhoneLoadingState(P,!1)}}).catch(function(V){console.error("Error checking test phone:",V);var H=t("#phoneHelpLink");u.showErrorWithHelpLink(k,H,"Unable to verify phone number. Please try again.",{phone:R,errorType:"account_access"}),u.setPhoneLoadingState(P,!1)})},F.prototype.proceedWithRealPhoneAuth=function(u,v,y){var b=this;this.initRecaptcha(),firebase.auth().signInWithPhoneNumber(u,this.recaptchaVerifier).then(function(x){console.log("SMS sent successfully"),b.confirmationResult=x,b.showVerificationStep()}).catch(function(x){console.error("SMS send error:",x),b.showError(v,b.getErrorMessage(x.code)),b.recaptchaVerifier=null}).finally(function(){b.setPhoneLoadingState(y,!1)})},F.prototype.handleCodeVerification=function(){var u=this,v=t("#verificationCode"),y=v?v.value.trim():"",b=t("#verifyError"),x=t("#verifyHelpLink"),k=t("#verifyCodeBtn");b&&(b.classList.remove("show"),b.textContent=""),x&&(x.style.display="none");var S=this.isTestPhone?4:6,P=6;if(!y||y.length<S||y.length>P){var R=this.isTestPhone?"Please enter your verification code (4-6 digits)":"Please enter the 6-digit verification code";this.showError(b,R);return}if(this.setPhoneLoadingState(k,!0),this.isTestPhone)this.verifyTestPhone(y,b,k);else{if(!this.confirmationResult){this.showErrorWithHelpLink(b,x,"Session expired. Please request a new code.",{phone:this.currentPhoneNumber,errorType:"verification_code"}),this.setPhoneLoadingState(k,!1);return}this.confirmationResult.confirm(y).then(function(B){console.log("Phone auth successful:",B.user),u.closeAuthModal(),u.resetPhoneAuthState(),setTimeout(function(){u.showContractModal()},300)}).catch(function(B){console.error("Code verification error:",B);var V=t("#verifyHelpLink");u.showErrorWithHelpLink(b,V,u.getErrorMessage(B.code),{phone:u.currentPhoneNumber,errorType:"verification_code"})}).finally(function(){u.setPhoneLoadingState(k,!1)})}},F.prototype.verifyTestPhone=function(u,v,y){var b=this;console.log("Verifying test phone:",this.currentPhoneNumber);var x=firebase.functions().httpsCallable("verifyTestPhoneNumber");x({phoneNumber:this.currentPhoneNumber,verificationCode:u}).then(function(k){if(k.data.success&&k.data.customToken)return console.log("Test phone verification successful, signing in with custom token"),firebase.auth().signInWithCustomToken(k.data.customToken);throw new Error("Verification failed")}).then(function(k){console.log("Signed in with custom token:",k.user),b.closeAuthModal(),b.resetPhoneAuthState(),setTimeout(function(){b.showContractModal()},300)}).catch(function(k){console.error("Test phone verification error:",k);var S=k.message||"Invalid verification code";k.code==="functions/invalid-argument"?S="Invalid phone number or verification code.":k.code==="functions/internal"&&(S="Server error. Please try again.");var P=t("#verifyHelpLink");b.showErrorWithHelpLink(v,P,S,{phone:b.currentPhoneNumber,errorType:"verification_code"})}).finally(function(){b.setPhoneLoadingState(y,!1)})},F.prototype.showVerificationStep=function(){var u=t("#phoneForm"),v=t("#verifyCodeForm");u&&(u.style.display="none"),v&&(v.style.display="block");var y=t("#verificationCode");y&&setTimeout(function(){y.focus()},100)},F.prototype.resetPhoneAuthToStep1=function(){var u=t("#phoneForm"),v=t("#verifyCodeForm");u&&(u.style.display="block"),v&&(v.style.display="none");var y=t("#verificationCode");y&&(y.value="");var b=t("#phoneError"),x=t("#verifyError");b&&b.classList.remove("show"),x&&x.classList.remove("show");var k=t("#sendCodeBtn"),S=t("#verifyCodeBtn");this.setPhoneLoadingState(k,!1),this.setPhoneLoadingState(S,!1),this.recaptchaVerifier=null},F.prototype.resetPhoneAuthState=function(){this.confirmationResult=null,this.currentPhoneNumber="",this.isTestPhone=!1,this.resetPhoneAuthToStep1();var u=t("#phoneForm");u&&u.reset()},F.prototype.setPhoneLoadingState=function(u,v){u&&(v?(u.classList.add("loading"),u.disabled=!0):(u.classList.remove("loading"),u.disabled=!1))},F.prototype.formatPhoneDisplay=function(u){if(u.startsWith("+1")&&u.length===12){var v=u.slice(2);return"+1 ("+v.slice(0,3)+") "+v.slice(3,6)+"-"+v.slice(6)}return u};function U(u){if(!u)return null;var v=u.getContext("2d"),y=!1,b=!1,x=0,k=0;function S(){var O=u.getBoundingClientRect(),W=window.devicePixelRatio||1;if(O.width<=0||O.height<=0){console.log("Signature canvas not visible yet, will retry...",O.width,"x",O.height),setTimeout(function(){var X=u.getBoundingClientRect();X.width>0&&X.height>0&&S()},100);return}u.width=O.width*W,u.height=O.height*W,v.scale(W,W),v.strokeStyle="#ffffff",v.fillStyle="#ffffff",v.lineWidth=2.5,v.lineCap="round",v.lineJoin="round",console.log("Signature canvas sized:",O.width,"x",O.height)}function P(O){var W=u.getBoundingClientRect(),X,J;O.touches&&O.touches.length>0?(X=O.touches[0].clientX,J=O.touches[0].clientY):(X=O.clientX,J=O.clientY);var Y=X-W.left,K=J-W.top,ae=u.width/W.width,se=u.height/W.height;return{x:Y*(ae/(window.devicePixelRatio||1)),y:K*(se/(window.devicePixelRatio||1))}}function R(O){O.preventDefault(),O.stopPropagation(),y=!0,b=!0;var W=P(O);x=W.x,k=W.y,v.beginPath(),v.arc(W.x,W.y,v.lineWidth/2,0,Math.PI*2),v.fill(),console.log("Sig start:",W.x.toFixed(0),W.y.toFixed(0))}function B(O){if(y){O.preventDefault(),O.stopPropagation();var W=P(O);v.beginPath(),v.moveTo(x,k),v.lineTo(W.x,W.y),v.stroke(),x=W.x,k=W.y}}function V(O){O&&(O.preventDefault(),O.stopPropagation()),y=!1}function H(){var O=u.getBoundingClientRect();v.clearRect(0,0,O.width,O.height),b=!1,console.log("Signature cleared")}return u.addEventListener("mousedown",R),u.addEventListener("mousemove",B),u.addEventListener("mouseup",V),u.addEventListener("mouseleave",V),u.addEventListener("touchstart",R,{passive:!1}),u.addEventListener("touchmove",B,{passive:!1}),u.addEventListener("touchend",V,{passive:!1}),u.addEventListener("touchcancel",V,{passive:!1}),u.style.touchAction="none",S(),console.log("Signature pad created for:",u.id),{clear:H,isEmpty:function(){return!b},toDataURL:function(){return u.toDataURL("image/png")},resize:S}}var M=function(){if(this.form=t("#contractForm"),!this.form){console.log("Contract form not found");return}M.prototype.fetchHelpRequests=function(u){firebase.firestore().collection("help_requests").where("status","==","open").orderBy("timestamp","desc").get().then(function(v){var y=[];v.forEach(function(b){var x=b.data();x.id=b.id,y.push(x)}),u&&u(y)}).catch(function(v){console.error("Error fetching help requests:",v),u&&u([])})},M.prototype.getIssueTypeLabel=function(u){var v={contract_not_showing:"Contract Not Showing",problems_submitting:"Problems Submitting",signature_issues:"Signature Issues",account_access:"Account Access",other:"Other Issues"};return v[u]||u},M.prototype.resolveHelpRequest=function(u){var v=this;confirm("Mark this help request as resolved?")&&firebase.firestore().collection("help_requests").doc(u).update({status:"resolved",resolved:!0,resolvedTimestamp:firebase.firestore.FieldValue.serverTimestamp()}).then(function(){console.log("Help request marked as resolved"),v.showDeveloperDashboard()}).catch(function(y){console.error("Error resolving help request:",y),alert("Error marking request as resolved: "+y.message)})},M.prototype.resolveAllHelpRequests=function(u){var v=this;if(u.length!==0&&confirm("Mark all "+u.length+" help request(s) as resolved?")){var y=firebase.firestore().batch(),b=firebase.firestore.FieldValue.serverTimestamp();u.forEach(function(x){var k=firebase.firestore().collection("help_requests").doc(x.id);y.update(k,{status:"resolved",resolved:!0,resolvedTimestamp:b})}),y.commit().then(function(){console.log("All help requests marked as resolved"),v.showDeveloperDashboard()}).catch(function(x){console.error("Error resolving all help requests:",x),alert("Error marking requests as resolved: "+x.message)})}},this.devSignaturePad=null,this.clientSignaturePad=null,this.isDeveloper=!1,this.currentContract=null,this.currentUserEmail=null,this.DEVELOPER_EMAIL=(window.VITE_DEVELOPER_EMAIL||"").trim().toLowerCase(),this.signaturePadsInitialized=!1,this.formSetup=!1,console.log("ContractFormHandler created"),this.init()},z=function(){if(this.helpModal=t("#helpModal"),this.helpForm=t("#helpRequestForm"),this.currentUser=null,!this.helpModal||!this.helpForm){console.log("Help modal elements not found");return}this.init()};z.prototype.init=function(){var u=this;typeof firebase<"u"&&firebase.auth&&firebase.auth().onAuthStateChanged(function(k){if(u.currentUser=k,k){var S=t("#helpContact");S&&u.helpModal.classList.contains("show")&&(S.value=k.email||p(k.phoneNumber)||"")}});var v=t("#requestHelpBtn");v&&v.addEventListener("click",function(k){k.preventDefault(),u.showHelpModal()});var y=t("#closeHelpBtn");y&&y.addEventListener("click",function(){u.closeHelpModal()});var b=t("#cancelHelpBtn");b&&b.addEventListener("click",function(){u.closeHelpModal()});var x=t(".modal-overlay",this.helpModal);x&&x.addEventListener("click",function(){u.closeHelpModal()}),this.helpForm&&this.helpForm.addEventListener("submit",function(k){k.preventDefault(),u.submitHelpRequest()})},z.prototype.showHelpModal=function(){if(this.helpModal){this.helpModal.classList.add("show"),document.body.style.overflow="hidden",document.body.classList.add("modal-open");var u=t("#helpSuccessMessage");u&&u.classList.remove("show");var v=t(".help-form");v&&(v.style.display="block"),this.helpForm&&this.helpForm.reset();var y=t("#helpContact"),b=t("#helpContactLabel"),x=t("#helpContactHint"),k=t("#contactTabs");if(y&&this.currentUser){k&&(k.style.display="none");var S=this.currentUser.email,P=this.currentUser.phoneNumber;S?(y.value=this.currentUser.email,y.type="email",y.placeholder="your@email.com",b&&(b.textContent="Your Email *"),x&&(x.textContent="We'll use this to contact you about your request")):P&&(y.value=p(this.currentUser.phoneNumber),y.type="tel",y.placeholder="(555) 123-4567",b&&(b.textContent="Your Phone Number *"),x&&(x.textContent="We'll use this to contact you about your request")),y.setAttribute("readonly","readonly"),y.style.opacity="0.7"}else if(y){k&&(k.style.display="flex",this.setupContactTabs(y,b,x,k)),y.removeAttribute("readonly"),y.style.opacity="1",y.type="email",y.value="",y.placeholder="your@email.com",b&&(b.textContent="Your Email *");var R=e(".contact-tab",k);R.forEach(function(B){B.classList.toggle("active",B.dataset.type==="email")})}}},z.prototype.setupContactTabs=function(u,v,y,b){var x=this,k=e(".contact-tab",b);k.forEach(function(S){var P=S.cloneNode(!0);S.parentNode.replaceChild(P,S)}),k=e(".contact-tab",b),k.forEach(function(S){S.addEventListener("click",function(){var P=this.dataset.type;k.forEach(function(R){R.classList.remove("active")}),this.classList.add("active"),u.value="",P==="email"?(u.type="email",u.placeholder="your@email.com",v&&(v.textContent="Your Email *"),y&&(y.textContent="We'll use this to contact you about your request"),x.removePhoneFormatting(u)):(u.type="tel",u.placeholder="(555) 123-4567",v&&(v.textContent="Your Phone Number *"),y&&(y.textContent="We'll use this to contact you about your request"),g(u)),u.focus()})})},z.prototype.removePhoneFormatting=function(u){var v=u.cloneNode(!0);u.parentNode.replaceChild(v,u)},z.prototype.closeHelpModal=function(){this.helpModal&&(this.helpModal.classList.remove("show"),document.body.style.overflow="",document.body.classList.remove("modal-open"))},z.prototype.submitHelpRequest=function(){var u=this,v=this.helpForm.querySelector('button[type="submit"]'),y=t("#helpSubmitText"),b=y?y.textContent:"Send Help Request";v&&(v.disabled=!0),y&&(y.textContent="Sending...");var x=t("#helpContact").value.trim(),k=t("#helpIssue").value,S=t("#helpDetails").value.trim();if(!x||!k||!S){alert("Please fill in all required fields"),v&&(v.disabled=!1),y&&(y.textContent=b);return}var P=this.currentUser&&this.currentUser.phoneNumber&&!this.currentUser.email,R=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,B=/^\+?[1-9]\d{6,14}$/;if(!P&&!R.test(x)){alert("Please enter a valid email address"),v&&(v.disabled=!1),y&&(y.textContent=b);return}if(P&&!B.test(x.replace(/[\s\-\(\)]/g,""))){alert("Please enter a valid phone number"),v&&(v.disabled=!1),y&&(y.textContent=b);return}var V={userContact:P?m(x):x,contactType:P?"phone":"email",userEmail:P?"":x,userPhone:P?m(x):"",issueType:k,issueDetails:S,timestamp:firebase.firestore.FieldValue.serverTimestamp(),status:"open",resolved:!1,isAuthenticated:!!this.currentUser};this.currentUser&&(V.userId=this.currentUser.uid),console.log("Submitting help request:",V),firebase.firestore().collection("help_requests").add(V).then(function(H){console.log("Help request submitted with ID:",H.id),u.showSuccessMessage(),setTimeout(function(){u.closeHelpModal()},3e3)}).catch(function(H){console.error("Error submitting help request:",H),alert("Error submitting help request: "+H.message+`

Please try again or contact support directly.`),v&&(v.disabled=!1),y&&(y.textContent=b)})},z.prototype.showSuccessMessage=function(){var u=e(".form-group");u.forEach(function(b){b.style.display="none"});var v=t(".help-form-footer");v&&(v.style.display="none");var y=t("#helpSuccessMessage");y&&(y.classList.add("show"),y.scrollIntoView({behavior:"smooth",block:"center"}))},M.prototype.init=function(){var u=this;console.log("Initializing contract form handler"),window.addEventListener("contractModalOpened",function(){console.log("Contract modal opened");var v=firebase.auth().currentUser;v&&(u.currentUserEmail=v.email?v.email.trim().toLowerCase():"",u.isDeveloper=u.currentUserEmail&&u.currentUserEmail===u.DEVELOPER_EMAIL,u.isDeveloper?u.setupDeveloperView():u.setupClientView()),setTimeout(function(){u.initializeSignaturePads()},100),u.initEntityTypeToggle()}),typeof firebase<"u"&&firebase.auth&&firebase.auth().onAuthStateChanged(function(v){v?(u.currentUserEmail=v.email?v.email.trim().toLowerCase():"",u.isDeveloper=u.currentUserEmail&&u.currentUserEmail===u.DEVELOPER_EMAIL,console.log("isDeveloper:",u.isDeveloper),u.setupForm()):(u.currentUserEmail=null,u.isDeveloper=!1)})},M.prototype.initializeSignaturePads=function(){var u=this;console.log("Initializing signature pads, isDeveloper:",this.isDeveloper);var v=document.getElementById("devSignaturePad"),y=document.getElementById("clientSignaturePad");this.isDeveloper?v&&(this.devSignaturePad=U(v),console.log("Dev signature pad created")):y&&(this.clientSignaturePad=U(y),console.log("Client signature pad created")),this.signaturePadsInitialized||(e(".clear-btn").forEach(function(b){b.addEventListener("click",function(x){x.preventDefault(),x.stopPropagation();var k=this.getAttribute("data-canvas");console.log("Clear clicked:",k),k==="devSignaturePad"&&u.devSignaturePad?u.devSignaturePad.clear():k==="clientSignaturePad"&&u.clientSignaturePad&&u.clientSignaturePad.clear()})}),this.signaturePadsInitialized=!0),console.log("Signature pads initialized")},M.prototype.initEntityTypeToggle=function(){console.log("Contract form initialized - client info will be populated from SOW")},M.prototype.populateClientInfoFromSOW=function(u){if(!u){console.log("No SOW data provided");return}console.log("Populating client info from SOW:",u.clientName);var v=t("#sowRequiredNotice"),y=t("#clientInfoPopulated"),b=t("#businessEntityInfo");v&&(v.style.display="none"),y&&(y.style.display="block");var x=t("#contractClientName"),k=t("#contractEntityType"),S=t("#contractStateOfFormation"),P=t("#contractRepName"),R=t("#contractRepTitle"),B=t("#contractClientContact");x&&(x.textContent=u.isBusinessEntity?u.businessName:u.clientName),u.isBusinessEntity&&b?(b.style.display="block",k&&(k.textContent=u.entityType||""),S&&(S.textContent=u.stateOfFormation||""),P&&(P.textContent=u.representativeName||""),R&&(R.textContent=u.representativeTitle||"")):b&&(b.style.display="none"),B&&(B.textContent=u.clientEmail||u.clientPhone||"");var V=t("#clientName"),H=t("#isBusinessEntity"),O=t("#businessName"),W=t("#entityType"),X=t("#stateOfFormation"),J=t("#repName"),Y=t("#repTitle");V&&(V.value=u.isBusinessEntity?u.businessName:u.clientName),H&&(H.value=u.isBusinessEntity?"true":"false"),O&&(O.value=u.businessName||""),W&&(W.value=u.entityType||""),X&&(X.value=u.stateOfFormation||""),J&&(J.value=u.representativeName||""),Y&&(Y.value=u.representativeTitle||"")},M.prototype.setupForm=function(){var u=this;if(this.formSetup){console.log("Form already setup, updating view only"),this.isDeveloper?this.setupDeveloperView():this.setupClientView();return}this.isDeveloper?this.setupDeveloperView():this.setupClientView();var v=new Date().toISOString().split("T")[0],y=t("#devDate"),b=t("#clientDate");y&&(y.value=v),b&&(b.value=v);var x=t("#clientName"),k=t("#clientNameDisplay");x&&k&&x.addEventListener("input",function(){k.textContent=this.value||"Client Name"}),this.form.addEventListener("submit",function(R){return R.preventDefault(),R.stopPropagation(),console.log("Form submit prevented"),!1});var S=t("#submitBtn");S&&S.addEventListener("click",function(R){R.preventDefault(),R.stopPropagation(),console.log("Submit button clicked, isDeveloper:",u.isDeveloper),u.isDeveloper?u.handleDeveloperSubmit():u.handleClientSubmit()});var P=t("#downloadBtn");P&&P.addEventListener("click",function(R){R.preventDefault(),u.generatePDF()}),this.formSetup=!0},M.prototype.setupDeveloperView=function(){console.log("Setting up developer view");var u=t("#contractForm");u&&(u.style.display="none"),this.showDeveloperDashboard();var v=t("#devSignatureBlock");v&&(v.style.display="none");var y=t("#clientSignatureBlock");y&&(y.style.display="none");var b=t("#devPendingBlock");b&&(b.style.display="none");var x=t("#clientName");x&&(x.disabled=!0,x.removeAttribute("required"),x.setAttribute("readonly","readonly"));var k=t("#clientSignerName");k&&(k.disabled=!0,k.removeAttribute("required"));var S=t("#clientDate");S&&(S.disabled=!0,S.removeAttribute("required"));var P=t("#acknowledgment");P&&(P.disabled=!0,P.removeAttribute("required"),P.checked=!0);var R=t(".acknowledgment");R&&(R.style.display="none");var B=t("#submitBtn");B&&(B.style.display="none");var V=t("#downloadBtn");V&&(V.style.display="none")},M.prototype.showDeveloperDashboard=function(){console.log("Loading developer dashboard...");var u=t("#contractForm");u&&(u.style.display="none");var v=t(".modal-header");v&&(v.style.display="none");var y=t(".modal-close");y&&(y.style.display="none");var b=t("#developerDashboard");if(!b){b=document.createElement("div"),b.id="developerDashboard",b.className="developer-dashboard";var x=t(".modal-content");x&&x.insertBefore(b,x.firstChild)}b.innerHTML='<div class="dashboard-loading"><p>Loading contracts...</p></div>',b.style.display="block",this.fetchAllContracts()},M.prototype.renderHelpRequestsSection=function(u){var v=this,y=t("#helpTabContent"),b=t("#helpCountBadge");if(y){b&&(b.textContent=u.length);var x='<div class="help-tab-header"><h3> Help Requests</h3><div style="display: flex; align-items: center; gap: 10px;">';u.length>0&&(x+='<button class="btn-resolve-all" style="padding: 6px 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer; font-weight: 600;"> Resolve All</button>'),x+="</div></div>",u.length===0?x+='<div class="empty-state"><img src="/images/scarlo-logo.png" alt="Scarlo" class="empty-icon"><p>No pending help requests</p></div>':(x+='<div class="help-list">',u.forEach(function(S){var P=S.timestamp?S.timestamp.toDate?S.timestamp.toDate().toLocaleDateString():new Date(S.timestamp).toLocaleDateString():"N/A",R=S.isAuthenticated?'<span class="auth-badge verified"> Verified User</span>':'<span class="auth-badge anonymous"> Anonymous</span>';x+='<div class="help-item" data-request-id="'+S.id+'"><div class="help-icon"></div><div class="help-details"><div class="help-header"><h4>'+(S.userEmail||S.userPhone||"Unknown User")+"</h4>"+R+'<span class="help-badge">'+v.getIssueTypeLabel(S.issueType)+'</span></div><p class="help-message">'+(S.issueDetails||"No details provided")+'</p><div class="help-meta"><span class="meta-item"> '+P+'</span></div></div><div class="help-actions"><button class="btn-resolve-help" data-request-id="'+S.id+'" title="Mark as resolved"> Resolve</button></div></div>'}),x+="</div>"),x+="</div>",y.innerHTML=x,e(".btn-resolve-help").forEach(function(S){S.addEventListener("click",function(P){P.preventDefault();var R=this.getAttribute("data-request-id");v.resolveHelpRequest(R)})});var k=t(".btn-resolve-all");k&&k.addEventListener("click",function(S){S.preventDefault(),v.resolveAllHelpRequests(u)})}},M.prototype.fetchAllContracts=function(){var u=this,v=firebase.firestore().collection("contracts").where("status","==","pending_developer").get(),y=firebase.firestore().collection("contracts").where("status","==","completed").get(),b=new Promise(function(S){u.fetchHelpRequests(function(P){S(P)})}),x=firebase.firestore().collection("sow_documents").orderBy("createdAt","desc").get(),k=firebase.firestore().collection("coupons").orderBy("createdAt","desc").get();Promise.all([v,y,b,x,k]).then(function(S){var P=S[0],R=S[1],B=S[2],V=S[3],H=S[4],O=[];P.forEach(function(se){var le=se.data();le.id=se.id,le.daysSinceSubmission=u.calculateDaysSince(le.timestamp),O.push(le)}),O.sort(function(se,le){return le.daysSinceSubmission-se.daysSinceSubmission});var W=[];R.forEach(function(se){var le=se.data();le.id=se.id,le.daysSinceSubmission=u.calculateDaysSince(le.timestamp),W.push(le)}),W.sort(function(se,le){var xe=se.finalizedTimestamp?se.finalizedTimestamp.toDate().getTime():0,Me=le.finalizedTimestamp?le.finalizedTimestamp.toDate().getTime():0;return Me-xe});var X=[],J=[];V.forEach(function(se){var le=se.data();le.id=se.id,X.push(le),le.changeRequestId&&J.push(le.changeRequestId)});var Y=[];H.forEach(function(se){var le=se.data();le.id=se.id,Y.push(le)}),u.coupons=Y,u.renderDeveloperDashboard(O,W),u.renderHelpRequestsSection(B);var K=document.getElementById("couponsTabContent");if(K){var ae=document.getElementById("couponCountBadge");ae&&(ae.textContent=Y.length),K.innerHTML=u.renderCouponsTab(Y),u.attachCouponEventListeners()}u.fetchClientLastLogins(X).then(function(){J.length>0?u.fetchChangeRequestsUnreadStatus(J,X):u.renderSOWTab(X)})}).catch(function(S){console.error("Error fetching contracts:",S);var P=t("#developerDashboard");P&&(P.innerHTML='<div class="dashboard-error"><p>Error loading contracts: '+S.message+"</p></div>")})},M.prototype.calculateDaysSince=function(u){if(!u)return 0;var v;u.toDate?v=u.toDate():u instanceof Date?v=u:v=new Date(u);var y=new Date,b=Math.abs(y-v),x=Math.floor(b/(1e3*60*60*24));return x},M.prototype.getUrgencyLevel=function(u){return u>=7?{level:"critical",label:"URGENT",color:"#ef4444",icon:""}:u>=3?{level:"high",label:"ACTION NEEDED",color:"#f59e0b",icon:""}:u>=1?{level:"medium",label:"NEW",color:"#3b82f6",icon:""}:{level:"low",label:"JUST IN",color:"#10b981",icon:""}},M.prototype.formatCurrency=function(u){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(u||0)},M.prototype.renderDeveloperDashboard=function(u,v){var y=this,b=t("#developerDashboard");if(b){u.length+v.length;var x=u.filter(function(B){return B.daysSinceSubmission>=7}).length,k=v.filter(function(B){if(!B.finalizedTimestamp)return!1;var V=B.finalizedTimestamp.toDate?B.finalizedTimestamp.toDate():new Date(B.finalizedTimestamp),H=new Date;return V.getMonth()===H.getMonth()&&V.getFullYear()===H.getFullYear()}).length,S="";S+=`<button class="dashboard-close" onclick="document.querySelector('.contract-modal').classList.remove('show'); document.body.classList.remove('modal-open'); document.body.style.overflow = '';"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>`;var P=new Date().getHours(),R=P<12?"Good Morning":P<18?"Good Afternoon":"Good Evening";S+='<div class="dashboard-header"><div class="header-content"><h2>'+R+`, Carlos </h2><p class="header-subtitle">Here's your business overview</p></div><div class="header-date"><span class="current-date">`+new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+"</span></div></div>",x>0?S+='<div class="alert-banner urgent"><div class="alert-icon"></div><div class="alert-content"><strong>'+x+" contract"+(x!==1?"s":"")+" need"+(x===1?"s":"")+" immediate attention!</strong><p>Client"+(x!==1?"s have":" has")+" been waiting 7+ days for your signature.</p></div></div>":u.length===0&&v.length>0&&(S+='<div class="alert-banner success"><div class="alert-icon"></div><div class="alert-content"><strong>All caught up!</strong><p>No pending contracts. Great job staying on top of things!</p></div></div>'),S+='<div class="quick-stats"><div class="quick-stat action-required"><div class="quick-stat-icon"></div><div class="quick-stat-content"><span class="quick-stat-number">'+u.length+'</span><span class="quick-stat-label">Awaiting Signature</span></div></div><div class="quick-stat completed-stat"><div class="quick-stat-icon"></div><div class="quick-stat-content"><span class="quick-stat-number">'+v.length+'</span><span class="quick-stat-label">Completed</span></div></div><div class="quick-stat monthly-stat"><div class="quick-stat-icon"></div><div class="quick-stat-content"><span class="quick-stat-number">'+k+'</span><span class="quick-stat-label">This Month</span></div></div></div>',S+='<div class="dashboard-tabs"><div class="tab-buttons"><button class="tab-btn active" data-tab="contracts"><span class="tab-icon"></span><span class="tab-label">Contracts</span><span class="tab-badge">'+(u.length+v.length)+'</span></button><button class="tab-btn" data-tab="sow"><span class="tab-icon"></span><span class="tab-label">SOW Documents</span><span class="tab-badge" id="sowCountBadge">0</span></button><button class="tab-btn" data-tab="coupons"><span class="tab-icon"></span><span class="tab-label">Coupons</span><span class="tab-badge" id="couponCountBadge">0</span></button><button class="tab-btn" data-tab="help"><span class="tab-icon"></span><span class="tab-label">Help Requests</span><span class="tab-badge" id="helpCountBadge">0</span></button></div><div class="tab-content"><div class="tab-pane active" data-tab="contracts">'+y.renderContractsTab(u,v)+'</div><div class="tab-pane" data-tab="sow"><div id="sowTabContent"><div class="loading-state"><div class="spinner"></div><p>Loading SOW documents...</p></div></div></div><div class="tab-pane" data-tab="coupons"><div id="couponsTabContent"><div class="loading-state"><div class="spinner"></div><p>Loading coupons...</p></div></div></div><div class="tab-pane" data-tab="help"><div id="helpTabContent"><div class="loading-state"><div class="spinner"></div><p>Loading help requests...</p></div></div></div></div></div>',S+=`<div class="dashboard-footer"><button class="btn-close-dashboard" onclick="document.querySelector('.contract-modal').classList.remove('show'); document.body.classList.remove('modal-open');">Close Dashboard</button></div>`,b.innerHTML=S,e(".btn-sign-contract").forEach(function(B){B.addEventListener("click",function(V){V.preventDefault();var H=this.getAttribute("data-contract-id");y.selectContractToSign(H,u)})}),e(".btn-download").forEach(function(B){B.addEventListener("click",function(V){V.preventDefault();var H=this.getAttribute("data-contract-id");y.viewCompletedContract(H,v)})}),e(".tab-btn").forEach(function(B){B.addEventListener("click",function(){var V=this.getAttribute("data-tab");y.switchTab(V)})})}},M.prototype.renderContractsTab=function(u,v){var y=this,b="";return b+='<div class="dashboard-section action-section"><div class="section-header"><h3> Action Required</h3><span class="section-badge">'+u.length+" pending</span></div>",u.length===0?b+='<div class="empty-state success-state"><img src="/images/scarlo-logo.png" alt="Scarlo" class="empty-icon"><p>No contracts waiting for your signature</p></div>':(b+='<div class="action-list">',u.forEach(function(x,k){var S=y.getUrgencyLevel(x.daysSinceSubmission),P=x.timestamp?x.timestamp.toDate?x.timestamp.toDate().toLocaleDateString():new Date(x.timestamp).toLocaleDateString():"N/A";b+='<div class="action-item" data-contract-id="'+x.id+'"><div class="action-priority" style="background: '+S.color+';"><span class="priority-number">#'+(k+1)+'</span></div><div class="action-details"><div class="action-client"><h4>'+(x.clientName||"Unknown Client")+'</h4><span class="urgency-tag" style="background: '+S.color+"22; color: "+S.color+';">'+S.icon+" "+S.label+'</span></div><div class="action-meta"><span class="meta-item"><strong>Email:</strong> '+(x.clientEmail||"N/A")+'</span><span class="meta-item"><strong>Waiting:</strong> '+x.daysSinceSubmission+" day"+(x.daysSinceSubmission!==1?"s":"")+'</span><span class="meta-item"><strong>Received:</strong> '+P+'</span></div></div><div class="action-cta"><button class="btn-sign-contract" data-contract-id="'+x.id+'"><span class="btn-icon"></span><span class="btn-text">Sign Now</span></button></div></div>'}),b+="</div>"),b+="</div>",b+='<div class="dashboard-section history-section"><div class="section-header"><h3> Completed Contracts</h3><span class="section-badge success">'+v.length+" total</span></div>",v.length===0?b+='<div class="empty-state"><img src="/images/scarlo-logo.png" alt="Scarlo" class="empty-icon"><p>No completed contracts yet</p></div>':(b+='<div class="history-list">',v.forEach(function(x){var k=x.finalizedTimestamp?x.finalizedTimestamp.toDate?x.finalizedTimestamp.toDate().toLocaleDateString():new Date(x.finalizedTimestamp).toLocaleDateString():"N/A";b+='<div class="history-item" data-contract-id="'+x.id+'"><div class="history-status"><span class="status-icon"></span></div><div class="history-details"><h4>'+(x.clientName||"Unknown Client")+'</h4><span class="history-meta">Completed '+k+'</span></div><div class="history-actions"><button class="btn-download" data-contract-id="'+x.id+'" title="Download PDF"> Download</button></div></div>'}),b+="</div>"),b+="</div>",b},M.prototype.switchTab=function(u){e(".tab-btn").forEach(function(v){v.classList.remove("active"),v.getAttribute("data-tab")===u&&v.classList.add("active")}),e(".tab-pane").forEach(function(v){v.classList.remove("active"),v.getAttribute("data-tab")===u&&v.classList.add("active")})},M.prototype.loadCoupons=function(){var u=this,v=document.getElementById("couponsTabContent");v&&firebase.firestore().collection("coupons").orderBy("createdAt","desc").get().then(function(y){var b=[];y.forEach(function(k){var S=k.data();S.id=k.id,b.push(S)});var x=document.getElementById("couponCountBadge");x&&(x.textContent=b.length),u.coupons=b,v.innerHTML=u.renderCouponsTab(b),u.attachCouponEventListeners()}).catch(function(y){console.error("Error loading coupons:",y),v.innerHTML='<div class="error-state"><p>Error loading coupons: '+y.message+"</p></div>"})},M.prototype.createWelcomeCoupon=function(){var u={code:"WELCOME10",description:"Welcome discount for new clients - 10% off your first project",discountType:"percentage",discountValue:10,minPurchase:0,usageLimit:0,usageCount:0,expirationDate:null,tierRestrictions:[],oneTimeUse:!1,active:!0,createdAt:firebase.firestore.FieldValue.serverTimestamp()};return firebase.firestore().collection("coupons").add(u).then(function(v){console.log("WELCOME10 coupon created with ID:",v.id)}).catch(function(v){console.error("Error creating WELCOME10 coupon:",v)})},M.prototype.renderCouponsTab=function(u){var v=this,y="";if(y+='<div class="coupons-header"><div class="coupons-title"></div><button class="btn-create-coupon" id="btnCreateCoupon"><span class="btn-icon">+</span><span class="btn-text">Create Coupon</span></button></div>',y+='<div id="couponCreatorForm" class="coupon-creator-form" style="display: none;"><div class="coupon-form-header"><h4 id="couponFormTitle">Create New Coupon</h4><button class="btn-close-form" id="btnCloseCouponForm"></button></div><div class="coupon-form-body"><div class="form-row"><div class="form-group"><label>Coupon Code *</label><input type="text" id="couponCode" placeholder="e.g., WELCOME10" class="coupon-input" style="text-transform: uppercase;"><small>Alphanumeric, no spaces. Auto-converts to uppercase.</small></div><div class="form-group"><label>Discount Type *</label><select id="couponType" class="coupon-select"><option value="percentage">Percentage Off (%)</option><option value="fixed">Fixed Amount Off ($)</option></select></div></div><div class="form-row"><div class="form-group"><label>Discount Value *</label><input type="number" id="couponValue" placeholder="e.g., 10" class="coupon-input" min="0" step="0.01"><small id="couponValueHint">Enter percentage (0-100)</small></div><div class="form-group"><label>Usage Limit</label><input type="number" id="couponUsageLimit" placeholder="Leave empty for unlimited" class="coupon-input" min="0"><small>Max times this coupon can be used</small></div></div><div class="form-row"><div class="form-group"><label>Minimum Purchase ($)</label><input type="number" id="couponMinPurchase" placeholder="0" class="coupon-input" min="0" step="0.01"><small>Minimum order amount required</small></div><div class="form-group"><label>Expiration Date</label><input type="date" id="couponExpiration" class="coupon-input"><small>Leave empty for no expiration</small></div></div><div class="form-row"><div class="form-group full-width"><label>Tier Restrictions</label><div class="tier-checkboxes"><label class="tier-checkbox"><input type="checkbox" value="essential" checked> Essential</label><label class="tier-checkbox"><input type="checkbox" value="starter" checked> Starter</label><label class="tier-checkbox"><input type="checkbox" value="growth" checked> Growth</label><label class="tier-checkbox"><input type="checkbox" value="professional" checked> Professional</label><label class="tier-checkbox"><input type="checkbox" value="enterprise" checked> Enterprise</label><label class="tier-checkbox"><input type="checkbox" value="custom" checked> Custom</label></div><small>Select which tiers this coupon can be applied to</small></div></div><div class="form-row"><div class="form-group full-width"><label>Description (Optional)</label><input type="text" id="couponDescription" placeholder="e.g., Welcome discount for new clients" class="coupon-input"></div></div><div class="form-row"><div class="form-group"><label class="checkbox-label"><input type="checkbox" id="couponActive" checked><span>Coupon is Active</span></label></div></div><input type="hidden" id="couponEditId" value=""><div class="form-actions"><button class="btn-cancel" id="btnCancelCoupon">Cancel</button><button class="btn-save-coupon" id="btnSaveCoupon">Save Coupon</button></div></div></div>',u.length===0)y+='<div class="empty-state"><div class="empty-icon"></div><h4>No Coupons Yet</h4><p>Create your first coupon to offer discounts to clients.</p></div>';else{y+='<div class="coupons-list">';var b=u.filter(function(k){return k.active!==!1}),x=u.filter(function(k){return k.active===!1});b.length>0&&(y+='<div class="coupons-section"><h4 class="section-label">Active Coupons ('+b.length+")</h4>",b.forEach(function(k){y+=v.renderCouponCard(k)}),y+="</div>"),x.length>0&&(y+='<div class="coupons-section inactive-section"><h4 class="section-label">Inactive Coupons ('+x.length+")</h4>",x.forEach(function(k){y+=v.renderCouponCard(k)}),y+="</div>"),y+="</div>"}return y},M.prototype.renderCouponCard=function(u){var v=u.expirationDate&&new Date(u.expirationDate)<new Date,y=u.usageLimit&&u.usageCount>=u.usageLimit,b=!u.active||v||y?"coupon-inactive":"coupon-active",x=u.discountType==="percentage"?u.discountValue+"% OFF":"$"+parseFloat(u.discountValue||0).toFixed(0)+" OFF",k="";u.active?v?k='<span class="status-badge expired">Expired</span>':y?k='<span class="status-badge used-up">Limit Reached</span>':k='<span class="status-badge active">Active</span>':k='<span class="status-badge inactive">Disabled</span>';var S='<div class="coupon-card '+b+'" data-coupon-id="'+u.id+'"><div class="coupon-card-header"><div class="coupon-code-display"><span class="coupon-code">'+u.code+'</span><button class="btn-copy-code" data-code="'+u.code+'" title="Copy code"></button></div>'+k+'</div><div class="coupon-card-body"><div class="coupon-discount">'+x+'</div><div class="coupon-details">';if(u.description&&(S+='<div class="detail-row"><span class="detail-label">Description:</span> '+u.description+"</div>"),u.minPurchase&&u.minPurchase>0&&(S+='<div class="detail-row"><span class="detail-label">Min. Purchase:</span> $'+parseFloat(u.minPurchase).toFixed(0)+"</div>"),u.usageLimit?S+='<div class="detail-row"><span class="detail-label">Usage:</span> '+(u.usageCount||0)+" / "+u.usageLimit+"</div>":S+='<div class="detail-row"><span class="detail-label">Usage:</span> '+(u.usageCount||0)+" (unlimited)</div>",u.expirationDate){var P=new Date(u.expirationDate).toLocaleDateString();S+='<div class="detail-row"><span class="detail-label">Expires:</span> '+P+"</div>"}return u.allowedTiers&&u.allowedTiers.length<5&&(S+='<div class="detail-row"><span class="detail-label">Tiers:</span> '+u.allowedTiers.join(", ")+"</div>"),S+='</div></div><div class="coupon-card-footer"><button class="btn-edit-coupon" data-coupon-id="'+u.id+'">Edit</button><button class="btn-delete-coupon" data-coupon-id="'+u.id+'">Delete</button></div></div>',S},M.prototype.attachCouponEventListeners=function(){var u=this,v=document.getElementById("btnCreateCoupon");v&&v.addEventListener("click",function(){u.showCouponForm()});var y=document.getElementById("btnCloseCouponForm");y&&y.addEventListener("click",function(){u.hideCouponForm()});var b=document.getElementById("btnCancelCoupon");b&&b.addEventListener("click",function(){u.hideCouponForm()});var x=document.getElementById("btnSaveCoupon");x&&x.addEventListener("click",function(){u.saveCoupon()});var k=document.getElementById("couponType");k&&k.addEventListener("change",function(){var P=document.getElementById("couponValueHint");this.value==="percentage"?P.textContent="Enter percentage (0-100)":P.textContent="Enter dollar amount"});var S=document.getElementById("couponCode");S&&S.addEventListener("input",function(){this.value=this.value.toUpperCase().replace(/[^A-Z0-9]/g,"")}),e(".btn-edit-coupon").forEach(function(P){P.addEventListener("click",function(){var R=this.getAttribute("data-coupon-id");u.editCoupon(R)})}),e(".btn-delete-coupon").forEach(function(P){P.addEventListener("click",function(){var R=this.getAttribute("data-coupon-id");u.deleteCoupon(R)})}),e(".btn-copy-code").forEach(function(P){P.addEventListener("click",function(){var R=this.getAttribute("data-code");navigator.clipboard.writeText(R).then(function(){alert("Coupon code copied: "+R)})})})},M.prototype.showCouponForm=function(u){var v=document.getElementById("couponCreatorForm"),y=document.getElementById("couponFormTitle");v&&(document.getElementById("couponCode").value="",document.getElementById("couponType").value="percentage",document.getElementById("couponValue").value="",document.getElementById("couponUsageLimit").value="",document.getElementById("couponMinPurchase").value="",document.getElementById("couponExpiration").value="",document.getElementById("couponDescription").value="",document.getElementById("couponActive").checked=!0,document.getElementById("couponEditId").value="",e('.tier-checkboxes input[type="checkbox"]').forEach(function(b){b.checked=!0}),u?(y.textContent="Edit Coupon",document.getElementById("couponCode").value=u.code||"",document.getElementById("couponType").value=u.discountType||"percentage",document.getElementById("couponValue").value=u.discountValue||"",document.getElementById("couponUsageLimit").value=u.usageLimit||"",document.getElementById("couponMinPurchase").value=u.minPurchase||"",document.getElementById("couponExpiration").value=u.expirationDate||"",document.getElementById("couponDescription").value=u.description||"",document.getElementById("couponActive").checked=u.active!==!1,document.getElementById("couponEditId").value=u.id,u.allowedTiers&&e('.tier-checkboxes input[type="checkbox"]').forEach(function(b){b.checked=u.allowedTiers.indexOf(b.value)!==-1})):y.textContent="Create New Coupon",v.style.display="block",document.getElementById("couponCode").focus())},M.prototype.hideCouponForm=function(){var u=document.getElementById("couponCreatorForm");u&&(u.style.display="none")},M.prototype.saveCoupon=function(){var u=this,v=document.getElementById("couponEditId").value,y=document.getElementById("couponCode").value.trim().toUpperCase(),b=document.getElementById("couponType").value,x=parseFloat(document.getElementById("couponValue").value),k=document.getElementById("couponUsageLimit").value?parseInt(document.getElementById("couponUsageLimit").value):null,S=parseFloat(document.getElementById("couponMinPurchase").value)||0,P=document.getElementById("couponExpiration").value||null,R=document.getElementById("couponDescription").value.trim(),B=document.getElementById("couponActive").checked,V=[];if(e('.tier-checkboxes input[type="checkbox"]:checked').forEach(function(W){V.push(W.value)}),!y){alert("Please enter a coupon code");return}if(isNaN(x)||x<=0){alert("Please enter a valid discount value");return}if(b==="percentage"&&x>100){alert("Percentage discount cannot exceed 100%");return}if(V.length===0){alert("Please select at least one tier");return}var H={code:y,discountType:b,discountValue:x,usageLimit:k,minPurchase:S,expirationDate:P,description:R,active:B,allowedTiers:V,updatedAt:firebase.firestore.FieldValue.serverTimestamp()},O;v?O=firebase.firestore().collection("coupons").doc(v).update(H):(H.createdAt=firebase.firestore.FieldValue.serverTimestamp(),H.usageCount=0,O=firebase.firestore().collection("coupons").where("code","==",y).get().then(function(W){if(!W.empty)throw new Error("A coupon with this code already exists");return firebase.firestore().collection("coupons").add(H)})),O.then(function(){alert(" Coupon saved successfully!"),u.hideCouponForm(),u.loadCoupons()}).catch(function(W){console.error("Error saving coupon:",W),alert("Error saving coupon: "+W.message)})},M.prototype.editCoupon=function(u){var v=this.coupons.find(function(y){return y.id===u});v&&this.showCouponForm(v)},M.prototype.deleteCoupon=function(u){var v=this,y=this.coupons.find(function(b){return b.id===u});y&&confirm('Are you sure you want to delete the coupon "'+y.code+`"?

This action cannot be undone.`)&&firebase.firestore().collection("coupons").doc(u).delete().then(function(){alert(" Coupon deleted successfully"),v.loadCoupons()}).catch(function(b){console.error("Error deleting coupon:",b),alert("Error deleting coupon: "+b.message)})},M.prototype.validateCoupon=function(u,v,y){var b=this.coupons?this.coupons.find(function(k){return k.code===u.toUpperCase()&&k.active!==!1}):null;if(!b)return{valid:!1,error:"Invalid coupon code"};if(b.expirationDate&&new Date(b.expirationDate)<new Date)return{valid:!1,error:"This coupon has expired"};if(b.usageLimit&&b.usageCount>=b.usageLimit)return{valid:!1,error:"This coupon has reached its usage limit"};if(b.minPurchase&&y<b.minPurchase)return{valid:!1,error:"Minimum purchase of $"+b.minPurchase.toFixed(0)+" required"};if(b.allowedTiers&&b.allowedTiers.length>0&&v&&b.allowedTiers.indexOf(v)===-1)return{valid:!1,error:"This coupon is not valid for the "+v+" tier"};var x=0;return b.discountType==="percentage"?x=y*(b.discountValue/100):x=Math.min(b.discountValue,y),{valid:!0,coupon:b,discount:x,discountDisplay:b.discountType==="percentage"?b.discountValue+"%":"$"+b.discountValue.toFixed(0)}},M.prototype.fetchClientLastLogins=function(u){if(!u||u.length===0)return Promise.resolve();var v={};u.forEach(function(P){P.clientEmail&&(v[P.clientEmail.toLowerCase()]=P.clientEmail)});var y=Object.values(v);if(y.length===0)return Promise.resolve();for(var b=[],x=0;x<y.length;x+=10)b.push(y.slice(x,x+10));var k={},S=b.map(function(P){return firebase.firestore().collection("users").where("email","in",P).get().then(function(R){console.log(" Found",R.size,"users for lastLogin lookup"),R.forEach(function(B){var V=B.data();V.email&&(k[V.email.toLowerCase()]=V.lastLogin)})})});return Promise.all(S).then(function(){u.forEach(function(P){P.clientEmail&&(P.clientLastLogin=k[P.clientEmail.toLowerCase()]||null)})})},M.prototype.loadSOWDocuments=function(){var u=this;firebase.firestore().collection("sow_documents").orderBy("createdAt","desc").get().then(function(v){var y=[],b=[];return v.forEach(function(x){var k=x.data();k.id=x.id,y.push(k),k.changeRequestId&&b.push(k.changeRequestId)}),u.fetchClientLastLogins(y).then(function(){b.length>0?u.fetchChangeRequestsUnreadStatus(b,y):u.renderSOWTab(y)})}).catch(function(v){console.error("Error loading SOWs:",v);var y=t("#sowTabContent");y&&(y.innerHTML='<div class="error-state"><p>Error loading SOW documents</p><button class="btn-create-sow" onclick="location.reload()">Retry</button></div>')})},M.prototype.fetchChangeRequestsUnreadStatus=function(u,v){for(var y=this,b=y.isDeveloper?"developer":"client",x=y.isDeveloper?"developerLastViewed":"clientLastViewed",k=[],S=0;S<u.length;S+=10)k.push(u.slice(S,S+10));var P={},R=k.map(function(B){return firebase.firestore().collection("change_requests").where(firebase.firestore.FieldPath.documentId(),"in",B).get().then(function(V){V.forEach(function(H){var O=H.data();O.id=H.id;var W=!1;if(O.lastMessageBy&&O.lastMessageBy!==b&&O.lastMessageAt){var X=O[x];(!X||O.lastMessageAt.toMillis()>X.toMillis())&&(W=!0)}O.hasUnreadMessages=W,P[H.id]=O})})});Promise.all(R).then(function(){v.forEach(function(B){B.changeRequestId&&P[B.changeRequestId]&&(B.changeRequestData=P[B.changeRequestId])}),y.renderSOWTab(v)}).catch(function(B){console.error("Error fetching change requests:",B),y.renderSOWTab(v)})},M.prototype.renderSOWTab=function(u){var v=t("#sowTabContent"),y=t("#sowCountBadge");if(v){y&&(y.textContent=u.length);var b='<div class="sow-tab-header"><button class="btn-create-sow" onclick="window.contractFormHandler.showSOWCreator()"><span class="btn-icon">+</span> Create SOW</button></div>';u.length===0?b+='<div class="empty-state"><img src="/images/scarlo-logo.png" alt="Scarlo" class="empty-icon"><h4>No SOW Documents Yet</h4><p>Create your first Statement of Work to get started</p><button class="btn-create-sow" onclick="window.contractFormHandler.showSOWCreator()" style="margin-top: 20px;"><span class="btn-icon">+</span> Create SOW</button></div>':(b+='<div class="sow-list">',u.forEach(function(x){var k=x.createdAt?x.createdAt.toDate?x.createdAt.toDate().toLocaleDateString():new Date(x.createdAt).toLocaleDateString():"N/A",S={essential:"Essential  Landing Page",starter:"Tier 1  Starter",growth:"Tier 2  Growth",professional:"Tier 3  Professional",enterprise:"Tier 4  Enterprise",custom:"Custom Quote"},P={draft:{bg:"#374151",color:"#9ca3af",icon:""},sent:{bg:"#1e40af",color:"#60a5fa",icon:""},approved:{bg:"#065f46",color:"#34d399",icon:""}},R=x.status||"draft",B=P[R]||P.draft,V=R.toUpperCase();R==="pending_developer"||R==="sent"?x.clientSignature&&!x.devSignature?V=" AWAITING DEV":x.clientSignature||(V=" AWAITING CLIENT"):R==="approved"&&x.clientSignature&&x.devSignature&&(V=" FULLY SIGNED");var H="sowData_"+x.id.replace(/[^a-zA-Z0-9]/g,"_");window[H]=x;var O="";if(x.hasChangeRequest&&x.changeRequestStatus){var W={pending:{bg:"rgba(251, 191, 36, 0.2)",color:"#fbbf24",text:" Change Requested"},approved:{bg:"rgba(16, 185, 129, 0.2)",color:"#10b981",text:" Change Approved"},rejected:{bg:"rgba(239, 68, 68, 0.2)",color:"#ef4444",text:" Change Rejected"},change_order:{bg:"rgba(99, 102, 241, 0.2)",color:"#6366f1",text:" Change Order"}},X=W[x.changeRequestStatus]||W.pending,J="";x.changeRequestData&&x.changeRequestData.hasUnreadMessages&&(J='<span class="unread-badge">New</span>'),O='<div style="font-size: 0.75rem; color: '+X.color+"; background: "+X.bg+`; padding: 4px 8px; border-radius: 4px; white-space: nowrap; cursor: pointer; display: flex; align-items: center;" onclick="window.contractFormHandler.viewChangeRequest('`+x.changeRequestId+`')">`+X.text+J+"</div>"}b+='<div class="sow-item" data-sow-id="'+x.id+'"><div class="sow-item-header"><div class="sow-client-info"><h4>'+(x.clientName||"Unknown Client")+'</h4><p class="sow-package">'+(S[x.packageType]||x.packageType)+'</p><p style="margin: 0.25rem 0 0; font-size: 0.7rem; color: #6b7280; opacity: 0.8;">Last sign in: '+(x.clientLastLogin?x.clientLastLogin.toDate?x.clientLastLogin.toDate().toLocaleString([],{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):new Date(x.clientLastLogin).toLocaleString([],{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"Never")+'</p></div><div style="display: flex; flex-direction: column; align-items: flex-end; gap: 8px;"><span class="sow-status" style="background: '+B.bg+"; color: "+B.color+';">'+B.icon+" "+V+"</span>"+(x.linkedContract?'<div style="font-size: 0.75rem; color: #10b981; background: rgba(16, 185, 129, 0.15); padding: 4px 8px; border-radius: 4px; white-space: nowrap;"> Linked to Contract</div>':"")+O+'</div></div><div class="sow-item-details"><div class="sow-detail-row"><span class="detail-label">'+(x.clientEmail?" Email:":" Phone:")+'</span><span class="detail-value">'+(x.clientEmail||(x.clientPhone?p(x.clientPhone):"N/A"))+'</span></div><div class="sow-detail-row"><span class="detail-label"> Total:</span><span class="detail-value">$'+(x.payment&&x.payment.total?x.payment.total.toFixed(0):"0")+'</span></div><div class="sow-detail-row"><span class="detail-label"> Timeline:</span><span class="detail-value">'+(x.estimatedWeeks||"TBD")+" "+(x.devDurationUnit||"weeks")+'</span></div><div class="sow-detail-row"><span class="detail-label"> Created:</span><span class="detail-value">'+k+"</span></div></div>"+(x.hasChangeRequest&&x.changeRequestStatus==="pending"?'<div class="change-request-card" style="background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.3); border-radius: 8px; padding: 0.75rem; margin-bottom: 0.75rem;"><div><p style="margin: 0; font-weight: 600; color: #fbbf24; font-size: 0.9rem; display: flex; align-items: center;"> Client Requested Changes'+(x.changeRequestData&&x.changeRequestData.hasUnreadMessages?'<span class="unread-badge">New</span>':"")+'</p><p style="margin: 0.25rem 0 0; font-size: 0.8rem; opacity: 0.8;">Review and respond to this change request</p></div></div>':"")+'<div class="sow-item-actions">'+(!x.clientSignature||!x.devSignature?`<button class="sow-action-icon" onclick="window.contractFormHandler.showSOWSigningModal('`+x.id+`')" title="Sign SOW"></button>`:"")+(x.hasChangeRequest&&x.changeRequestId?`<button class="sow-action-icon has-badge" onclick="window.contractFormHandler.viewChangeRequest('`+x.changeRequestId+`')" title="View Change Request">`+(x.changeRequestData&&x.changeRequestData.hasUnreadMessages?'<span class="action-badge"></span>':"")+"</button>":"")+`<button class="sow-action-icon" onclick="window.contractFormHandler.showPaymentManager('`+x.id+`')" title="Manage Payments"></button><button class="sow-action-icon" onclick="window.contractFormHandler.editSOW(window.`+H+')" title="Edit SOW"></button><button class="sow-action-icon" onclick="window.contractFormHandler.generateSOWPDF(window.'+H+`)" title="Download PDF"></button><button class="sow-action-icon delete" onclick="window.contractFormHandler.deleteSOW('`+x.id+`')" title="Delete SOW"></button></div></div>`}),b+="</div>"),b+='<div id="sowCreatorContainer" style="display: none;"></div>',v.innerHTML=b,console.log(" SOW tab rendered with",u.length,"items"),G()}},M.prototype.viewSOWDetails=function(u){alert("SOW Details for: "+u.clientName+`

Package: `+u.packageType+`
Total: $`+(u.payment?u.payment.total.toFixed(0):"0")+`
Timeline: `+(u.estimatedWeeks||"TBD")+` weeks
Features: `+(u.features?u.features.length:0)+" selected")},M.prototype.generateSOWPDFFromData=function(u){var v=t("#sowClientName"),y=t("#sowClientEmail"),b=t("#sowPackage"),x=t("#sowWeeks"),k=t("#sowNotes"),S=t("#sowMaintenance");v&&(v.value=u.clientName||""),y&&(y.value=u.clientEmail||""),b&&(b.value=u.packageType||""),x&&(x.value=u.estimatedWeeks||""),k&&(k.value=u.notes||""),S&&(S.value=u.maintenancePlan||"none"),this.generateSOWPDF()},M.prototype.deleteSOW=function(u){if(confirm("Are you sure you want to delete this SOW? This action cannot be undone.")){var v=this;firebase.firestore().collection("sow_documents").doc(u).delete().then(function(){console.log("SOW deleted successfully"),alert(" SOW deleted successfully"),v.loadSOWDocuments()}).catch(function(y){console.error("Error deleting SOW:",y),alert("Error deleting SOW: "+y.message)})}},M.prototype.showPaymentManager=function(u){var v=this;firebase.firestore().collection("sow_documents").doc(u).get().then(function(y){if(!y.exists){alert("SOW not found");return}var b=y.data();b.id=y.id,v.renderPaymentManagerModal(b)}).catch(function(y){console.error("Error loading SOW:",y),alert("Error loading SOW: "+y.message)})},M.prototype.renderPaymentManagerModal=function(u){var v=this,y=document.getElementById("paymentManagerModal");y&&y.remove();var b=v.calculatePaymentStatus(u),x="";b.payments.forEach(function(P,R){var B=P.paid?"paid":"pending",V=P.paid?"checked":"";x+='<div class="admin-payment-row '+B+'" data-index="'+R+'"><div class="payment-row-checkbox"><input type="checkbox" id="payment_'+R+'" '+V+' class="payment-checkbox" data-index="'+R+'"><label for="payment_'+R+'"></label></div><div class="payment-row-info"><span class="payment-row-name">'+P.name+'</span><span class="payment-row-amount">$'+P.amount.toFixed(2)+'</span></div><div class="payment-row-meta">',P.dueDate&&(x+='<span class="payment-row-due">Due: '+P.dueDate+"</span>"),x+='<span class="payment-row-status '+B+'">'+(P.paid?" Paid"+(P.paidDate?" on "+P.paidDate:""):" Pending")+"</span></div></div>"});var k=b.totalCount>0?Math.round(b.paidCount/b.totalCount*100):0,S='<div id="paymentManagerModal" class="payment-manager-modal"><div class="payment-manager-overlay" onclick="window.contractFormHandler.closePaymentManager()"></div><div class="payment-manager-content"><div class="payment-manager-header"><h2> Payment Manager</h2><button class="payment-manager-close" onclick="window.contractFormHandler.closePaymentManager()">&times;</button></div><div class="payment-manager-client"><h3>'+(u.clientName||"Unknown Client")+"</h3><p>"+(u.packageType||"N/A")+"  Total: $"+(u.payment?u.payment.total.toFixed(2):"0")+'</p></div><div class="payment-manager-summary"><div class="summary-progress"><div class="summary-progress-bar"><div class="summary-progress-fill" style="width: '+k+'%;"></div></div><span class="summary-progress-text">'+b.paidCount+" of "+b.totalCount+' payments completed</span></div><div class="summary-amounts"><div class="summary-amount paid"><span class="amount-label">Paid</span><span class="amount-value">$'+b.paidAmount.toFixed(2)+'</span></div><div class="summary-amount owed"><span class="amount-label">Owed</span><span class="amount-value">$'+b.owedAmount.toFixed(2)+'</span></div></div></div><div class="payment-manager-list"><h4>Payment Schedule</h4><p class="payment-manager-hint">Check the box to mark a payment as received</p>'+x+`</div><div class="payment-manager-actions"><button class="btn btn-secondary" onclick="window.contractFormHandler.closePaymentManager()">Cancel</button><button class="btn btn-primary" onclick="window.contractFormHandler.savePaymentStatus('`+u.id+`')">Save Changes</button></div></div></div>`;document.body.insertAdjacentHTML("beforeend",S),v.currentPaymentSOW=u},M.prototype.closePaymentManager=function(){var u=document.getElementById("paymentManagerModal");u&&u.remove(),this.currentPaymentSOW=null},M.prototype.savePaymentStatus=function(u){var v=this,y=v.currentPaymentSOW;if(!y||!y.payment){alert("Error: SOW data not found");return}var b=y.payment,x=b.tracking||{},k=b.deferred&&b.deferred.enabled,S=document.querySelectorAll("#paymentManagerModal .payment-checkbox"),P=new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});if(k&&b.deferred.customSchedule&&b.deferred.customSchedule.length>0){var R=x.deferredPayments||[];S.forEach(function(V,H){var O=V.checked,W=R[H]||{};R[H]={paid:O,paidDate:O?W.paidDate||P:null}}),x.deferredPayments=R}else{var B=["deposit","milestone1","final"];S.forEach(function(V,H){var O=B[H];if(O){var W=V.checked,X=x[O+"PaidDate"];x[O+"Paid"]=W,x[O+"PaidDate"]=W?X||P:null}})}firebase.firestore().collection("sow_documents").doc(u).update({"payment.tracking":x,updatedAt:firebase.firestore.FieldValue.serverTimestamp()}).then(function(){console.log("Payment status updated successfully"),alert(" Payment status saved successfully"),v.closePaymentManager(),v.loadSOWDocuments()}).catch(function(V){console.error("Error saving payment status:",V),alert("Error saving payment status: "+V.message)})},M.prototype.showChangeRequestModal=function(u){this.currentChangeRequestSOW=u;var v=[{id:"package",label:"Package Tier",desc:"Change to a different package level"},{id:"features",label:"Features & Deliverables",desc:"Add, remove, or modify features"},{id:"timeline",label:"Timeline",desc:"Adjust project duration or milestones"},{id:"payment",label:"Payment Structure",desc:"Modify payment schedule or amounts"},{id:"maintenance",label:"Maintenance Plan",desc:"Change ongoing maintenance options"},{id:"other",label:"Other",desc:"Any other modifications not listed above"}],y=v.map(function(k){return'<label class="change-section-option"><input type="checkbox" name="changeSections" value="'+k.id+'" /><div class="section-option-content"><span class="section-option-label">'+k.label+'</span><span class="section-option-desc">'+k.desc+"</span></div></label>"}).join(""),b='<div id="changeRequestModal" class="modal-overlay" style="display: flex; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px); z-index: 10000; justify-content: center; align-items: center;"><div class="modal-content" style="max-width: 800px; padding: 2rem;"><div class="modal-header" style="position: relative; padding-bottom: 1rem; margin-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1);"><h2 style="margin: 0; font-size: 1.5rem; color: #fff;"> Request SOW Change</h2><button type="button" class="modal-close" onclick="window.contractFormHandler.closeChangeRequestModal()" style="position: absolute; top: 0; right: 0; background: rgba(255, 255, 255, 0.1); border: none; width: 36px; height: 36px; border-radius: 50%; color: #fff; font-size: 1.5rem; cursor: pointer; display: flex; align-items: center; justify-content: center; line-height: 1;"></button></div><div class="modal-body" style="color: #fff;"><div class="change-request-info" style="background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;"><p style="margin: 0; font-size: 0.9rem;"><strong> SOW:</strong> '+(u.packageType||"N/A")+' Package</p><p style="margin: 0.5rem 0 0; font-size: 0.9rem;"><strong> Current Total:</strong> $'+(u.payment?u.payment.total.toFixed(0):"0")+'</p></div><div class="form-group"><label class="form-label" style="display: block; margin-bottom: 0.75rem; font-weight: 600;">Which sections do you want to modify?</label><div class="change-sections-grid" style="display: grid; gap: 0.75rem;">'+y+'</div></div><div class="form-group" style="margin-top: 1.5rem;"><label class="form-label" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Describe the changes you need:</label><textarea id="changeRequestDescription" class="form-input" rows="5" placeholder="Please describe in detail what changes you would like to make. Be as specific as possible to help the developer understand your request." style="width: 100%; resize: vertical; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; padding: 0.75rem; color: #fff; font-size: 0.95rem;"></textarea></div><div class="form-group" style="margin-top: 1rem;"><label class="form-label" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Priority Level:</label><select id="changeRequestPriority" class="form-input" style="width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; padding: 0.75rem; color: #fff; font-size: 0.95rem;"><option value="normal" style="background: #1a1a1a; color: #fff;">Normal - Can wait for next review cycle</option><option value="high" style="background: #1a1a1a; color: #fff;">High - Needed before project continues</option><option value="urgent" style="background: #1a1a1a; color: #fff;">Urgent - Critical blocker</option></select></div></div><div class="modal-footer" style="display: flex; gap: 1rem; justify-content: flex-end; padding-top: 1.5rem; margin-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1);"><button type="button" class="btn btn-secondary" onclick="window.contractFormHandler.closeChangeRequestModal()" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: #fff; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 600;">Cancel</button><button type="button" class="btn btn-primary" onclick="window.contractFormHandler.submitChangeRequest()" style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); border: none; color: #fff; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 600;">Submit Request</button></div></div></div>';if(!document.getElementById("changeRequestStyles")){var x=document.createElement("style");x.id="changeRequestStyles",x.textContent='.change-section-option { display: flex; align-items: flex-start; gap: 0.75rem; padding: 0.75rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; cursor: pointer; transition: all 0.2s; }.change-section-option:hover { background: rgba(255,255,255,0.08); border-color: rgba(99, 102, 241, 0.5); }.change-section-option input[type="checkbox"] { margin-top: 3px; }.change-section-option input[type="checkbox"]:checked + .section-option-content { color: #6366f1; }.section-option-content { display: flex; flex-direction: column; }.section-option-label { font-weight: 600; font-size: 0.95rem; }.section-option-desc { font-size: 0.8rem; opacity: 0.7; margin-top: 2px; }.change-request-badge { display: inline-flex; align-items: center; gap: 4px; padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; }.change-request-badge.pending { background: rgba(251, 191, 36, 0.2); color: #fbbf24; }.change-request-badge.approved { background: rgba(16, 185, 129, 0.2); color: #10b981; }.change-request-badge.rejected { background: rgba(239, 68, 68, 0.2); color: #ef4444; }.change-request-badge.change-order { background: rgba(99, 102, 241, 0.2); color: #6366f1; }.change-request-badge.completed { background: rgba(16, 185, 129, 0.2); color: #10b981; }.change-request-card { background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.3); border-radius: 8px; padding: 1rem; margin-top: 1rem; }.change-request-card.approved { background: rgba(16, 185, 129, 0.1); border-color: rgba(16, 185, 129, 0.3); }.change-request-card.rejected { background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.3); }.btn-change-request { cursor: pointer !important; pointer-events: auto !important; }.btn-change-request:hover { background: linear-gradient(135deg, rgba(251, 191, 36, 0.4) 0%, rgba(245, 158, 11, 0.4) 100%) !important; border-color: rgba(251, 191, 36, 0.6) !important; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(251, 191, 36, 0.2); }',document.head.appendChild(x)}document.body.insertAdjacentHTML("beforeend",b)},M.prototype.closeChangeRequestModal=function(){var u=document.getElementById("changeRequestModal");u&&u.remove(),this.currentChangeRequestSOW=null},M.prototype.showPricingComparisonModal=function(){var u=document.getElementById("pricingComparisonModal");u&&u.remove();var v=document.createElement("div");v.id="pricingComparisonModal",v.className="pricing-comparison-modal-overlay",v.innerHTML='<div class="pricing-comparison-modal"><div class="pricing-comparison-modal-header"><h3>2025 Web Development Pricing Guide</h3><button class="pricing-comparison-modal-close" id="closePricingModal">&times;</button></div><div class="pricing-comparison-modal-body"><iframe src="/pricing/index.html" title="Industry Pricing Comparison"></iframe></div></div>',document.body.appendChild(v),requestAnimationFrame(function(){v.classList.add("active")});var y=document.getElementById("closePricingModal");y&&y.addEventListener("click",function(){v.classList.remove("active"),setTimeout(function(){v.remove()},300)}),v.addEventListener("click",function(x){x.target===v&&(v.classList.remove("active"),setTimeout(function(){v.remove()},300))});var b=function(x){x.key==="Escape"&&(v.classList.remove("active"),setTimeout(function(){v.remove()},300),document.removeEventListener("keydown",b))};document.addEventListener("keydown",b)},M.prototype.submitChangeRequest=function(){var u=this,v=this.currentChangeRequestSOW;if(!v){alert("Error: No SOW data found");return}var y=[];if(document.querySelectorAll('input[name="changeSections"]:checked').forEach(function(P){y.push(P.value)}),y.length===0){alert("Please select at least one section to modify");return}var b=document.getElementById("changeRequestDescription").value.trim();if(!b){alert("Please describe the changes you need");return}var x=document.getElementById("changeRequestPriority").value,k={sowId:v.id,sowData:{clientName:v.clientName,clientEmail:v.clientEmail,clientPhone:v.clientPhone,packageType:v.packageType,payment:v.payment,estimatedWeeks:v.estimatedWeeks},sections:y,description:b,priority:x,status:"pending",clientEmail:v.clientEmail,clientPhone:v.clientPhone||"",clientName:v.clientName,createdAt:firebase.firestore.FieldValue.serverTimestamp(),updatedAt:firebase.firestore.FieldValue.serverTimestamp()},S=null;firebase.firestore().collection("change_requests").add(k).then(function(P){return console.log("Change request submitted:",P.id),S=P.id,firebase.firestore().collection("sow_documents").doc(v.id).update({hasChangeRequest:!0,changeRequestId:P.id,changeRequestStatus:"pending"})}).then(function(){var P=document.getElementById("changeRequestBtn-"+v.id);P&&(P.className="sow-action-btn",P.style.background="linear-gradient(135deg, #f59e0b, #d97706)",P.style.color="white",P.style.border="none",P.innerHTML=" View Request",P.onclick=function(){window.contractFormHandler.viewChangeRequest(S)});var R="sowData_"+v.id.replace(/[^a-zA-Z0-9]/g,"_");window[R]&&(window[R].hasChangeRequest=!0,window[R].changeRequestId=S,window[R].changeRequestStatus="pending"),u.closeChangeRequestModal(),alert(` Change request submitted successfully!

The developer will review your request and respond shortly.`)}).catch(function(P){console.error("Error submitting change request:",P),alert("Error submitting change request: "+P.message)})},M.prototype.viewChangeRequest=function(u){var v=this;firebase.firestore().collection("change_requests").doc(u).get().then(function(y){if(!y.exists){alert("Change request not found");return}var b=y.data();return b.id=y.id,firebase.firestore().collection("sow_documents").doc(b.sowId).get().then(function(x){x.exists&&(b.sowData=x.data(),b.sowData.id=x.id),v.showChangeRequestDetailModal(b)})}).catch(function(y){console.error("Error loading change request:",y),alert("Error loading change request: "+y.message)})},M.prototype.showChangeRequestDetailModal=function(u){var v=this;this.currentChangeRequest=u;var y={package:" Package Tier",features:" Features & Deliverables",timeline:" Timeline",payment:" Payment Structure",maintenance:" Maintenance Plan",other:" Other"},b={normal:{bg:"rgba(107, 114, 128, 0.2)",color:"#9ca3af",label:"Normal"},high:{bg:"rgba(251, 191, 36, 0.2)",color:"#fbbf24",label:"High Priority"},urgent:{bg:"rgba(239, 68, 68, 0.2)",color:"#ef4444",label:"Urgent"}},x={pending:{bg:"rgba(251, 191, 36, 0.2)",color:"#fbbf24",label:" Pending Review"},approved:{bg:"rgba(16, 185, 129, 0.2)",color:"#10b981",label:" Approved"},rejected:{bg:"rgba(239, 68, 68, 0.2)",color:"#ef4444",label:" Rejected"},change_order:{bg:"rgba(99, 102, 241, 0.2)",color:"#6366f1",label:" Change Order Created"},completed:{bg:"rgba(16, 185, 129, 0.2)",color:"#10b981",label:" Completed"}},k=u.sections.map(function(X){return'<span style="background: rgba(99, 102, 241, 0.15); color: #a5b4fc; padding: 4px 10px; border-radius: 4px; font-size: 0.85rem;">'+(y[X]||X)+"</span>"}).join(" "),S=b[u.priority]||b.normal,P=x[u.status]||x.pending,R=u.createdAt?new Date(u.createdAt.toDate()).toLocaleString():"N/A",B=v.renderConversationThread(u.messages||[]),V="";v.isDeveloper&&u.status==="pending"?V=`<div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;"><button class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.85rem;" onclick="window.contractFormHandler.approveChangeRequest('`+u.id+`')"> Approve</button><button class="btn" style="padding: 0.5rem 1rem; font-size: 0.85rem; background: rgba(239, 68, 68, 0.2); color: #ef4444;" onclick="window.contractFormHandler.rejectChangeRequest('`+u.id+`')"> Reject</button><button class="btn" style="padding: 0.5rem 1rem; font-size: 0.85rem; background: rgba(99, 102, 241, 0.2); color: #6366f1;" onclick="window.contractFormHandler.createChangeOrderFromRequest('`+u.id+`')"> Change Order</button></div>`:v.isDeveloper&&(u.status==="approved"||u.status==="change_order")&&(V=`<div style="display: flex; gap: 0.5rem; justify-content: center;"><button class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.85rem;" onclick="window.contractFormHandler.editSOWFromChangeRequest('`+u.sowId+`')"> Edit SOW</button></div>`);var H=`<div id="changeRequestDetailModal" class="modal-overlay-fixed"><div class="modal-content" style="max-width: 700px;"><div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1);"><h2 style="margin: 0; font-size: 1.25rem; display: flex; align-items: center; gap: 0.5rem;"><img src="/images/morph-logo14.png" alt="Logo" style="height: 2rem; width: auto;"> Change Request Details</h2><button style="background: rgba(255,255,255,0.1); border: none; color: #fff; width: 36px; height: 36px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'" onclick="window.contractFormHandler.closeChangeRequestDetailModal()">&times;</button></div><div class="modal-body" style="max-height: 70vh; overflow-y: auto; padding: .8rem;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;"><div><h3 style="margin: 0;">`+u.clientName+'</h3><p style="margin: 0.25rem 0 0; opacity: 0.7; font-size: 0.9rem;">'+u.clientEmail+'</p></div><span style="background: '+P.bg+"; color: "+P.color+'; padding: 6px 12px; border-radius: 20px; font-weight: 600; font-size: 0.85rem;">'+P.label+'</span></div><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;"><div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 8px;"><p style="margin: 0; font-size: 0.8rem; opacity: 0.7;">PACKAGE</p><p style="margin: 0.25rem 0 0; font-weight: 600;">'+(u.sowData.packageType||"N/A")+'</p></div><div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 8px;"><p style="margin: 0; font-size: 0.8rem; opacity: 0.7;">CURRENT TOTAL</p><p style="margin: 0.25rem 0 0; font-weight: 600;">$'+(u.sowData.payment?u.sowData.payment.total.toFixed(0):"0")+'</p></div></div><div style="margin-bottom: 1.5rem;"><p style="margin: 0 0 0.5rem; font-weight: 600;">Sections to Modify:</p><div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">'+k+'</div></div><div style="margin-bottom: 1.5rem;"><p style="margin: 0 0 0.5rem; font-weight: 600;">Description:</p><div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 8px; white-space: pre-wrap;">'+u.description+'</div></div><div style="display: flex; gap: 2rem; margin-bottom: 1.5rem;"><div><p style="margin: 0; font-size: 0.8rem; opacity: 0.7;">PRIORITY</p><span style="background: '+S.bg+"; color: "+S.color+'; padding: 4px 10px; border-radius: 4px; font-size: 0.85rem;">'+S.label+'</span></div><div><p style="margin: 0; font-size: 0.8rem; opacity: 0.7;">SUBMITTED</p><p style="margin: 0.25rem 0 0;">'+R+'</p></div></div><div class="conversation-section"><h4> Conversation</h4><div id="conversationThread" class="conversation-thread">'+B+`</div><div class="conversation-input-wrapper"><textarea id="conversationInput" class="conversation-input" placeholder="Type your message..." rows="1"></textarea><button class="conversation-send-btn" onclick="window.contractFormHandler.sendChangeRequestMessage('`+u.id+`')">Send</button></div></div></div><div class="modal-footer" style="padding: 0rem; border-top: 0px solid rgba(255, 255, 255, 0);">`+V+"</div></div></div>";document.body.insertAdjacentHTML("beforeend",H);var O=document.getElementById("conversationThread");O&&(O.scrollTop=O.scrollHeight);var W=document.getElementById("conversationInput");W&&W.addEventListener("input",function(){this.style.height="auto",this.style.overflowY="hidden",this.scrollHeight>150?(this.style.height="150px",this.style.overflowY="auto"):this.style.height=this.scrollHeight+"px"}),v.updateChangeRequestLastViewed(u.id),v.conversationUnsubscribe=firebase.firestore().collection("change_requests").doc(u.id).onSnapshot(function(X){if(X.exists){var J=X.data(),Y=J.messages||[],K=document.getElementById("conversationThread");K&&(K.innerHTML=v.renderConversationThread(Y),K.scrollTop=K.scrollHeight),v.currentChangeRequest.messages=Y}},function(X){console.error("Error listening to conversation:",X)})},M.prototype.closeChangeRequestDetailModal=function(){this.conversationUnsubscribe&&(this.conversationUnsubscribe(),this.conversationUnsubscribe=null),this.currentChangeRequest=null;var u=document.getElementById("changeRequestDetailModal");u&&u.remove()},M.prototype.renderConversationThread=function(u){var v=this;return!u||u.length===0?'<div class="conversation-empty">No messages yet. Start the conversation!</div>':u.map(function(y){var b="";y.timestamp&&(y.timestamp.toDate?b=new Date(y.timestamp.toDate()).toLocaleString():b=new Date(y.timestamp).toLocaleString());var x=v.isDeveloper&&y.sender==="developer"||!v.isDeveloper&&y.sender==="client",k=x?"self":"other";return'<div class="conversation-message '+k+'"><div class="message-sender">'+(y.senderName||y.sender)+'</div><div class="message-text">'+y.text+'</div><div class="message-time">'+b+"</div></div>"}).join("")},M.prototype.sendChangeRequestMessage=function(u){var v=this,y=document.getElementById("conversationInput"),b=y.value.trim();if(b){var x=v.isDeveloper?"developer":"client",k=v.isDeveloper?"Carlos (Developer)":v.currentChangeRequest.clientName||"Client",S={sender:x,senderName:k,text:b,timestamp:new Date().toISOString()},P=document.querySelector(".conversation-send-btn");P&&(P.disabled=!0,P.textContent="Sending..."),firebase.firestore().collection("change_requests").doc(u).update({messages:firebase.firestore.FieldValue.arrayUnion(S),lastMessageAt:firebase.firestore.FieldValue.serverTimestamp(),lastMessageBy:x}).then(function(){y.value="";var R=document.getElementById("conversationThread");if(R){var B=R.querySelector(".conversation-empty");B&&B.remove();var V='<div class="conversation-message self"><div class="message-sender">'+k+'</div><div class="message-text">'+b+'</div><div class="message-time">Just now</div></div>';R.insertAdjacentHTML("beforeend",V),R.scrollTop=R.scrollHeight}P&&(P.disabled=!1,P.textContent="Send")}).catch(function(R){console.error("Error sending message:",R),alert("Failed to send message. Please try again."),P&&(P.disabled=!1,P.textContent="Send")})}},M.prototype.updateChangeRequestLastViewed=function(u){var v=this,y=v.isDeveloper?"developerLastViewed":"clientLastViewed";firebase.firestore().collection("change_requests").doc(u).update({[y]:firebase.firestore.FieldValue.serverTimestamp()}).catch(function(b){console.error("Error updating last viewed:",b)})},M.prototype.approveChangeRequest=function(u){var v=this;if(confirm("Are you sure you want to approve this change request?")){var y={sender:"developer",senderName:"Carlos (Developer)",text:" Change request has been APPROVED. I will now proceed with the requested changes.",timestamp:new Date().toISOString()};firebase.firestore().collection("change_requests").doc(u).update({status:"approved",updatedAt:firebase.firestore.FieldValue.serverTimestamp(),messages:firebase.firestore.FieldValue.arrayUnion(y),lastMessageAt:firebase.firestore.FieldValue.serverTimestamp(),lastMessageBy:"developer"}).then(function(){return firebase.firestore().collection("change_requests").doc(u).get()}).then(function(b){var x=b.data();return firebase.firestore().collection("sow_documents").doc(x.sowId).update({changeRequestStatus:"approved"})}).then(function(){v.closeChangeRequestDetailModal(),alert("Change request approved! You can now edit the SOW with the requested changes."),v.loadSOWDocuments()}).catch(function(b){console.error("Error approving change request:",b),alert("Error: "+b.message)})}},M.prototype.rejectChangeRequest=function(u){var v=this;if(confirm("Are you sure you want to reject this change request? Consider sending a message to explain why before rejecting.")){var y={sender:"developer",senderName:"Carlos (Developer)",text:" Change request has been REJECTED. Please see my previous messages for details.",timestamp:new Date().toISOString()};firebase.firestore().collection("change_requests").doc(u).update({status:"rejected",updatedAt:firebase.firestore.FieldValue.serverTimestamp(),messages:firebase.firestore.FieldValue.arrayUnion(y),lastMessageAt:firebase.firestore.FieldValue.serverTimestamp(),lastMessageBy:"developer"}).then(function(){return firebase.firestore().collection("change_requests").doc(u).get()}).then(function(b){var x=b.data();return firebase.firestore().collection("sow_documents").doc(x.sowId).update({changeRequestStatus:"rejected",hasChangeRequest:!1})}).then(function(){v.closeChangeRequestDetailModal(),alert("Change request rejected. The client has been notified."),v.loadSOWDocuments()}).catch(function(b){console.error("Error rejecting change request:",b),alert("Error: "+b.message)})}},M.prototype.createChangeOrderFromRequest=function(u){var v=this;firebase.firestore().collection("change_requests").doc(u).get().then(function(y){if(!y.exists){alert("Change request not found");return}var b=y.data();b.id=y.id;var x=document.getElementById("changeRequestDetailModal");return x&&x.remove(),firebase.firestore().collection("change_requests").doc(u).update({status:"change_order",updatedAt:firebase.firestore.FieldValue.serverTimestamp()}).then(function(){return firebase.firestore().collection("sow_documents").doc(b.sowId).update({changeRequestStatus:"change_order",hasChangeOrder:!0})}).then(function(){return firebase.firestore().collection("sow_documents").doc(b.sowId).get()}).then(function(k){if(k.exists){var S=k.data();S.id=k.id,S.editingFromChangeRequest={id:u,description:b.description,sections:b.sections,clientName:b.clientName},v.editSOW(S)}else alert("SOW not found")})}).catch(function(y){console.error("Error creating change order:",y),alert("Error: "+y.message)})},M.prototype.showChangeOrderModal=function(u){var v={package:"Package Tier",features:"Features & Deliverables",timeline:"Timeline",payment:"Payment Structure",maintenance:"Maintenance Plan",other:"Other"},y=u.sections.map(function(x){return v[x]||x}).join(", "),b=`<div id="changeOrderModal" class="modal-overlay-fixed"><div class="modal-content" style="max-width: 600px;"><div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1);"><h2 style="margin: 0; font-size: 1.25rem;"> Create Change Order</h2><button style="background: rgba(255,255,255,0.1); border: none; color: #fff; width: 36px; height: 36px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'" onclick="document.getElementById('changeOrderModal').remove()">&times;</button></div><div class="modal-body" style="padding: 1.5rem;"><div style="background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;"><p style="margin: 0; font-size: 0.9rem;"><strong>Client:</strong> `+u.clientName+'</p><p style="margin: 0.5rem 0 0; font-size: 0.9rem;"><strong>Sections:</strong> '+y+'</p><p style="margin: 0.5rem 0 0; font-size: 0.9rem;"><strong>Request:</strong> '+u.description.substring(0,100)+(u.description.length>100?"...":"")+'</p></div><div class="form-group"><label class="form-label">Change Order Description:</label><textarea id="changeOrderDescription" class="form-input" rows="4" placeholder="Describe the approved changes in detail..." style="width: 100%; resize: vertical;">'+u.description+`</textarea></div><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;"><div class="form-group"><label class="form-label">Price Adjustment ($):</label><input type="number" id="changeOrderPrice" class="form-input" value="0" step="50" style="width: 100%;" /><p style="font-size: 0.8rem; opacity: 0.7; margin-top: 0.25rem;">Use negative for discounts</p></div><div class="form-group"><label class="form-label">Timeline Adjustment (weeks):</label><input type="number" id="changeOrderTimeline" class="form-input" value="0" step="1" style="width: 100%;" /><p style="font-size: 0.8rem; opacity: 0.7; margin-top: 0.25rem;">Use negative to reduce</p></div></div><div class="form-group" style="margin-top: 1rem;"><label class="form-label">Notes for Client:</label><textarea id="changeOrderNotes" class="form-input" rows="2" placeholder="Any additional notes..." style="width: 100%; resize: vertical;"></textarea></div></div><div class="modal-footer" style="display: flex; gap: 1rem; justify-content: flex-end; padding: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1);"><button class="btn btn-secondary" onclick="document.getElementById('changeOrderModal').remove()">Cancel</button><button class="btn btn-primary" onclick="window.contractFormHandler.saveChangeOrder('`+u.id+"', '"+u.sowId+`')">Create Change Order</button></div></div></div>`;document.body.insertAdjacentHTML("beforeend",b)},M.prototype.saveChangeOrder=function(u,v){var y=this,b=document.getElementById("changeOrderDescription").value.trim(),x=parseFloat(document.getElementById("changeOrderPrice").value)||0,k=parseInt(document.getElementById("changeOrderTimeline").value)||0,S=document.getElementById("changeOrderNotes").value.trim();if(!b){alert("Please provide a description for the change order");return}firebase.firestore().collection("sow_documents").doc(v).get().then(function(P){if(!P.exists)throw new Error("SOW not found");var R=P.data(),B=R.payment?R.payment.total:0,V=R.estimatedWeeks||0,H={sowId:v,changeRequestId:u,clientName:R.clientName,clientEmail:R.clientEmail,description:b,priceAdjustment:x,timelineAdjustment:k,notes:S,previousTotal:B,newTotal:B+x,previousTimeline:V,newTimeline:V+k,status:"pending_approval",createdAt:firebase.firestore.FieldValue.serverTimestamp(),createdBy:firebase.auth().currentUser.email};return firebase.firestore().collection("change_orders").add(H)}).then(function(P){return firebase.firestore().collection("change_requests").doc(u).update({status:"change_order",changeOrderId:P.id,updatedAt:firebase.firestore.FieldValue.serverTimestamp()})}).then(function(){return firebase.firestore().collection("sow_documents").doc(v).update({changeRequestStatus:"change_order",hasChangeOrder:!0})}).then(function(){document.getElementById("changeOrderModal").remove(),alert(` Change Order created successfully!

The client will be notified to review and approve the changes.`),y.loadSOWDocuments()}).catch(function(P){console.error("Error creating change order:",P),alert("Error: "+P.message)})},M.prototype.editSOWFromChangeRequest=function(u){var v=this,y=document.getElementById("changeRequestDetailModal");y&&y.remove(),firebase.firestore().collection("sow_documents").doc(u).get().then(function(b){if(b.exists){var x=b.data();x.id=b.id,v.editSOW(x)}}).catch(function(b){console.error("Error loading SOW:",b),alert("Error loading SOW: "+b.message)})},M.prototype.showSOWCreator=function(){var u=t("#sowCreatorContainer");if(u){var v='<div class="sow-creator-form"><div class="sow-form-header"><h4 style="display: flex; align-items: center; gap: 0.5rem;"><img src="/images/morph-logo14.png" alt="Logo" style="height: 2rem; width: auto;"> Create Statement of Work</h4><button class="btn-close-sow"></button></div><div class="sow-form-section client-info-section"><h5><span class="section-icon"></span> Client Information</h5><div class="sow-user-search-container"><label class="sow-search-label">Quick Select: Existing User (without SOW)</label><div class="sow-search-wrapper"><input type="text" id="sowUserSearch" placeholder="Search by name, email, or phone..." class="sow-input sow-search-input" autocomplete="off" /><div class="sow-search-icon"></div><div id="sowUserDropdown" class="sow-user-dropdown" style="display: none;"></div></div><div class="sow-search-actions"><p class="sow-search-hint">Or enter client details manually below</p><button type="button" id="btnAddUser" class="btn-add-user">+ Add User</button></div><div id="addUserForm" class="add-user-form" style="display: none;"><div class="add-user-form-inner"><input type="text" id="addUserName" placeholder="Display Name (optional)" class="sow-input" /><div class="add-user-auth-section"><div class="add-user-auth-row"><input type="email" id="addUserEmail" placeholder="Email" class="sow-input" oninput="window.toggleAuthFields()" /><input type="password" id="addUserPassword" placeholder="Password (min 6 chars)" class="sow-input" style="display: none;" /></div><div class="add-user-auth-divider"><span>OR</span></div><div class="add-user-auth-row"><div class="phone-input-wrapper sow-phone-wrapper"><select id="addUserPhoneCountryCode" class="country-code-select sow-country-code"><option value="+1" selected>US +1</option><option value="+1">CA +1</option><option value="+44">UK +44</option><option value="+91">IN +91</option><option value="+61">AU +61</option><option value="+81">JP +81</option><option value="+49">DE +49</option><option value="+33">FR +33</option><option value="+86">CN +86</option><option value="+52">MX +52</option><option value="+55">BR +55</option></select><input type="tel" id="addUserPhone" placeholder="Phone Number" class="sow-input" oninput="window.toggleAuthFields()" /></div><input type="text" id="addUserCode" placeholder="Verification Code (4-6 digits)" class="sow-input" style="display: none;" maxlength="6" /></div></div><div class="add-user-buttons"><button type="button" id="btnSaveUser" class="btn-save-user">Save User</button><button type="button" id="btnCancelAddUser" class="btn-cancel-add-user">Cancel</button></div></div></div></div><div class="toggles-row"><div class="client-id-toggle"><span class="toggle-label" id="emailToggleLabel">Email</span><label class="toggle-switch"><input type="checkbox" id="clientIdTypeToggle" /><span class="toggle-slider"></span></label><span class="toggle-label" id="phoneToggleLabel">Phone</span></div><div class="entity-type-toggle"><span class="toggle-label active" id="sowIndividualLabel">Individual</span><label class="toggle-switch"><input type="checkbox" id="sowEntityTypeToggle" /><span class="toggle-slider"></span></label><span class="toggle-label" id="sowBusinessLabel">Business Entity</span></div></div><div id="sowIndividualFields"><div class="sow-input-group client-inputs-row"><input type="text" id="sowClientName" placeholder="Client Name *" class="sow-input" required /><div id="sowClientEmailWrapper" class="sow-input-wrapper-single"><input type="email" id="sowClientEmail" placeholder="Client Email *" class="sow-input" /></div><div id="sowClientPhoneWrapper" class="phone-input-wrapper sow-phone-wrapper" style="display: none;"><select id="sowClientPhoneCountryCode" class="country-code-select sow-country-code"><option value="+1" selected>US +1</option><option value="+1">CA +1</option><option value="+44">UK +44</option><option value="+91">IN +91</option><option value="+61">AU +61</option><option value="+81">JP +81</option><option value="+49">DE +49</option><option value="+33">FR +33</option><option value="+86">CN +86</option><option value="+52">MX +52</option><option value="+55">BR +55</option></select><input type="tel" id="sowClientPhone" placeholder="Client Phone *" class="sow-input" /></div></div></div><div id="sowBusinessFields" style="display: none;"><div class="sow-input-group"><input type="text" id="sowBusinessName" placeholder="Business Legal Name *" class="sow-input" /><select id="sowEntityType" class="sow-select" style="flex: 1;"><option value="">Entity Type *</option><option value="LLC">LLC</option><option value="Corporation">Corporation</option><option value="Partnership">Partnership</option><option value="Sole Proprietorship">Sole Proprietorship</option></select></div><div class="sow-input-group"><input type="text" id="sowStateOfFormation" placeholder="State of Formation (optional)" class="sow-input" /><div id="sowBusinessEmailWrapper" class="sow-input-wrapper-single"><input type="email" id="sowBusinessEmail" placeholder="Business Email *" class="sow-input" /></div><div id="sowBusinessPhoneWrapper" class="phone-input-wrapper sow-phone-wrapper" style="display: none;"><select id="sowBusinessPhoneCountryCode" class="country-code-select sow-country-code"><option value="+1" selected>US +1</option><option value="+1">CA +1</option><option value="+44">UK +44</option><option value="+91">IN +91</option><option value="+61">AU +61</option><option value="+81">JP +81</option><option value="+49">DE +49</option><option value="+33">FR +33</option><option value="+86">CN +86</option><option value="+52">MX +52</option><option value="+55">BR +55</option></select><input type="tel" id="sowBusinessPhone" placeholder="Business Phone *" class="sow-input" /></div></div><div class="sow-input-group"><input type="text" id="sowRepName" placeholder="Representative Name *" class="sow-input" /><input type="text" id="sowRepTitle" placeholder="Title (e.g., CEO, Managing Member) *" class="sow-input" /></div></div></div><div class="sow-form-section"><h5><span class="section-icon"></span> Package Tier</h5><select id="sowPackage" class="sow-select" onchange="setTimeout(syncDeferredWithTotal, 50)"><option value="">Select a package tier...</option><option value="essential">Essential  Landing Page ($1,000 - $3,000)</option><option value="starter">Tier 1  Starter ($3,000 - $6,000)</option><option value="growth">Tier 2  Growth ($6,000 - $12,000)</option><option value="professional">Tier 3  Professional ($12,000 - $25,000)</option><option value="enterprise">Tier 4  Enterprise ($25,000 - $50,000)</option><option value="custom">Custom Quote (Manual Entry)</option></select><div id="customPricingSection" style="display: none; margin-top: 15px;"><input type="number" id="sowCustomPrice" placeholder="Enter custom total price" class="sow-input" step="0.01" min="0" oninput="setTimeout(syncDeferredWithTotal, 50)" /></div></div><div class="sow-form-section"><h5><span class="section-icon"></span> Project Timeline</h5><label class="sow-checkbox retroactive-toggle" style="margin-bottom: 10px; padding: 8px 12px; background: rgba(245, 158, 11, 0.1); border-radius: 6px; border: 1px solid rgba(245, 158, 11, 0.3);"><input type="checkbox" id="sowRetroactive" onchange="toggleRetroactiveFields()" /><span style="color: #f59e0b; font-weight: 500;">Retroactive Project</span><span style="font-size: 0.8em; color: #888; margin-left: 8px;">(project already in development)</span></label><div class="sow-input-group"><input type="number" id="sowWeeks" placeholder="Estimated Weeks *" class="sow-input" min="1" max="52" required /><input type="date" id="sowStartDate" class="sow-input" title="Target completion date" /></div><div id="retroactiveDurationFields" style="display: none; margin-top: 10px; padding: 10px; background: rgba(245, 158, 11, 0.05); border-radius: 6px; border: 1px dashed rgba(245, 158, 11, 0.3);"><label style="font-size: 0.85em; color: #f59e0b; margin-bottom: 5px; display: block;">Development Duration</label><div class="sow-input-group"><input type="number" id="sowDevDuration" placeholder="Duration *" class="sow-input" min="1" max="52" style="flex: 1;" /><select id="sowDevDurationUnit" class="sow-input" style="flex: 1;"><option value="weeks">Weeks</option><option value="months">Months</option></select></div><label style="font-size: 0.85em; color: #f59e0b; margin-bottom: 5px; margin-top: 10px; display: block;">Estimated Final Revision</label><input type="date" id="sowRetroactiveEndDate" class="sow-input" title="Estimated final revision date" /></div></div><div class="sow-form-section"><h5><span class="section-icon"></span> Features & Deliverables</h5><div class="sow-checkboxes"><div class="feature-group"><p class="feature-group-title">Standard Features</p><label class="sow-checkbox"><input type="checkbox" value="responsive_design" /> Cross-Device Optimization (Mobile, Tablet, Desktop)</label><label class="sow-checkbox"><input type="checkbox" value="custom_ui" /> Brand-Matched Design System</label><label class="sow-checkbox"><input type="checkbox" value="animations" /> Scroll & Micro-Interactions</label><label class="sow-checkbox"><input type="checkbox" value="seo_optimization" /> Technical SEO Setup (Meta, Sitemap, Schema)</label><label class="sow-checkbox"><input type="checkbox" value="analytics" /> GA4 + Custom Event Tracking</label><label class="sow-checkbox"><input type="checkbox" value="contact_forms" /> Multi-Step Contact Forms</label></div><div class="feature-group"><p class="feature-group-title">Premium Add-ons</p><label class="sow-checkbox"><input type="checkbox" value="firebase_auth" /> User Authentication System <span class="third-party-note">+ Firebase costs</span></label><label class="sow-checkbox"><input type="checkbox" value="firebase_db" /> Database & Data Management <span class="third-party-note">+ Firebase costs</span></label><label class="sow-checkbox"><input type="checkbox" value="user_profiles" /> Client Portal / User Dashboard</label><label class="sow-checkbox"><input type="checkbox" value="file_storage" /> Media Upload System <span class="third-party-note">+ Firebase costs</span></label><label class="sow-checkbox"><input type="checkbox" value="api_integration" /> Third-Party Integrations (CRM, Zapier, etc.)</label><label class="sow-checkbox"><input type="checkbox" value="email_integration" /> Email Notifications (SendGrid) <span class="third-party-note">+ SendGrid costs</span></label><label class="sow-checkbox"><input type="checkbox" value="music_media" /> Audio/Video Player Integration</label><label class="sow-checkbox"><input type="checkbox" value="booking_basic" /> Scheduling & Booking System</label><label class="sow-checkbox"><input type="checkbox" value="newsletter" /> Newsletter Integration</label><label class="sow-checkbox"><input type="checkbox" value="social_feed" /> Social Media Feed Integration</label></div><div class="feature-group"><p class="feature-group-title">Enterprise Features</p><label class="sow-checkbox"><input type="checkbox" value="user_roles" /> Role-Based Access Control</label><label class="sow-checkbox"><input type="checkbox" value="cms_integration" /> Content Management System</label><label class="sow-checkbox"><input type="checkbox" value="booking_system" /> Advanced Booking + Availability</label><label class="sow-checkbox"><input type="checkbox" value="blog" /> Blog/News Module</label><label class="sow-checkbox"><input type="checkbox" value="gallery" /> Media Gallery System</label><label class="sow-checkbox"><input type="checkbox" value="notifications" /> In-App Notifications</label></div><div class="feature-group"><p class="feature-group-title">E-Commerce Options</p><div class="ecommerce-radio-group"><label class="sow-radio"><input type="radio" name="ecommerce_option" value="none" checked /> No E-Commerce</label><label class="sow-radio"><input type="radio" name="ecommerce_option" value="basic_cart" /> Basic E-Commerce Setup (+$3,000 - $8,000) <span class="third-party-note">+ Stripe fees</span></label><label class="sow-radio"><input type="radio" name="ecommerce_option" value="full_store" /> Full E-Commerce Store (+$8,000 - $20,000) <span class="third-party-note">+ Stripe fees</span></label></div></div></div></div><div class="sow-form-section"><h5><span class="section-icon"></span> Additional Requirements</h5><textarea id="sowNotes" placeholder="Any special requirements, integrations, or custom features..." class="sow-textarea" rows="4"></textarea></div><div class="sow-form-section"><h5><span class="section-icon"></span> Ongoing Maintenance Plan</h5><select id="sowMaintenance" class="sow-select" required><option value="">Select a maintenance plan...</option><option value="none">No Maintenance  $0/month</option><option value="basic" selected>Basic Care  $167/month (2-3 hrs/mo)</option><option value="professional">Professional Care  $335/month (4-6 hrs/mo)</option><option value="premium">Premium Care  $670/month (8-12 hrs/mo)</option></select></div><div class="sow-form-section" id="deferredPaymentSection"><h5><span class="section-icon"></span> Deferred Payment Option</h5><label class="sow-checkbox deferred-toggle" style="margin-bottom: 10px; padding: 8px 12px; background: rgba(99, 102, 241, 0.1); border-radius: 6px; border: 1px solid rgba(99, 102, 241, 0.3);"><input type="checkbox" id="sowDeferredPayment" onchange="toggleDeferredPaymentFields()" /><span style="color: #6366f1; font-weight: 500;">Enable Deferred Payment</span><span style="font-size: 0.8em; color: #888; margin-left: 8px;">(client pays later with terms)</span></label><div id="deferredPaymentFields" style="display: none; margin-top: 10px; padding: 15px; background: rgba(99, 102, 241, 0.05); border-radius: 8px; border: 1px dashed rgba(99, 102, 241, 0.3);"><div class="deferred-split-type"><label style="font-size: 0.9em; color: #94a3b8; margin-bottom: 8px; display: block;">Payment Type</label><div class="deferred-radio-group" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;"><label class="sow-radio deferred-type-card" style="display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 12px 8px; background: rgba(255, 255, 255, 0.03); border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s;"><input type="radio" name="deferred_split" value="lump_sum" checked onchange="toggleDeferredSplitType()" style="display: none;" /><span style="font-size: 1.5em;"></span><span style="font-weight: 500; font-size: 0.85em;">Lump Sum</span><span style="font-size: 0.7em; color: #94a3b8; text-align: center;">Single payment on one date</span></label><label class="sow-radio deferred-type-card" style="display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 12px 8px; background: rgba(255, 255, 255, 0.03); border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s;"><input type="radio" name="deferred_split" value="recurring" onchange="toggleDeferredSplitType()" style="display: none;" /><span style="font-size: 1.5em;"></span><span style="font-weight: 500; font-size: 0.85em;">Payment Plan</span><span style="font-size: 0.7em; color: #94a3b8; text-align: center;">Recurring schedule</span></label><label class="sow-radio deferred-type-card" style="display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 12px 8px; background: rgba(255, 255, 255, 0.03); border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s;"><input type="radio" name="deferred_split" value="custom" onchange="toggleDeferredSplitType()" style="display: none;" /><span style="font-size: 1.5em;"></span><span style="font-weight: 500; font-size: 0.85em;">Custom</span><span style="font-size: 0.7em; color: #94a3b8; text-align: center;">Manual dates & amounts</span></label></div></div><div id="lumpSumFields" style="margin-top: 15px;"><div class="sow-input-group" style="display: flex; gap: 10px;"><div style="flex: 1;"><label style="font-size: 0.85em; color: #6366f1; margin-bottom: 5px; display: block;">Amount to Defer</label><input type="number" id="sowDeferredAmount" placeholder="Amount $" class="sow-input" min="0" step="0.01" onchange="calculateLateFee()" oninput="calculateLateFee()" /></div><div style="flex: 1;"><label style="font-size: 0.85em; color: #6366f1; margin-bottom: 5px; display: block;">Due Date</label><input type="date" id="sowDeferredDueDate" class="sow-input" /></div></div></div><div id="recurringFields" style="display: none; margin-top: 15px;"><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;"><div><label style="font-size: 0.85em; color: #6366f1; margin-bottom: 5px; display: block;">Total Amount to Defer</label><input type="number" id="sowRecurringTotalAmount" placeholder="Total $" class="sow-input" min="0" step="0.01" onchange="updateRecurringSchedule()" oninput="updateRecurringSchedule()" /></div><div><label style="font-size: 0.85em; color: #6366f1; margin-bottom: 5px; display: block;">First Payment Date</label><input type="date" id="sowRecurringStartDate" class="sow-input" onchange="updateRecurringSchedule()" /></div></div><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;"><div><label style="font-size: 0.85em; color: #6366f1; margin-bottom: 5px; display: block;">Payment Frequency</label><select id="sowRecurringFrequency" class="sow-select" onchange="updateRecurringSchedule()" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #fff;"><option value="weekly">Weekly</option><option value="biweekly" selected>Bi-Weekly (Every 2 Weeks)</option><option value="semimonthly">Semi-Monthly (1st & 15th)</option><option value="monthly">Monthly</option><option value="bimonthly">Bi-Monthly (Every 2 Months)</option></select></div><div><label style="font-size: 0.85em; color: #6366f1; margin-bottom: 5px; display: block;">Calculate By</label><select id="sowRecurringCalcMode" class="sow-select" onchange="toggleRecurringCalcMode(); updateRecurringSchedule();" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #fff;"><option value="amount">Fixed Payment Amount</option><option value="count">Number of Payments</option></select></div></div><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 15px;"><div id="recurringAmountField"><label style="font-size: 0.85em; color: #6366f1; margin-bottom: 5px; display: block;">Amount Per Payment</label><input type="number" id="sowRecurringPaymentAmount" placeholder="e.g. 300" class="sow-input" min="1" step="0.01" onchange="updateRecurringSchedule()" oninput="updateRecurringSchedule()" /></div><div id="recurringCountField" style="display: none;"><label style="font-size: 0.85em; color: #6366f1; margin-bottom: 5px; display: block;">Number of Payments</label><input type="number" id="sowRecurringPaymentCount" placeholder="e.g. 6" class="sow-input" min="2" max="52" onchange="updateRecurringSchedule()" oninput="updateRecurringSchedule()" /></div><div id="recurringCalcResult" style="display: flex; align-items: flex-end;"><div style="padding: 10px 14px; background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 6px; width: 100%;"><span style="font-size: 0.75em; color: #10b981; display: block;">Calculated</span><span id="recurringCalcDisplay" style="font-size: 1.1em; font-weight: 600; color: #10b981;">--</span></div></div></div><div id="recurringSchedulePreview" style="display: none; background: rgba(99, 102, 241, 0.05); border: 1px solid rgba(99, 102, 241, 0.2); border-radius: 8px; padding: 12px; max-height: 200px; overflow-y: auto;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;"><span style="font-size: 0.85em; font-weight: 500; color: #6366f1;">Payment Schedule Preview</span><span id="recurringScheduleSummary" style="font-size: 0.75em; color: #94a3b8;"></span></div><div id="recurringScheduleList" style="display: grid; gap: 6px;"></div></div></div><div id="customSplitFields" style="display: none; margin-top: 15px;"><label style="font-size: 0.85em; color: #6366f1; margin-bottom: 5px; display: block;">Custom Payment Schedule</label><div id="customPaymentsList" class="custom-payments-list"></div><button type="button" class="btn-add-payment" onclick="addCustomPaymentRow()" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 8px 16px; background: rgba(99, 102, 241, 0.15); border: 1px dashed rgba(99, 102, 241, 0.4); border-radius: 6px; color: #818cf8; cursor: pointer; font-size: 0.9em;"><span>+ Add Payment</span></button></div><div class="late-fee-section" style="margin-top: 15px; padding: 12px; background: rgba(245, 158, 11, 0.08); border-radius: 6px; border: 1px solid rgba(245, 158, 11, 0.2);"><div style="display: flex; justify-content: space-between; align-items: center;"><div><span style="color: #f59e0b; font-weight: 500;">Late Fee (10%):</span><span id="lateFeeDisplay" style="color: #fff; margin-left: 8px;">$0</span><span style="font-size: 0.75em; color: #94a3b8; margin-left: 6px;">(if payment is late)</span></div><label class="sow-checkbox" style="margin: 0; display: flex; align-items: center; gap: 6px;"><input type="checkbox" id="sowWaiveLateFee" onchange="calculateLateFee()" /><span style="font-size: 0.85em; color: #f59e0b;">Waive Late Fee</span></label></div><div style="margin-top: 8px;"><span style="color: #94a3b8; font-size: 0.85em;">Total Deferred Amount:</span><span id="totalDeferredDisplay" style="color: #10b981; font-weight: 600; margin-left: 8px;">$0</span></div></div><div class="deferred-options" style="margin-top: 15px;"><label class="sow-checkbox" style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;"><input type="checkbox" id="sowAllowPartialPayments" checked /><span>Allow partial payments toward balance during deferral</span></label><label class="sow-checkbox" style="display: flex; align-items: center; gap: 8px;"><input type="checkbox" id="sowMaintenanceDuringDeferral" checked /><span>Client pays monthly maintenance during deferral period</span></label></div></div></div><div class="sow-form-section coupon-section"><h5><span class="section-icon"></span> Discount Code</h5><div class="coupon-input-group"><select id="sowCouponSelect" class="sow-select coupon-select" onchange="setTimeout(syncDeferredWithTotal, 50)"><option value="">No discount applied</option></select><div id="couponValidationMessage" class="coupon-validation-message"></div></div></div><div class="sow-form-section pricing-summary"><h5><span class="section-icon"></span> Pricing Summary</h5><div class="pricing-itemized-container"><div id="pricingItemizedList" class="pricing-itemized-list"></div></div><div class="pricing-breakdown"><div class="pricing-divider"></div><div class="pricing-row total-row"><span><strong>Project Total:</strong></span><span id="sowTotalPrice" class="price-value total-value">$0.00</span></div><div class="pricing-row deposit-row"><span>Deposit (50%):</span><span id="sowDepositCalc" class="price-value">$0.00</span></div><div class="pricing-row"><span>Milestone Payment (25%):</span><span id="sowMilestone1Calc" class="price-value">$0.00</span></div><div class="pricing-row"><span>Final Payment (25%):</span><span id="sowFinalCalc" class="price-value">$0.00</span></div><div class="pricing-divider"></div><div class="pricing-row maintenance-row" id="maintenanceRow"><span>Monthly Maintenance:</span><span id="sowMaintenanceCalc" class="price-value">$167/month</span></div></div></div><div class="sow-form-actions"><button class="btn-cancel-sow btn-secondary">Cancel</button><button class="btn-save-sow btn-primary"><span class="btn-icon"></span> Save SOW</button><button class="btn-generate-sow-pdf btn-primary"><span class="btn-icon"></span> Generate PDF</button></div></div>';u.innerHTML=v,u.style.display="block";var y=this,b={essential:{min:1e3,max:3e3,default:2e3},starter:{min:3e3,max:6e3,default:4500},growth:{min:6e3,max:12e3,default:9e3},professional:{min:12e3,max:25e3,default:18500},enterprise:{min:25e3,max:5e4,default:37500}},x={none:0,basic:167,professional:335,premium:670},k={responsive_design:{default:200,thirdParty:!1},custom_ui:{default:450,thirdParty:!1},animations:{default:275,thirdParty:!1},seo_optimization:{default:200,thirdParty:!1},analytics:{default:175,thirdParty:!1},contact_forms:{default:250,thirdParty:!1},firebase_auth:{default:350,thirdParty:!0,note:"Firebase costs"},firebase_db:{default:425,thirdParty:!0,note:"Firebase costs"},user_profiles:{default:550,thirdParty:!1},file_storage:{default:300,thirdParty:!0,note:"Firebase costs"},api_integration:{default:450,thirdParty:!1},email_integration:{default:325,thirdParty:!0,note:"SendGrid costs"},newsletter:{default:200,thirdParty:!1,addon:!0},user_roles:{default:450,thirdParty:!1},notifications:{default:400,thirdParty:!1},booking_basic:{default:450,thirdParty:!1,addon:!0},booking_system:{default:1100,thirdParty:!1,addon:!0},blog:{default:400,thirdParty:!1,addon:!0},cms_integration:{default:600,thirdParty:!1,addon:!0},gallery:{default:325,thirdParty:!1,addon:!0},music_media:{default:275,thirdParty:!1,addon:!0},social_feed:{default:250,thirdParty:!1,addon:!0}},S={none:{price:0,label:"No E-Commerce"},basic_cart:{price:5500,label:"Basic E-Commerce Setup",thirdParty:!0,note:"Stripe fees"},full_store:{price:14e3,label:"Full E-Commerce Store",thirdParty:!0,note:"Stripe fees"}},P={essential:["responsive_design","contact_forms"],starter:["responsive_design","custom_ui","animations","seo_optimization","analytics","contact_forms"],growth:["responsive_design","custom_ui","animations","seo_optimization","analytics","firebase_auth","contact_forms"],professional:["responsive_design","custom_ui","animations","seo_optimization","analytics","firebase_auth","firebase_db","user_profiles","file_storage","api_integration","contact_forms","email_integration","newsletter"],enterprise:["responsive_design","custom_ui","animations","seo_optimization","analytics","firebase_auth","firebase_db","user_profiles","user_roles","file_storage","api_integration","contact_forms","email_integration","notifications","newsletter"],custom:[]},R=function(){y.updateSOWPricing(b,x,k,S,P)},B=t("#sowPackage"),V=t("#customPricingSection"),H=t("#sowCustomPrice");B&&B.addEventListener("change",function(){this.value==="custom"?(V.style.display="block",y.autoCheckPackageFeatures("custom",P)):(V.style.display="none",y.autoCheckPackageFeatures(this.value,P)),R()}),H&&H.addEventListener("input",function(){R()});var O=t("#sowMaintenance");O&&O.addEventListener("change",function(){R()});var W=document.querySelectorAll('.sow-checkboxes input[type="checkbox"]');W.forEach(function(oe){oe.addEventListener("change",function(){R()})});var X=document.querySelectorAll('input[name="ecommerce_option"]');X.forEach(function(oe){oe.addEventListener("change",function(){R()})}),window.toggleRetroactiveFields=function(){var oe=t("#sowRetroactive"),ue=t("#retroactiveDurationFields"),Ae=t("#sowWeeks"),Le=Ae?Ae.parentElement:null;oe&&oe.checked?(ue&&(ue.style.display="block"),Le&&(Le.style.display="none")):(ue&&(ue.style.display="none"),Le&&(Le.style.display="flex"));var Se=document.querySelector(".deposit-row"),Te=t("#sowMilestone1Calc"),ye=t("#sowFinalCalc");oe&&oe.checked?(Se&&(Se.style.display="none"),Te&&Te.parentElement&&(Te.parentElement.style.display="none"),ye&&ye.parentElement&&(ye.parentElement.style.display="none")):(Se&&(Se.style.display="flex"),Te&&Te.parentElement&&(Te.parentElement.style.display="flex"),ye&&ye.parentElement&&(ye.parentElement.style.display="flex"))},window.toggleDeferredPaymentFields=function(){var oe=t("#sowDeferredPayment"),ue=t("#deferredPaymentFields");if(oe&&oe.checked){ue&&(ue.style.display="block");var Ae=t("#sowTotalPrice");if(Ae){var Le=parseFloat(Ae.textContent.replace(/[^0-9.-]/g,""))||0,Se=t("#sowDeferredAmount"),Te=t("#sowRecurringTotalAmount");Se&&!Se.value&&(Se.value=Le),Te&&!Te.value&&(Te.value=Le)}var ye=document.querySelectorAll(".deferred-type-card");ye.forEach(function(nt){var He=nt.querySelector('input[type="radio"]');He&&He.checked?(nt.style.borderColor="#6366f1",nt.style.background="rgba(99, 102, 241, 0.15)"):(nt.style.borderColor="transparent",nt.style.background="rgba(255, 255, 255, 0.03)")}),calculateLateFee()}else ue&&(ue.style.display="none")},window.toggleDeferredSplitType=function(){var oe=document.querySelector('input[name="deferred_split"]:checked'),ue=t("#lumpSumFields"),Ae=t("#recurringFields"),Le=t("#customSplitFields"),Se=document.querySelectorAll(".deferred-type-card");if(Se.forEach(function(it){var Kt=it.querySelector('input[type="radio"]');Kt&&Kt.checked?(it.style.borderColor="#6366f1",it.style.background="rgba(99, 102, 241, 0.15)"):(it.style.borderColor="transparent",it.style.background="rgba(255, 255, 255, 0.03)")}),ue&&(ue.style.display="none"),Ae&&(Ae.style.display="none"),Le&&(Le.style.display="none"),oe){if(oe.value==="lump_sum")ue&&(ue.style.display="block");else if(oe.value==="recurring"){Ae&&(Ae.style.display="block");var Te=t("#sowTotalPrice"),ye=t("#sowRecurringTotalAmount");if(Te&&ye&&!ye.value){var nt=parseFloat(Te.textContent.replace(/[^0-9.-]/g,""))||0;ye.value=nt}updateRecurringSchedule()}else if(oe.value==="custom"){Le&&(Le.style.display="block");var He=t("#customPaymentsList");He&&He.children.length===0&&addCustomPaymentRow()}}calculateLateFee()},window.toggleRecurringCalcMode=function(){var oe=t("#sowRecurringCalcMode"),ue=t("#recurringAmountField"),Ae=t("#recurringCountField");oe&&oe.value==="count"?(ue&&(ue.style.display="none"),Ae&&(Ae.style.display="block")):(ue&&(ue.style.display="block"),Ae&&(Ae.style.display="none"))},window.generateRecurringSchedule=function(oe,ue,Ae,Le,Se){var Te=[];if(!oe||oe<=0||!ue)return Te;var ye=new Date(ue),nt=oe,He,it;if(Le==="amount"){if(He=parseFloat(Se)||0,He<=0)return Te;it=Math.ceil(oe/He)}else{if(it=parseInt(Se)||0,it<=0)return Te;He=Math.ceil(oe/it)}it>52&&(it=52);for(var Kt=0;Kt<it;Kt++){var wi=Math.min(He,nt);if(wi<=0)break;switch(Te.push({amount:wi,dueDate:ye.toISOString().split("T")[0]}),nt-=wi,Ae){case"weekly":ye.setDate(ye.getDate()+7);break;case"biweekly":ye.setDate(ye.getDate()+14);break;case"semimonthly":ye.getDate()<15?ye.setDate(15):(ye.setMonth(ye.getMonth()+1),ye.setDate(1));break;case"monthly":ye.setMonth(ye.getMonth()+1);break;case"bimonthly":ye.setMonth(ye.getMonth()+2);break;default:ye.setDate(ye.getDate()+14)}}return Te},window.updateRecurringSchedule=function(){var oe=parseFloat(t("#sowRecurringTotalAmount")?t("#sowRecurringTotalAmount").value:0)||0,ue=t("#sowRecurringStartDate")?t("#sowRecurringStartDate").value:null,Ae=t("#sowRecurringFrequency")?t("#sowRecurringFrequency").value:"biweekly",Le=t("#sowRecurringCalcMode")?t("#sowRecurringCalcMode").value:"amount",Se=Le==="amount"?t("#sowRecurringPaymentAmount")?t("#sowRecurringPaymentAmount").value:0:t("#sowRecurringPaymentCount")?t("#sowRecurringPaymentCount").value:0,Te=t("#recurringCalcDisplay"),ye=t("#recurringSchedulePreview"),nt=t("#recurringScheduleList"),He=t("#recurringScheduleSummary");if(!oe||!ue||!Se){Te&&(Te.textContent="--"),ye&&(ye.style.display="none"),calculateLateFee();return}var it=generateRecurringSchedule(oe,ue,Ae,Le,Se);if(it.length===0){Te&&(Te.textContent="--"),ye&&(ye.style.display="none"),calculateLateFee();return}if(Le==="amount")Te&&(Te.textContent=it.length+" payments");else{var Kt=it.length>0?it[0].amount:0;Te&&(Te.textContent="$"+Kt.toLocaleString()+"/payment")}var wi={weekly:"Weekly",biweekly:"Bi-Weekly",semimonthly:"Semi-Monthly",monthly:"Monthly",bimonthly:"Bi-Monthly"};if(He){var dt=it[it.length-1].dueDate;He.textContent=wi[Ae]+"  Final payment: "+new Date(dt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}if(ye&&(ye.style.display="block"),nt){var zn="";it.forEach(function(yn,zl){var Vn=new Date(yn.dueDate).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});zn+='<div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 10px; background: rgba(255,255,255,0.03); border-radius: 4px;"><span style="font-size: 0.8em; color: #94a3b8;">#'+(zl+1)+'</span><span style="font-size: 0.85em; color: #e2e8f0;">'+Vn+'</span><span style="font-size: 0.9em; font-weight: 600; color: #10b981;">$'+yn.amount.toLocaleString()+"</span></div>"}),nt.innerHTML=zn}calculateLateFee()},window.syncDeferredWithTotal=function(){var oe=t("#sowDeferredPayment"),ue=t("#deferredPaymentFields"),Ae=oe&&oe.checked||ue&&ue.style.display==="block";if(Ae){var Le=document.querySelector('input[name="deferred_split"]:checked');if(!(Le&&Le.value==="custom")){var Se=t("#sowTotalPrice");if(Se){var Te=parseFloat(Se.textContent.replace(/[^0-9.-]/g,""))||0;if(Le&&Le.value==="recurring"){var ye=t("#sowRecurringTotalAmount");ye&&Te>0&&(ye.value=Te,updateRecurringSchedule())}else{var nt=t("#sowDeferredAmount");nt&&Te>0&&(nt.value=Te,calculateLateFee())}}}}};var J=function(){var oe=t("#sowTotalPrice");if(oe){var ue=new MutationObserver(function(Ae){Ae.forEach(function(Le){(Le.type==="childList"||Le.type==="characterData")&&syncDeferredWithTotal()})});ue.observe(oe,{childList:!0,characterData:!0,subtree:!0})}};setTimeout(J,500),window.calculateLateFee=function(){var oe=document.querySelector('input[name="deferred_split"]:checked'),ue=t("#sowWaiveLateFee"),Ae=ue&&ue.checked,Le=0;if(oe&&oe.value==="custom"){var Se=document.querySelectorAll(".custom-payment-amount");Se.forEach(function(Kt){Le+=parseFloat(Kt.value)||0})}else if(oe&&oe.value==="recurring"){var Te=t("#sowRecurringTotalAmount");Le=parseFloat(Te?Te.value:0)||0}else{var ye=t("#sowDeferredAmount");Le=parseFloat(ye?ye.value:0)||0}var nt=Ae?0:Le*.1,He=t("#lateFeeDisplay"),it=t("#totalDeferredDisplay");He&&(He.textContent="$"+nt.toFixed(0),He.style.textDecoration=Ae?"line-through":"none"),it&&(it.textContent="$"+Le.toFixed(0))},window.addCustomPaymentRow=function(){var oe=t("#customPaymentsList");if(oe){var ue=document.createElement("div");ue.className="custom-payment-row",ue.style.cssText="display: flex; gap: 10px; margin-bottom: 10px; align-items: center;",ue.innerHTML='<input type="number" class="sow-input custom-payment-amount" placeholder="Amount $" style="flex: 1;" onchange="calculateLateFee()" oninput="calculateLateFee()" /><input type="date" class="sow-input custom-payment-date" style="flex: 1;" /><button type="button" onclick="removeCustomPaymentRow(this)" style="padding: 8px 12px; background: rgba(239, 68, 68, 0.2); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 6px; color: #ef4444; cursor: pointer; font-size: 1em;"></button>',oe.appendChild(ue)}},window.removeCustomPaymentRow=function(oe){var ue=oe.parentElement;ue.remove(),calculateLateFee()};var Y=t("#sowCouponSelect");if(Y&&y.coupons){var K=y.coupons.filter(function(oe){var ue=oe.expirationDate&&new Date(oe.expirationDate)<new Date,Ae=oe.usageLimit&&oe.usageCount>=oe.usageLimit;return oe.active!==!1&&!ue&&!Ae});K.forEach(function(oe){var ue=oe.discountType==="percentage"?oe.discountValue+"% off":"$"+(oe.discountValue||0).toFixed(0)+" off",Ae=document.createElement("option");Ae.value=oe.code,Ae.textContent=oe.code+"  "+ue,oe.description&&(Ae.textContent+=" ("+oe.description+")"),Y.appendChild(Ae)}),Y.addEventListener("change",function(){R()})}var ae=t("#sowWeeks"),se=t("#sowStartDate");ae&&ae.addEventListener("input",function(){var oe=parseInt(this.value);if(oe&&oe>0&&se){var ue=new Date;ue.setDate(ue.getDate()+oe*7),se.value=ue.toISOString().split("T")[0]}}),se&&se.addEventListener("change",function(){var oe=new Date(this.value),ue=new Date;if(ue.setHours(0,0,0,0),oe&&oe>ue&&ae){var Ae=oe-ue,Le=Ae/(1e3*60*60*24),Se=Math.round(Le/7);ae.value=Math.max(1,Math.min(52,Se))}});var le=t(".btn-close-sow");le&&le.addEventListener("click",function(){u.style.display="none"});var xe=t(".btn-cancel-sow");xe&&xe.addEventListener("click",function(){u.style.display="none"});var Me=t("#clientIdTypeToggle"),ve=t("#sowClientEmail"),Ee=t("#sowClientPhone"),Be=t("#sowClientEmailWrapper"),Qe=t("#sowClientPhoneWrapper"),Ze=t("#emailToggleLabel"),tt=t("#phoneToggleLabel");Me&&(Me.addEventListener("change",function(){this.checked?(Be&&(Be.style.display="none"),ve&&(ve.value=""),Qe&&(Qe.style.display="flex"),Ze.classList.remove("active"),tt.classList.add("active")):(Qe&&(Qe.style.display="none"),Ee&&(Ee.value=""),Be&&(Be.style.display="block"),tt.classList.remove("active"),Ze.classList.add("active"))}),Ze.classList.add("active"));var $e=t("#sowEntityTypeToggle"),st=t("#sowIndividualFields"),qe=t("#sowBusinessFields"),lt=t("#sowIndividualLabel"),Rt=t("#sowBusinessLabel"),Bt=t("#sowBusinessEmail"),Pe=t("#sowBusinessPhone"),Ce=t("#sowBusinessEmailWrapper"),St=t("#sowBusinessPhoneWrapper");$e&&($e.addEventListener("change",function(){this.checked?(st&&(st.style.display="none"),qe&&(qe.style.display="block"),lt&&lt.classList.remove("active"),Rt&&Rt.classList.add("active"),Me&&Me.checked?(Ce&&(Ce.style.display="none"),St&&(St.style.display="flex")):(Ce&&(Ce.style.display="block"),St&&(St.style.display="none"))):(qe&&(qe.style.display="none"),st&&(st.style.display="block"),Rt&&Rt.classList.remove("active"),lt&&lt.classList.add("active"))}),lt&&lt.classList.add("active")),Me&&Me.addEventListener("change",function(){$e&&$e.checked&&(this.checked?(Ce&&(Ce.style.display="none"),Bt&&(Bt.value=""),St&&(St.style.display="flex")):(St&&(St.style.display="none"),Pe&&(Pe.value=""),Ce&&(Ce.style.display="block")))}),Pe&&(Pe.setAttribute("maxlength","17"),Pe.addEventListener("input",function(){var oe=p(this.value);oe!==this.value&&(this.value=oe)})),Ee&&(Ee.setAttribute("maxlength","17"),Ee.addEventListener("input",function(){var oe=p(this.value);oe!==this.value&&(this.value=oe)}));var We=t("#sowUserSearch"),gt=t("#sowUserDropdown"),jt=[],Dt=null,Ye=null,Ge=null,ct=null,qt=function(){console.log(" Starting realtime subscription for users without SOW..."),We&&(We.placeholder="Loading users...",We.disabled=!0);var oe=function(){if(!(!Ge||!ct)){var ue=new Set,Ae=new Set;ct.forEach(function(Le){var Se=Le.data();Se.clientEmail&&ue.add(Se.clientEmail.toLowerCase().trim()),Se.clientPhone&&Ae.add(m(Se.clientPhone))}),jt=[],Ge.forEach(function(Le){var Se=Le.data(),Te=Se.email?Se.email.toLowerCase().trim():null,ye=Se.phoneNumber?m(Se.phoneNumber):null,nt=Te&&ue.has(Te),He=ye&&Ae.has(ye);!nt&&!He&&jt.push({uid:Se.uid,email:Se.email||null,phoneNumber:Se.phoneNumber||null,displayName:Se.displayName||null})}),We&&(We.placeholder="Search by name, email, or phone...",We.disabled=!1),console.log("Realtime: Loaded "+jt.length+" users without SOW"),gt&&gt.style.display==="block"&&ht(We?We.value:"")}};console.log(" Subscribing to users collection..."),Dt=firebase.firestore().collection("users").onSnapshot(function(ue){console.log(" Users snapshot received:",ue.size,"users"),Ge=ue,oe()},function(ue){console.error(" Error listening to users:",ue),We&&(We.placeholder="Search unavailable - enter manually",We.disabled=!1)}),console.log(" Subscribing to sow_documents collection..."),Ye=firebase.firestore().collection("sow_documents").onSnapshot(function(ue){console.log(" SOW documents snapshot received:",ue.size,"documents"),ct=ue,oe()},function(ue){console.error(" Error listening to SOWs:",ue)})},Xt=function(){Dt&&(Dt(),Dt=null),Ye&&(Ye(),Ye=null),Ge=null,ct=null},Ft=function(){var oe=t("#addUserEmail"),ue=t("#addUserPassword"),Ae=t("#addUserPhone"),Le=t("#addUserCode"),Se=t("#addUserPhoneCountryCode");if(oe&&ue){var Te=oe.value&&oe.value.trim().length>0;ue.style.display=Te?"block":"none",Te?ue.required=!0:(ue.required=!1,ue.value="")}if(Ae&&Le){var ye=Se?Se.value:"+1",nt=f[ye]||f["+1"],He=Ae.value.replace(/\D/g,"").length,it=Ae.value&&He>=nt.maxDigits;Le.style.display=it?"block":"none",it?Le.required=!0:(Le.required=!1,Le.value="")}};window.toggleAuthFields=Ft;var In=function(oe,ue,Ae,Le,Se){var Te=ue&&ue.trim(),ye=Le&&Le.trim();if(!Te&&!ye)return alert("Please enter either an email or phone number."),Promise.reject("No email or phone provided");if(Te&&(!Ae||Ae.length<6))return alert("Password must be at least 6 characters for email authentication."),Promise.reject("Password too short");if(ye&&(!Se||!/^\d{4,6}$/.test(Se)))return alert("Verification code must be 4-6 digits for phone authentication."),Promise.reject("Invalid verification code");console.log("Adding user via Cloud Function...");var nt=firebase.functions().httpsCallable("addAuthUser");return nt({displayName:oe?oe.trim():null,email:Te?ue.trim():null,password:Te?Ae:null,phoneNumber:ye?Le.trim():null,verificationCode:ye?Se:null}).then(function(He){return console.log("User added successfully:",He.data),He.data}).catch(function(He){throw console.error("Error adding user:",He),He})};window.unsubscribeFromUsers=Xt;var ht=function(oe){var ue;if(!oe||oe.length===0)ue=jt;else{var Ae=oe.toLowerCase();ue=jt.filter(function(Se){var Te=Se.displayName&&Se.displayName.toLowerCase().includes(Ae),ye=Se.email&&Se.email.toLowerCase().includes(Ae),nt=Se.phoneNumber&&Se.phoneNumber.includes(Ae);return Te||ye||nt})}if(ue.length===0){gt.innerHTML='<div class="sow-dropdown-empty">No users without SOW found</div>',gt.style.display="block";return}var Le=ue.slice(0,10).map(function(Se){var Te=Se.displayName||"Unknown",ye=Se.email||(Se.phoneNumber?p(Se.phoneNumber):"")||"",nt=!!Se.email,He=!!Se.phoneNumber;return'<div class="sow-dropdown-item" data-email="'+(Se.email||"")+'" data-phone="'+(Se.phoneNumber||"")+'" data-name="'+(Se.displayName||"")+'"><span class="sow-dropdown-name">'+Te+'</span><span class="sow-dropdown-contact">'+ye+'</span><span class="sow-dropdown-badges">'+(nt?'<span class="badge-email">Email</span>':"")+(He?'<span class="badge-phone">Phone</span>':"")+"</span></div>"}).join("");gt.innerHTML=Le,gt.style.display="block"},Mi=function(oe){var ue=oe.getAttribute("data-email"),Ae=oe.getAttribute("data-phone"),Le=oe.getAttribute("data-name"),Se=t("#sowClientName");if(Se&&Le&&(Se.value=Le),ue)Me.checked=!1,Be&&(Be.style.display="block"),Qe&&(Qe.style.display="none"),ve&&(ve.value=ue),Ee&&(Ee.value=""),Ze.classList.add("active"),tt.classList.remove("active");else if(Ae){if(Me.checked=!0,Qe&&(Qe.style.display="flex"),Be&&(Be.style.display="none"),Ee){var Te=t("#sowClientPhoneCountryCode")?t("#sowClientPhoneCountryCode").value:"+1";Ee.value=p(Ae,Te)}ve&&(ve.value=""),tt.classList.add("active"),Ze.classList.remove("active")}We.value="",gt.style.display="none"};We&&(We.addEventListener("input",function(){ht(this.value)}),We.addEventListener("focus",function(){ht(this.value)})),gt&&gt.addEventListener("click",function(oe){var ue=oe.target.closest(".sow-dropdown-item");ue&&Mi(ue)}),document.addEventListener("click",function(oe){gt&&!oe.target.closest(".sow-search-wrapper")&&(gt.style.display="none")}),qt();var Bn=t("#btnAddUser"),ui=t("#addUserForm"),tn=t("#btnSaveUser"),_t=t("#btnCancelAddUser"),cn=t("#addUserName"),Ht=t("#addUserEmail"),nn=t("#addUserPassword"),vn=t("#addUserPhone"),rn=t("#addUserCode");Bn&&Bn.addEventListener("click",function(){ui.style.display="block",Bn.style.display="none",Ht.focus()}),_t&&_t.addEventListener("click",function(){ui.style.display="none",Bn.style.display="inline-block",cn.value="",Ht.value="",nn.value="",vn.value="",rn.value="",nn.style.display="none",rn.style.display="none"}),tn&&tn.addEventListener("click",function(){var oe=cn.value.trim(),ue=Ht.value.trim(),Ae=nn.value,Le=vn.value.trim(),Se=rn.value.trim();tn.disabled=!0,tn.textContent="Saving...",In(oe,ue,Ae,Le,Se).then(function(Te){cn.value="",Ht.value="",nn.value="",vn.value="",rn.value="",nn.style.display="none",rn.style.display="none",ui.style.display="none",Bn.style.display="inline-block",tn.disabled=!1,tn.textContent="Save User",alert("User added successfully! They can now sign in and will appear in the dropdown.")}).catch(function(Te){tn.disabled=!1,tn.textContent="Save User",Te!=="No email or phone provided"&&Te!=="Password too short"&&Te!=="Invalid verification code"&&alert("Error adding user: "+(Te.message||Te))})});var _n=t("#addUserPhoneCountryCode");if(vn){var Cn=function(){var oe=_n?_n.value:"+1",ue=p(vn.value,oe);ue!==vn.value&&(vn.value=ue)};vn.addEventListener("input",Cn),_n&&_n.addEventListener("change",Cn)}var Oe=t("#sowClientPhone"),Je=t("#sowClientPhoneCountryCode");if(Oe){var Xe=function(){var oe=Je?Je.value:"+1",ue=p(Oe.value,oe);ue!==Oe.value&&(Oe.value=ue)};Oe.addEventListener("input",Xe),Je&&Je.addEventListener("change",Xe)}var Ot=t("#sowBusinessPhone"),ut=t("#sowBusinessPhoneCountryCode");if(Ot){var $i=function(){var oe=ut?ut.value:"+1",ue=p(Ot.value,oe);ue!==Ot.value&&(Ot.value=ue)};Ot.addEventListener("input",$i),ut&&ut.addEventListener("change",$i)}var Ue=t(".btn-save-sow");Ue&&Ue.addEventListener("click",function(){y.saveSOW()});var es=t(".btn-generate-sow-pdf");es&&es.addEventListener("click",function(){y.generateSOWPDF()}),I()}};function I(){var u=new URLSearchParams(window.location.search),v=u.get("business"),y=u.get("phone"),b=u.get("email"),x=u.get("package"),k=u.get("features"),S=u.get("ecommerce"),P=u.get("maintenance"),R=["essential","starter","growth","professional","enterprise","custom"],B=["responsive_design","custom_ui","animations","seo_optimization","analytics","contact_forms","firebase_auth","firebase_db","user_profiles","file_storage","api_integration","email_integration","music_media","booking_basic","newsletter","social_feed","user_roles","cms_integration","booking_system","blog","gallery","notifications"],V=["none","basic_cart","full_store"],H=["none","basic","professional","premium"];if(v){var O=document.getElementById("sowBusinessName"),W=document.getElementById("sowClientName");O&&(O.value=v),W&&(W.value=v)}if(y){var X=document.getElementById("sowClientPhone"),J=document.getElementById("sowBusinessPhone"),Y=document.getElementById("addUserPhone");X&&(X.value=y),J&&(J.value=y),Y&&(Y.value=y)}if(b){var K=document.getElementById("sowClientEmail"),ae=document.getElementById("sowBusinessEmail"),se=document.getElementById("addUserEmail");K&&(K.value=b),ae&&(ae.value=b),se&&(se.value=b)}if(b||y){var le=document.getElementById("addUserForm");le&&(le.style.display="block");var xe=document.getElementById("clientIdTypeToggle"),Me=document.getElementById("sowClientEmailWrapper"),ve=document.getElementById("sowClientPhoneWrapper"),Ee=document.getElementById("emailToggleLabel"),Be=document.getElementById("phoneToggleLabel");y&&!b?(xe&&(xe.checked=!0),Me&&(Me.style.display="none"),ve&&(ve.style.display="flex"),Ee&&Ee.classList.remove("active"),Be&&Be.classList.add("active")):b&&(xe&&(xe.checked=!1),ve&&(ve.style.display="none"),Me&&(Me.style.display="block"),Be&&Be.classList.remove("active"),Ee&&Ee.classList.add("active"))}if(x&&R.indexOf(x)!==-1){var Qe=document.getElementById("sowPackage");if(Qe){Qe.value=x;var Ze=new Event("change",{bubbles:!0});Qe.dispatchEvent(Ze)}}if(k){var tt=k.split(",").map(function(qe){return qe.trim().toLowerCase()});tt.forEach(function(qe){if(B.indexOf(qe)!==-1){var lt=document.querySelector('.sow-checkboxes input[type="checkbox"][value="'+qe+'"]');if(lt){lt.checked=!0;var Rt=new Event("change",{bubbles:!0});lt.dispatchEvent(Rt)}}})}if(S&&V.indexOf(S)!==-1){var $e=document.querySelector('input[name="ecommerce_option"][value="'+S+'"]');if($e){$e.checked=!0;var Ze=new Event("change",{bubbles:!0});$e.dispatchEvent(Ze)}}if(P&&H.indexOf(P)!==-1){var st=document.getElementById("sowMaintenance");if(st){st.value=P;var Ze=new Event("change",{bubbles:!0});st.dispatchEvent(Ze)}}}function G(){var u=new URLSearchParams(window.location.search),v=u.has("business")||u.has("phone")||u.has("email")||u.has("package");v&&window.contractFormHandler&&typeof window.contractFormHandler.showSOWCreator=="function"&&(typeof window.contractFormHandler.switchTab=="function"&&window.contractFormHandler.switchTab("sow"),setTimeout(function(){window.contractFormHandler.showSOWCreator()},100))}M.prototype.calculateFeatureBasedPricing=function(u,v,y,b){var x=t("#sowPackage"),k=t("#sowCustomPrice"),S=x?x.value:"",P={basePrice:0,packageType:S,addOns:[],discounts:[],ecommerceOption:"none",ecommercePrice:0,total:0};if(!S)return P;S==="custom"?P.basePrice=parseFloat(k.value)||0:u[S]&&(P.basePrice=u[S].default);var R=b[S]||[],B=document.querySelectorAll('.sow-checkboxes input[type="checkbox"]');B.forEach(function(W){var X=W.value,J=W.checked,Y=R.indexOf(X)!==-1,K=v[X];if(K){var ae=W.parentElement.textContent.trim(),se=W.parentElement.querySelector(".third-party-note");se&&(ae=ae.replace(se.textContent,"").trim()),J&&!Y?P.addOns.push({key:X,label:ae,price:S==="custom"?0:K.default,thirdParty:K.thirdParty,note:K.note||""}):!J&&Y&&S!=="custom"&&P.discounts.push({key:X,label:ae,price:Math.round(K.default*.5)})}});var V=document.querySelector('input[name="ecommerce_option"]:checked');V&&(P.ecommerceOption=V.value,y[P.ecommerceOption]&&(P.ecommercePrice=y[P.ecommerceOption].price,P.ecommercePrice>0&&P.addOns.push({key:"ecommerce_"+P.ecommerceOption,label:y[P.ecommerceOption].label,price:S==="custom"?0:P.ecommercePrice,thirdParty:y[P.ecommerceOption].thirdParty,note:y[P.ecommerceOption].note||""})));var H=P.addOns.reduce(function(W,X){return W+X.price},0),O=P.discounts.reduce(function(W,X){return W+X.price},0);return P.total=Math.max(0,P.basePrice+H-O),P},M.prototype.renderItemizedPricing=function(u,v,y){var b=document.getElementById("pricingItemizedList");if(!b){console.warn("pricingItemizedList container not found");return}var x={responsive_design:"Responsive Design",custom_ui:"Custom UI/UX Design",animations:"Animations & Micro-interactions",seo_optimization:"SEO Optimization",analytics:"Analytics Integration (GA4)",contact_forms:"Contact Forms",firebase_auth:"User Authentication",firebase_db:"Database Integration",user_profiles:"User Profiles & Dashboard",file_storage:"File/Media Storage",api_integration:"API Integrations",email_integration:"Email Notifications",newsletter:"Newsletter Integration",user_roles:"Role-Based Access Control",notifications:"In-App Notifications",booking_basic:"Basic Booking System",booking_system:"Advanced Booking + Availability",blog:"Blog Module",cms_integration:"Content Management System",gallery:"Media Gallery",music_media:"Music/Video Player",social_feed:"Social Media Feed"},k={essential:"Essential  Landing Page",starter:"Tier 1  Starter",growth:"Tier 2  Growth",professional:"Tier 3  Professional",enterprise:"Tier 4  Enterprise",custom:"Custom Quote"},S="",P=u.packageType;if(!P){S='<div class="pricing-empty-state">Select a package to see pricing breakdown</div>',b.innerHTML=S;return}var R=k[P]||P.charAt(0).toUpperCase()+P.slice(1)+" Package";S+='<div class="pricing-package-header"><span class="package-name">'+R+'</span><span class="package-price">$'+u.basePrice.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</span></div>";var B=y?y[P]||[]:[];B.length>0&&P!=="custom"&&(S+='<div class="pricing-section-header">Included in Package</div>',S+='<div class="pricing-included-features">',B.forEach(function(J){var Y=x[J]||J.replace(/_/g," ").replace(/\b\w/g,function(K){return K.toUpperCase()});S+='<div class="pricing-feature-item included"><span class="feature-check"></span><span class="feature-name">'+Y+"</span></div>"}),S+="</div>");var V=u.addOns.filter(function(J){return J.key.indexOf("ecommerce_")!==0}),H=u.addOns.find(function(J){return J.key.indexOf("ecommerce_")===0});if(V.length>0&&(S+='<div class="pricing-section-header">'+(P==="custom"?"Included Features":"Add-Ons")+"</div>",V.forEach(function(J){var Y=x[J.key]||J.label,K=J.price===0?'<span class="included-badge">Included</span>':"+$"+J.price.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});S+='<div class="pricing-line-item add-on"><span class="item-label">'+Y+(J.thirdParty?' <span class="third-party-note">+ '+J.note+"</span>":"")+'</span><span class="item-price">'+K+"</span></div>"})),H){V.length===0&&(S+='<div class="pricing-section-header">'+(P==="custom"?"Included Features":"Add-Ons")+"</div>");var O=H.price===0?'<span class="included-badge">Included</span>':"+$"+H.price.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0});S+='<div class="pricing-line-item add-on ecommerce-item"><span class="item-label">'+H.label+(H.thirdParty?' <span class="third-party-note">+ '+H.note+"</span>":"")+'</span><span class="item-price">'+O+"</span></div>"}if(u.discounts.length>0&&(S+='<div class="pricing-section-header">Removed Features (50% Credit)</div>',u.discounts.forEach(function(J){var Y=x[J.key]||J.label;S+='<div class="pricing-line-item discount"><span class="item-label">'+Y+'</span><span class="item-price discount-value">-$'+J.price.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</span></div>"})),u.coupon&&u.couponDiscount>0){var W=u.coupon,X=W.code;W.discountType==="percentage"?X+=" ("+W.discountValue+"% off)":X+=" ($"+W.discountValue.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+" off)",S+='<div class="pricing-section-header coupon-header">Discount Applied</div>',S+='<div class="pricing-line-item coupon-discount"><span class="item-label"><span class="coupon-icon"></span> '+X+'</span><span class="item-price coupon-value">-$'+u.couponDiscount.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</span></div>"}b.innerHTML=S},M.prototype.autoCheckPackageFeatures=function(u,v){var y=v[u]||[],b=document.querySelectorAll('.sow-checkboxes input[type="checkbox"]');b.forEach(function(k){var S=k.value,P=y.indexOf(S)!==-1;k.checked=P;var R=k.parentElement;P?R.classList.add("feature-included"):R.classList.remove("feature-included")});var x=document.querySelector('input[name="ecommerce_option"][value="none"]');x&&(x.checked=!0)},M.prototype.updateSOWPricing=function(u,v,y,b,x){var k=t("#sowMaintenance"),S=t("#sowCouponSelect"),P=t("#couponValidationMessage"),R=this.calculateFeatureBasedPricing(u,y,b,x),B=S?S.value:"";R.coupon=null,R.couponDiscount=0;var V=R.basePrice;if(B&&this.coupons){var H=R.packageType==="custom"?R.basePrice:R.total,O=this.validateCoupon(B,R.packageType,H);O.valid?(R.coupon=O.coupon,R.couponDiscount=O.discount,R.total=Math.max(0,R.total-O.discount),R.basePrice=V,P&&(P.className="coupon-validation-message success",P.innerHTML=" "+O.discountDisplay+" discount applied!")):P&&(P.className="coupon-validation-message error",P.innerHTML=" "+O.error)}else P&&(P.className="coupon-validation-message",P.innerHTML="");this.renderItemizedPricing(R,u,x);var W=R.total,X=W*.5,J=W*.25,Y=W*.25,K=v[k.value]||0,ae=t("#sowTotalPrice"),se=t("#sowDepositCalc"),le=t("#sowMilestone1Calc"),xe=t("#sowFinalCalc"),Me=t("#sowMaintenanceCalc"),ve=t("#maintenanceRow");ae&&(ae.textContent="$"+W.toFixed(0)),se&&(se.textContent="$"+X.toFixed(0)),le&&(le.textContent="$"+J.toFixed(0)),xe&&(xe.textContent="$"+Y.toFixed(0)),ve&&(ve.style.display="flex"),k.value&&k.value!==""?Me&&(Me.textContent="$"+K+"/month"):Me&&(Me.textContent="Select plan");var Ee=t("#sowDeferredPayment"),Be=t("#deferredPaymentFields"),Qe=Ee&&Ee.checked||Be&&Be.style.display==="block";if(Qe){var Ze=document.querySelector('input[name="deferred_split"]:checked');if(!Ze||Ze.value!=="custom"){var tt=t("#sowDeferredAmount");tt&&(tt.value=W)}calculateLateFee()}this.currentPricingData=R},M.prototype.saveSOW=function(){var u=t("#sowEntityTypeToggle")&&t("#sowEntityTypeToggle").checked,v=t("#sowClientName").value.trim(),y=t("#sowClientEmail").value.trim(),b=t("#sowClientPhone").value.trim(),x=t("#sowBusinessName")?t("#sowBusinessName").value.trim():"",k=t("#sowEntityType")?t("#sowEntityType").value:"",S=t("#sowStateOfFormation")?t("#sowStateOfFormation").value.trim():"",P=t("#sowRepName")?t("#sowRepName").value.trim():"",R=t("#sowRepTitle")?t("#sowRepTitle").value.trim():"",B=t("#sowBusinessEmail")?t("#sowBusinessEmail").value.trim():"",V=t("#sowBusinessPhone")?t("#sowBusinessPhone").value.trim():"",H=t("#sowPackage").value,O=t("#sowWeeks").value,W=t("#sowStartDate").value,X=t("#sowNotes").value.trim(),J=t("#sowMaintenance").value,Y=t("#sowRetroactive")&&t("#sowRetroactive").checked,K=t("#sowDevDuration")?t("#sowDevDuration").value:"",ae=t("#sowRetroactiveEndDate")?t("#sowRetroactiveEndDate").value:"",se="";if(b){var le=b.replace(/\D/g,"");le.length===10?se="+1"+le:le.length===11&&le.startsWith("1")?se="+"+le:se=b}var xe="";if(V){var Me=V.replace(/\D/g,"");Me.length===10?xe="+1"+Me:Me.length===11&&Me.startsWith("1")?xe="+"+Me:xe=V}var ve=[];if(u){if(x||ve.push("Business Legal Name"),k||ve.push("Entity Type"),P||ve.push("Representative Name"),R||ve.push("Representative Title"),H||ve.push("Package Tier"),Y?K||ve.push("Development Duration"):O||ve.push("Estimated Weeks"),ve.length>0){alert(`Please fill in all required fields:
- `+ve.join(`
- `));return}if(!B&&!xe){alert("Please provide either a Business Email or Business Phone number.");return}}else{if(v||ve.push("Client Name"),H||ve.push("Package Tier"),Y?K||ve.push("Development Duration"):O||ve.push("Estimated Weeks"),ve.length>0){alert(`Please fill in all required fields:
- `+ve.join(`
- `));return}if(!y&&!se){alert("Please provide either a Client Email or Client Phone number.");return}}var Ee=[],Be=document.querySelectorAll('.sow-checkboxes input[type="checkbox"]:checked');Be.forEach(function(Ye){var Ge=Ye.parentElement.textContent.trim(),ct=Ye.parentElement.querySelector(".third-party-note");ct&&(Ge=Ge.replace(ct.textContent,"").trim()),Ee.push(Ge)});var Qe=document.querySelector('input[name="ecommerce_option"]:checked'),Ze=Qe?Qe.value:"none",tt=this.currentPricingData||{basePrice:0,addOns:[],discounts:[],ecommerceOption:Ze,ecommercePrice:0,total:0},$e=tt.total,st=t("#sowCouponSelect"),qe=st?st.value:"",lt=t("#sowDevDurationUnit")?t("#sowDevDurationUnit").value:"weeks",Rt=K&&parseInt(K)||null,Bt=t("#sowDeferredPayment")&&t("#sowDeferredPayment").checked,Pe={enabled:Bt,splitType:"lump_sum",dueDate:null,deferredAmount:0,lateFee:0,lateFeeWaived:!1,allowPartialPayments:!0,maintenanceDuringDeferral:!0,customSchedule:[],frequency:null,startDate:null,calculationMode:null,amountPerPayment:null,numberOfPayments:null,acknowledgmentSigned:!1,acknowledgmentDate:null};if(Bt){var Ce=document.querySelector('input[name="deferred_split"]:checked');if(Pe.splitType=Ce?Ce.value:"lump_sum",Pe.lateFeeWaived=t("#sowWaiveLateFee")&&t("#sowWaiveLateFee").checked,Pe.allowPartialPayments=t("#sowAllowPartialPayments")?t("#sowAllowPartialPayments").checked:!0,Pe.maintenanceDuringDeferral=t("#sowMaintenanceDuringDeferral")?t("#sowMaintenanceDuringDeferral").checked:!0,Pe.splitType==="custom"){var St=[],We=document.querySelectorAll(".custom-payment-row");We.forEach(function(Ye){var Ge=Ye.querySelector(".custom-payment-amount"),ct=Ye.querySelector(".custom-payment-date"),qt=parseFloat(Ge?Ge.value:0)||0,Xt=ct?ct.value:null;qt>0&&St.push({amount:qt,dueDate:Xt})}),Pe.customSchedule=St,Pe.deferredAmount=St.reduce(function(Ye,Ge){return Ye+Ge.amount},0)}else if(Pe.splitType==="recurring"){Pe.deferredAmount=parseFloat(t("#sowRecurringTotalAmount")?t("#sowRecurringTotalAmount").value:0)||0,Pe.startDate=t("#sowRecurringStartDate")?t("#sowRecurringStartDate").value:null,Pe.frequency=t("#sowRecurringFrequency")?t("#sowRecurringFrequency").value:"biweekly",Pe.calculationMode=t("#sowRecurringCalcMode")?t("#sowRecurringCalcMode").value:"amount",Pe.calculationMode==="amount"?Pe.amountPerPayment=parseFloat(t("#sowRecurringPaymentAmount")?t("#sowRecurringPaymentAmount").value:0)||0:Pe.numberOfPayments=parseInt(t("#sowRecurringPaymentCount")?t("#sowRecurringPaymentCount").value:0)||0;var gt=Pe.calculationMode==="amount"?Pe.amountPerPayment:Pe.numberOfPayments;Pe.customSchedule=generateRecurringSchedule(Pe.deferredAmount,Pe.startDate,Pe.frequency,Pe.calculationMode,gt)}else Pe.deferredAmount=parseFloat(t("#sowDeferredAmount")?t("#sowDeferredAmount").value:0)||0,Pe.dueDate=t("#sowDeferredDueDate")?t("#sowDeferredDueDate").value:null;if(Pe.lateFee=Pe.lateFeeWaived?0:Pe.deferredAmount*.1,Pe.deferredAmount<=0){alert("Please enter a valid deferred amount.");return}if(Pe.splitType==="lump_sum"&&!Pe.dueDate){alert("Please select a due date for the deferred payment.");return}if(Pe.splitType==="custom"&&Pe.customSchedule.length===0){alert("Please add at least one payment to the custom schedule.");return}if(Pe.splitType==="recurring"){if(!Pe.startDate){alert("Please select a first payment date for the payment plan.");return}if(Pe.calculationMode==="amount"&&(!Pe.amountPerPayment||Pe.amountPerPayment<=0)){alert("Please enter a valid payment amount.");return}if(Pe.calculationMode==="count"&&(!Pe.numberOfPayments||Pe.numberOfPayments<2)){alert("Please enter a valid number of payments (minimum 2).");return}if(Pe.customSchedule.length===0){alert("Could not generate payment schedule. Please check your inputs.");return}}if(Pe.deferredAmount>$e){alert("Deferred amount cannot exceed the total project price.");return}}var jt={clientName:u?x:v,clientEmail:u?B||"":y||"",clientPhone:u?m(xe)||"":m(se)||"",packageType:H,estimatedWeeks:Y?Rt||null:parseInt(O),startDate:Y?ae||null:W||null,features:Ee,notes:X,maintenancePlan:J,isRetroactive:Y,devDuration:Rt,devDurationUnit:lt,retroactiveEndDate:Y&&ae||null,couponCode:qe||null,isBusinessEntity:u,businessName:u?x:"",entityType:u?k:"",stateOfFormation:u?S:"",representativeName:u?P:"",representativeTitle:u?R:"",payment:{total:$e,deposit:$e*.5,milestone1:$e*.25,final:$e*.25,breakdown:{basePrice:tt.basePrice,addOns:tt.addOns,discounts:tt.discounts,ecommerceOption:tt.ecommerceOption,ecommercePrice:tt.ecommercePrice,couponCode:qe||null,couponDiscount:tt.couponDiscount||0},deferred:Pe,tracking:{depositPaid:!1,depositPaidDate:null,milestone1Paid:!1,milestone1PaidDate:null,finalPaid:!1,finalPaidDate:null,deferredPayments:[]}},createdBy:firebase.auth().currentUser.email,createdAt:firebase.firestore.FieldValue.serverTimestamp(),status:"draft"},Dt=this;firebase.firestore().collection("sow_documents").add(jt).then(function(Ye){console.log("SOW saved with ID:",Ye.id),alert(` SOW saved successfully!

You can now generate the PDF or attach it to a contract.`),t("#sowCreatorContainer").style.display="none",Dt.loadSOWDocuments()}).catch(function(Ye){console.error("Error saving SOW:",Ye),alert("Error saving SOW: "+Ye.message)})},M.prototype.showSOWSigningModal=function(u){var v=this;console.log("Opening SOW for signing:",u),firebase.firestore().collection("sow_documents").doc(u).get().then(function(y){if(!y.exists){alert("SOW not found");return}var b=y.data();if(b.id=y.id,b.clientSignature&&b.devSignature){alert("This SOW is already fully signed by both parties."),v.generateSOWPDF(b);return}v.renderSOWSigningModal(b)}).catch(function(y){console.error("Error loading SOW:",y),alert("Error loading SOW: "+y.message)})},M.prototype.renderSOWSigningModal=function(u){var v=this,y=firebase.auth().currentUser,b=y.email?y.email.toLowerCase():"",x=y.phoneNumber||"",k=b===this.DEVELOPER_EMAIL,S=b&&u.clientEmail&&b===u.clientEmail.toLowerCase()||x&&u.clientPhone&&x===u.clientPhone;if(!k&&!S){alert("You do not have permission to sign this SOW");return}var P=document.createElement("div");P.id="sowSigningModal",P.className="contract-modal show";var R='<div class="modal-overlay"></div><div class="modal-content"><button class="modal-close" id="closeSOWSigningModal"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button><div class="modal-header"><h1> Statement of Work - Signature Required</h1><p class="modal-subtitle">'+u.clientName+" | "+u.packageType.toUpperCase()+'</p></div><div class="contract-form" "><div class="contract-section-inner"><h2>SOW Summary</h2><p><strong>Client:</strong> '+u.clientName+"</p><p><strong>Package:</strong> "+u.packageType+"</p><p><strong>Total Cost:</strong> $"+(u.payment?u.payment.total.toFixed(0):"0")+"</p><p><strong>Timeline:</strong> "+(u.estimatedWeeks||"TBD")+" weeks</p><p><strong>Features:</strong> "+(u.features?u.features.length:0)+' selected</p></div><div class="signatures"><div class="signature-grid">';R+='<div class="signature-block" id="sowClientSignatureBlock"><h3>Client Signature  '+u.clientName+"</h3>",u.clientSignature?R+='<div class="pending-notice"><p><strong> Client has signed this SOW</strong></p><p>Signed on: '+(u.clientSignedDate||"N/A")+'</p></div><div class="signature-pad-container"><canvas id="sowClientSigPad" class="signature-pad"></canvas></div>':S?R+='<div class="form-row"><div class="form-group"><label>Name *</label><input type="text" id="sowClientSignerName" value="'+u.clientName+'" required /></div><div class="form-group"><label>Date *</label><input type="date" id="sowClientSignDate" required /></div></div><div class="form-group"><label>Signature *</label><div class="signature-pad-container"><canvas id="sowClientSigPad" class="signature-pad"></canvas><button class="clear-btn" data-canvas="sowClientSigPad">Clear</button></div></div>':R+='<div class="pending-notice"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"></circle><path d="M12 6v6l4 2"></path></svg><p><strong>Awaiting Client Signature</strong></p><p>Client has not signed this SOW yet.</p></div>',R+="</div>",R+='<div class="signature-block" id="sowDevSignatureBlock"><h3>Developer Signature  Scarlo</h3>',u.devSignature?R+='<div class="pending-notice"><p><strong> Developer has signed this SOW</strong></p><p>Signed on: '+(u.devSignedDate||"N/A")+'</p></div><div class="signature-pad-container"><canvas id="sowDevSigPad" class="signature-pad"></canvas></div>':k?R+='<div class="form-row"><div class="form-group"><label>Name</label><input type="text" id="sowDevSignerName" value="Carlos Martin" required /></div><div class="form-group"><label>Date *</label><input type="date" id="sowDevSignDate" required /></div></div><div class="form-group"><label>Signature</label><div class="signature-pad-container"><canvas id="sowDevSigPad" class="signature-pad"></canvas><button class="clear-btn" data-canvas="sowDevSigPad">Clear</button></div></div>':R+='<div class="pending-notice"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"></circle><path d="M12 6v6l4 2"></path></svg><p><strong>Awaiting Developer Signature</strong></p><p>Developer will review and sign shortly.</p></div>',R+="</div>",R+="</div></div>",R+='<div class="action-buttons">',u.clientSignature&&u.devSignature?R+='<button class="btn btn-primary" id="downloadSOWBtn"><span> Download Signed SOW</span></button>':S&&!u.clientSignature?R+='<button class="btn btn-primary" id="submitSOWClientSig"><span> Submit Signature</span></button>':k&&!u.devSignature&&u.clientSignature&&(R+='<button class="btn btn-primary" id="submitSOWDevSig"><span> Sign SOW</span></button>'),R+="</div></div></div>",P.innerHTML=R,document.body.appendChild(P),document.body.classList.add("modal-open"),setTimeout(function(){v.initSOWSignaturePads(u,k,S)},100)},M.prototype.initSOWSignaturePads=function(u,v,y){var b=this,x=document.getElementById("sowClientSigPad"),k=document.getElementById("sowDevSigPad"),S=null,P=null;if(x){if(u.clientSignature)this.drawSignatureOnCanvas(x,u.clientSignature);else if(y){S=U(x);var R=document.getElementById("sowClientSignDate");R&&(R.value=new Date().toISOString().split("T")[0])}}if(k){if(u.devSignature)this.drawSignatureOnCanvas(k,u.devSignature);else if(v){P=U(k);var B=document.getElementById("sowDevSignDate");B&&(B.value=new Date().toISOString().split("T")[0])}}var V=document.querySelectorAll(".clear-btn");V.forEach(function(J){J.addEventListener("click",function(Y){Y.preventDefault();var K=this.getAttribute("data-canvas");K==="sowClientSigPad"&&S?S.clear():K==="sowDevSigPad"&&P&&P.clear()})});var H=document.getElementById("closeSOWSigningModal");H&&H.addEventListener("click",function(){var J=document.getElementById("sowSigningModal");J&&J.remove(),document.body.classList.remove("modal-open")});var O=document.getElementById("submitSOWClientSig");O&&O.addEventListener("click",function(J){J.preventDefault(),b.submitSOWClientSignature(u.id,S)});var W=document.getElementById("submitSOWDevSig");W&&W.addEventListener("click",function(J){J.preventDefault(),b.submitSOWDeveloperSignature(u.id,P)});var X=document.getElementById("downloadSOWBtn");X&&X.addEventListener("click",function(J){J.preventDefault(),b.generateSOWPDF(u)})},M.prototype.submitSOWClientSignature=function(u,v){if(!v||v.isEmpty()){alert("Please provide your signature");return}var y=document.getElementById("sowClientSignerName").value.trim(),b=document.getElementById("sowClientSignDate").value;if(!y||!b){alert("Please fill in all fields");return}var x=document.getElementById("submitSOWClientSig");x&&(x.disabled=!0,x.innerHTML="<span>Submitting...</span>");var k={clientSignature:v.toDataURL(),clientSignerName:y,clientSignedDate:b,clientSignedTimestamp:firebase.firestore.FieldValue.serverTimestamp(),status:"pending_developer"};firebase.firestore().collection("sow_documents").doc(u).update(k).then(function(){console.log(" Client signed SOW"),alert(` SOW signed successfully!

The developer will review and sign shortly.`);var S=document.getElementById("sowSigningModal");S&&S.remove(),document.body.classList.remove("modal-open")}).catch(function(S){console.error("Error signing SOW:",S),alert("Error signing SOW: "+S.message),x&&(x.disabled=!1,x.innerHTML="<span> Submit Signature</span>")})},M.prototype.submitSOWDeveloperSignature=function(u,v){var y=this;if(!v||v.isEmpty()){alert("Please provide your signature");return}var b=document.getElementById("sowDevSignerName").value.trim(),x=document.getElementById("sowDevSignDate").value;if(!b||!x){alert("Please fill in all fields");return}var k=document.getElementById("submitSOWDevSig");k&&(k.disabled=!0,k.innerHTML="<span>Signing...</span>");var S={devSignature:v.toDataURL(),devSignerName:b,devSignedDate:x,devSignedTimestamp:firebase.firestore.FieldValue.serverTimestamp(),status:"approved"};firebase.firestore().collection("sow_documents").doc(u).update(S).then(function(){console.log(" Developer signed SOW"),alert(` SOW fully executed!

Both parties have signed.`);var P=document.getElementById("sowSigningModal");P&&P.remove(),document.body.classList.remove("modal-open"),y.isDeveloper&&y.showDeveloperDashboard()}).catch(function(P){console.error("Error signing SOW:",P),alert("Error signing SOW: "+P.message),k&&(k.disabled=!1,k.innerHTML="<span> Sign SOW</span>")})},M.prototype.generateSOWPDF=function(u){var v,y,b,x,k,S,P,R,B,V,H,O,W,X,J;if(u)v=u.clientName||"Client Name",y=u.clientEmail||u.clientPhone||"N/A",b=u.packageType||"professional",x=u.estimatedWeeks||"TBD",k=u.startDate||null,S=u.notes||"",P=u.maintenancePlan||"none",R=u.features||[],B=u.id||"DRAFT",V=u.clientSignature||"",H=u.clientSignerName||v,O=u.clientSignedDate||"",W=u.devSignature||"",X=u.devSignerName||"Carlos Martin",J=u.devSignedDate||"";else{var Y=t("#sowEntityTypeToggle"),K=Y&&Y.checked,ae=t("#sowClientName"),se=t("#sowClientEmail"),le=t("#sowClientPhone"),xe=t("#sowBusinessName"),Me=t("#sowBusinessEmail"),ve=t("#sowBusinessPhone"),Ee=t("#sowPackage"),Be=t("#sowWeeks"),Qe=t("#sowStartDate"),Ze=t("#sowNotes"),tt=t("#sowMaintenance");if(!Ee){alert("Please select a Package Tier to generate PDF");return}if(K){v=xe?xe.value.trim():"";var $e=Me?Me.value.trim():"",st=ve?ve.value.trim():"";y=$e||st||"N/A"}else{v=ae?ae.value.trim():"";var qe=se?se.value.trim():"",lt=le?le.value.trim():"";y=qe||lt||"N/A"}if(!v){alert("Please fill in the "+(K?"Business Name":"Client Name")+" to generate PDF");return}b=Ee.value||"professional",x=Be?Be.value:"TBD",k=Qe?Qe.value:null,S=Ze?Ze.value.trim():"",P=tt?tt.value:"none",B="DRAFT",V="",H=K&&t("#sowRepName")?t("#sowRepName").value.trim():v,O="",W="",X="Carlos Martin",J="",R=[],e('.sow-checkboxes input[type="checkbox"]:checked').forEach(function(dt){var zn=dt.parentElement.textContent.trim();R.push(zn)})}var Rt=y,Bt=!1,Pe=null,Ce="weeks";if(u&&u.isRetroactive!==void 0)Bt=u.isRetroactive,Pe=u.devDuration||null,Ce=u.devDurationUnit||"weeks";else{var St=t("#sowRetroactive");Bt=St&&St.checked,Pe=t("#sowDevDuration")&&parseInt(t("#sowDevDuration").value)||null,Ce=t("#sowDevDurationUnit")?t("#sowDevDurationUnit").value:"weeks"}var We=!1,gt="",jt="",Dt="",Ye="",Ge="";if(u)We=u.isBusinessEntity||!1,gt=u.businessName||"",jt=u.entityType||"",Dt=u.stateOfFormation||"",Ye=u.representativeName||"",Ge=u.representativeTitle||"";else{var ct=t("#sowEntityTypeToggle");We=ct&&ct.checked,We&&(gt=t("#sowBusinessName")?t("#sowBusinessName").value.trim():"",jt=t("#sowEntityType")?t("#sowEntityType").value:"",Dt=t("#sowStateOfFormation")?t("#sowStateOfFormation").value.trim():"",Ye=t("#sowRepName")?t("#sowRepName").value.trim():"",Ge=t("#sowRepTitle")?t("#sowRepTitle").value.trim():"")}if(!v||!b){alert((We?"Business Name":"Client Name")+" and Package Tier are required to generate PDF");return}var qt={essential:{name:"Essential  Landing Page",priceRange:"$1,000 - $3,000",defaultPrice:2e3,timeline:"1-2 weeks",description:"Clean, effective landing page for establishing your online presence quickly.",includes:["Single-page landing page (1-3 sections)","Cross-device optimization (mobile, tablet, desktop)","Clean, modern React/Next.js design","Contact form with validation","Basic SEO setup (meta tags)","DNS & hosting configuration (client pays for domain)","1 round of revisions","14-day post-launch support"],notIncluded:["Custom animations or micro-interactions","Advanced SEO (sitemap, schema)","Analytics integration","User authentication","Database functionality"]},starter:{name:"Tier 1  Starter",priceRange:"$3,000 - $6,000",defaultPrice:4500,timeline:"2-3 weeks",description:"Polished single-page website for individuals and small businesses needing a professional online presence.",includes:["Multi-section single-page React/Next.js website","Brand-matched design system","Cross-device optimization (mobile, tablet, desktop)","Scroll animations & micro-interactions","Multi-step contact forms with validation","GA4 + custom event tracking","Full technical SEO (meta tags, sitemap, schema)","DNS & hosting configuration (client pays for domain)","2 rounds of revisions per milestone","30-day post-launch support"],notIncluded:["User authentication or login systems","Database integration","E-commerce functionality","Backend development"]},growth:{name:"Tier 2  Growth",priceRange:"$6,000 - $12,000",defaultPrice:9e3,timeline:"3-5 weeks",description:"For businesses needing auth-protected content, form data capture, and user data management.",includes:["Everything in Starter","Firebase Authentication (email/password login)","Protected content areas (auth-gated pages/sections)","Form data capture & storage","User session management","Domain, hosting & SSL included (first year)","3 rounds of revisions","45-day post-launch support"],notIncluded:["User dashboard or profile pages","Database-driven content","Multiple API integrations","E-commerce functionality"]},professional:{name:"Tier 3  Professional",priceRange:"$12,000 - $25,000",defaultPrice:18500,timeline:"5-8 weeks",description:"Full-featured application with user dashboard, profiles, and database-driven functionality.",includes:["Everything in Growth","Full Firebase backend (Auth, Firestore, Storage)","User dashboard with personalized content","User profile management","File/media upload system","Multiple API integrations (CRMs, Zapier, etc.)","Email notifications (SendGrid)","Domain, hosting & SSL included (first year)","Priority support response (24-48 hours)","4 rounds of revisions","2 months of included maintenance"],notIncluded:["Role-based access control (RBAC)","Multi-page application routing","E-commerce functionality","Mobile app development"]},enterprise:{name:"Tier 4  Enterprise",priceRange:"$25,000 - $50,000",defaultPrice:37500,timeline:"8-14 weeks",description:"Enterprise-grade web application with full infrastructure, role-based access, and scalable architecture.",includes:["Everything in Professional","Multi-page Next.js application with routing","Role-based access control (admin, editor, user, etc.)","In-app notification system","Custom admin dashboards and analytics","Scalable, production-ready architecture","Database design and optimization","Security best practices implementation","Domain, hosting & SSL included (first year)","Documentation and training materials","5 rounds of revisions","3 months of premium maintenance included","Dedicated support channel"],notIncluded:["Native mobile app development (available separately)","Machine learning / AI features","24/7 on-call support (available separately)"]},custom:{name:"Custom Quote",priceRange:"Custom Pricing",defaultPrice:0,timeline:"TBD",description:"Tailored solution designed to meet your specific requirements.",includes:["Custom scope to be defined"],notIncluded:[]}},Xt={none:{name:"No Maintenance Plan",price:"$0/month",description:"Developer will NOT provide any ongoing maintenance, updates, or support after the post-launch period ends. Client is solely responsible for website maintenance.",includes:[]},basic:{name:"Basic Care",price:"$167/month",description:"Ideal for websites requiring occasional updates and minor adjustments (2-3 hrs/month).",includes:["Minor text and image updates (up to 2-3 hours/month)","Security updates and patches","Uptime monitoring","Monthly backup verification","Email support (48-72 hour response)","Bug fixes for existing functionality"]},professional:{name:"Professional Care",price:"$335/month",description:"For businesses requiring regular updates and more hands-on support (4-6 hrs/month).",includes:["Everything in Basic Care","Content updates (up to 4-6 hours/month)","Performance optimization","Analytics review and recommendations","Priority email support (24-48 hour response)","Minor feature enhancements","Third-party integration monitoring","Monthly status reports"]},premium:{name:"Premium Care",price:"$670/month",description:"Comprehensive support for mission-critical websites and applications (8-12 hrs/month).",includes:["Everything in Professional Care","Priority support (same-day response)","New component development (up to 8-12 hours/month)","SEO optimization and monitoring","A/B testing setup and analysis","Dedicated support channel (Slack/Discord)","Quarterly strategy calls","Proactive performance improvements","Database optimization","Emergency support availability"]}},Ft=qt[b]||qt.custom,In=Xt[P]||Xt.none,ht=0;if(u&&u.payment&&u.payment.total)ht=u.payment.total;else if(b==="custom"&&u&&u.customPrice)ht=parseFloat(u.customPrice)||0;else if(b==="custom"){var Mi=t("#sowCustomPrice");ht=Mi&&parseFloat(Mi.value)||0}else ht=Ft.defaultPrice;var Bn=ht*.5,ui=ht*.25,tn=ht*.25,_t=u&&u.payment&&u.payment.breakdown?u.payment.breakdown:null,cn=_t?_t.basePrice:ht,Ht=_t?_t.addOns:[],nn=_t?_t.discounts:[];_t&&_t.ecommerceOption,_t&&_t.ecommercePrice;var vn=_t?_t.couponCode:null,rn=_t?_t.couponDiscount:0,_n=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),Cn=k?new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"To be determined",Oe='<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Statement of Work - '+v+'</title><link rel="icon" type="image/png" href="https://scarlo.dev/favicons/favicon-96x96.png"><style>* { margin: 0; padding: 0; box-sizing: border-box; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-size-adjust: 100%; }body { font-family: "Times New Roman", Times, serif; font-size: 10pt; line-height: 1.35; color: #000; background: #fff; padding: 0.5in 0.75in; }.sow-container { max-width: 900px; margin: 0 auto; }h1 { font-size: 18pt; text-align: center; margin-bottom: 8px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }h2 { font-size: 10pt; margin-top: 12px; margin-bottom: 6px; font-weight: bold; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 1px solid #000; padding-bottom: 2px; }h3 { font-size: 10pt; margin-top: 8px; margin-bottom: 4px; font-weight: bold; }p { margin-bottom: 6px; text-align: justify; }ul, ol { margin-left: 20px; margin-bottom: 6px; }li { margin-bottom: 2px; }.header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #000; }.subtitle { font-size: 11pt; margin-top: 6px; font-style: italic; }.meta-date { font-size: 9pt; margin-top: 6px; font-style: italic; }.info-box { padding: 8px 12px; border: 1px solid #000; border-left: 3px solid #000; margin: 8px 0; page-break-inside: avoid; break-inside: avoid; }.info-box h3 { margin-top: 0; }.info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 4px 20px; margin-top: 6px; }.info-item { font-size: 9pt; word-wrap: break-word; overflow-wrap: break-word; }.section { margin-bottom: 10px; }.deferred-terms { page-break-inside: avoid; break-inside: avoid; }.section-compact { page-break-inside: avoid; break-inside: avoid; }.package-box { border: 1px solid #000; padding: 8px 12px; margin: 8px 0; page-break-inside: avoid; break-inside: avoid; }.package-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; padding-bottom: 6px; border-bottom: 1px solid #000; }.package-name { font-size: 11pt; font-weight: bold; }.package-price { font-size: 10pt; font-weight: bold; }.feature-list { columns: 2; column-gap: 20px; font-size: 9pt; }.feature-list li { break-inside: avoid; margin-bottom: 1px; }.not-included { border-left: 3px solid #000; }.not-included h3 { font-style: italic; }.payment-table { width: 100%; border-collapse: collapse; margin: 8px 0; font-size: 9pt; page-break-inside: avoid; break-inside: avoid; }.payment-table th, .payment-table td { border: 1px solid #000; padding: 5px 8px; text-align: left; }.payment-table th { font-weight: bold; background: #f5f5f5; }.payment-table .total-row { font-weight: bold; font-size: 10pt; border-top: 2px solid #000; }.timeline-box { border: 1px solid #000; padding: 8px 12px; margin: 8px 0; page-break-inside: avoid; break-inside: avoid; }.timeline-header { font-weight: bold; margin-bottom: 8px; font-size: 10pt; border-bottom: 1px solid #000; padding-bottom: 4px; }.milestone { margin-bottom: 6px; padding-left: 8px; border-left: 2px solid #000; }.milestone:last-child { margin-bottom: 0; }.milestone-title { font-weight: bold; font-size: 9pt; }.milestone-desc { font-size: 9pt; }.assumptions-box { border: 1px solid #000; border-left: 3px solid #000; padding: 8px 12px; margin: 8px 0; }.assumptions-box h3 { margin-top: 0; font-size: 9pt; }.assumptions-box li { font-size: 9pt; }.legal-notice { border: 1px solid #000; padding: 8px 12px; margin: 10px 0; font-size: 9pt; }.signature-section { margin-top: 20px; page-break-before: always; }.signature-grid { display: flex; justify-content: space-between; gap: 30px; margin-top: 15px; }.signature-block { flex: 1; }.signature-block h3 { font-size: 9pt; margin-bottom: 6px; }.signature-line { border-bottom: 1px solid #000; height: 50px; margin: 6px 0; display: flex; align-items: flex-end; justify-content: center; }.signature-line img { max-height: 45px; max-width: 100%; filter: invert(1) grayscale(1); }.signature-label { font-size: 8pt; font-style: italic; margin-top: 3px; }.signature-name { font-weight: bold; margin-top: 6px; font-size: 9pt; }.signature-date { font-size: 9pt; margin-top: 3px; }.footer { margin-top: 20px; text-align: center; font-size: 8pt; border-top: 1px solid #000; padding-top: 10px; }.sow-id { font-size: 7pt; margin-top: 4px; font-style: italic; }.highlight { font-weight: bold; }.maintenance-box { border: 1px solid #000; padding: 8px 12px; margin: 8px 0; page-break-inside: avoid; break-inside: avoid; }.maintenance-header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 6px; border-bottom: 1px solid #000; margin-bottom: 6px; }.maintenance-name { font-weight: bold; font-size: 10pt; }.maintenance-price { font-weight: bold; }.logo { max-width: 180px; max-height: 60px; margin-bottom: 15px; }@media screen and (max-width: 768px) { body { padding: 0.3in 0.25in; } .sow-container { max-width: 100%; } }@media print { body { padding: 0.4in 0.6in; } @page { margin: 0.5in 0.75in 0.5in 0.75in; } .info-box, .package-box, .timeline-box, .maintenance-box, .payment-table, .legal-notice, .deferred-terms { page-break-inside: avoid !important; break-inside: avoid !important; } h2, h3 { page-break-after: avoid !important; } }@page { margin: 0.5in 0.75in; size: letter; }</style></head><body><div class="sow-container"><div class="header"><img src="'+c()+'" alt="Scarlo Logo" class="logo" /><h1>Statement of Work</h1><div class="subtitle">Scarlo  Professional Web Development</div><div class="meta-date">Document Generated: '+_n+'</div></div><div class="legal-notice"><strong>INCORPORATION:</strong> This SOW is incorporated into and governed by the Website Development Agreement between Scarlo and '+v+'. All Agreement terms apply. In case of conflict, the Agreement controls.</div><div class="section"><h2>1. Client Information</h2><div class="info-box"><div class="info-grid">'+(We?'<div class="info-item"><strong>Business Name:</strong> '+gt+'</div><div class="info-item"><strong>Entity Type:</strong> '+jt+(Dt?" ("+Dt+")":"")+'</div><div class="info-item"><strong>Representative:</strong> '+Ye+", "+Ge+"</div>":'<div class="info-item"><strong>Client Name:</strong> '+v+"</div>")+'<div class="info-item"><strong>Contact:</strong> '+Rt+'</div><div class="info-item"><strong>Package Selected:</strong> '+Ft.name+"</div>"+(Bt?'<div class="info-item"><strong>Development Duration:</strong> '+(Pe||x)+" "+Ce+"</div>":'<div class="info-item"><strong>Estimated Timeline:</strong> '+x+" weeks</div>")+'<div class="info-item"><strong>Estimated Final Revision:</strong> '+Cn+'</div><div class="info-item"><strong>SOW Reference:</strong> '+B+'</div></div></div></div><div class="section"><h2>2. Project Overview</h2><div class="package-box"><div class="package-header"><span class="package-name">'+Ft.name+'</span><span class="package-price">'+Ft.priceRange+'</span></div><p style="font-size: 9pt; margin-bottom: 10px;">'+Ft.description+'</p><h3 style="font-size: 9pt; margin-top: 10px;">Included in This Package:</h3><ul class="feature-list">';b==="custom"&&Ht&&Ht.length>0?Ht.forEach(function(dt){Oe+="<li>"+dt.label+"</li>"}):Ft.includes.forEach(function(dt){Oe+="<li>"+dt+"</li>"}),Oe+="</ul></div></div>";var Je=Ht&&b!=="custom"?Ht.filter(function(dt){return dt.price>0}):[];Je.length>0&&(Oe+='<div class="section"><h2>3. Additional Features</h2><div class="info-box"><ul class="feature-list">',Je.forEach(function(dt){Oe+="<li>"+dt.label+"</li>"}),Oe+="</ul></div></div>"),S&&S.trim()&&(Oe+='<div class="section"><h2>'+(Je.length>0?"4":"3")+'. Special Requirements & Notes</h2><div class="info-box"><p style="font-size: 9pt; margin-bottom: 0;">'+S+"</p></div></div>");var Xe=3+(Je.length>0?1:0)+(S&&S.trim()?1:0);Bt||(Oe+='<div class="section"><h2>'+Xe+'. Project Timeline & Milestones</h2><div class="timeline-box"><div class="timeline-header">Estimated Project Duration: '+x+' Weeks</div><div class="milestone"><div class="milestone-title">1. Discovery & Planning (Week 1)</div><div class="milestone-desc">Requirements gathering, sitemap, wireframes, project kickoff.</div></div><div class="milestone"><div class="milestone-title">2. UI/UX Design (Weeks 2-3)</div><div class="milestone-desc">Visual mockups, component design, approval. <strong>Milestone Payment due.</strong></div></div><div class="milestone"><div class="milestone-title">3. Development (Weeks 4-'+Math.max(4,parseInt(x)-2||4)+')</div><div class="milestone-desc">Frontend/backend development, feature implementation, testing.</div></div><div class="milestone"><div class="milestone-title">4. Testing & Deployment (Final Week)</div><div class="milestone-desc">QA, bug fixes, optimization, deployment. <strong>Final Payment due.</strong></div></div></div><p style="font-size: 9pt; font-style: italic; margin-top: 6px;">Timeline is an estimate. See Agreement Section 8 for terms.</p></div>',Xe++),Oe+='<div class="section"><h2>'+Xe+'. Pricing Summary</h2><table class="payment-table" style="width: 100%;"><tbody>',Oe+='<tr><td style="width: 70%;"><strong>'+Ft.name+'</strong></td><td style="width: 30%; text-align: right;"><strong>$'+cn.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</strong></td></tr>",Ht&&Ht.length>0&&Ht.forEach(function(dt){var zn=dt.price===0?'<span style="color: #2e7d32; font-style: italic;">Included</span>':'<span style="color: #2e7d32;">+$'+dt.price.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</span>";Oe+="<tr><td>"+dt.label+'</td><td style="text-align: right;">'+zn+"</td></tr>"}),nn&&nn.length>0&&nn.forEach(function(dt){Oe+="<tr><td>"+dt.label+' <span style="font-size: 8pt; color: #666;">(removed)</span></td><td style="text-align: right; color: #c62828;">-$'+dt.price.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</td></tr>"}),vn&&rn>0&&(Oe+="<tr><td>Coupon: "+vn+'</td><td style="text-align: right; color: #c62828;">-$'+rn.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</td></tr>"),Oe+='<tr style="border-top: 2px solid #333;"><td><strong>TOTAL</strong></td><td style="text-align: right;"><strong>$'+ht.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</strong></td></tr></tbody></table></div>",Xe++;var Ot={essential:{local:"$1,500 - $4,000",localHigh:4e3},starter:{local:"$4,000 - $8,000",localHigh:8e3},growth:{local:"$8,000 - $15,000",localHigh:15e3},professional:{local:"$15,000 - $35,000",localHigh:35e3},enterprise:{local:"$35,000 - $80,000",localHigh:8e4}},ut;b==="custom"?ht<=3e3?ut=Ot.essential:ht<=6e3?ut=Ot.starter:ht<=12e3?ut=Ot.growth:ht<=25e3?ut=Ot.professional:ut=Ot.enterprise:ut=Ot[b]||Ot.starter;var $i=Math.max(0,ut.localHigh-ht);if(Oe+='<div class="section" style="page-break-inside: avoid;"><h2>'+Xe+'. Your Value Summary</h2><div style="border: 2px solid #000; padding: 12px 15px; margin: 8px 0;"><div style="display: flex; justify-content: space-between; align-items: center; padding-bottom: 10px; border-bottom: 1px solid #ccc; margin-bottom: 10px;"><div style="font-size: 9pt;"><div style="color: #666; margin-bottom: 2px;">Fresno/Central Valley agencies typically charge:</div><div style="font-size: 11pt; font-weight: bold;">'+ut.local+'</div></div><div style="text-align: right;"><div style="color: #666; font-size: 9pt; margin-bottom: 2px;">Your Scarlo Quote:</div><div style="font-size: 14pt; font-weight: bold;">$'+ht.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</div></div></div>"+($i>500?'<div style="background: #f0f7f0; padding: 8px 12px; margin-bottom: 10px; text-align: center; border-left: 3px solid #2e7d32;"><span style="font-size: 9pt; color: #666;">Potential savings vs. local market: </span><strong style="font-size: 11pt; color: #2e7d32;">Up to $'+$i.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</strong></div>":"")+'<div style="font-size: 9pt;"><div style="margin-bottom: 4px;"><strong style="color: #2e7d32;"></strong> <strong>Advanced Functionality</strong>  Real features that work: auth systems, dashboards, integrations  not static pages</div><div style="margin-bottom: 4px;"><strong style="color: #2e7d32;"></strong> <strong>Modern Tech Stack</strong>  React/Next.js built for speed, SEO, and scale  not outdated WordPress themes</div><div><strong style="color: #2e7d32;"></strong> <strong>Creative Solutions</strong>  Your online presence matters. Stand out in a market full of cookie-cutter websites</div></div></div><p style="font-size: 7pt; color: #888; margin-top: 4px; margin-bottom: 0;">Market rates based on Fresno/Central Valley research (2024-2025). Full industry comparison: <a href="https://scarlo.dev/pricing" target="_blank" style="color: #2e7d32; text-decoration: underline;">scarlo.dev/pricing</a></p></div>',Xe++,Bt?Oe+='<div class="section"><h2>'+Xe+'. Payment Summary</h2><div class="info-box" style="text-align: center; padding: 15px;"><div style="font-size: 10pt; color: #666; margin-bottom: 5px;">Total Project Cost</div><div style="font-size: 16pt; font-weight: bold;">$'+ht.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+'</div></div><p style="font-size: 9pt; font-style: italic;">Payment terms as agreed. IP rights transfer upon full payment (Section 6.6).</p></div>':Oe+='<div class="section"><h2>'+Xe+'. Payment Structure</h2><table class="payment-table"><thead><tr><th style="width: 25%;">Payment</th><th style="width: 45%;">Description</th><th style="width: 15%;">Percentage</th><th style="width: 15%;">Amount</th></tr></thead><tbody><tr><td><strong>Deposit</strong></td><td>Before work begins</td><td>50%</td><td><strong>$'+Bn.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</strong></td></tr><tr><td><strong>Milestone</strong></td><td>Upon design approval</td><td>25%</td><td><strong>$"+ui.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</strong></td></tr><tr><td><strong>Final</strong></td><td>Prior to deployment</td><td>25%</td><td><strong>$"+tn.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+'</strong></td></tr><tr class="total-row"><td colspan="2"><strong>TOTAL PROJECT COST</strong></td><td><strong>100%</strong></td><td><strong>$'+ht.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+'</strong></td></tr></tbody></table><p style="font-size: 9pt; font-style: italic;">Late payments subject to interest (Section 3.3). IP rights transfer upon full payment (Section 6.6).</p></div>',Xe++,u.payment&&u.payment.deferred&&u.payment.deferred.enabled){var Ue=u.payment.deferred;Oe+='<div class="section"><h2>'+Xe+'. Deferred Payment Agreement</h2><div style="background: #fff8e6; border: 2px solid #f59e0b; padding: 10px; margin-bottom: 10px;"><p style="font-size: 9pt; margin: 0 0 5px; color: #92400e; font-weight: bold;">DEFERRED PAYMENT TERMS</p><p style="font-size: 8pt; margin: 0; color: #78350f;">Client has elected to defer a portion of payment. The following terms apply to the deferred amount and are binding upon both parties.</p></div><table class="payment-table"><thead><tr><th style="width: 50%;">Description</th><th style="width: 25%;">Due Date</th><th style="width: 25%;">Amount</th></tr></thead><tbody>';var es={weekly:"Weekly",biweekly:"Bi-Weekly",semimonthly:"Semi-Monthly",monthly:"Monthly",bimonthly:"Bi-Monthly"};if((Ue.splitType==="custom"||Ue.splitType==="recurring")&&Ue.customSchedule&&Ue.customSchedule.length>0){if(Ue.splitType==="recurring"&&Ue.frequency){var oe=es[Ue.frequency]||Ue.frequency;Oe+='<tr style="background: #e0f2fe;"><td colspan="3" style="font-size: 8pt; color: #0369a1; padding: 6px 8px;"><strong>Payment Plan:</strong> '+Ue.customSchedule.length+" "+oe.toLowerCase()+" payments of $"+(Ue.customSchedule[0].amount||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</td></tr>"}Ue.customSchedule.forEach(function(dt,zn){var yn=dt.dueDate?new Date(dt.dueDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"TBD";Oe+="<tr><td>Payment "+(zn+1)+"</td><td>"+yn+"</td><td><strong>$"+(dt.amount||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</strong></td></tr>"})}else{var ue=Ue.dueDate?new Date(Ue.dueDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"TBD";Oe+="<tr><td>Deferred Payment (Lump Sum)</td><td>"+ue+"</td><td><strong>$"+(Ue.deferredAmount||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</strong></td></tr>"}Oe+='<tr class="total-row"><td colspan="2"><strong>TOTAL DEFERRED AMOUNT</strong></td><td><strong>$'+(Ue.deferredAmount||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</strong></td></tr>";var Ae=Ue.lateFeeWaived||Ue.feeWaived,Le=Ue.deferredAmount*.1;Oe+='<tr style="background: #fef3c7;"><td>Late Fee (10%)'+(Ae?' <em style="color:#666;">(WAIVED)</em>':"")+'</td><td style="font-size: 8pt; color: #92400e;">If payment is late</td><td>'+(Ae?"<s>$"+Le.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</s> $0":"<strong>$"+Le.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+"</strong>")+"</td></tr></tbody></table>";var Se=Ue.splitType==="recurring"||Ue.splitType==="custom"&&Ue.customSchedule&&Ue.customSchedule.length>1,Te=Ae?"Waived for this agreement.":Se?"10% of missed payment amount per late payment. Applied after 5-day grace period.":"One-time 10% fee ($"+Le.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+") if payment exceeds grace period.";Oe+='<div class="deferred-terms"><h3 style="font-size: 9pt; margin-top: 10px; margin-bottom: 5px;">Terms and Conditions:</h3><ol style="font-size: 8pt; margin: 5px 0; padding-left: 18px; line-height: 1.3;"><li><strong>Due Date & Grace Period:</strong> Payments due by specified date(s). 5-day grace period before fees apply.</li><li><strong>Late Fee:</strong> '+Te+"</li><li><strong>Interest (30+ Days):</strong> 1.5% monthly (18% annually) on balances 30+ days overdue. Compounds monthly.</li><li><strong>Service Suspension (60+ Days):</strong> Website may be taken offline after 60 days non-payment. 7-day written notice provided. Restored within 24-48 hrs of payment.</li><li><strong>Collection Costs:</strong> Client pays all collection costs, attorney fees, court costs if collection action required.</li><li><strong>IP Rights:</strong> All intellectual property rights retained by Developer until full payment received.</li><li><strong>Default Remedies:</strong> Upon default, Developer may: (a) accelerate payments, (b) apply fees/interest, (c) suspend services, (d) disable website, (e) pursue legal remedies.</li>",Ue.allowPartialPayments&&(Oe+="<li><strong>Partial Payments:</strong> Accepted anytime. Applied to: (1) collection costs, (2) interest, (3) late fees, (4) principal.</li>"),Ue.maintenanceDuringDeferral?Oe+="<li><strong>Maintenance:</strong> Monthly maintenance fees due during deferral. Separate from deferred project payments.</li>":Oe+="<li><strong>Maintenance:</strong> Maintenance fees deferred with project payments.</li>",Oe+="<li><strong>Notice:</strong> 7-day written notice via email before any fees or suspension.</li></ol></div></div>",Xe++}if(Oe+='<div class="section"><h2>'+Xe+'. Ongoing Maintenance Plan</h2><div class="maintenance-box"><div class="maintenance-header"><span class="maintenance-name">'+In.name+'</span><span class="maintenance-price">'+In.price+'</span></div><p style="font-size: 9pt; margin: 10px 0;">'+In.description+"</p>",P==="none"&&(Oe+='<div style="background: #fff3cd; border: 2px solid #856404; padding: 12px; margin: 10px 0; border-radius: 4px;"><p style="font-size: 9pt; margin: 0; color: #856404; font-weight: bold;"> IMPORTANT NOTICE:</p><p style="font-size: 9pt; margin: 5px 0 0; color: #856404;">By selecting No Maintenance Plan, Client acknowledges and agrees that Developer will NOT provide any ongoing maintenance, updates, security patches, bug fixes, or technical support after the included post-launch support period ends. Client assumes full responsibility for all website maintenance going forward.</p></div>'),In.includes&&In.includes.length>0&&(Oe+='<h3 style="font-size: 9pt; margin-top: 10px;">Maintenance Includes:</h3><ul>',In.includes.forEach(function(dt){Oe+="<li>"+dt+"</li>"}),Oe+="</ul>"),Oe+="</div>",P==="none"?Oe+='<p style="font-size: 8pt; font-style: italic;">Support ends after the included post-launch period. See Agreement Section 7.</p>':Oe+='<p style="font-size: 8pt; font-style: italic;">Begins after post-launch support. Billed monthly. 30-day cancellation notice. See Agreement Section 7.</p>',Oe+="</div>",Xe++,Oe+='<div class="section"><h2>'+Xe+'. Assumptions & Dependencies</h2><div class="assumptions-box"><ul><li><strong>Content:</strong> Client provides all content within 5 business days of request</li><li><strong>Feedback:</strong> Client provides consolidated feedback within 5 business days</li><li><strong>Contact:</strong> Client designates one authorized representative for approvals</li><li><strong>Third-Party:</strong> Required APIs/services remain available throughout project</li><li><strong>Domain & Hosting:</strong> Essential & Starter: Client pays for domain (Developer handles DNS & hosting configuration). Growth, Professional & Enterprise: Domain, hosting & SSL included (first year).</li><li><strong>Rights:</strong> Client has rights to all materials provided</li><li><strong>Scope:</strong> Project scope remains substantially unchanged</li></ul><p style="font-size: 8pt; margin-bottom: 0; margin-top: 6px;">Changes to assumptions may require a Change Order (Section 9).</p></div></div>',Xe++,Oe+='<div class="section"><h2>'+Xe+'. Acceptance Criteria</h2><div class="info-box"><p style="font-size: 9pt; margin-bottom: 4px;"><strong>Process:</strong> Client has 5 business days to review deliverables. Acceptance occurs when Client: (a) approves in writing, (b) fails to respond, or (c) uses in production. Acceptance triggers payment.</p><p style="font-size: 9pt; margin-bottom: 0;"><strong>Final Criteria:</strong> Modern browser compatibility (Chrome, Firefox, Safari, Edge), mobile responsiveness (iOS/Android), all features functional, forms working, page load under 5 seconds.</p></div></div>',Xe++,Oe+='<div class="section"><h2>'+Xe+'. Scope Changes</h2><div class="info-box"><p style="font-size: 9pt; margin-bottom: 4px;">Any scope modifications require a written Change Order (Agreement Section 9).</p><p style="font-size: 9pt; margin-bottom: 0;"><strong>Process:</strong> Client submits request  Developer evaluates impact  Change Order issued with revised scope/timeline/pricing  Client signs and pays deposit  Work proceeds.</p></div></div>',Oe+='<div class="signature-section"><h2>Signatures</h2><p style="font-size: 9pt;">By signing, both parties agree to this SOW and confirm it accurately reflects the project scope, deliverables, timeline, and pricing. Subject to the Website Development Agreement.</p><div class="signature-grid"><div class="signature-block"><h3>DEVELOPER: Scarlo</h3>'+(We?'<p style="font-size: 9pt; margin-bottom: 8px;">&nbsp;</p>':"")+'<div class="signature-line">'+(W?'<img src="'+W+'" alt="Developer Signature" />':'<span style="font-style: italic;">Awaiting Signature</span>')+'</div><div class="signature-label">Authorized Signature</div><div class="signature-name">'+X+'</div><div class="signature-date">Date: '+(J||"_______________")+'</div></div><div class="signature-block"><h3>CLIENT: '+(We?gt:v)+"</h3>"+(We?'<p style="font-size: 9pt; margin-bottom: 8px;">'+jt+(Dt?", "+Dt:"")+"</p>":"")+'<div class="signature-line">'+(V?'<img src="'+V+'" alt="Client Signature" />':'<span style="font-style: italic;">Awaiting Signature</span>')+'</div><div class="signature-label">Authorized Signature</div><div class="signature-name">'+(We?"By: "+Ye+", "+Ge:H)+'</div><div class="signature-date">Date: '+(O||"_______________")+"</div></div></div></div>",u.payment&&u.payment.deferred&&u.payment.deferred.enabled){var Ue=u.payment.deferred,ye=Ue.lateFeeWaived||Ue.feeWaived,nt=Ue.deferredAmount*.1,He=Ue.deferredAmount*.015;Oe+='<div class="signature-section" style="margin-top: 15px; border-top: 2px solid #f59e0b; padding-top: 10px;"><h2 style="color: #92400e; font-size: 11pt; margin-bottom: 8px;">Deferred Payment Acknowledgment</h2><div style="background: #fff8e6; padding: 10px; margin-bottom: 10px; border: 1px solid #f59e0b;"><p style="font-size: 8pt; margin: 0 0 5px; font-weight: bold;">By signing below, Client acknowledges:</p><ul style="font-size: 8pt; margin: 0; padding-left: 18px; line-height: 1.4;"><li><strong>Deferred:</strong> $'+(Ue.deferredAmount||0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+" per schedule above</li><li><strong>Late Fee:</strong> "+(ye?"Waived":"10% ($"+nt.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+") if 5+ days late")+"</li><li><strong>Interest:</strong> 1.5%/month (~$"+He.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})+'/mo) after 30 days</li><li><strong>Suspension:</strong> Site offline after 60 days non-payment</li><li><strong>Collection:</strong> Client pays all collection/legal costs</li><li><strong>IP Rights:</strong> Retained by Developer until paid</li></ul></div><div class="signature-grid"><div class="signature-block"><h3>CLIENT ACKNOWLEDGMENT</h3><div class="signature-line">'+(Ue.acknowledgmentSigned&&V?'<img src="'+V+'" alt="Client Acknowledgment" />':'<span style="font-style: italic;">Awaiting Acknowledgment</span>')+'</div><div class="signature-label">Client Signature</div><div class="signature-name">'+(We?"By: "+Ye:H)+'</div><div class="signature-date">Date: '+(Ue.acknowledgmentDate||"_______________")+"</div></div></div></div>"}Oe+='<div class="footer"><p><strong> '+new Date().getFullYear()+' Scarlo</strong>  Professional Web Development | Fresno, CA</p><p class="sow-id">SOW: '+B+" | Generated: "+new Date().toLocaleString()+'</p><p style="font-size: 7pt; font-style: italic;">Valid for 30 days. Must be signed with the Website Development Agreement.</p></div></div><script>window.onload = function() {  var images = document.images;  var loaded = 0;  var total = images.length;  if (total === 0) { setTimeout(function() { window.print(); }, 300); return; }  for (var i = 0; i < total; i++) {    if (images[i].complete) { loaded++; }    else { images[i].onload = images[i].onerror = function() { loaded++; if (loaded >= total) setTimeout(function() { window.print(); }, 300); }; }  }  if (loaded >= total) setTimeout(function() { window.print(); }, 300);};<\/script></body></html>';var it=new Blob([Oe],{type:"text/html;charset=utf-8"}),Kt=URL.createObjectURL(it),wi=window.open(Kt,"_blank");if(!wi){URL.revokeObjectURL(Kt),alert("Please allow popups to download the PDF");return}wi.onload=function(){URL.revokeObjectURL(Kt)}},M.prototype.generateSOWPDFFromData=function(u){console.log("Generating PDF from saved SOW data:",u.clientName),this.generateSOWPDF(u)},M.prototype.editSOW=function(u){var v=this;console.log(" Opening editor for SOW:",u.id,"-",u.clientName),this.showSOWCreator(),setTimeout(function(){console.log("Populating form fields...");var y={clientName:t("#sowClientName"),clientEmail:t("#sowClientEmail"),clientPhone:t("#sowClientPhone"),clientIdToggle:t("#clientIdTypeToggle"),emailLabel:t("#emailToggleLabel"),phoneLabel:t("#phoneToggleLabel"),package:t("#sowPackage"),weeks:t("#sowWeeks"),startDate:t("#sowStartDate"),notes:t("#sowNotes"),maintenance:t("#sowMaintenance"),customPrice:t("#sowCustomPrice"),customSection:t("#customPricingSection")};if(y.clientName&&(y.clientName.value=u.clientName||""),u.clientPhone&&!u.clientEmail?(y.clientIdToggle&&(y.clientIdToggle.checked=!0),y.clientEmail&&(y.clientEmail.style.display="none"),y.clientPhone&&(y.clientPhone.style.display="block",y.clientPhone.value=p(u.clientPhone)),y.emailLabel&&y.emailLabel.classList.remove("active"),y.phoneLabel&&y.phoneLabel.classList.add("active")):(y.clientIdToggle&&(y.clientIdToggle.checked=!1),y.clientPhone&&(y.clientPhone.style.display="none"),y.clientEmail&&(y.clientEmail.style.display="block",y.clientEmail.value=u.clientEmail||""),y.phoneLabel&&y.phoneLabel.classList.remove("active"),y.emailLabel&&y.emailLabel.classList.add("active")),y.weeks&&(y.weeks.value=u.estimatedWeeks||""),y.startDate&&(y.startDate.value=u.startDate||""),y.notes&&(y.notes.value=u.notes||""),y.package&&(y.package.value=u.packageType||"",u.packageType==="custom"&&(y.customSection&&(y.customSection.style.display="block"),y.customPrice&&u.payment))){var b=u.payment.breakdown&&u.payment.breakdown.basePrice?u.payment.breakdown.basePrice:u.payment.total;y.customPrice.value=b||""}y.maintenance&&(y.maintenance.value=u.maintenancePlan||"none");var x=t("#sowRetroactive"),k=t("#sowDevDuration"),S=t("#sowDevDurationUnit"),P=t("#retroactiveDurationFields"),R=t("#sowRetroactiveEndDate"),B=t("#sowWeeks"),V=B?B.parentElement:null;x&&u.isRetroactive&&(x.checked=!0,P&&(P.style.display="block"),V&&(V.style.display="none"),k&&u.devDuration&&(k.value=u.devDuration),S&&u.devDurationUnit&&(S.value=u.devDurationUnit),R&&(u.retroactiveEndDate||u.startDate)&&(R.value=u.retroactiveEndDate||u.startDate),typeof toggleRetroactiveFields=="function"&&toggleRetroactiveFields());var H=t("#sowEntityTypeToggle"),O=t("#sowIndividualFields"),W=t("#sowBusinessFields"),X=t("#sowIndividualLabel"),J=t("#sowBusinessLabel"),Y=t("#sowBusinessName"),K=t("#sowEntityType"),ae=t("#sowStateOfFormation"),se=t("#sowRepName"),le=t("#sowRepTitle"),xe=t("#sowBusinessEmail"),Me=t("#sowBusinessPhone");if(u.isBusinessEntity&&H?(H.checked=!0,O&&(O.style.display="none"),W&&(W.style.display="block"),X&&X.classList.remove("active"),J&&J.classList.add("active"),Y&&(Y.value=u.businessName||""),K&&(K.value=u.entityType||""),ae&&(ae.value=u.stateOfFormation||""),se&&(se.value=u.representativeName||""),le&&(le.value=u.representativeTitle||""),u.clientPhone&&!u.clientEmail?(xe&&(xe.style.display="none"),Me&&(Me.style.display="block",Me.value=p(u.clientPhone))):(Me&&(Me.style.display="none"),xe&&(xe.style.display="block",xe.value=u.clientEmail||""))):H&&(H.checked=!1,W&&(W.style.display="none"),O&&(O.style.display="block"),J&&J.classList.remove("active"),X&&X.classList.add("active")),u.payment&&u.payment.deferred&&u.payment.deferred.enabled){var ve=u.payment.deferred,Ee=t("#sowDeferredPayment"),Be=t("#deferredPaymentFields");if(Ee){Ee.checked=!0,Be&&(Be.style.display="block");var Qe=document.querySelector('input[name="deferred_split"][value="'+ve.splitType+'"]');Qe&&(Qe.checked=!0);var Ze=t("#lumpSumFields"),tt=t("#recurringFields"),$e=t("#customSplitFields");if(Ze&&(Ze.style.display="none"),tt&&(tt.style.display="none"),$e&&($e.style.display="none"),ve.splitType==="custom"){$e&&($e.style.display="block");var st=t("#customPaymentsList");st&&ve.customSchedule&&ve.customSchedule.length>0&&(st.innerHTML="",ve.customSchedule.forEach(function(Je){if(typeof addCustomPaymentRow=="function"){addCustomPaymentRow();var Xe=st.lastElementChild;if(Xe){var Ot=Xe.querySelector(".custom-payment-amount"),ut=Xe.querySelector(".custom-payment-date");Ot&&(Ot.value=Je.amount||""),ut&&(ut.value=Je.dueDate||"")}}}))}else if(ve.splitType==="recurring"){tt&&(tt.style.display="block");var qe=t("#sowRecurringTotalAmount"),lt=t("#sowRecurringStartDate"),Rt=t("#sowRecurringFrequency"),Bt=t("#sowRecurringCalcMode"),Pe=t("#sowRecurringPaymentAmount"),Ce=t("#sowRecurringPaymentCount");qe&&(qe.value=ve.deferredAmount||""),lt&&(lt.value=ve.startDate||""),Rt&&(Rt.value=ve.frequency||"biweekly"),Bt&&(Bt.value=ve.calculationMode||"amount"),typeof toggleRecurringCalcMode=="function"&&toggleRecurringCalcMode(),ve.calculationMode==="amount"?Pe&&(Pe.value=ve.amountPerPayment||""):Ce&&(Ce.value=ve.numberOfPayments||""),typeof updateRecurringSchedule=="function"&&updateRecurringSchedule()}else{Ze&&(Ze.style.display="block");var St=t("#sowDeferredAmount"),We=t("#sowDeferredDueDate");St&&(St.value=ve.deferredAmount||""),We&&(We.value=ve.dueDate||"")}var gt=document.querySelectorAll(".deferred-type-card");gt.forEach(function(Je){var Xe=Je.querySelector('input[type="radio"]');Xe&&Xe.checked?(Je.style.borderColor="#6366f1",Je.style.background="rgba(99, 102, 241, 0.15)"):(Je.style.borderColor="transparent",Je.style.background="rgba(255, 255, 255, 0.03)")});var jt=t("#sowWaiveLateFee"),Dt=t("#sowAllowPartialPayments"),Ye=t("#sowMaintenanceDuringDeferral");jt&&(jt.checked=ve.lateFeeWaived||ve.feeWaived||!1),Dt&&(Dt.checked=ve.allowPartialPayments!==!1),Ye&&(Ye.checked=ve.maintenanceDuringDeferral!==!1),typeof calculateLateFee=="function"&&calculateLateFee()}}var Ge={essential:{min:1e3,max:3e3,default:2e3},starter:{min:3e3,max:6e3,default:4500},growth:{min:6e3,max:12e3,default:9e3},professional:{min:12e3,max:25e3,default:18500},enterprise:{min:25e3,max:5e4,default:37500}},ct={none:0,basic:167,professional:335,premium:670},qt={responsive_design:{default:200,thirdParty:!1},custom_ui:{default:450,thirdParty:!1},animations:{default:275,thirdParty:!1},seo_optimization:{default:200,thirdParty:!1},analytics:{default:175,thirdParty:!1},contact_forms:{default:250,thirdParty:!1},firebase_auth:{default:350,thirdParty:!0,note:"Firebase costs"},firebase_db:{default:425,thirdParty:!0,note:"Firebase costs"},user_profiles:{default:550,thirdParty:!1},file_storage:{default:300,thirdParty:!0,note:"Firebase costs"},api_integration:{default:450,thirdParty:!1},email_integration:{default:325,thirdParty:!0,note:"SendGrid costs"},newsletter:{default:200,thirdParty:!1,addon:!0},user_roles:{default:450,thirdParty:!1},notifications:{default:400,thirdParty:!1},booking_basic:{default:450,thirdParty:!1,addon:!0},booking_system:{default:1100,thirdParty:!1,addon:!0},blog:{default:400,thirdParty:!1,addon:!0},cms_integration:{default:600,thirdParty:!1,addon:!0},gallery:{default:325,thirdParty:!1,addon:!0},music_media:{default:275,thirdParty:!1,addon:!0},social_feed:{default:250,thirdParty:!1,addon:!0}},Xt={none:{price:0,label:"No E-Commerce"},basic_cart:{price:5500,label:"Basic E-Commerce Setup",thirdParty:!0,note:"Stripe fees"},full_store:{price:14e3,label:"Full E-Commerce Store",thirdParty:!0,note:"Stripe fees"}},Ft={essential:["responsive_design","contact_forms"],starter:["responsive_design","custom_ui","animations","seo_optimization","analytics","contact_forms"],growth:["responsive_design","custom_ui","animations","seo_optimization","analytics","firebase_auth","contact_forms"],professional:["responsive_design","custom_ui","animations","seo_optimization","analytics","firebase_auth","firebase_db","user_profiles","file_storage","api_integration","contact_forms","email_integration","newsletter"],enterprise:["responsive_design","custom_ui","animations","seo_optimization","analytics","firebase_auth","firebase_db","user_profiles","user_roles","file_storage","api_integration","contact_forms","email_integration","notifications","newsletter"],custom:[]},In=u.packageType||"",ht=Ft[In]||[];if(u.features&&u.features.length>0){console.log("Checking",u.features.length,"features");var Mi=document.querySelectorAll('.sow-checkboxes input[type="checkbox"]');Mi.forEach(function(Je){Je.checked=!1,Je.parentElement.classList.remove("feature-included");var Xe=Je.parentElement.textContent.trim(),Ot=Je.parentElement.querySelector(".third-party-note");Ot&&(Xe=Xe.replace(Ot.textContent,"").trim()),u.features.some(function(ut){return ut.indexOf(Xe)!==-1||Xe.indexOf(ut)!==-1})&&(Je.checked=!0),ht.indexOf(Je.value)!==-1&&Je.parentElement.classList.add("feature-included")})}var Bn="none";u.payment&&u.payment.breakdown&&u.payment.breakdown.ecommerceOption&&(Bn=u.payment.breakdown.ecommerceOption);var ui=document.querySelector('input[name="ecommerce_option"][value="'+Bn+'"]');ui&&(ui.checked=!0);var tn=t("#sowCouponSelect");tn&&u.couponCode&&(tn.value=u.couponCode),setTimeout(function(){v.updateSOWPricing(Ge,ct,qt,Xt,Ft)},100);var _t=t(".sow-form-header h4");if(_t&&(_t.innerHTML=" Edit Statement of Work"),u.editingFromChangeRequest){var cn=u.editingFromChangeRequest,Ht={package:" Package Tier",features:" Features & Deliverables",timeline:" Timeline",payment:" Payment Structure",maintenance:" Maintenance Plan",other:" Other"},nn=cn.sections.map(function(Je){return'<span style="background: rgba(251, 191, 36, 0.2); color: #fbbf24; padding: 3px 8px; border-radius: 4px; font-size: 0.75rem; margin-right: 4px;">'+(Ht[Je]||Je)+"</span>"}).join(""),vn='<div id="changeRequestBanner" style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(245, 158, 11, 0.1) 100%); border: 1px solid rgba(251, 191, 36, 0.4); border-radius: 12px; padding: 1rem; margin-bottom: 1.25rem;"><div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem;"><h5 style="margin: 0; color: #fbbf24; font-size: 0.95rem; display: flex; align-items: center; gap: 6px;"> Change Request from '+cn.clientName+`</h5><button onclick="document.getElementById('changeRequestBanner').remove()" style="background: none; border: none; color: rgba(255,255,255,0.5); cursor: pointer; font-size: 1.25rem; line-height: 1; padding: 0;">&times;</button></div><div style="margin-bottom: 0.75rem;">`+nn+'</div><div style="background: rgba(0,0,0,0.2); border-radius: 8px; padding: 0.75rem; max-height: 120px; overflow-y: auto;"><p style="margin: 0; font-size: 0.85rem; color: rgba(255,255,255,0.9); white-space: pre-wrap; line-height: 1.5;">'+cn.description+"</p></div></div>",rn=document.querySelector(".sow-creator-form");if(rn){var _n=rn.querySelector(".sow-form-section");_n&&_n.insertAdjacentHTML("beforebegin",vn)}v.currentEditChangeRequestId=cn.id}var Cn=t(".btn-save-sow");if(Cn){var Oe=Cn.cloneNode(!0);Cn.parentNode.replaceChild(Oe,Cn),Oe.innerHTML='<span class="btn-icon"></span> Update SOW',Oe.onclick=function(Je){Je.preventDefault(),v.updateSOW(u.id)}}console.log(" Form populated for editing")},250)},M.prototype.updateSOW=function(u){var v=t("#sowEntityTypeToggle")&&t("#sowEntityTypeToggle").checked,y=t("#sowClientName").value.trim(),b=t("#sowClientEmail").value.trim(),x=t("#sowClientPhone").value.trim(),k=t("#sowBusinessName")?t("#sowBusinessName").value.trim():"",S=t("#sowEntityType")?t("#sowEntityType").value:"",P=t("#sowStateOfFormation")?t("#sowStateOfFormation").value.trim():"",R=t("#sowRepName")?t("#sowRepName").value.trim():"",B=t("#sowRepTitle")?t("#sowRepTitle").value.trim():"",V=t("#sowBusinessEmail")?t("#sowBusinessEmail").value.trim():"",H=t("#sowBusinessPhone")?t("#sowBusinessPhone").value.trim():"",O=t("#sowPackage").value,W=t("#sowWeeks").value,X=t("#sowStartDate").value,J=t("#sowNotes").value.trim(),Y=t("#sowMaintenance").value,K=t("#sowRetroactive")&&t("#sowRetroactive").checked,ae=t("#sowDevDuration")?t("#sowDevDuration").value:"",se=t("#sowRetroactiveEndDate")?t("#sowRetroactiveEndDate").value:"",le="";if(x){var xe=x.replace(/\D/g,"");xe.length===10?le="+1"+xe:xe.length===11&&xe.startsWith("1")?le="+"+xe:le=x}var Me="";if(H){var ve=H.replace(/\D/g,"");ve.length===10?Me="+1"+ve:ve.length===11&&ve.startsWith("1")?Me="+"+ve:Me=H}var Ee=[];if(v){if(k||Ee.push("Business Legal Name"),S||Ee.push("Entity Type"),R||Ee.push("Representative Name"),B||Ee.push("Representative Title"),O||Ee.push("Package Tier"),K?ae||Ee.push("Development Duration"):W||Ee.push("Estimated Weeks"),Ee.length>0){alert(`Please fill in all required fields:
- `+Ee.join(`
- `));return}if(!V&&!Me){alert("Please provide either a Business Email or Business Phone number.");return}}else{if(y||Ee.push("Client Name"),O||Ee.push("Package Tier"),K?ae||Ee.push("Development Duration"):W||Ee.push("Estimated Weeks"),Ee.length>0){alert(`Please fill in all required fields:
- `+Ee.join(`
- `));return}if(!b&&!le){alert("Please provide either a Client Email or Client Phone number.");return}}var Be=[],Qe=document.querySelectorAll('.sow-checkboxes input[type="checkbox"]:checked');Qe.forEach(function(Ge){var ct=Ge.parentElement.textContent.trim(),qt=Ge.parentElement.querySelector(".third-party-note");qt&&(ct=ct.replace(qt.textContent,"").trim()),Be.push(ct)});var Ze=document.querySelector('input[name="ecommerce_option"]:checked'),tt=Ze?Ze.value:"none",$e=this.currentPricingData||{basePrice:0,addOns:[],discounts:[],ecommerceOption:tt,ecommercePrice:0,total:0},st=$e.total,qe=t("#sowCouponSelect"),lt=qe?qe.value:"",Rt=t("#sowDevDurationUnit")?t("#sowDevDurationUnit").value:"weeks",Bt=ae&&parseInt(ae)||null,Pe=t("#sowDeferredPayment")&&t("#sowDeferredPayment").checked,Ce={enabled:Pe,splitType:"lump_sum",dueDate:null,deferredAmount:0,lateFee:0,lateFeeWaived:!1,allowPartialPayments:!0,maintenanceDuringDeferral:!0,customSchedule:[],frequency:null,startDate:null,calculationMode:null,amountPerPayment:null,numberOfPayments:null,acknowledgmentSigned:!1,acknowledgmentDate:null};if(Pe){var St=document.querySelector('input[name="deferred_split"]:checked');if(Ce.splitType=St?St.value:"lump_sum",Ce.lateFeeWaived=t("#sowWaiveLateFee")&&t("#sowWaiveLateFee").checked,Ce.allowPartialPayments=t("#sowAllowPartialPayments")?t("#sowAllowPartialPayments").checked:!0,Ce.maintenanceDuringDeferral=t("#sowMaintenanceDuringDeferral")?t("#sowMaintenanceDuringDeferral").checked:!0,Ce.splitType==="custom"){var We=[],gt=document.querySelectorAll(".custom-payment-row");gt.forEach(function(Ge){var ct=Ge.querySelector(".custom-payment-amount"),qt=Ge.querySelector(".custom-payment-date"),Xt=parseFloat(ct?ct.value:0)||0,Ft=qt?qt.value:null;Xt>0&&We.push({amount:Xt,dueDate:Ft})}),Ce.customSchedule=We,Ce.deferredAmount=We.reduce(function(Ge,ct){return Ge+ct.amount},0)}else if(Ce.splitType==="recurring"){Ce.deferredAmount=parseFloat(t("#sowRecurringTotalAmount")?t("#sowRecurringTotalAmount").value:0)||0,Ce.startDate=t("#sowRecurringStartDate")?t("#sowRecurringStartDate").value:null,Ce.frequency=t("#sowRecurringFrequency")?t("#sowRecurringFrequency").value:"biweekly",Ce.calculationMode=t("#sowRecurringCalcMode")?t("#sowRecurringCalcMode").value:"amount",Ce.calculationMode==="amount"?Ce.amountPerPayment=parseFloat(t("#sowRecurringPaymentAmount")?t("#sowRecurringPaymentAmount").value:0)||0:Ce.numberOfPayments=parseInt(t("#sowRecurringPaymentCount")?t("#sowRecurringPaymentCount").value:0)||0;var jt=Ce.calculationMode==="amount"?Ce.amountPerPayment:Ce.numberOfPayments;Ce.customSchedule=generateRecurringSchedule(Ce.deferredAmount,Ce.startDate,Ce.frequency,Ce.calculationMode,jt)}else Ce.deferredAmount=parseFloat(t("#sowDeferredAmount")?t("#sowDeferredAmount").value:0)||0,Ce.dueDate=t("#sowDeferredDueDate")?t("#sowDeferredDueDate").value:null;if(Ce.lateFee=Ce.lateFeeWaived?0:Ce.deferredAmount*.1,Ce.deferredAmount<=0){alert("Please enter a valid deferred amount.");return}if(Ce.splitType==="lump_sum"&&!Ce.dueDate){alert("Please select a due date for the deferred payment.");return}if(Ce.splitType==="custom"&&Ce.customSchedule.length===0){alert("Please add at least one payment to the custom schedule.");return}if(Ce.splitType==="recurring"){if(!Ce.startDate){alert("Please select a first payment date for the payment plan.");return}if(Ce.calculationMode==="amount"&&(!Ce.amountPerPayment||Ce.amountPerPayment<=0)){alert("Please enter a valid payment amount.");return}if(Ce.calculationMode==="count"&&(!Ce.numberOfPayments||Ce.numberOfPayments<2)){alert("Please enter a valid number of payments (minimum 2).");return}if(Ce.customSchedule.length===0){alert("Could not generate payment schedule. Please check your inputs.");return}}if(Ce.deferredAmount>st){alert("Deferred amount cannot exceed the total project price.");return}}var Dt={clientName:v?k:y,clientEmail:v?V||"":b||"",clientPhone:v?m(Me)||"":m(le)||"",packageType:O,estimatedWeeks:K?Bt||null:parseInt(W),startDate:K?se||null:X||null,features:Be,notes:J,maintenancePlan:Y,isRetroactive:K,devDuration:Bt,devDurationUnit:Rt,retroactiveEndDate:K&&se||null,couponCode:lt||null,isBusinessEntity:v,businessName:v?k:"",entityType:v?S:"",stateOfFormation:v?P:"",representativeName:v?R:"",representativeTitle:v?B:"",payment:{total:st,deposit:st*.5,milestone1:st*.25,final:st*.25,breakdown:{basePrice:$e.basePrice,addOns:$e.addOns,discounts:$e.discounts,ecommerceOption:$e.ecommerceOption,ecommercePrice:$e.ecommercePrice,couponCode:lt||null,couponDiscount:$e.couponDiscount||0},deferred:Ce},updatedAt:firebase.firestore.FieldValue.serverTimestamp()},Ye=this;firebase.firestore().collection("sow_documents").doc(u).update(Dt).then(function(){if(console.log("SOW updated successfully"),Ye.currentEditChangeRequestId)return firebase.firestore().collection("change_requests").doc(Ye.currentEditChangeRequestId).update({status:"completed",completedAt:firebase.firestore.FieldValue.serverTimestamp(),updatedAt:firebase.firestore.FieldValue.serverTimestamp()}).then(function(){return firebase.firestore().collection("sow_documents").doc(u).update({changeRequestStatus:"completed",lastChangeOrderApplied:firebase.firestore.FieldValue.serverTimestamp()})}).then(function(){Ye.currentEditChangeRequestId=null,alert(" SOW updated and change request completed!")});alert(" SOW updated successfully!")}).then(function(){t("#sowCreatorContainer").style.display="none",Ye.loadSOWDocuments()}).catch(function(Ge){console.error("Error updating SOW:",Ge),alert("Error updating SOW: "+Ge.message)})},M.prototype.selectContractToSign=function(u,v){var y=v.find(function(k){return k.id===u});if(!y){alert("Contract not found");return}console.log("Selected contract to sign:",u),this.currentContract={id:u,data:y};var b=t("#developerDashboard");b&&(b.style.display="none");var x=t("#contractForm");x&&(x.style.display="block"),this.showContractSigningForm(y)},M.prototype.showContractSigningForm=function(u){var v=this,y=t("#contractForm");y&&(y.style.display="block");var b=t(".modal-header");b&&(b.style.display="block");var x=t(".modal-close");x&&(x.style.display="flex");var k=t("#devSignatureBlock");if(k){k.style.display="block";var S=k.querySelectorAll("input");S.forEach(function(X){X.disabled=!1});var P=k.querySelector("h3");P&&(P.innerHTML='Developer Signature  Scarlo <span style="font-size: 12px; color: #f59e0b;"> Sign Below</span>')}var R=new Date().toISOString().split("T")[0],B=t("#devDate");B&&(B.value=R),this.populateFormWithContract(u);var V=t("#submitBtn");V&&(V.style.display="inline-flex",V.disabled=!1,V.innerHTML='<span id="submitBtnText">Upload & Finalize</span>',V.style.background="");var H=t("#backToDashboard");H&&H.remove();var O=document.createElement("button");O.id="backToDashboard",O.className="btn btn-secondary",O.innerHTML=" Back to Dashboard",O.style.marginRight="10px",O.onclick=function(X){X.preventDefault(),v.showDeveloperDashboard(),v.devSignaturePad&&v.devSignaturePad.clear()};var W=t(".action-buttons");W&&W.insertBefore(O,W.firstChild),setTimeout(function(){var X=document.getElementById("devSignaturePad");X&&(v.devSignaturePad=U(X),console.log("Dev signature pad initialized for signing"))},200)},M.prototype.viewCompletedContract=function(u,v){var y=v.find(function(b){return b.id===u});if(!y){alert("Contract not found");return}console.log("Viewing completed contract:",u),this.currentContract={id:u,data:y},this.generatePDF()},M.prototype.setupClientView=function(){console.log("Setting up client view - dual signing mode");var u=this,v=firebase.auth().currentUser,y=v.email,b=v.phoneNumber,x;if(y)console.log("Checking existing contracts by email:",y),x=firebase.firestore().collection("contracts").where("clientEmail","==",y).where("status","in",["pending_developer","completed"]).orderBy("timestamp","desc").limit(1);else if(b){var k=b.replace(/\D/g,""),S=k.length===11&&k.startsWith("1")?k.slice(1):k,P=[b,k,S,"("+S.slice(0,3)+") "+S.slice(3,6)+"-"+S.slice(6)];console.log("Checking existing contracts by phone formats:",P);var R=function(B){if(B>=P.length){console.log("No existing contract found for phone user"),u.proceedWithClientSetup();return}firebase.firestore().collection("contracts").where("clientPhone","==",P[B]).where("status","in",["pending_developer","completed"]).orderBy("timestamp","desc").limit(1).get().then(function(V){if(V.empty)R(B+1);else{var H=V.docs[0],O=H.data();O.id=H.id,console.log("Found existing contract with format:",P[B]);var W=document.getElementById("dualSigningCompleted");W?W.style.display="block":u.showExistingCompletion(O)}}).catch(function(){R(B+1)})};R(0);return}else return console.log("No email or phone - proceeding to setup"),u.proceedWithClientSetup();x.get().then(function(B){if(!B.empty){var V=B.docs[0],H=V.data();H.id=V.id,console.log("Found existing contract with status:",H.status);var O=document.getElementById("dualSigningCompleted");O?(O.style.display="block",console.log("Showing existing completion view")):u.showExistingCompletion(H);return}return u.proceedWithClientSetup()}).catch(function(B){console.error("Error checking existing contracts:",B),u.proceedWithClientSetup()})},M.prototype.proceedWithClientSetup=function(){var u=this,v=t("#clientSignatureBlock");v&&(v.style.display="block",v.style.pointerEvents="auto",v.classList.remove("signature-locked"));var y=t("#devSignatureBlock");if(y){y.style.display="none";var b=y.querySelectorAll("input");b.forEach(function(X){X.disabled=!0,X.removeAttribute("required")})}var x=t("#devPendingBlock");x&&(x.style.display="block");var k=t("#downloadBtn");k&&(k.style.display="none");var S=firebase.auth().currentUser,P=S.email,R=S.phoneNumber,B;if(P)console.log("Querying SOW by email:",P),B=firebase.firestore().collection("sow_documents").where("clientEmail","==",P).orderBy("createdAt","desc").limit(1);else if(R){var V=R.replace(/\D/g,""),H=V.length===11&&V.startsWith("1")?V.slice(1):V,O=[R,V,H,"("+H.slice(0,3)+") "+H.slice(3,6)+"-"+H.slice(6)];console.log("Querying SOW by phone formats:",O);var W=function(X){if(X>=O.length){console.log(" No SOW found for client (tried all phone formats)"),u.showNoSOWNotification();return}firebase.firestore().collection("sow_documents").where("clientPhone","==",O[X]).orderBy("createdAt","desc").limit(1).get().then(function(J){if(J.empty)W(X+1);else{var Y=J.docs[0],K=Y.data();K.id=Y.id,console.log(" SOW found with format:",O[X],"ID:",K.id),u.showDualSigningInterface(K)}}).catch(function(J){console.error("Error querying SOW format",O[X],J),W(X+1)})};W(0);return}else{console.log("No email or phone found"),u.showNoSOWNotification();return}B.get().then(function(X){if(X.empty)console.log(" No SOW found for client"),u.showNoSOWNotification();else{var J=X.docs[0],Y=J.data();Y.id=J.id,u.showDualSigningInterface(Y)}}).catch(function(X){console.error("Error fetching SOW:",X),u.showNoSOWNotification(X.message)})},M.prototype.showNoSOWNotification=function(u){console.log("Showing no-SOW notification");var v=t("#clientSignatureBlock");v&&(v.style.display="none");var y=t("#submitBtn");y&&(y.style.display="none",y.disabled=!0);var b='<div class="sow-missing-notification"><div class="notification-icon"></div><div class="notification-content"><h4>Statement of Work Required</h4><p>You need an approved SOW before signing the contract.</p><p class="notification-action">Please <a href="#" class="request-help-link" style="color: #6366f1; text-decoration: underline; cursor: pointer; font-weight: 700;">Request Help</a> to request your SOW from the developer.</p></div></div>',x=t("#contractForm");if(x){var k=t(".sow-missing-notification");k&&k.remove(),x.insertAdjacentHTML("afterbegin",b);var S=t(".request-help-link");S&&S.addEventListener("click",function(R){R.preventDefault();var B=t("#helpModal");if(B){B.classList.add("show"),document.body.style.overflow="hidden",document.body.classList.add("modal-open");var V=firebase.auth().currentUser;if(V){var H=t("#helpContact"),O=t("#helpContactLabel");H&&(V.email?(H.value=V.email,H.type="email",H.placeholder="your@email.com",O&&(O.textContent="Your Email *")):V.phoneNumber&&(H.value=p(V.phoneNumber),H.type="tel",H.placeholder="(555) 123-4567",O&&(O.textContent="Your Phone Number *")),H.setAttribute("readonly","readonly"),H.style.opacity="0.7")}}})}var P=t("#requestHelpBtn");P&&(P.style.animation="pulse 6s infinite",P.style.boxShadow="0 0 20px rgba(255, 255, 255, 0.18)")},M.prototype.showDualSigningInterface=function(u){var v=this;console.log("Showing dual signing interface for:",u.clientName),this.currentSOW=u,this.populateClientInfoFromSOW(u);var y=t("#contractForm");y&&(y.style.display="none");var b=t("#submitBtn");b&&(b.style.display="none");var x=t(".modal-content");if(x){var k=t("#clientSigningTabs");k&&(console.log("Removing existing tabs to prevent duplicates"),k.remove());var S=t("#closeModalBtn"),P=document.createElement("div");P.id="clientSigningTabs",P.className="client-signing-tabs",P.innerHTML='<div class="signing-tabs-header"><button class="signing-tab active" data-tab="contract"><span class="tab-icon"></span><span class="tab-title">1. Contract Agreement</span><span class="tab-status" id="contractStatus"> Pending</span></button><button class="signing-tab" data-tab="sow"><span class="tab-icon"></span><span class="tab-title">2. Statement of Work</span><span class="tab-status" id="sowStatus"> Pending</span></button></div><div class="signing-tabs-content"><div class="signing-tab-pane active" data-tab="contract"><div id="contractSigningContent"></div></div><div class="signing-tab-pane" data-tab="sow"><div id="sowSigningContent"></div></div></div><div class="signing-footer"><div class="signing-progress"><div class="progress-indicator"><span class="progress-dot" id="contractDot"></span><span class="progress-line"></span><span class="progress-dot" id="sowDot"></span></div><p class="progress-text">Complete both signatures to submit</p></div><button class="btn btn-primary" id="dualSignBtn"><span id="dualSignBtnText">Next: Sign SOW </span></button></div>',S&&S.nextSibling?x.insertBefore(P,S.nextSibling):x.appendChild(P);var R=t("#contractSigningContent");if(R){var B=document.createElement("div");B.className="modal-header",B.innerHTML='<h2>Contract</h2><p class="modal-subtitle">Scarlo - Carlos Martin</p>',R.appendChild(B),R.appendChild(y),y.style.display="block";var V=document.getElementById("clientSignerName");V&&(V.disabled=!1,V.required=!0,V.style.pointerEvents="auto");var H=document.getElementById("clientDate");H&&(H.disabled=!1,H.required=!0,H.style.pointerEvents="auto",H.value||(H.value=new Date().toISOString().split("T")[0]));var O=document.querySelector(".acknowledgment");O&&(O.style.display="block");var W=document.getElementById("acknowledgment");W&&(W.disabled=!1,W.required=!0)}this.renderSOWForClientSigning(u),e(".signing-tab").forEach(function(J){J.addEventListener("click",function(){var Y=this.getAttribute("data-tab");v.switchSigningTab(Y)})});var X=t("#dualSignBtn");X&&X.addEventListener("click",function(J){J.preventDefault();var Y=t(".signing-tab.active"),K=Y?Y.getAttribute("data-tab"):"contract";if(K==="contract"){var ae=v.validateContractTab();if(ae.length>0){alert(`Please complete all required fields:

`+ae.join(`
`));return}v.updateSignatureStatus("contract",!0),v.switchSigningTab("sow")}else v.submitBothSignatures()}),setTimeout(function(){console.log(" Initializing dual signature pads...");var J=document.getElementById("clientSignaturePad");if(J){console.log("Found contract canvas, initializing..."),J.style.pointerEvents="auto",J.style.touchAction="none",J.style.cursor="crosshair";var Y=J.closest(".signature-block");Y&&(Y.classList.remove("signature-locked"),Y.style.pointerEvents="auto"),v.clientSignaturePad=U(J),console.log(" Contract signature pad initialized");var K=t('.clear-btn[data-canvas="clientSignaturePad"]');K&&K.addEventListener("click",function(ve){ve.preventDefault(),v.clientSignaturePad&&(v.clientSignaturePad.clear(),v.updateSignatureStatus("contract",!1))})}else console.error(" Contract signature canvas not found!");var ae=t('.clear-btn[data-canvas="sowClientSignaturePad"]');ae&&ae.addEventListener("click",function(ve){ve.preventDefault(),window.sowClientPad&&(window.sowClientPad.clear(),v.updateSignatureStatus("sow",!1))}),console.log(" SOW signature pad will be initialized when SOW tab is opened");var se=document.getElementById("clientSignerName");se&&(se.disabled=!1);var le=document.getElementById("clientDate");le&&(le.disabled=!1,le.value||(le.value=new Date().toISOString().split("T")[0]));var xe=document.querySelector(".acknowledgment");xe&&(xe.style.display="block");var Me=document.getElementById("acknowledgment");Me&&(Me.disabled=!1),v.checkExistingSignatures()},400)}},M.prototype.renderSOWForClientSigning=function(u){var v=t("#sowSigningContent");if(v){var y={essential:"Essential  Landing Page",starter:"Tier 1  Starter",growth:"Tier 2  Growth",professional:"Tier 3  Professional",enterprise:"Tier 4  Enterprise",custom:"Custom Quote"},b={essential:{includes:["Single-page landing page (1-3 sections)","Cross-device optimization","Clean, modern React/Next.js design","Contact form with validation","Basic SEO setup","DNS & hosting configuration (client pays for domain)"]},starter:{includes:["Multi-section React/Next.js website","Brand-matched design system","Scroll animations & micro-interactions","Multi-step contact forms","GA4 + custom event tracking","Full technical SEO","DNS & hosting configuration (client pays for domain)"]},growth:{includes:["Everything in Starter","Firebase Authentication","Protected content areas","Form data capture & storage","Newsletter integration","3 rounds of revisions","Domain, hosting & SSL included (first year)"]},professional:{includes:["Everything in Growth","Full Firebase backend","User dashboard & profiles","File/media upload system","API integrations","Email notifications (SendGrid)","2 months of maintenance included","Domain, hosting & SSL included (first year)"]},enterprise:{includes:["Everything in Professional","Multi-page application","Role-based access control","In-app notifications","Admin dashboards","Documentation & training","3 months of premium maintenance included","Domain, hosting & SSL included (first year)"]}},x=b[u.packageType]||{includes:[]},k=u.payment?u.payment.total:0,S=k*.5,P=k*.25,R=k*.25,B=u.payment&&u.payment.breakdown?u.payment.breakdown:null,V=B?B.basePrice:k,H=B?B.addOns:[],O=B?B.discounts:[],W=B?B.couponCode:null,X=B?B.couponDiscount:0,J='<div class="modal-header"><h2>STATEMENT OF WORK</h2><p class="modal-subtitle">Scarlo - Carlos Martin</p></div><section class="contract-section-inner"><h3>Client Information</h3><div class="sow-info-grid"><div class="sow-info-item"><strong>Client Name:</strong> '+u.clientName+'</div><div class="sow-info-item"><strong>Contact:</strong> '+(u.clientEmail||u.clientPhone||"N/A")+'</div><div class="sow-info-item"><strong>Package:</strong> '+(y[u.packageType]||u.packageType)+'</div><div class="sow-info-item"><strong>Timeline:</strong> '+(u.estimatedWeeks||"TBD")+' weeks</div></div></section><section class="contract-section-inner"><h3>Package Includes</h3><ul class="sow-list">';x.includes&&x.includes.length>0&&x.includes.forEach(function(K){J+="<li>"+K+"</li>"}),J+="</ul></section>",u.features&&u.features.length>0&&(J+='<section class="contract-section-inner"><h3>Additional Features & Deliverables</h3><ul class="sow-list">',u.features.forEach(function(K){J+="<li>"+K+"</li>"}),J+="</ul></section>"),u.notes&&(J+='<section class="contract-section-inner"><h3>Special Requirements</h3><p>'+u.notes+"</p></section>"),J+='<section class="contract-section-inner"><h3>Pricing Breakdown</h3><table class="sow-payment-table pricing-breakdown-table"><thead><tr><th>Item</th><th>Description</th><th>Amount</th></tr></thead><tbody><tr class="base-package-row"><td><strong>'+(y[u.packageType]||"Package")+"</strong></td><td>Base package price</td><td><strong>$"+V.toFixed(0)+"</strong></td></tr>",H&&H.length>0&&H.forEach(function(K){var ae=K.thirdParty?' <span class="third-party-indicator">*</span>':"";J+='<tr class="addon-row"><td>'+K.label+ae+'</td><td>Additional feature</td><td class="addon-price">+$'+K.price.toFixed(0)+"</td></tr>"}),O&&O.length>0&&O.forEach(function(K){J+='<tr class="discount-row"><td>'+K.label+'</td><td>Feature removed (50% credit)</td><td class="discount-price">-$'+K.price.toFixed(0)+"</td></tr>"}),W&&X>0&&(J+='<tr class="coupon-row"><td>'+W+'</td><td>Coupon discount</td><td class="discount-price">-$'+X.toFixed(0)+"</td></tr>"),J+='<tr class="sow-total-row"><td colspan="2"><strong>Total Project Cost</strong></td><td><strong>$'+k.toFixed(0)+"</strong></td></tr></tbody></table>",H&&H.some(function(K){return K.thirdParty})&&(J+='<p class="third-party-note-text"><span class="third-party-indicator">*</span> These features may incur additional third-party costs (e.g., Firebase, Stripe, hosting, domain) which are billed separately by the respective providers.</p>'),J+='<button type="button" class="view-industry-pricing-btn" onclick="window.contractFormHandler.showPricingComparisonModal()"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg>View Industry Pricing</button>',J+="</section>",J+='<section class="contract-section-inner"><h3>Payment Schedule</h3><table class="sow-payment-table"><thead><tr><th>Payment Milestone</th><th>Description</th><th>Amount</th></tr></thead><tbody><tr><td><strong>Initial Deposit</strong></td><td>Due before work begins (50%)</td><td><strong>$'+S.toFixed(0)+"</strong></td></tr><tr><td><strong>Milestone 1</strong></td><td>UI/UX Design Approval (25%)</td><td><strong>$"+P.toFixed(0)+"</strong></td></tr><tr><td><strong>Final Payment</strong></td><td>Prior to deployment (25%)</td><td><strong>$"+R.toFixed(0)+"</strong></td></tr></tbody></table></section>",J+='<section class="contract-section-inner"><h3>Terms & Conditions</h3><p>This Statement of Work is subject to the terms outlined in the Website Development Agreement between Scarlo and <strong>'+u.clientName+'</strong>. All work will be performed using modern technologies including React, Next.js, Firebase, and associated development tools in accordance with industry best practices.</p><p>The project timeline is an estimate and may be adjusted based on client feedback, content delivery, and scope changes. Any requests beyond the defined scope require a signed Change Order.</p></section><section class="contract-section-inner signatures"><h3>Client Signature Required</h3><p>Please review the above Statement of Work carefully. By signing below, you acknowledge that you have read and agree to the scope, timeline, and payment terms outlined in this document.</p><div class="signature-block"><h3>Client Signature  '+u.clientName+'</h3><div class="form-row"><div class="form-group"><label>Full Name *</label><input type="text" id="sowClientName" value="'+u.clientName+'" required /></div><div class="form-group"><label>Date *</label><input type="date" id="sowClientDate" required /></div></div><div class="signature-pad-container"><canvas id="sowClientSignaturePad" class="signature-pad"></canvas><button class="clear-btn" data-canvas="sowClientSignaturePad">Clear</button></div></div></section>',v.innerHTML=J;var Y=t("#sowClientDate");Y&&(Y.value=new Date().toISOString().split("T")[0]),console.log(" SOW content rendered, signature pad will be initialized by parent function")}},M.prototype.switchSigningTab=function(u){var v=this;e(".signing-tab").forEach(function(k){k.classList.remove("active"),k.getAttribute("data-tab")===u&&k.classList.add("active")}),e(".signing-tab-pane").forEach(function(k){k.classList.remove("active"),k.getAttribute("data-tab")===u&&k.classList.add("active")}),u==="sow"&&setTimeout(function(){var k=document.getElementById("sowClientSignaturePad");if(k){console.log(" SOW tab opened - initializing signature pad"),k.style.pointerEvents="auto",k.style.touchAction="none",k.style.cursor="crosshair";var S=k.closest(".signature-block");S&&(S.classList.remove("signature-locked"),S.style.pointerEvents="auto"),k.style.display="block",k.style.width="100%",k.style.height="270px",requestAnimationFrame(function(){requestAnimationFrame(function(){!window.sowClientPad||typeof window.sowClientPad.resize!="function"?(window.sowClientPad=U(k),console.log(" SOW signature pad created")):(window.sowClientPad.resize(),console.log(" SOW signature pad resized"));var V=k.getBoundingClientRect();console.log("SOW canvas rect:",V.width,"x",V.height,"left:",V.left,"top:",V.top)})});var P=function(){var V=t("#dualSignBtn");if(V){var H=window.sowClientPad&&!window.sowClientPad.isEmpty();V.disabled=!H,V.style.opacity=H?"1":"0.5",console.log("SOW signature state:",H?"Signed ":"Empty ")}};k.addEventListener("mouseup",P),k.addEventListener("touchend",P);var R=t('.clear-btn[data-canvas="sowClientSignaturePad"]');if(R){var B=R.cloneNode(!0);R.parentNode.replaceChild(B,R),B.addEventListener("click",function(V){V.preventDefault(),window.sowClientPad&&(window.sowClientPad.clear(),v.updateSignatureStatus("sow",!1),P())})}P()}else console.error(" SOW signature canvas not found when switching to tab")},100);var y=t("#dualSignBtn"),b=t("#dualSignBtnText");if(u==="contract")b&&(b.textContent="Next: Sign SOW "),y&&(y.disabled=!1,y.style.display="inline-flex");else if(u==="sow"){b&&(b.textContent=" Submit for Developer Signature");var x=window.sowClientPad&&!window.sowClientPad.isEmpty();y&&(y.disabled=!x,y.style.display="inline-flex",y.style.opacity=x?"1":"0.5")}},M.prototype.checkExistingSignatures=function(){var u=!1,v=!1;if(this.clientSignaturePad&&!this.clientSignaturePad.isEmpty()&&(u=!0,this.updateSignatureStatus("contract",!0)),window.sowClientPad&&!window.sowClientPad.isEmpty()&&(v=!0,this.updateSignatureStatus("sow",!0)),u&&v){var y=t("#submitBothBtn");y&&(y.style.display="inline-flex")}},M.prototype.updateSignatureStatus=function(u,v){var y=t("#"+u+"Status"),b=t("#"+u+"Dot");v?(y&&(y.textContent=" Signed",y.style.color="#10b981"),b&&b.classList.add("completed")):(y&&(y.textContent=" Pending",y.style.color="#f59e0b"),b&&b.classList.remove("completed"));var x=t("#contractStatus")&&t("#contractStatus").textContent.includes(""),k=t("#sowStatus")&&t("#sowStatus").textContent.includes(""),S=t(".signing-tab.active"),P=S&&S.getAttribute("data-tab")==="sow",R=t("#submitBothBtn");R&&(R.style.display=P&&x&&k?"inline-flex":"none")},M.prototype.validateContractTab=function(){var u=[],v=t("#clientName");(!v||!v.value.trim())&&u.push(" Client Name / Company Name is required");var y=t("#clientSignerName");(!y||!y.value.trim())&&u.push(" Your Full Name is required");var b=t("#clientDate");(!b||!b.value)&&u.push(" Signature Date is required");var x=t("#acknowledgment");return(!x||!x.checked)&&u.push(" You must acknowledge the terms and conditions"),(!this.clientSignaturePad||this.clientSignaturePad.isEmpty())&&u.push(" Your signature is required"),u},M.prototype.checkPendingClientContract=function(u){var v=this;firebase.firestore().collection("contracts").where("clientEmail","==",u).where("status","==","pending_developer").limit(1).get().then(function(y){y.empty||v.showPendingStatus()}).catch(function(y){console.error("Error checking pending contracts:",y)})},M.prototype.showCompletedContract=function(u,v){console.log("Showing completed contract");var y=this;this.isViewingCompletedContract=!0;var b=t("#devPendingBlock");b&&(b.style.display="none");var x=t(".acknowledgment");x&&(x.style.display="none");var k=t("#clientName");k&&(k.value=v.clientName||"",k.setAttribute("readonly","readonly"),k.disabled=!0);var S=t("#clientSubmitMessage");S&&(S.innerHTML="<p><strong> Your contract has been fully executed!</strong></p><p>Both you and the developer have signed the agreement.</p><p>Contract Date: "+(v.clientDate||"N/A")+"</p><p>Finalized: "+(v.finalizedTimestamp?new Date(v.finalizedTimestamp.toDate()).toLocaleDateString():"N/A")+"</p>",S.style.display="block",S.style.background="rgba(46, 204, 113, 0.15)",S.style.borderColor="rgba(46, 204, 113, 0.4)"),this.currentContract={id:u,data:v};var P=t("#submitBtn");if(P){var R=P.cloneNode(!0);R.innerHTML="<span> Download Signed Contract</span>",R.style.display="inline-flex",R.disabled=!1,R.style.background="linear-gradient(135deg, #10b981 0%, #059669 100%)",P.parentNode.replaceChild(R,P),R.addEventListener("click",function(B){B.preventDefault(),B.stopPropagation(),console.log("Download button clicked - generating PDF"),y.generatePDF()})}this.displayBothSignatures(v)},M.prototype.displayBothSignatures=function(u){var v=this;console.log("Displaying both signatures..."),console.log("Client signature exists:",!!u.clientSignature),console.log("Dev signature exists:",!!u.devSignature);var y=t("#clientSignatureBlock");if(y){y.style.display="block",y.style.opacity="1";var b=document.getElementById("clientSignaturePad");if(b){var x=b.cloneNode(!0);b.parentNode.replaceChild(x,b)}y.style.pointerEvents="none",y.classList.add("signature-locked");var k=t("#clientSignerName");k&&(k.value=u.clientSignerName||"",k.setAttribute("readonly","readonly"));var S=t("#clientDate");S&&(S.value=u.clientDate||"",S.setAttribute("readonly","readonly"))}var P=t("#devSignatureBlock");if(P){P.style.display="block",P.style.opacity="1";var R=document.getElementById("devSignaturePad");if(R){var B=R.cloneNode(!0);R.parentNode.replaceChild(B,R)}P.style.pointerEvents="none",P.classList.add("signature-locked");var V=t("#devName");V&&(V.value=u.devName||"Carlos Martin",V.setAttribute("readonly","readonly"));var H=t("#devDate");H&&(H.value=u.devDate||"",H.setAttribute("readonly","readonly"))}setTimeout(function(){if(u.clientSignature){var W=document.getElementById("clientSignaturePad");W&&v.drawSignatureOnCanvas(W,u.clientSignature)}if(u.devSignature){var X=document.getElementById("devSignaturePad");X&&v.drawSignatureOnCanvas(X,u.devSignature)}},300);var O=t("#devPendingBlock");O&&(O.style.display="none")},M.prototype.drawSignatureOnCanvas=function(u,v){if(!u||!v){console.log("Missing canvas or signature data");return}var y=u.getBoundingClientRect();console.log("Canvas rect:",y.width,y.height),(y.width===0||y.height===0)&&(u.style.width="100%",u.style.height="150px",y=u.getBoundingClientRect());var b=window.devicePixelRatio||1;u.width=y.width*b,u.height=y.height*b;var x=u.getContext("2d");x.scale(b,b),x.clearRect(0,0,y.width,y.height);var k=new Image;k.onload=function(){x.drawImage(k,0,0,y.width,y.height),console.log("Signature drawn on canvas")},k.onerror=function(){console.error("Failed to load signature image")},k.src=v},M.prototype.showPendingStatus=function(){console.log("Client has a pending contract");var u=t("#clientSignatureBlock");u&&(u.style.display="none");var v=t("#clientSubmitMessage");v&&(v.innerHTML="<p><strong> Your agreement is pending developer signature</strong></p><p>You have already signed this agreement. The developer will review and sign it shortly.</p><p>You will be able to download the fully executed contract once both parties have signed.</p>",v.style.display="block",v.style.background="rgba(241, 196, 15, 0.15)",v.style.borderColor="rgba(241, 196, 15, 0.4)");var y=t("#submitBtn");y&&(y.style.display="none")},M.prototype.loadPendingContract=function(){var u=this;console.log("Loading pending contracts..."),firebase.firestore().collection("contracts").where("status","==","pending_developer").orderBy("timestamp","desc").limit(1).get().then(function(v){if(v.empty)console.log("No pending contracts found");else{var y=v.docs[0];u.currentContract={id:y.id,data:y.data()},u.populateFormWithContract(u.currentContract.data),console.log("Loaded pending contract:",u.currentContract.id)}}).catch(function(v){console.error("Error loading pending contract:",v)})},M.prototype.populateFormWithContract=function(u){console.log("Populating form for developer with client data:",u.clientName);var v=document.createElement("div");v.id="pendingContractInfo",v.style.cssText="background: rgba(99, 102, 241, 0.15); border: 1px solid rgba(99, 102, 241, 0.4); border-radius: 8px; padding: 15px; margin-bottom: 20px; text-align: center;",v.innerHTML='<p style="margin: 0; color: #fff;"><strong> Pending Contract from Client</strong></p><p style="margin: 5px 0 0 0; color: rgba(255,255,255,0.8);">Client: <strong>'+(u.clientName||"N/A")+"</strong> | Submitted: <strong>"+(u.clientDate||"N/A")+"</strong></p>";var y=t(".signatures");y&&!t("#pendingContractInfo")&&y.insertBefore(v,y.firstChild.nextSibling);var b=t("#clientName");b&&(b.value=u.clientName||"",b.setAttribute("readonly","readonly"),b.disabled=!0,b.style.opacity="0.7");var x=t("#clientNameDisplay");x&&(x.textContent=u.clientName||"Client Name");var k=t("#clientSignatureBlock");if(k&&u.clientSignature){k.style.display="block",k.style.opacity="0.7",k.style.pointerEvents="none";var S=k.querySelector("h3");S&&(S.innerHTML="Client Signature  "+(u.clientName||"Client")+' <span style="font-size: 12px; color: #10b981;"> Signed</span>');var P=t("#clientSignerName");P&&(P.value=u.clientSignerName||"",P.setAttribute("readonly","readonly"),P.disabled=!0);var R=t("#clientDate");R&&(R.value=u.clientDate||"",R.setAttribute("readonly","readonly"),R.disabled=!0);var B=document.getElementById("clientSignaturePad");B&&setTimeout(function(){var X=B.getBoundingClientRect(),J=window.devicePixelRatio||1;B.width=X.width*J,B.height=X.height*J;var Y=B.getContext("2d");Y.scale(J,J);var K=new Image;K.onload=function(){Y.drawImage(K,0,0,X.width,X.height)},K.src=u.clientSignature},200);var V=t('.clear-btn[data-canvas="clientSignaturePad"]');V&&(V.style.display="none")}var H=t(".acknowledgment");H&&(H.style.display="none");var O=t("#devSignatureBlock");if(O){O.style.display="block",O.style.opacity="1";var W=O.querySelector("h3");W&&(W.innerHTML='Developer Signature  Scarlo <span style="font-size: 12px; color: #f59e0b;"> Sign Below</span>')}console.log("Form populated with contract data for developer review")},M.prototype.handleClientSubmit=function(){if(console.log("Handling client submit..."),!this.currentSOW){alert("A Statement of Work (SOW) must be attached before signing the contract.");return}var u=[],v=t("#clientName");(!v||!v.value.trim())&&u.push("Client information is missing. Please ensure a SOW is attached.");var y=t("#acknowledgment");(!y||!y.checked)&&u.push("Please acknowledge that you have read and agree to the terms");var b=t("#clientSignerName");(!b||!b.value.trim())&&u.push("Please enter your full name"),(!this.clientSignaturePad||this.clientSignaturePad.isEmpty())&&u.push("Your signature is required");var x=t("#clientDate");if((!x||!x.value)&&u.push("Signature date is required"),u.length>0){alert(`Please complete all required fields:

`+u.join(`
`));return}this.submitClientSignature()},M.prototype.submitClientSignature=function(){this.currentSOW?this.submitBothSignatures():alert("A Statement of Work (SOW) must be attached before signing the contract.")},M.prototype.handleDeveloperSubmit=function(){console.log("Handling developer submit...");var u=[];(!this.devSignaturePad||this.devSignaturePad.isEmpty())&&u.push("Developer signature is required");var v=t("#devDate");if((!v||!v.value)&&u.push("Developer signature date is required"),this.currentContract||u.push("No pending contract found to finalize"),u.length>0){alert(`Please complete all required fields:

`+u.join(`
`));return}this.finalizeContract()},M.prototype.submitBothSignatures=function(){var u=this;if(console.log("Submitting both contract and SOW signatures..."),!this.clientSignaturePad||this.clientSignaturePad.isEmpty()){alert("Please sign the contract first (Tab 1)"),this.switchSigningTab("contract");return}var v=t("#sowClientName"),y=t("#sowClientDate");if(!v||!v.value.trim()){alert("Please enter your name on the SOW");return}if(!y||!y.value){alert("Please enter the signature date on the SOW");return}if(!window.sowClientPad||window.sowClientPad.isEmpty()){alert("Please sign the Statement of Work");return}var b=t("#submitBothBtn");b&&(b.disabled=!0,b.innerHTML="<span>Submitting...</span>");var x=firebase.auth().currentUser,k=x.email||"",S=x.phoneNumber||"",P=this.currentSOW||{},R=P.isBusinessEntity||!1,B=P.businessName||"",V=P.entityType||"",H=P.stateOfFormation||"",O=P.representativeName||"",W=P.representativeTitle||"",X={clientName:R?B:P.clientName,clientSignerName:R?O:t("#clientSignerName").value.trim(),clientDate:t("#clientDate").value,clientSignature:this.clientSignaturePad.toDataURL(),clientEmail:k,clientPhone:m(S),timestamp:firebase.firestore.FieldValue.serverTimestamp(),status:"pending_developer",isBusinessEntity:R,businessName:B,entityType:V,stateOfFormation:H,representativeName:O,representativeTitle:W},J=window.sowClientPad.toDataURL(),Y=t("#sowClientName").value.trim(),K=t("#sowClientDate").value,ae=null;firebase.firestore().collection("contracts").add(X).then(function(se){return ae=se.id,console.log(" Contract saved:",ae),firebase.firestore().collection("sow_documents").doc(u.currentSOW.id).update({clientSignature:J,clientSignerName:Y,clientSignedDate:K,clientSignedTimestamp:firebase.firestore.FieldValue.serverTimestamp(),linkedContract:ae,linkedContractEmail:k,linkedContractPhone:m(S),status:"pending_developer"})}).then(function(){console.log(" SOW updated and linked to contract");var se={clientName:Y,clientEmail:k,packageType:u.currentSOW.packageType,estimatedWeeks:u.currentSOW.estimatedWeeks,payment:u.currentSOW.payment,clientSignature:J,clientSignerName:Y,clientSignedDate:K};u.showDualSigningCompleted(X,se)}).catch(function(se){console.error("Error submitting signatures:",se),alert("Error: "+se.message),b&&(b.disabled=!1,b.innerHTML="<span> Submit for Developer Signature</span>")})},M.prototype.showExistingCompletion=function(u){var v=this;console.log("Recreating completion view for existing submission"),this.currentContract={id:u.id,data:u};var y=t("#clientSigningTabs");y&&(y.style.display="none");var b=t("#contractForm");b&&(b.style.display="none");var x=u.status==="completed"&&u.devSignature;u.clientEmail?firebase.firestore().collection("sow_documents").where("clientEmail","==",u.clientEmail).where("linkedContract","==",u.id).limit(1).get().then(function(k){var S=null;k.empty||(S=k.docs[0].data(),S.id=k.docs[0].id),v.renderExistingCompletionView(u,S,x)}).catch(function(k){console.error("Error fetching SOW:",k),v.renderExistingCompletionView(u,null,x)}):u.clientPhone?firebase.firestore().collection("sow_documents").where("clientPhone","==",u.clientPhone).where("linkedContract","==",u.id).limit(1).get().then(function(k){var S=null;k.empty||(S=k.docs[0].data(),S.id=k.docs[0].id),v.renderExistingCompletionView(u,S,x)}).catch(function(k){console.error("Error fetching SOW by phone:",k),v.renderExistingCompletionView(u,null,x)}):v.renderExistingCompletionView(u,null,x)},M.prototype.renderExistingCompletionView=function(u,v,y){var b=this,x=document.getElementById("dualSigningCompleted");if(!x){x=document.createElement("div"),x.id="dualSigningCompleted",x.className="dual-signing-completed";var k=t(".modal-content"),S=t("#closeModalBtn");S&&S.nextSibling?k.insertBefore(x,S.nextSibling):k&&k.appendChild(x)}var P=y?'<span class="doc-status completed"> Fully Signed</span>':'<span class="doc-status pending"> Awaiting Developer Signature</span>',R=y?"Documents Fully Executed!":"Documents Successfully Submitted!",B=y?"Both you and the developer have signed these documents. Download them below.":"The developer will review and countersign shortly.",V=b.calculatePaymentStatus(v),H=V.allPaid?"paid":V.paidCount>0?"partial":"unpaid",O=V.allPaid?"Paid":V.paidCount+"/"+V.totalCount,W='<div class="completion-header"><div class="completion-icon"></div><h2>'+R+'</h2><p class="completion-note">'+B+'</p></div><div class="completion-tabs"><button class="completion-tab active" data-tab="documents"><span class="tab-icon"></span><span class="tab-label">Documents</span></button><button class="completion-tab" data-tab="payments"><span class="tab-icon"></span><span class="tab-label">Payment Status</span><span class="payment-badge '+H+'">'+O+'</span></button></div><div class="completion-tab-content"><div class="completion-tab-pane active" data-tab="documents"><div class="completed-documents"><div class="completed-doc-card"><div class="doc-card-header"><h3> Contract Agreement</h3>'+P+'</div><div class="doc-card-body"><div class="doc-field-row"><span class="field-label">Client:</span><span class="field-value">'+(u.clientName||"N/A")+'</span></div><div class="doc-field-row"><span class="field-label">Client Signed:</span><span class="field-value">'+(u.clientDate||"N/A")+"</span></div>"+(y?'<div class="doc-field-row"><span class="field-label">Developer Signed:</span><span class="field-value">'+(u.devDate||"N/A")+"</span></div>":"")+'<div class="doc-field-row"><span class="field-label">'+(u.clientEmail?"Email:":"Phone:")+'</span><span class="field-value">'+(u.clientEmail||(u.clientPhone?p(u.clientPhone):"N/A"))+'</span></div></div><div class="doc-signature-preview"><p class="signature-label">Your Signature:</p><img src="'+u.clientSignature+'" alt="Your signature" class="signature-image" style="width: 100%; max-width: 100%; height: auto; background: rgba(255, 255, 255, 0.05); border-radius: 6px; padding: 0.5rem; border: 1px solid rgba(255, 255, 255, 0.1);" /></div>';if(y&&(W+='<button class="btn btn-primary download-doc-btn" id="downloadContractBtn" style="width: 100%; margin-top: 1rem;"><span> Download Contract PDF</span></button>'),W+="</div>",v){var X=v.devSignature&&v.clientSignature,J=X?'<span class="doc-status completed"> Fully Signed</span>':'<span class="doc-status pending"> Awaiting Developer Signature</span>';if(W+='<div class="completed-doc-card"><div class="doc-card-header"><h3> Statement of Work</h3>'+J+'</div><div class="doc-card-body"><div class="doc-field-row"><span class="field-label">Client Name:</span><span class="field-value">'+(v.clientName||"N/A")+'</span></div><div class="doc-field-row"><span class="field-label">Package:</span><span class="field-value">'+(v.packageType||"N/A")+'</span></div><div class="doc-field-row"><span class="field-label">Total Cost:</span><span class="field-value">$'+(v.payment?v.payment.total.toFixed(0):"0")+'</span></div><div class="doc-field-row"><span class="field-label">Timeline:</span><span class="field-value">'+(v.estimatedWeeks||"TBD")+' weeks</span></div><div class="doc-field-row"><span class="field-label">Client Signed:</span><span class="field-value">'+(v.clientSignedDate||"N/A")+"</span></div>"+(X?'<div class="doc-field-row"><span class="field-label">Developer Signed:</span><span class="field-value">'+(v.devSignedDate||"N/A")+"</span></div>":"")+'</div><div class="doc-signature-preview"><p class="signature-label">Your Signature:</p><img src="'+v.clientSignature+'" alt="Your SOW signature" class="signature-image" style="width: 100%; max-width: 100%; height: auto; background: rgba(255, 255, 255, 0.05); border-radius: 6px; padding: 0.5rem; border: 1px solid rgba(255, 255, 255, 0.1);" /></div>',X){var Y="sowData_"+v.id.replace(/[^a-zA-Z0-9]/g,"_");if(window[Y]=v,W+='<div style="display: flex; gap: 0.75rem; margin-top: 1rem;"><button type="button" class="sow-action-btn sow-download-btn" onclick="window.contractFormHandler.generateSOWPDF(window.'+Y+')"> Download SOW</button>',v.hasChangeRequest&&v.changeRequestId){var K={pending:{bg:"linear-gradient(135deg, #f59e0b, #d97706)",text:" View Request"},approved:{bg:"linear-gradient(135deg, #10b981, #059669)",text:" View Approved"},rejected:{bg:"linear-gradient(135deg, #ef4444, #dc2626)",text:" View Response"},change_order:{bg:"linear-gradient(135deg, #6366f1, #4f46e5)",text:" View Order"}},ae=K[v.changeRequestStatus]||K.pending;W+='<button type="button" id="changeRequestBtn-'+v.id+'" class="sow-action-btn" style="background: '+ae.bg+`; color: white; border: none;" onclick="window.contractFormHandler.viewChangeRequest('`+v.changeRequestId+`')">`+ae.text+"</button>"}else W+='<button type="button" id="changeRequestBtn-'+v.id+'" class="sow-action-btn sow-change-btn" onclick="window.contractFormHandler.showChangeRequestModal(window.'+Y+')"> Request Change</button>';W+="</div>"}W+="</div>"}W+="</div>",W+='<div class="completion-actions">',y&&v&&v.devSignature&&v.clientSignature&&(W+='<button class="btn btn-primary" id="downloadBothBtn"><span> Download Both PDFs</span></button>'),W+="</div>",W+="</div>",W+='<div class="completion-tab-pane" data-tab="payments">',W+=b.renderPaymentStatusContent(v,V),W+="</div>",W+="</div>",x.innerHTML=W,x.style.display="block";var se=x.querySelectorAll(".completion-tab");se.forEach(function(Me){Me.addEventListener("click",function(){var ve=this.getAttribute("data-tab");se.forEach(function(Be){Be.classList.remove("active")}),this.classList.add("active");var Ee=x.querySelectorAll(".completion-tab-pane");Ee.forEach(function(Be){Be.getAttribute("data-tab")===ve?Be.classList.add("active"):Be.classList.remove("active")})})});var le=document.getElementById("downloadContractBtn");le&&le.addEventListener("click",function(Me){Me.preventDefault(),b.generatePDF()});var xe=document.getElementById("downloadBothBtn");xe&&xe.addEventListener("click",function(Me){Me.preventDefault(),b.generateCombinedPDF(v)})},M.prototype.calculatePaymentStatus=function(u){var v={paidCount:0,totalCount:0,paidAmount:0,totalAmount:0,owedAmount:0,allPaid:!1,payments:[]};if(!u||!u.payment)return v;var y=u.payment,b=y.tracking||{},x=y.deferred&&y.deferred.enabled;if(x&&y.deferred.customSchedule&&y.deferred.customSchedule.length>0){var k=b.deferredPayments||[];y.deferred.customSchedule.forEach(function(P,R){var B=k[R]&&k[R].paid,V=k[R]?k[R].paidDate:null;v.payments.push({name:"Payment "+(R+1),amount:P.amount,dueDate:P.dueDate,paid:B,paidDate:V}),v.totalCount++,v.totalAmount+=P.amount,B&&(v.paidCount++,v.paidAmount+=P.amount)})}else{var S=[{key:"deposit",name:"Deposit (50%)",amount:y.deposit},{key:"milestone1",name:"Milestone (25%)",amount:y.milestone1},{key:"final",name:"Final (25%)",amount:y.final}];S.forEach(function(P){var R=b[P.key+"Paid"]||!1,B=b[P.key+"PaidDate"]||null;v.payments.push({name:P.name,amount:P.amount,paid:R,paidDate:B}),v.totalCount++,v.totalAmount+=P.amount,R&&(v.paidCount++,v.paidAmount+=P.amount)})}return v.owedAmount=v.totalAmount-v.paidAmount,v.allPaid=v.paidCount===v.totalCount&&v.totalCount>0,v},M.prototype.renderPaymentStatusContent=function(u,v){if(!u||!u.payment)return'<div class="payment-status-empty"><p>No payment information available.</p></div>';var y=v.totalCount>0?Math.round(v.paidCount/v.totalCount*100):0,b='<div class="payment-status-container">';return b+='<div class="payment-summary-card"><div class="payment-summary-header"><h3>Payment Overview</h3><span class="payment-progress-badge '+(v.allPaid?"complete":"")+'">'+(v.allPaid?" Fully Paid":v.paidCount+" of "+v.totalCount+" payments")+'</span></div><div class="payment-progress-bar"><div class="payment-progress-fill" style="width: '+y+'%;"></div></div><div class="payment-summary-stats"><div class="payment-stat"><span class="stat-label">Total Project</span><span class="stat-value">$'+v.totalAmount.toFixed(2)+'</span></div><div class="payment-stat paid"><span class="stat-label">Amount Paid</span><span class="stat-value">$'+v.paidAmount.toFixed(2)+'</span></div><div class="payment-stat owed"><span class="stat-label">Amount Owed</span><span class="stat-value">$'+v.owedAmount.toFixed(2)+"</span></div></div></div>",b+='<div class="payment-schedule-card"><h3>Payment Schedule</h3><div class="payment-schedule-list">',v.payments.forEach(function(x,k){var S=x.paid?"paid":"pending",P=x.paid?"":"",R=x.paid?"Paid":"Pending";b+='<div class="payment-schedule-item '+S+'"><div class="payment-item-indicator"><span class="payment-step">'+(k+1)+'</span></div><div class="payment-item-details"><div class="payment-item-header"><span class="payment-item-name">'+x.name+'</span><span class="payment-item-amount">$'+x.amount.toFixed(2)+'</span></div><div class="payment-item-meta">',x.dueDate&&(b+='<span class="payment-due-date">Due: '+x.dueDate+"</span>"),x.paid&&x.paidDate&&(b+='<span class="payment-paid-date">Paid: '+x.paidDate+"</span>"),b+='</div></div><div class="payment-item-status '+S+'"><span class="status-icon">'+P+'</span><span class="status-text">'+R+"</span></div></div>"}),b+="</div></div>",b+="</div>",b},M.prototype.showDualSigningCompleted=function(u,v){console.log("Showing dual signing completed view"),this.currentContract={id:u.id||"pending",data:u};var y=t("#clientSigningTabs");y&&(y.style.display="none",y.remove());var b=t("#contractForm");b&&(b.style.display="none");var x=t(".modal-content");if(x){var k=document.createElement("div");k.id="dualSigningCompleted",k.className="dual-signing-completed",k.innerHTML='<div class="completion-header"><div class="completion-icon"></div><h2>Documents Successfully Submitted!</h2><p>Both your Contract and Statement of Work have been signed and submitted.</p><p class="completion-note">The developer will review and countersign shortly. You can download the PDFs once both parties have signed.</p></div><div class="completed-documents"><div class="completed-doc-card"><div class="doc-card-header"><h3> Contract Agreement</h3><span class="doc-status pending"> Awaiting Developer Signature</span></div><div class="doc-card-body"><div class="doc-field-row"><span class="field-label">Client Name:</span><span class="field-value">'+(u.clientName||"N/A")+'</span></div><div class="doc-field-row"><span class="field-label">Signer Name:</span><span class="field-value">'+(u.clientSignerName||"N/A")+'</span></div><div class="doc-field-row"><span class="field-label">Date Signed:</span><span class="field-value">'+(u.clientDate||"N/A")+'</span></div><div class="doc-field-row"><span class="field-label">'+(u.clientEmail?"Email:":"Phone:")+'</span><span class="field-value">'+(u.clientEmail||(u.clientPhone?p(u.clientPhone):"N/A"))+'</span></div></div><div class="doc-signature-preview"><p class="signature-label">Your Signature:</p><img src="'+u.clientSignature+'" alt="Your signature" class="signature-image" /></div></div><div class="completed-doc-card"><div class="doc-card-header"><h3> Statement of Work</h3><span class="doc-status pending"> Awaiting Developer Signature</span></div><div class="doc-card-body"><div class="doc-field-row"><span class="field-label">Client Name:</span><span class="field-value">'+(v.clientName||"N/A")+'</span></div><div class="doc-field-row"><span class="field-label">Package:</span><span class="field-value">'+(v.packageType||"N/A")+'</span></div><div class="doc-field-row"><span class="field-label">Total Cost:</span><span class="field-value">$'+(v.payment?v.payment.total.toFixed(0):"0")+'</span></div><div class="doc-field-row"><span class="field-label">Timeline:</span><span class="field-value">'+(v.estimatedWeeks||"TBD")+' weeks</span></div><div class="doc-field-row"><span class="field-label">Client Signed:</span><span class="field-value">'+(v.clientSignedDate||"N/A")+'</span></div></div><div class="doc-signature-preview"><p class="signature-label">Your Signature:</p><img src="'+v.clientSignature+'" alt="Your SOW signature" class="signature-image" /></div></div></div><div class="completion-actions"></div>';var S=t("#closeModalBtn");S&&S.nextSibling?x.insertBefore(k,S.nextSibling):x.appendChild(k),alert(` Success!

Both your Contract and Statement of Work have been submitted.

The developer will review and sign shortly.`)}},M.prototype.finalizeContract=function(){var u=this,v=t("#submitBtn"),y=v?v.innerHTML:"";if(v&&(v.disabled=!0,v.innerHTML="<span>Finalizing...</span>"),!this.currentContract){alert("No pending contract found to finalize"),v&&(v.disabled=!1,v.innerHTML=y);return}console.log("Finalizing contract:",this.currentContract.id);var b=this.devSignaturePad?this.devSignaturePad.toDataURL():"",x=t("#devDate")?t("#devDate").value:new Date().toISOString().split("T")[0],k={devName:"Carlos Martin",devSignature:b,devDate:x,devEmail:firebase.auth().currentUser.email,finalizedTimestamp:firebase.firestore.FieldValue.serverTimestamp(),status:"completed"},S=Object.assign({},this.currentContract.data,k);firebase.firestore().collection("contracts").doc(this.currentContract.id).update(k).then(function(){console.log("Contract finalized successfully in Firebase"),u.currentContract.data=S,u.showDeveloperSuccessMessage()}).catch(function(P){console.error("Error finalizing contract:",P),alert("Error finalizing contract: "+P.message+`

Please try again.`),v&&(v.disabled=!1,v.innerHTML=y)})},M.prototype.showClientSuccessMessage=function(){var u=t("#clientSubmitMessage"),v=t("#clientEmailDisplay");if(u){var y=firebase.auth().currentUser;y&&v&&(v.textContent=y.email||y.phoneNumber||"your account"),u.style.display="block",u.scrollIntoView({behavior:"smooth",block:"center"})}var b=t("#clientSignatureBlock");b&&(b.style.display="none");var x=t("#devPendingBlock");x&&(x.style.display="none");var k=t(".acknowledgment");k&&(k.style.display="none")},M.prototype.showDeveloperSuccessMessage=function(){var u=this,v=t("#submitBtn");v&&(v.innerHTML="<span> Uploaded! Click to Download PDF</span>",v.style.background="linear-gradient(135deg, #10b981 0%, #059669 100%)",v.disabled=!1,v.onclick=function(b){b.preventDefault(),u.generatePDF()});var y=t("#downloadBtn");y&&(y.style.display="inline-flex",y.onclick=function(b){b.preventDefault(),u.generatePDF()}),alert("Contract uploaded successfully! Click the button to download the PDF.")},M.prototype.generatePDF=function(){var u=this.currentContract?this.currentContract.data:null,v=this.currentContract?this.currentContract.id:null;if(!u){alert("No contract data available to generate PDF");return}var y=window.open("","_blank");if(!y){alert("Please allow popups to download the PDF");return}var b=u.clientDate||"N/A",x=u.devDate||"N/A",k=u.clientName||"N/A",S=u.clientSignerName||"N/A",P=u.clientEmail||"",R=u.clientPhone||"",B=P||(R?p(R):"N/A"),V=P?"Email":"Phone",H=u.devName||"Carlos Martin",O=u.devEmail||"carlos@scarlo.dev",W=u.clientSignature||"",X=u.devSignature||"",J=u.isBusinessEntity||!1,Y=u.businessName||"",K=u.entityType||"",ae=u.stateOfFormation||"",se=u.representativeName||"",le=u.representativeTitle||"",xe='<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Website Development Agreement - '+(J?Y:k)+'</title><link rel="icon" type="image/png" href="https://scarlo.dev/favicons/favicon-96x96.png"><style>* { margin: 0; padding: 0; box-sizing: border-box; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-size-adjust: 100%; }body { font-family: "Times New Roman", Times, serif; font-size: 11pt; line-height: 1.6; color: #000; background: #fff; padding: 0.75in 1in; }.contract-container { max-width: 750px; margin: 0 auto; }h1 { font-size: 18pt; text-align: center; margin-bottom: 8px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }h2 { font-size: 11pt; margin-top: 20px; margin-bottom: 10px; font-weight: bold; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 1px solid #000; padding-bottom: 4px; }h3 { font-size: 10.5pt; margin-top: 14px; margin-bottom: 6px; font-weight: bold; }p { margin-bottom: 10px; text-align: justify; }ul, ol { margin-left: 30px; margin-bottom: 10px; }li { margin-bottom: 5px; }.header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #000; }.subtitle { font-size: 11pt; margin-top: 6px; font-style: italic; }.parties { padding: 15px 20px; border: 1px solid #000; margin: 20px 0; }.section { margin-bottom: 18px; page-break-inside: avoid; }.caps-section { text-transform: uppercase; font-weight: bold; }.highlight-box { padding: 15px 20px; margin: 15px 0; border: 1px solid #000; border-left: 4px solid #000; }.signature-page { page-break-before: always; margin-top: 50px; }.signature-block { display: inline-block; width: 45%; vertical-align: top; margin: 20px 2%; }.signature-line { border-bottom: 1px solid #000; height: 70px; margin: 10px 0; display: flex; align-items: flex-end; justify-content: center; }.signature-line img { max-height: 60px; max-width: 100%; filter: invert(1) grayscale(1); }.signature-label { font-size: 9pt; margin-top: 5px; font-style: italic; }.signature-name { font-weight: bold; margin-top: 10px; font-size: 10pt; }.signature-date { margin-top: 5px; font-size: 10pt; }.signature-email { font-size: 9pt; font-style: italic; }.footer { margin-top: 50px; text-align: center; font-size: 9pt; border-top: 1px solid #000; padding-top: 20px; }.contract-id { font-size: 8pt; margin-top: 10px; font-style: italic; }.important { font-weight: bold; text-transform: uppercase; }.indented { margin-left: 25px; }.logo { max-width: 180px; max-height: 60px; margin-bottom: 15px; }@media screen and (max-width: 768px) { body { padding: 0.3in 0.25in; } .contract-container { max-width: 100%; } }@media print { body { padding: 0.5in 0.75in; } .signature-page { page-break-before: always; } }@page { margin: 0.75in 1in; size: letter; }</style></head><body><div class="contract-container"><div class="header"><img src="'+c()+'" alt="Scarlo Logo" class="logo" /><h1>Website Development Agreement</h1><div class="subtitle">Scarlo  Professional Web Development Services</div></div><div class="section"><h2>1. Parties</h2><p>This Agreement is entered into as of <strong>'+b+'</strong> between:</p><div class="parties"><p><strong>Developer:</strong> Scarlo (Carlos Martin), Fresno County, California</p>'+(J?"<p><strong>Client:</strong> "+Y+", a "+K+(ae?" formed in "+ae:"")+(P?" ("+P+")":"")+"</p>":"<p><strong>Client:</strong> "+k+(P?" ("+P+")":"")+"</p>")+`</div></div><div class="section"><h2>2. Scope of Work</h2><p>Developer agrees to design, develop, and deliver a custom website as detailed in the attached Statement of Work (SOW). The SOW specifies all features, deliverables, timeline, and pricing. Only items in the approved SOW are included; additional requests require a written Change Order with revised pricing.</p></div><div class="section"><h2>3. Payment Terms</h2><p><strong>Payment Schedule:</strong></p><ul><li><strong>50% Deposit</strong>  Due before work begins</li><li><strong>25% Milestone</strong>  Due upon design approval</li><li><strong>25% Final</strong>  Due before deployment</li></ul><p><strong>Cancellation Policy:</strong> If Client cancels, Developer retains: 15% (before design), 35% (during design), or full deposit (after development starts). These amounts reflect Developer's actual estimated damages per California Civil Code 1671.</p><p><strong>Late Payments:</strong> Payments over 7 days late incur 1.5% monthly interest. Developer may pause work if payment is 14+ days overdue.</p></div><div class="section"><h2>4. Intellectual Property</h2><p><strong>Upon full payment, Client receives:</strong> The final website design, custom graphics, and production build.</p><p><strong>Developer retains:</strong> Source code, backend architecture, reusable components, and development tools. Client receives a license to use these as part of the delivered website.</p><p><strong>Important:</strong> No IP rights transfer until full payment is received.</p></div><div class="section"><h2>5. Revisions & Changes</h2><p>Client receives <strong>2 revision rounds per milestone</strong>. Additional revisions or scope changes require a Change Order. Client must provide materials and feedback within 5 business days of request; delays extend the timeline accordingly.</p></div><div class="section"><h2>6. Warranty & Liability</h2><p><strong>Warranty:</strong> Developer warrants the website will function as specified for 30 days after delivery. This excludes issues from Client modifications, third-party service changes, or hosting problems.</p><div class="highlight-box"><p class="caps-section"><strong>WARRANTY DISCLAIMER:</strong> EXCEPT FOR THE EXPRESS 30-DAY WARRANTY ABOVE, ALL DELIVERABLES ARE PROVIDED "AS IS" WITHOUT ANY IMPLIED WARRANTIES, INCLUDING WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</p><p class="caps-section" style="margin-top: 10px;"><strong>LIMITATION OF LIABILITY:</strong> DEVELOPER'S TOTAL LIABILITY SHALL NOT EXCEED THE AMOUNT PAID BY CLIENT. DEVELOPER IS NOT LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR LOST PROFIT DAMAGES, EVEN IF ADVISED OF THEIR POSSIBILITY.</p></div></div><div class="section"><h2>7. Indemnification</h2><p><strong>Client indemnifies Developer</strong> from any claims, damages, or expenses (including attorneys' fees) arising from: (a) content or materials provided by Client; (b) Client's use of deliverables in violation of law; or (c) infringement claims caused by Client-provided materials.</p><p><strong>Developer indemnifies Client</strong> from IP infringement claims for Developer's original work (excluding Client content and third-party materials), limited to fees paid under this Agreement.</p></div><div class="section"><h2>8. Termination</h2><p><strong>By Client:</strong> 14 days written notice; cancellation policy applies.</p><p><strong>By Developer:</strong> May terminate if Client fails to provide materials for 15+ days, is unresponsive for 30+ days, or engages in abusive behavior.</p><p><strong>For Cause:</strong> Either party may terminate for material breach not cured within 15 days of notice.</p></div><div class="section"><h2>9. Dispute Resolution</h2><p><strong>Process:</strong> Parties shall first negotiate in good faith for 30 days. If unresolved, disputes shall be submitted to mediation in Fresno County, California. If mediation fails, either party may pursue litigation in Fresno County courts.</p><p><strong>Attorneys' Fees:</strong> The prevailing party in any dispute shall recover reasonable attorneys' fees and costs from the other party.</p></div><div class="section"><h2>10. General Terms</h2><p><strong>Governing Law:</strong> This Agreement is governed by California law.</p><p><strong>Force Majeure:</strong> Neither party is liable for delays caused by circumstances beyond reasonable control (natural disasters, pandemic, internet outages, acts of government).</p><p><strong>Assignment:</strong> Client may not assign this Agreement without Developer's written consent. Developer may assign to a successor upon notice.</p><p><strong>Severability:</strong> If any provision is unenforceable, it shall be modified to the minimum extent necessary; remaining provisions continue in effect.</p><p><strong>Confidentiality:</strong> Both parties agree to keep confidential information private for 3 years after termination.</p><p><strong>Independent Contractor:</strong> Developer is not an employee of Client.</p><p><strong>Entire Agreement:</strong> This Agreement and the attached SOW constitute the complete agreement. Amendments require written consent from both parties. Electronic signatures are valid.</p></div><div class="signature-page"><h2 style="text-align: center; border: none; margin-bottom: 20px;">Agreement & Signatures</h2><p style="text-align: center; margin-bottom: 30px;">By signing below, both parties agree to the terms of this Agreement and the attached Statement of Work.</p><div style="display: flex; justify-content: space-between; margin-top: 30px;"><div class="signature-block"><h3 style="font-size: 10pt;">DEVELOPER: Scarlo</h3><div class="signature-line">`+(X?'<img src="'+X+'" alt="Developer Signature" />':'<span style="font-style: italic;">Awaiting Signature</span>')+'</div><div class="signature-label">Authorized Signature</div><div class="signature-name">'+H+'</div><div class="signature-date">Date: '+x+'</div><div class="signature-email">Email: '+O+'</div></div><div class="signature-block"><h3 style="font-size: 10pt;">CLIENT: '+(J?Y:k)+"</h3>"+(J?'<p style="font-size: 9pt; margin-bottom: 5px;">'+K+(ae?" ("+ae+")":"")+"</p>":"")+'<div class="signature-line">'+(W?'<img src="'+W+'" alt="Client Signature" />':'<span style="font-style: italic;">Awaiting Signature</span>')+'</div><div class="signature-label">Authorized Signature</div><div class="signature-name">'+(J?"By: "+se+", "+le:S)+'</div><div class="signature-date">Date: '+b+'</div><div class="signature-email">'+V+": "+B+'</div></div></div></div><div class="footer"><p><strong> '+new Date().getFullYear()+' Scarlo  Carlos Martin</strong></p><p>Professional Web Development Services</p><p class="contract-id">Contract ID: '+(v||"DRAFT")+'</p><p class="contract-id">Generated: '+new Date().toLocaleString()+"</p></div></div><script>window.onload = function() {  var images = document.images;  var loaded = 0;  var total = images.length;  if (total === 0) { setTimeout(function() { window.print(); }, 300); return; }  for (var i = 0; i < total; i++) {    if (images[i].complete) { loaded++; }    else { images[i].onload = images[i].onerror = function() { loaded++; if (loaded >= total) setTimeout(function() { window.print(); }, 300); }; }  }  if (loaded >= total) setTimeout(function() { window.print(); }, 300);};<\/script></body></html>";y.document.write(xe),y.document.close()},M.prototype.generateCombinedPDF=function(u){var v=this,y=this.currentContract?this.currentContract.data:null;if(!y){alert("No contract data available");return}if(!u){alert("No SOW data available");return}var b=window.open("","_blank");if(!b){alert("Please allow popups to download the PDF");return}var x=y.clientDate||"N/A",k=y.devDate||"N/A",S=y.clientName||"N/A",P=y.clientSignerName||"N/A",R=y.clientEmail||"",B=y.clientPhone||"",V=R||(B?p(B):"N/A"),H=R?"Email":"Phone",O=y.devName||"Carlos Martin",W=y.devEmail||"N/A",X=y.clientSignature||"",J=y.devSignature||"",Y=y.isBusinessEntity||u.isBusinessEntity||!1,K=y.businessName||u.businessName||"",ae=y.entityType||u.entityType||"",se=y.stateOfFormation||u.stateOfFormation||"",le=y.representativeName||u.representativeName||"",xe=y.representativeTitle||u.representativeTitle||"",Me={essential:"Essential  Landing Page",starter:"Tier 1  Starter",growth:"Tier 2  Growth",professional:"Tier 3  Professional",enterprise:"Tier 4  Enterprise",custom:"Custom Quote"},ve={essential:{includes:["Single-page landing page (1-3 sections)","Cross-device optimization","Clean, modern React/Next.js design","Contact form with validation","Basic SEO setup","DNS & hosting configuration (client pays for domain)"]},starter:{includes:["Multi-section React/Next.js website","Brand-matched design system","Scroll animations & micro-interactions","Multi-step contact forms","GA4 + custom event tracking","Full technical SEO","DNS & hosting configuration (client pays for domain)"]},growth:{includes:["Everything in Starter","Firebase Authentication","Protected content areas","Form data capture & storage","Newsletter integration","3 rounds of revisions","Domain, hosting & SSL included (first year)"]},professional:{includes:["Everything in Growth","Full Firebase backend","User dashboard & profiles","File/media upload system","API integrations","Email notifications (SendGrid)","2 months of maintenance included","Domain, hosting & SSL included (first year)"]},enterprise:{includes:["Everything in Professional","Multi-page application","Role-based access control","In-app notifications","Admin dashboards","Documentation & training","3 months of premium maintenance included","Domain, hosting & SSL included (first year)"]}},Ee=ve[u.packageType]||{includes:[]},Be=u.payment?u.payment.total:0,Qe=Be*.5,Ze=Be*.25,tt=Be*.25,$e={none:{name:"No Maintenance Plan",cost:"$0/month"},basic:{name:"Basic Care",cost:"$167/month",desc:"Minor updates, security patches (2-3 hrs/month)"},professional:{name:"Professional Care",cost:"$335/month",desc:"Regular updates, performance optimization (4-6 hrs/month)"},premium:{name:"Premium Care",cost:"$670/month",desc:"Priority support, new components, SEO optimization (8-12 hrs/month)"}},st=$e[u.maintenancePlan||"none"]||$e.none,qe='<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Complete Agreement Package - '+(Y?K:S)+'</title><link rel="icon" type="image/png" href="https://scarlo.dev/favicons/favicon-96x96.png"><style>* { margin: 0; padding: 0; box-sizing: border-box; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; text-size-adjust: 100%; }body { font-family: "Times New Roman", Times, serif; font-size: 11pt; line-height: 1.6; color: #000; background: #fff; padding: 0.75in 1in; }h1 { font-size: 18pt; text-align: center; margin-bottom: 8px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }h2 { font-size: 11pt; margin-top: 20px; margin-bottom: 10px; font-weight: bold; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 1px solid #000; padding-bottom: 4px; }h3 { font-size: 10.5pt; margin-top: 14px; margin-bottom: 6px; font-weight: bold; }p { margin-bottom: 10px; text-align: justify; }ul, ol { margin-left: 30px; margin-bottom: 10px; }li { margin-bottom: 5px; }.header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #000; }.subtitle { font-size: 11pt; margin-top: 6px; font-style: italic; }.parties { padding: 15px 20px; border: 1px solid #000; margin: 20px 0; }.section { margin-bottom: 18px; page-break-inside: avoid; }.signature-page { page-break-before: always; margin-top: 50px; }.signature-block { display: inline-block; width: 45%; vertical-align: top; margin: 20px 2%; }.signature-line { border-bottom: 1px solid #000; height: 70px; margin: 10px 0; display: flex; align-items: flex-end; justify-content: center; }.signature-line img { max-height: 60px; max-width: 100%; filter: invert(1) grayscale(1); }.signature-label { font-size: 9pt; margin-top: 5px; font-style: italic; }.signature-name { font-weight: bold; margin-top: 10px; font-size: 10pt; }.signature-date { margin-top: 5px; font-size: 10pt; }.signature-email { font-size: 9pt; font-style: italic; }.footer { margin-top: 50px; text-align: center; font-size: 9pt; border-top: 1px solid #000; padding-top: 20px; }.contract-id { font-size: 8pt; margin-top: 10px; font-style: italic; }.page-break { page-break-before: always; }.info-box { padding: 15px 20px; border: 1px solid #000; border-left: 4px solid #000; margin: 20px 0; }.info-box h3 { margin-top: 0; }.payment-table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 10pt; }.payment-table th, .payment-table td { border: 1px solid #000; padding: 10px 12px; text-align: left; }.payment-table th { font-weight: bold; }.total-row { font-weight: bold; font-size: 11pt; border-top: 2px solid #000; }.highlight { font-weight: bold; }.logo { max-width: 180px; max-height: 60px; margin-bottom: 15px; }@media screen and (max-width: 768px) { body { padding: 0.3in 0.25in; } }@media print { body { padding: 0.5in 0.75in; } .signature-page, .page-break { page-break-before: always; } }@page { margin: 0.75in 1in; size: letter; }</style></head><body><div class="header"><img src="'+c()+'" alt="Scarlo Logo" class="logo" /><h1>Website Development Agreement</h1><div class="subtitle">Scarlo  Professional Web Development Services</div></div><div class="section"><h2>PARTIES TO THE AGREEMENT</h2><p>This Website Development Agreement ("Agreement") is made effective as of <strong>'+x+'</strong> (the "Effective Date") and is entered into by and between:</p><div class="parties"><p><strong>Scarlo</strong>, a sole proprietorship owned and operated by Carlos Martin (the "Developer"),</p><p>and</p>'+(Y?"<p><strong>"+K+"</strong>, a "+ae+(se?" formed in "+se:"")+' (the "Client")</p>':"<p><strong>"+S+'</strong> (the "Client")</p>')+`<p style="font-size: 10pt; font-style: italic; margin-top: 10px;">The Developer and Client may be referred to individually as a "Party" and collectively as the "Parties."</p></div></div><div class="section"><h2>1. PROJECT SCOPE</h2><h3>1.1 Overview</h3><p>Developer agrees to design, build, and deliver a custom website or web application using modern technologies, which may include but are not limited to: Visual Studio Code, React, Next.js, Firebase, Vite, REST/Graph APIs, and associated development tools.</p><h3>1.2 Statement of Work (SOW)</h3><p>All features, functionalities, pages, integrations, and deliverables will be detailed in a separate Proposal or Statement of Work ("SOW") prepared by Developer and approved by Client.</p><h3>1.3 Scope Limitations</h3><p>Only items expressly included in the SOW form part of the Project Scope. Any request beyond that scopewhether new features, design changes, additional pages, or system enhancementsrequires an approved Change Order (Section 10).</p></div><div class="section"><h2>2. PACKAGES & PRICING</h2><p>Developer offers multiple service tiers, including Starter, Professional, Premium, and Elite website/application packages. The applicable pricing, deliverables, and package level for this Agreement will be specified in the attached SOW, which forms an integral part of this Agreement.</p></div><div class="section"><h2>3. PAYMENT TERMS</h2><p>Unless otherwise specified in the SOW:</p><h3>3.1 Deposit</h3><p>A non-refundable deposit of 50% is required before any work begins, unless the Developer chooses to accept a different amount at their discretion.</p><h3>3.2 Milestone Payments</h3><p>If no custom timetable is specified in the SOW, the standard schedule is:</p><ul><li>25% due upon UI/UX design approval</li><li>25% due at final delivery or prior to deployment, whichever the Developer determines is appropriate</li></ul><h3>3.3 Late Payments</h3><p>Payments not received within 7 days of the due date may, at the Developer's discretion, incur a monthly late fee of up to 5%. The Developer may also pause or delay work until any outstanding balance is paid.</p></div><div class="section"><h2>4. CLIENT RESPONSIBILITIES</h2><p>Client agrees to provide all necessary materialsincluding copy, images, brand assets, credentials, and requested informationwithin 5 business days of Developer's request.</p><p>Any delays in providing required materials will directly extend the project timeline. Developer is not responsible for delays caused by the Client.</p></div><div class="section"><h2>5. REVISIONS</h2><p>Unless otherwise stated in the SOW:</p><ul><li>Client receives up to two (2) rounds of revisions per milestone</li><li>Additional revisions or redesigns require a Change Order and may incur additional charges</li></ul></div><div class="section"><h2>6. INTELLECTUAL PROPERTY RIGHTS</h2><h3>6.1 Developer Ownership</h3><p>Developer retains full ownership of all proprietary materials, including source code, backend logic and architecture, custom components, scripts, and utilities, and Developer's internal systems, tools, libraries, and workflows.</p><h3>6.2 Client Ownership</h3><p>Upon full payment, Client gains ownership of the final website design, all content supplied by Client (text, images, media), and the compiled, minified production build of the project.</p></div><div class="section"><h2>7. MAINTENANCE & SUPPORT</h2><p>Maintenance plans (Basic, Professional, Premium) may be purchased separately and will be defined in the SOW. Maintenance plans do not include new pages or sections, new features or functionalities, major redesigns, third-party outages, policy changes from platforms, or fixes related to Client misuse.</p></div><div class="section"><h2>8. TIMELINE & DELIVERY</h2><p>Developer will provide an estimated project timeline. Client acknowledges these timelines are estimates, not guarantees. Any Client-caused delay automatically extends the project schedule.</p></div><div class="section"><h2>9. CHANGE ORDERS</h2><p>Any request modifying the Project Scopeincluding added features, redesigns, advanced animations, dashboards, APIs, or system logicrequires a signed Change Order that includes revised pricing and timelines.</p></div><div class="section"><h2>10. WARRANTY & LIMITATIONS</h2><h3>10.1 Developer Warranty</h3><p>Developer warrants that the delivered website will function substantially as described in the SOW for 30 days after deployment.</p><h3>10.2 Exclusions</h3><p>This warranty does not apply to issues caused by Client-modified code, third-party service changes, library updates, hosting issues, improper access, or security breaches caused by Client.</p><h3>10.3 Liability Limitations</h3><p>Developer's total liability under this Agreement is limited to the total amount paid by Client.</p></div><div class="section"><h2>11. CONFIDENTIALITY</h2><p>Both Parties agree to maintain the confidentiality of all proprietary or sensitive information exchanged during the course of this project.</p></div><div class="section"><h2>12. INDEMNIFICATION</h2><p>Client agrees to indemnify and hold Developer harmless from any claims arising out of content supplied by Client, misuse of the website, unauthorized access, or business decisions made using data produced by the website.</p></div><div class="section"><h2>13. TERMINATION</h2><p>Either Party may terminate this Agreement with 7 days written notice. If Client terminates early, all deposits are forfeited, all completed work must be paid for immediately, and Developer retains all rights to unfinished work.</p></div><div class="section"><h2>14. GOVERNING LAW</h2><p>This Agreement shall be governed by and construed in accordance with the laws of the State of California without regard to conflict-of-law principles.</p></div><div class="section"><h2>15. ENTIRE AGREEMENT</h2><p>This Agreement, together with all attached SOWs, proposals, and addenda, constitutes the entire and complete agreement between the Parties and supersedes all prior discussions, negotiations, or understandings.</p></div><div class="signature-page"><h2 style="text-align: center; border: none;">CONTRACT SIGNATURES</h2><p style="text-align: center; margin-bottom: 30px;">By signing below, both parties acknowledge that they have read, understood, and agree to all terms and conditions outlined in this Agreement.</p><div style="display: flex; justify-content: space-between; margin-top: 40px;"><div class="signature-block"><h3>Developer  Scarlo</h3><div class="signature-line">`+(J?'<img src="'+J+'" alt="Developer Signature" />':'<span style="font-style: italic;">Pending</span>')+'</div><div class="signature-label">Signature</div><div class="signature-name">'+O+'</div><div class="signature-date">Date: '+k+'</div><div class="signature-email">'+W+'</div></div><div class="signature-block"><h3>Client  '+(Y?K:S)+"</h3>"+(Y?'<p style="font-size: 9pt; margin-bottom: 5px;">'+ae+(se?" ("+se+")":"")+"</p>":"")+'<div class="signature-line">'+(X?'<img src="'+X+'" alt="Client Signature" />':'<span style="font-style: italic;">Pending</span>')+'</div><div class="signature-label">Signature</div><div class="signature-name">'+(Y?"By: "+le+", "+xe:P)+'</div><div class="signature-date">Date: '+x+'</div><div class="signature-email">'+H+": "+V+'</div></div></div></div><div class="page-break"></div><div class="header"><img src="'+c()+'" alt="Scarlo Logo" class="logo" /><h1>STATEMENT OF WORK</h1><div class="subtitle">Scarlo  Professional Web Development</div><div style="font-size: 10pt; font-style: italic; margin-top: 10px;">Generated: '+new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})+'</div></div><div class="info-box"><h3>Client Information</h3>'+(Y?"<p><strong>Business Name:</strong> "+K+"</p><p><strong>Entity Type:</strong> "+ae+(se?" ("+se+")":"")+"</p><p><strong>Representative:</strong> "+le+", "+xe+"</p>":"<p><strong>Client Name:</strong> "+(u.clientName||S)+"</p>")+"<p><strong>Contact:</strong> "+(u.clientEmail||u.clientPhone||R||"N/A")+"</p><p><strong>Package:</strong> "+(Me[u.packageType]||u.packageType)+' <span class="highlight">$'+Be.toFixed(0)+"</span></p><p><strong>Estimated Timeline:</strong> "+(u.estimatedWeeks||"TBD")+" weeks"+(u.startDate?" (Starting "+new Date(u.startDate).toLocaleDateString()+")":"")+'</p></div><div class="section"><h2>Package Includes</h2><ul>';Ee.includes&&Ee.includes.length>0&&Ee.includes.forEach(function(lt){qe+="<li>"+lt+"</li>"}),qe+="</ul></div>",u.features&&u.features.length>0&&(qe+='<div class="section"><h2>Additional Features & Deliverables</h2><ul>',u.features.forEach(function(lt){qe+="<li>"+lt+"</li>"}),qe+="</ul></div>"),u.notes&&(qe+='<div class="section"><h2>Special Requirements</h2><p>'+u.notes+"</p></div>"),qe+='<div class="section"><h2>Payment Structure</h2><table class="payment-table"><thead><tr><th>Payment Milestone</th><th>Description</th><th>Amount</th></tr></thead><tbody><tr><td><strong>Initial Deposit</strong></td><td>Due before work begins (50%)</td><td><strong>$'+Qe.toFixed(0)+"</strong></td></tr><tr><td><strong>Milestone 1</strong></td><td>UI/UX Design Approval (25%)</td><td><strong>$"+Ze.toFixed(0)+"</strong></td></tr><tr><td><strong>Final Payment</strong></td><td>Prior to deployment (25%)</td><td><strong>$"+tt.toFixed(0)+'</strong></td></tr><tr class="total-row"><td colspan="2">Total Project Cost</td><td>$'+Be.toFixed(0)+"</td></tr></tbody></table></div>",u.maintenancePlan==="none"?qe+='<div class="section"><h2>Ongoing Maintenance</h2><div class="info-box" style="background: #fff3cd; border-color: #856404;"><h3 style="color: #856404;">No Maintenance Plan  $0/month</h3><p style="color: #856404;"><strong> IMPORTANT:</strong> Developer will NOT provide any ongoing maintenance, updates, security patches, bug fixes, or technical support after the post-launch period ends. Client is solely responsible for website maintenance.</p></div></div>':u.maintenancePlan&&(qe+='<div class="section"><h2>Ongoing Maintenance</h2><div class="info-box"><h3>'+st.name+"  "+st.cost+"</h3><p>"+(st.desc||"")+"</p></div></div>"),qe+='<div class="section"><h2>Terms & Conditions</h2><p>This Statement of Work is subject to the terms outlined in the Website Development Agreement between Scarlo and <strong>'+S+"</strong>. All work will be performed using modern technologies including React, Next.js, Firebase, and associated development tools in accordance with industry best practices.</p><p>The project timeline is an estimate and may be adjusted based on client feedback, content delivery, and scope changes. Any requests beyond the defined scope require a signed Change Order.</p></div>",qe+='<div class="signature-page"><h2 style="text-align: center; border: none;">SOW SIGNATURES</h2><p style="text-align: center; margin-bottom: 30px;">By signing below, both parties acknowledge agreement to the scope, timeline, and payment terms outlined in this Statement of Work.</p><div style="display: flex; justify-content: space-between; margin-top: 40px;"><div class="signature-block"><h3>Developer  Scarlo</h3><div class="signature-line">'+(u.devSignature?'<img src="'+u.devSignature+'" alt="Developer Signature" />':'<span style="font-style: italic;">Pending</span>')+'</div><div class="signature-label">Signature</div><div class="signature-name">'+(u.devSignerName||"Carlos Martin")+'</div><div class="signature-date">Date: '+(u.devSignedDate||"N/A")+'</div></div><div class="signature-block"><h3>Client  '+(Y?K:S)+"</h3>"+(Y?'<p style="font-size: 9pt; margin-bottom: 5px;">'+ae+(se?" ("+se+")":"")+"</p>":"")+'<div class="signature-line">'+(u.clientSignature?'<img src="'+u.clientSignature+'" alt="Client Signature" />':'<span style="font-style: italic;">Pending</span>')+'</div><div class="signature-label">Signature</div><div class="signature-name">'+(Y?"By: "+le+", "+xe:u.clientSignerName||S)+'</div><div class="signature-date">Date: '+(u.clientSignedDate||"N/A")+'</div></div></div></div><div class="footer"><p><strong> '+new Date().getFullYear()+' Scarlo</strong>  Crafted with precision</p><p style="margin-top: 8px;">Carlos Martin | Professional Web Development</p><p class="contract-id">Contract ID: '+(v.currentContract?v.currentContract.id:"N/A")+" | SOW ID: "+u.id+"</p></div><script>window.onload = function() {  var images = document.images;  var loaded = 0;  var total = images.length;  if (total === 0) { setTimeout(function() { window.print(); }, 300); return; }  for (var i = 0; i < total; i++) {    if (images[i].complete) { loaded++; }    else { images[i].onload = images[i].onerror = function() { loaded++; if (loaded >= total) setTimeout(function() { window.print(); }, 300); }; }  }  if (loaded >= total) setTimeout(function() { window.print(); }, 300);};<\/script></body></html>",b.document.write(qe),b.document.close()};var te=function(){window.addEventListener("load",function(){document.body.classList.add("loaded")})},Z=function(){if("ontouchstart"in window&&!window.matchMedia("(pointer: fine)").matches){console.log("Custom cursor disabled - touch-only device");return}console.log("Custom cursor enabled - mouse devices only"),this.cursor=document.createElement("div"),this.cursor.className="custom-cursor",this.cursor.style.cssText="position:fixed;left:0;top:0;width:10px;height:10px;background:rgba(255,255,255,0.9);border-radius:50%;pointer-events:none;z-index:99999;opacity:0;mix-blend-mode:difference;transition:width 0.2s cubic-bezier(0.4,0,0.2,1),height 0.2s cubic-bezier(0.4,0,0.2,1),opacity 0.15s ease-out;will-change:transform;backface-visibility:hidden;transform:translate3d(0,0,0);",document.body.appendChild(this.cursor),this.position={x:0,y:0},this.target={x:0,y:0},this.currentSize=10,this.isVisible=!1,this.isHovering=!1,this.isAnimating=!1,this.hoverCheckFrame=0,this.interactiveSelectors="a, button, input, textarea, select, canvas, .clear-btn, .modal-close, .auth-close, .nav-link, .btn, .hamburger, .item, .item__image, .enlarge",this.init(),this.handleResize()};Z.prototype.init=function(){var u=this,v=document.createElement("style");v.id="custom-cursor-style",v.textContent="@media (min-width: 1024px) {  body:not(.modal-open):not(.custom-cursor-hidden) * { cursor: none !important; }  body.modal-open, body.modal-open * { cursor: auto !important; }  body.modal-open .signature-pad { cursor: crosshair !important; }  body.custom-cursor-hidden, body.custom-cursor-hidden * { cursor: auto !important; }}",document.head.appendChild(v);var y=!1;document.addEventListener("pointermove",function(b){if(b.pointerType!=="mouse"){u.isVisible&&(u.cursor.style.opacity="0",u.isVisible=!1,u.isAnimating=!1);return}var x=document.body.classList.contains("modal-open");if(y&&!x&&(u.isVisible=!0,u.cursor.style.opacity="1",document.body.classList.remove("custom-cursor-hidden")),y=x,x){u.cursor.style.opacity="0",u.isAnimating=!1,document.body.classList.add("custom-cursor-hidden");return}if(u.target.x=b.clientX,u.target.y=b.clientY,u.isVisible||(u.position.x=b.clientX,u.position.y=b.clientY,u.updateCursorPosition(),u.isVisible=!0,u.cursor.style.opacity="1"),u.isAnimating||(u.isAnimating=!0,u.animate()),u.hoverCheckFrame++,u.hoverCheckFrame%2===0){var k=document.elementFromPoint(b.clientX,b.clientY);u.checkHoverState(k)}},{passive:!0}),document.addEventListener("pointerleave",function(){u.isVisible=!1,u.isAnimating=!1,u.cursor.style.opacity="0",document.body.classList.add("custom-cursor-hidden")}),document.addEventListener("pointerenter",function(){document.body.classList.remove("custom-cursor-hidden")})},Z.prototype.handleResize=function(){},Z.prototype.checkHoverState=function(u){if(!(!u||document.body.classList.contains("modal-open"))){var v=!!u.closest(this.interactiveSelectors);v!==this.isHovering&&(this.isHovering=v,v?(this.cursor.style.width="40px",this.cursor.style.height="40px",this.currentSize=40):(this.cursor.style.width="10px",this.cursor.style.height="10px",this.currentSize=10),this.updateCursorPosition())}},Z.prototype.updateCursorPosition=function(){var u=this.currentSize/2;this.cursor.style.transform="translate3d("+(this.position.x-u)+"px, "+(this.position.y-u)+"px, 0)"},Z.prototype.animate=function(){if(this.isAnimating){var u=this,v=.65,y=.5,b=this.target.x-this.position.x,x=this.target.y-this.position.y,k=Math.sqrt(b*b+x*x);if(k<y){this.position.x=this.target.x,this.position.y=this.target.y,this.updateCursorPosition(),this.isAnimating=!1;return}this.position.x+=b*v,this.position.y+=x*v,this.updateCursorPosition(),requestAnimationFrame(function(){u.animate()})}};var $=function(){this.setVH();var u=this;window.addEventListener("resize",s(function(){u.setVH()},250))};$.prototype.setVH=function(){var u=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",u+"px")};var re=function(){var u=window.matchMedia("(prefers-reduced-motion: reduce)");u.matches&&document.body.classList.add("reduce-motion"),document.addEventListener("keydown",function(v){v.key==="Tab"&&document.body.classList.add("keyboard-nav")}),document.addEventListener("mousedown",function(){document.body.classList.remove("keyboard-nav")})},fe=function(){console.log("Initializing Section Separator Glow...");var u=e("section");if(!(!u||u.length===0)){var v=window.innerWidth<=1024,y=v?20:50,b=function(){var k=window.innerHeight;u.forEach(function(S){if(!S.classList.contains("separator-visible")&&!S.classList.contains("footer")){var P=S.getBoundingClientRect(),R=P.bottom>0&&P.bottom<k*.85;R&&(S.classList.add("separator-visible"),console.log("Section separator triggered:",S.id||S.className))}})},x=!1;window.addEventListener("scroll",function(){window.pageYOffset<y||x||(requestAnimationFrame(function(){b(),x=!1}),x=!0)},{passive:!0})}},he=function(){var u=t(".footer-back-to-top");if(u){var v=300,y=!1,b=function(){var x=window.pageYOffset>v;x!==y&&(y=x,x?u.classList.add("visible"):u.classList.remove("visible"))};window.addEventListener("scroll",i(b,100),{passive:!0}),b()}},we=function(){console.log("Scarlo - Crafted with precision"),l(),console.log("Device: "+(_.isMobile()?"Mobile":"Desktop")),console.log("Screen width:",window.innerWidth);var u=t(".navbar-logo-ambient"),v=t(".navbar-text-ambient");u&&v&&(u.style.animation="none",v.style.animation="none",u.offsetHeight,v.offsetHeight,u.style.animation="navbarAmbientPulse 3s ease-in-out infinite",v.style.animation="navbarAmbientPulse 3s ease-in-out infinite"),new z,new C,new E,new A,new T,new L,new F,window.contractFormHandler=new M,new te,new Z,new $,new re,new fe,new he};function ge(){window.firebaseReady?window.firebaseReady.then(we).catch(function(u){console.error("Firebase initialization failed, starting app anyway:",u),we()}):we()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ge):ge()})();const Ea=document.getElementById("message");Ea&&(Ea.addEventListener("input",function(){this.style.height="auto",this.style.height=Math.min(this.scrollHeight,400)+"px"}),Ea.style.height="auto",Ea.style.height=Math.min(Ea.scrollHeight,400)+"px");(function(){var t="scarlo_cookie_consent",e="userPreferences",i=7,s=i*24*60*60*1e3,a=document.getElementById("cookieConsent"),l=document.getElementById("cookieSettingsBtn"),c=document.getElementById("cookieAccept"),f=document.getElementById("cookieDecline"),p=document.getElementById("cookieAnalytics"),m=document.getElementById("cookieMarketing");if(!a)return;function g($){return $&&$.analytics===!0&&$.marketing===!0}function _($){if(!$)return!0;if(g($))return!1;var re=Date.now()-($.timestamp||0);return re>=s}function C(){try{var $=localStorage.getItem(t);return $?JSON.parse($):null}catch{return null}}function E($){try{localStorage.setItem(t,JSON.stringify($))}catch{}}function A(){return window.auth&&window.auth.currentUser?window.auth.currentUser:null}function T($){var re=A();return!re||!window.db?Promise.resolve():window.db.collection(e).doc(re.uid).set({cookieConsent:$,updatedAt:firebase.firestore.FieldValue.serverTimestamp()},{merge:!0}).catch(function(fe){console.warn("Failed to save cookie consent to Firestore:",fe)})}function L(){var $=A();return!$||!window.db?Promise.resolve(null):window.db.collection(e).doc($.uid).get().then(function(re){return re.exists&&re.data().cookieConsent?re.data().cookieConsent:null}).catch(function(re){return console.warn("Failed to load cookie consent from Firestore:",re),null})}function F(){a.classList.add("visible"),a.setAttribute("aria-hidden","false"),l.classList.remove("visible"),l.setAttribute("aria-hidden","true")}function U(){a.classList.remove("visible"),a.setAttribute("aria-hidden","true"),l.classList.add("visible"),l.setAttribute("aria-hidden","false")}function M($){$&&(p.checked=$.analytics,m.checked=$.marketing)}function z($){window.dispatchEvent(new CustomEvent("cookieConsentUpdated",{detail:$})),$.analytics,$.marketing}function I($){E($),T($)}function G(){var $=C();_($)?(M($),F()):(M($),l.classList.add("visible"),l.setAttribute("aria-hidden","false"),z($))}function te($){$&&L().then(function(re){var fe=C(),he=null;re&&fe?re.timestamp>fe.timestamp?(he=re,E(re)):(he=fe,T(fe)):re&&!fe?(he=re,E(re)):!re&&fe&&(he=fe,T(fe)),he&&(M(he),_(he)?F():(a.classList.remove("visible"),l.classList.add("visible"),l.setAttribute("aria-hidden","false"),z(he)))})}function Z(){window.auth&&window.auth.onAuthStateChanged(te)}c.addEventListener("click",function(){var $={essential:!0,analytics:p.checked,marketing:m.checked,timestamp:new Date().toLocaleString()};I($),U(),z($)}),f.addEventListener("click",function(){var $={essential:!0,analytics:!1,marketing:!1,timestamp:new Date().toLocaleString()};p.checked=!1,m.checked=!1,I($),U(),z($)}),l.addEventListener("click",function(){var $=C();M($),F()}),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",G):G(),window.firebaseReady?window.firebaseReady.then(Z).catch(function(){}):window.addEventListener("firebaseReady",Z)})();
